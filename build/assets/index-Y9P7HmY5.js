const __vite__fileDeps=["assets/InlineImageComponent-DCxnVYD1.js","assets/vendor-i5cOWjS_.js","assets/LexicalNestedComposer-D349Ox9o.js","assets/TableComponent-BuO-MidS.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
var ki=Object.defineProperty;var Si=(e,n,s)=>n in e?ki(e,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[n]=s;var fe=(e,n,s)=>(Si(e,typeof n!="symbol"?n+"":n,s),s);import{R as I,r as h,j as t,g as z,i as Ve,L as ne,a as te,b as g,c as he,d as ke,e as xe,f as ge,h as de,k as Le,l as Un,m as cr,n as Ue,o as pt,p as L,q as Ti,s as ys,t as Tt,u as An,v as On,w as Ei,x as $i,y as dr,z as Mi,A as Ii,B as Ai,C as Oi,D as wn,E as ws,F as vn,G as Ri,H as Li,I as Di,J as Pi,K as Fi,M as zi,N as Bi,O as Wi,P as Hi,Q as Ui,S as qi,T as Vi,U as le,V as Mt,W as Ie,X as Ae,Y as qn,Z as Yi,_ as Se,$ as Gi,a0 as gt,a1 as Ji,a2 as ur,a3 as Ee,a4 as be,a5 as ye,a6 as Ki,a7 as Xi,a8 as Zi,a9 as pe,aa as pr,ab as Vn,ac as Be,ad as Qi,ae as Yt,af as eo,ag as to,ah as no,ai as so,aj as ro}from"./vendor-i5cOWjS_.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function s(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=s(i);fetch(i.href,a)}})();const io="test";let oo="https://graph.availabs.org",ao="transportny.org";function lo(){return{landing:{wrapper:"p-4 border-2 border-blue-300"},table:{table:"min-w-full divide-y divide-gray-300",thead:"",th:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900",tbody:"divide-y divide-gray-200 ",td:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},textarea:{viewWrapper:"overflow-hidden p-2 bg-gray-100 border-b-2"},card:{wrapper:"p-4",row:"flex py-1",rowLabel:"px-4 w-28 text-sm",rowContent:"flex-1"}}}const Yn=lo(),co=I.createContext(Yn),we=()=>h.useContext(co),uo=({value:e="",onChange:n,className:s,placeholder:r})=>{var a;const i=we();return t.jsx("input",{className:s||((a=i==null?void 0:i.text)==null?void 0:a.input)||"w-full border p-2",value:e,placeholder:r,onChange:o=>n(o.target.value)})},po=({value:e,className:n})=>{var r;if(!e)return!1;const s=we();return t.jsx("div",{className:n||((r=s==null?void 0:s.text)==null?void 0:r.view),children:e})},jn={EditComp:uo,ViewComp:po},mo=({value:e,onChange:n,className:s,placeholder:r})=>{var a;const i=we();return t.jsx("textarea",{className:s||((a=i==null?void 0:i.textarea)==null?void 0:a.input)||"w-full border p-2",value:e,placeholder:r,onChange:o=>n(o.target.value)})},ho=({value:e})=>{const n=we();return e?t.jsx("div",{className:z(n,"textarea.viewWrapper",""),children:e}):!1},fo={EditComp:mo,ViewComp:ho},xo=({value:e,onChange:n})=>t.jsxs("select",{value:e,onChange:s=>n(s.target.value),children:[t.jsx("option",{value:!0,children:"True"}),t.jsx("option",{value:!1,children:"False"})]}),go=({value:e})=>e?t.jsx("div",{children:e}):!1,bo={EditComp:xo,ViewComp:go};function yo({value:e,onChange:n,attributes:s={}}){console.log("dms-format",e,s);const r=(i,a)=>{Ve(e,{...e,[i]:a})||n({...e,[i]:a})};return t.jsx("div",{children:Object.keys(s).map((i,a)=>{let o=s[i].EditComp;return t.jsxs("div",{children:[t.jsx("div",{children:i}),t.jsx("div",{children:t.jsx(o,{value:e==null?void 0:e[i],onChange:l=>r(i,l)},`${i}-${a}`)})]},`${i}-${a}`)})})}const wo=({value:e={},attributes:n})=>t.jsx("div",{children:Object.keys(n).map((s,r)=>{let i=n[s].ViewComp;return t.jsxs("div",{children:[t.jsx("div",{children:s}),t.jsx("div",{children:t.jsx(i,{value:e[s]},`${s}-${r}`)})]},`${s}-${r}`)})}),vo={EditComp:yo,ViewComp:wo},jo=({Component:e,value:n,onChange:s,attr:r})=>{(!n||!n.map)&&(n=[]);const[i,a]=I.useState(""),o=()=>{s([...n,i]),a("")};return t.jsxs(t.Fragment,{children:[n.map((l,c)=>h.createElement(e.ViewComp,{value:l,...r,key:c})),t.jsx(e.EditComp,{value:i,onChange:a,...r}),t.jsx("button",{onClick:o,children:"Add"})]})},No=({Component:e,value:n,attr:s})=>!n||!n.map?"":n.map((r,i)=>h.createElement(e.ViewComp,{...s,key:i,value:r})),mr={EditComp:jo,ViewComp:No},Ot=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Co=h.createContext({}),_o=()=>h.useContext(Co),ko=h.createContext([e=>()=>e,e=>e]),hr=()=>{const[e,n]=h.useContext(ko),[s,r]=h.useState(null);return h.useEffect(()=>e(i=>{r(i)}),[e]),[s,n]},Xt=new WeakMap;function vs(e){const n=e.changedTouches[0];return n===void 0?null:[n.clientX,n.clientY]}function So(e,n){let s=Xt.get(e);if(s===void 0){const r=new Set,i=o=>{s!==void 0&&(s.start=vs(o))},a=o=>{if(s===void 0)return;const l=s.start;if(l===null)return;const c=vs(o);for(const d of r)c!==null&&d([c[0]-l[0],c[1]-l[1]],o)};e.addEventListener("touchstart",i),e.addEventListener("touchend",a),s={handleTouchend:a,handleTouchstart:i,listeners:r,start:null},Xt.set(e,s)}return s.listeners.add(n),()=>To(e,n)}function To(e,n){const s=Xt.get(e);if(s===void 0)return;const r=s.listeners;r.delete(n),r.size===0&&(Xt.delete(e),e.removeEventListener("touchstart",s.handleTouchstart),e.removeEventListener("touchend",s.handleTouchend))}function Eo(e,n){return So(e,(s,r)=>{const[i,a]=s;i>0&&i>Math.abs(a)&&n(i,r)})}const Rn=Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,5);function js(e){if(!g.$isRangeSelection(e)||!e.isCollapsed())return[!1,""];const n=e.getNodes()[0],s=e.anchor;if(!g.$isTextNode(n)||!n.isSimpleText()||!he.$isAtNodeEnd(s))return[!1,""];const r=[],i=n.getTextContent();let a=n.getTextContentSize(),o;for(;a--&&a>=0&&(o=i[a])!==" ";)r.push(o);return r.length===0?[!1,""]:[!0,r.reverse().join("")]}function $o(){return h.useCallback(e=>{const n=new Io;console.time("query");const s=n.query(e);return console.timeEnd("query"),s},[])}function Mo(){const[e]=ne.useLexicalComposerContext(),[,n]=hr(),s=$o();return h.useEffect(()=>{let r=null,i=null,a=null,o=null;function l(){const b=r!==null?g.$getNodeByKey(r):null;b!==null&&b.isAttached()&&(b.remove(),r=null),o!==null&&(o.dismiss(),o=null),i=null,a=null,n(null)}function c(b,x){o!==b||x===null||e.update(()=>{const w=g.$getSelection(),[k,T]=js(w);if(!k||T!==i||!g.$isRangeSelection(w))return;const _=w.clone(),N=fr(Rn);r=N.getKey(),w.insertNodes([N]),g.$setSelection(_),a=x,n(x)},{tag:"history-merge"})}function d(b){const x=b.getKey();b.__uuid===Rn&&x!==r&&l()}function u(){e.update(()=>{const b=g.$getSelection(),[x,w]=js(b);if(!x){l();return}w!==i&&(l(),o=s(w),o.promise.then(k=>{o!==null&&c(o,k)}).catch(k=>{console.error(k)}),i=w)})}function p(){if(a===null||r===null)return!1;const b=g.$getNodeByKey(r);if(b===null)return!1;const x=g.$createTextNode(a);return b.replace(x),x.selectNext(),l(),!0}function m(b){return p()?(b.preventDefault(),!0):!1}function f(b,x){e.update(()=>{p()&&x.preventDefault()})}function y(){e.update(()=>{l()})}const v=e.getRootElement();return te.mergeRegister(e.registerNodeTransform(bt,d),e.registerUpdateListener(u),e.registerCommand(g.KEY_TAB_COMMAND,m,g.COMMAND_PRIORITY_LOW),e.registerCommand(g.KEY_ARROW_RIGHT_COMMAND,m,g.COMMAND_PRIORITY_LOW),...v!==null?[Eo(v,f)]:[],y)},[e,s,n]),null}class Io{constructor(){this.DATABASE=Ao,this.LATENCY=200,this.query=n=>{let s=!1;const r=()=>{s=!0},i=new Promise((a,o)=>{setTimeout(()=>{if(s)return o("Dismissed");const l=n.length;if(n===""||l<4)return a(null);const c=n.charCodeAt(0),d=c>=65&&c<=90,u=d?String.fromCharCode(c+32)+n.substring(1):n,p=this.DATABASE.find(y=>y.startsWith(u)??null);if(p===void 0)return a(null);const f=(d?String.fromCharCode(p.charCodeAt(0)-32)+p.substring(1):p).substring(l);return a(f===""?null:f)},this.LATENCY)});return{dismiss:r,promise:i}}}}const Ao=["information","available","copyright","university","management","international","development","education","community","technology","following","resources","including","directory","government","department","description","insurance","different","categories","conditions","accessories","september","questions","application","financial","equipment","performance","experience","important","activities","additional","something","professional","committee","washington","california","reference","companies","computers","president","australia","discussion","entertainment","agreement","marketing","association","collection","solutions","electronics","technical","microsoft","conference","environment","statement","downloads","applications","requirements","individual","subscribe","everything","production","commercial","advertising","treatment","newsletter","knowledge","currently","construction","registered","protection","engineering","published","corporate","customers","materials","countries","standards","political","advertise","environmental","availability","employment","commission","administration","institute","sponsored","electronic","condition","effective","organization","selection","corporation","executive","necessary","according","particular","facilities","opportunities","appropriate","statistics","investment","christmas","registration","furniture","wednesday","structure","distribution","industrial","potential","responsible","communications","associated","foundation","documents","communication","independent","operating","developed","telephone","population","navigation","operations","therefore","christian","understand","publications","worldwide","connection","publisher","introduction","properties","accommodation","excellent","opportunity","assessment","especially","interface","operation","restaurants","beautiful","locations","significant","technologies","manufacturer","providing","authority","considered","programme","enterprise","educational","employees","alternative","processing","responsibility","resolution","publication","relations","photography","components","assistance","completed","organizations","otherwise","transportation","disclaimer","membership","recommended","background","character","maintenance","functions","trademarks","phentermine","submitted","television","interested","throughout","established","programming","regarding","instructions","increased","understanding","beginning","associates","instruments","businesses","specified","restaurant","procedures","relationship","traditional","sometimes","themselves","transport","interesting","evaluation","implementation","galleries","references","presented","literature","respective","definition","secretary","networking","australian","magazines","francisco","individuals","guidelines","installation","described","attention","difference","regulations","certificate","directions","documentation","automotive","successful","communities","situation","publishing","emergency","developing","determine","temperature","announcements","historical","ringtones","difficult","scientific","satellite","particularly","functional","monitoring","architecture","recommend","dictionary","accounting","manufacturing","professor","generally","continued","techniques","permission","generation","component","guarantee","processes","interests","paperback","classifieds","supported","competition","providers","characters","thousands","apartments","generated","administrative","practices","reporting","essential","affiliate","immediately","designated","integrated","configuration","comprehensive","universal","presentation","languages","compliance","improvement","pennsylvania","challenge","acceptance","strategies","affiliates","multimedia","certified","computing","interactive","procedure","leadership","religious","breakfast","developer","approximately","recommendations","comparison","automatically","minnesota","adventure","institutions","assistant","advertisement","headlines","yesterday","determined","wholesale","extension","statements","completely","electrical","applicable","manufacturers","classical","dedicated","direction","basketball","wisconsin","personnel","identified","professionals","advantage","newsletters","estimated","anonymous","miscellaneous","integration","interview","framework","installed","massachusetts","associate","frequently","discussions","laboratory","destination","intelligence","specifications","tripadvisor","residential","decisions","industries","partnership","editorial","expression","provisions","principles","suggestions","replacement","strategic","economics","compatible","apartment","netherlands","consulting","recreation","participants","favorites","translation","estimates","protected","philadelphia","officials","contained","legislation","parameters","relationships","tennessee","representative","frequency","introduced","departments","residents","displayed","performed","administrator","addresses","permanent","agriculture","constitutes","portfolio","practical","delivered","collectibles","infrastructure","exclusive","originally","utilities","philosophy","regulation","reduction","nutrition","recording","secondary","wonderful","announced","prevention","mentioned","automatic","healthcare","maintained","increasing","connected","directors","participation","containing","combination","amendment","guaranteed","libraries","distributed","singapore","enterprises","convention","principal","certification","previously","buildings","household","batteries","positions","subscription","contemporary","panasonic","permalink","signature","provision","certainly","newspaper","liability","trademark","trackback","americans","promotion","conversion","reasonable","broadband","influence","importance","webmaster","prescription","specifically","represent","conservation","louisiana","javascript","marketplace","evolution","certificates","objectives","suggested","concerned","structures","encyclopedia","continuing","interracial","competitive","suppliers","preparation","receiving","accordance","discussed","elizabeth","reservations","playstation","instruction","annotation","differences","establish","expressed","paragraph","mathematics","compensation","conducted","percentage","mississippi","requested","connecticut","personals","immediate","agricultural","supporting","collections","participate","specialist","experienced","investigation","institution","searching","proceedings","transmission","characteristics","experiences","extremely","verzeichnis","contracts","concerning","developers","equivalent","chemistry","neighborhood","variables","continues","curriculum","psychology","responses","circumstances","identification","appliances","elementary","unlimited","printable","enforcement","hardcover","celebrity","chocolate","hampshire","bluetooth","controlled","requirement","authorities","representatives","pregnancy","biography","attractions","transactions","authorized","retirement","financing","efficiency","efficient","commitment","specialty","interviews","qualified","discovery","classified","confidence","lifestyle","consistent","clearance","connections","inventory","converter","organisation","objective","indicated","securities","volunteer","democratic","switzerland","parameter","processor","dimensions","contribute","challenges","recognition","submission","encourage","regulatory","inspection","consumers","territory","transaction","manchester","contributions","continuous","resulting","cambridge","initiative","execution","disability","increases","contractor","examination","indicates","committed","extensive","affordable","candidate","databases","outstanding","perspective","messenger","tournament","consideration","discounts","catalogue","publishers","caribbean","reservation","remaining","depending","expansion","purchased","performing","collected","absolutely","featuring","implement","scheduled","calculator","significantly","temporary","sufficient","awareness","vancouver","contribution","measurement","constitution","packaging","consultation","northwest","classroom","democracy","wallpaper","merchandise","resistance","baltimore","candidates","charlotte","biological","transition","preferences","instrument","classification","physician","hollywood","wikipedia","spiritual","photographs","relatively","satisfaction","represents","pittsburgh","preferred","intellectual","comfortable","interaction","listening","effectively","experimental","revolution","consolidation","landscape","dependent","mechanical","consultants","applicant","cooperation","acquisition","implemented","directories","recognized","notification","licensing","textbooks","diversity","cleveland","investments","accessibility","sensitive","templates","completion","universities","technique","contractors","subscriptions","calculate","alexander","broadcast","converted","anniversary","improvements","specification","accessible","accessory","typically","representation","arrangements","conferences","uniprotkb","consumption","birmingham","afternoon","consultant","controller","ownership","committees","legislative","researchers","unsubscribe","molecular","residence","attorneys","operators","sustainable","philippines","statistical","innovation","employers","definitions","elections","stainless","newspapers","hospitals","exception","successfully","indonesia","primarily","capabilities","recommendation","recruitment","organized","improving","expensive","organisations","explained","programmes","expertise","mechanism","jewellery","eventually","agreements","considering","innovative","conclusion","disorders","collaboration","detection","formation","engineers","proposals","moderator","tutorials","settlement","collectables","fantastic","governments","purchasing","appointed","operational","corresponding","descriptions","determination","animation","productions","telecommunications","instructor","approaches","highlights","designers","melbourne","scientists","blackjack","argentina","possibility","commissioner","dangerous","reliability","unfortunately","respectively","volunteers","attachment","appointment","workshops","hurricane","represented","mortgages","responsibilities","carefully","productivity","investors","underground","diagnosis","principle","vacations","calculated","appearance","incorporated","notebooks","algorithm","valentine","involving","investing","christopher","admission","terrorism","parliament","situations","allocated","corrections","structural","municipal","describes","disabilities","substance","prohibited","addressed","simulation","initiatives","concentration","interpretation","bankruptcy","optimization","substances","discovered","restrictions","participating","exhibition","composition","nationwide","definitely","existence","commentary","limousines","developments","immigration","destinations","necessarily","attribute","apparently","surrounding","mountains","popularity","postposted","coordinator","obviously","fundamental","substantial","progressive","championship","sacramento","impossible","depression","testimonials","memorabilia","cartridge","explanation","cincinnati","subsection","electricity","permitted","workplace","confirmed","wallpapers","infection","eligibility","involvement","placement","observations","vbulletin","subsequent","motorcycle","disclosure","establishment","presentations","undergraduate","occupation","donations","associations","citysearch","radiation","seriously","elsewhere","pollution","conservative","guestbook","effectiveness","demonstrate","atmosphere","experiment","purchases","federation","assignment","chemicals","everybody","nashville","counseling","acceptable","satisfied","measurements","milwaukee","medication","warehouse","shareware","violation","configure","stability","southwest","institutional","expectations","independence","metabolism","personally","excellence","somewhere","attributes","recognize","screening","thumbnail","forgotten","intelligent","edinburgh","obligation","regardless","restricted","republican","merchants","attendance","arguments","amsterdam","adventures","announcement","appreciate","regularly","mechanisms","customize","tradition","indicators","emissions","physicians","complaint","experiments","afghanistan","scholarship","governance","supplements","camcorder","implementing","ourselves","conversation","capability","producing","precision","contributed","reproduction","ingredients","franchise","complaints","promotions","rehabilitation","maintaining","environments","reception","correctly","consequences","geography","appearing","integrity","discrimination","processed","implications","functionality","intermediate","emotional","platforms","overnight","geographic","preliminary","districts","introduce","promotional","chevrolet","specialists","generator","suspension","correction","authentication","communicate","supplement","showtimes","promoting","machinery","bandwidth","probability","dimension","schedules","admissions","quarterly","illustrated","continental","alternate","achievement","limitations","automated","passenger","convenient","orientation","childhood","flexibility","jurisdiction","displaying","encouraged","cartridges","declaration","automation","advantages","preparing","recipient","extensions","athletics","southeast","alternatives","determining","personalized","conditioning","partnerships","destruction","increasingly","migration","basically","conventional","applicants","occupational","adjustment","treatments","camcorders","difficulty","collective","coalition","enrollment","producers","collector","interfaces","advertisers","representing","observation","restoration","convenience","returning","opposition","container","defendant","confirmation","supervisor","peripherals","bestsellers","departure","minneapolis","interactions","intervention","attraction","modification","customized","understood","assurance","happening","amendments","metropolitan","compilation","verification","attractive","recordings","jefferson","gardening","obligations","orchestra","polyphonic","outsourcing","adjustable","allocation","discipline","demonstrated","identifying","alphabetical","dispatched","installing","voluntary","photographer","messaging","constructed","additions","requiring","engagement","refinance","calendars","arrangement","conclusions","bibliography","compatibility","furthermore","cooperative","measuring","jacksonville","headquarters","transfers","transformation","attachments","administrators","personality","facilitate","subscriber","priorities","bookstore","parenting","incredible","commonwealth","pharmaceutical","manhattan","workforce","organizational","portuguese","everywhere","discharge","halloween","hazardous","methodology","housewares","reputation","resistant","democrats","recycling","qualifications","slideshow","variation","transferred","photograph","distributor","underlying","wrestling","photoshop","gathering","projection","mathematical","specialized","diagnostic","indianapolis","corporations","criticism","automobile","confidential","statutory","accommodations","northeast","downloaded","paintings","injection","yorkshire","populations","protective","initially","indicator","eliminate","sunglasses","preference","threshold","venezuela","exploration","sequences","astronomy","translate","announces","compression","establishing","constitutional","perfectly","instantly","litigation","submissions","broadcasting","horizontal","terrorist","informational","ecommerce","suffering","prospective","ultimately","artificial","spectacular","coordination","connector","affiliated","activation","naturally","subscribers","mitsubishi","underwear","potentially","constraints","inclusive","dimensional","considerable","selecting","processors","pantyhose","difficulties","complexity","constantly","barcelona","presidential","documentary","territories","palestinian","legislature","hospitality","procurement","theoretical","exercises","surveillance","protocols","highlight","substitute","inclusion","hopefully","brilliant","evaluated","assignments","termination","households","authentic","montgomery","architectural","louisville","macintosh","movements","amenities","virtually","authorization","projector","comparative","psychological","surprised","genealogy","expenditure","liverpool","connectivity","algorithms","similarly","collaborative","excluding","commander","suggestion","spotlight","investigate","connecting","logistics","proportion","significance","symposium","essentials","protecting","transmitted","screenshots","intensive","switching","correspondence","supervision","expenditures","separation","testimony","celebrities","mandatory","boundaries","syndication","celebration","filtering","luxembourg","offensive","deployment","colleagues","separated","directive","governing","retailers","occasionally","attending","recruiting","instructional","traveling","permissions","biotechnology","prescribed","catherine","reproduced","calculation","consolidated","occasions","equations","exceptional","respondents","considerations","queensland","musicians","composite","unavailable","essentially","designing","assessments","brunswick","sensitivity","preservation","streaming","intensity","technological","syndicate","antivirus","addressing","discounted","bangladesh","constitute","concluded","desperate","demonstration","governmental","manufactured","graduation","variations","addiction","springfield","synthesis","undefined","unemployment","enhancement","newcastle","performances","societies","brazilian","identical","petroleum","norwegian","retention","exchanges","soundtrack","wondering","profession","separately","physiology","collecting","participant","scholarships","recreational","dominican","friendship","expanding","provincial","investigations","medications","rochester","advertiser","encryption","downloadable","sophisticated","possession","laboratories","vegetables","thumbnails","stockings","respondent","destroyed","manufacture","wordpress","vulnerability","accountability","celebrate","accredited","appliance","compressed","scheduling","perspectives","mortality","christians","therapeutic","impressive","accordingly","architect","challenging","microwave","accidents","relocation","contributors","violations","temperatures","competitions","discretion","cosmetics","repository","concentrations","christianity","negotiations","realistic","generating","christina","congressional","photographic","modifications","millennium","achieving","fisheries","exceptions","reactions","macromedia","companion","divisions","additionally","fellowship","victorian","copyrights","lithuania","mastercard","chronicles","obtaining","distribute","decorative","enlargement","campaigns","conjunction","instances","indigenous","validation","corruption","incentives","cholesterol","differential","scientist","starsmerchant","arthritis","nevertheless","practitioners","transcript","inflation","compounds","contracting","structured","reasonably","graduates","recommends","controlling","distributors","arlington","particles","extraordinary","indicating","coordinate","exclusively","limitation","widescreen","illustration","construct","inquiries","inspiration","affecting","downloading","aggregate","forecasts","complicated","shopzilla","decorating","expressions","shakespeare","connectors","conflicts","travelers","offerings","incorrect","furnishings","guatemala","perception","renaissance","pathology","ordinance","photographers","infections","configured","festivals","possibilities","contributing","analytical","circulation","assumption","jerusalem","transexuales","invention","technician","executives","enquiries","cognitive","exploring","registrar","supporters","withdrawal","predicted","saskatchewan","cancellation","ministers","veterinary","prostores","relevance","incentive","butterfly","mechanics","numerical","reflection","accompanied","invitation","princeton","spirituality","meanwhile","proprietary","childrens","thumbzilla","porcelain","pichunter","translated","columnists","consensus","delivering","journalism","intention","undertaken","statewide","semiconductor","illustrations","happiness","substantially","identifier","calculations","conducting","accomplished","calculators","impression","correlation","fragrance","neighbors","transparent","charleston","champions","selections","projectors","inappropriate","comparing","vocational","pharmacies","introducing","appreciated","albuquerque","distinguished","projected","assumptions","shareholders","developmental","regulated","anticipated","completing","comparable","confusion","copyrighted","warranties","documented","paperbacks","keyboards","vulnerable","reflected","respiratory","notifications","transexual","mainstream","evaluating","subcommittee","maternity","journalists","foundations","volleyball","liabilities","decreased","tolerance","creativity","describing","lightning","quotations","inspector","bookmarks","behavioral","riverside","bathrooms","abilities","initiated","nonprofit","lancaster","suspended","containers","attitudes","simultaneously","integrate","sociology","screenshot","exhibitions","confident","retrieved","officially","consortium","recipients","delicious","traditions","periodically","hungarian","referring","transform","educators","vegetable","humanities","independently","alignment","henderson","britannica","competitors","visibility","consciousness","encounter","resolutions","accessing","attempted","witnesses","administered","strengthen","frederick","aggressive","advertisements","sublimedirectory","disturbed","determines","sculpture","motivation","pharmacology","passengers","quantities","petersburg","consistently","powerpoint","obituaries","punishment","appreciation","subsequently","providence","restriction","incorporate","backgrounds","treasurer","lightweight","transcription","complications","scripting","remembered","synthetic","testament","specifics","partially","wilderness","generations","tournaments","sponsorship","headphones","proceeding","volkswagen","uncertainty","breakdown","reconstruction","subsidiary","strengths","encouraging","furnished","terrorists","comparisons","beneficial","distributions","viewpicture","threatened","republicans","discusses","responded","abstracts","prediction","pharmaceuticals","thesaurus","individually","battlefield","literally","ecological","appraisal","consisting","submitting","citations","geographical","mozambique","disclaimers","championships","sheffield","finishing","wellington","prospects","bulgarian","aboriginal","remarkable","preventing","productive","boulevard","compliant","penalties","imagination","refurbished","activated","conferencing","armstrong","politicians","trackbacks","accommodate","christine","accepting","precipitation","isolation","sustained","approximate","programmer","greetings","inherited","incomplete","chronicle","legitimate","biographies","investigator","plaintiff","prisoners","mediterranean","nightlife","architects","entrepreneur","freelance","excessive","screensaver","valuation","unexpected","cigarette","characteristic","metallica","consequently","appointments","narrative","academics","quantitative","screensavers","subdivision","distinction","livestock","exemption","sustainability","formatting","nutritional","nicaragua","affiliation","relatives","satisfactory","revolutionary","bracelets","telephony","breathing","thickness","adjustments","graphical","discussing","aerospace","meaningful","maintains","shortcuts","voyeurweb","extending","specifies","accreditation","blackberry","meditation","microphone","macedonia","combining","instrumental","organizing","moderators","kazakhstan","standings","partition","invisible","translations","commodity","kilometers","thanksgiving","guarantees","indication","congratulations","cigarettes","controllers","consultancy","conventions","coordinates","responding","physically","stakeholders","hydrocodone","consecutive","attempting","representations","competing","peninsula","accurately","considers","ministries","vacancies","parliamentary","acknowledge","thoroughly","nottingham","identifies","questionnaire","qualification","modelling","miniature","interstate","consequence","systematic","perceived","madagascar","presenting","troubleshooting","uzbekistan","centuries","magnitude","richardson","fragrances","vocabulary","earthquake","fundraising","geological","assessing","introduces","webmasters","computational","acdbentity","participated","handhelds","answering","impressed","conspiracy","organizer","combinations","preceding","cumulative","amplifier","arbitrary","prominent","lexington","contacted","recorders","occasional","innovations","postcards","reviewing","explicitly","transsexual","citizenship","informative","girlfriend","bloomberg","hierarchy","influenced","abandoned","complement","mauritius","checklist","requesting","lauderdale","scenarios","extraction","elevation","utilization","beverages","calibration","efficiently","entertaining","prerequisite","hypothesis","medicines","regression","enhancements","renewable","intersection","passwords","consistency","collectors","azerbaijan","astrology","occurring","supplemental","travelling","induction","precisely","spreading","provinces","widespread","incidence","incidents","enhancing","interference","palestine","listprice","atmospheric","knowledgestorm","referenced","publicity","proposition","allowance","designation","duplicate","criterion","civilization","vietnamese","tremendous","corrected","encountered","internationally","surrounded","creatures","commented","accomplish","vegetarian","newfoundland","investigated","ambassador","stephanie","contacting","vegetation","findarticles","specially","infectious","continuity","phenomenon","conscious","referrals","differently","integrating","revisions","reasoning","charitable","annotated","convinced","burlington","replacing","researcher","watershed","occupations","acknowledged","equilibrium","characterized","privilege","qualifying","estimation","pediatric","techrepublic","institutes","brochures","traveller","appropriations","suspected","benchmark","beginners","instructors","highlighted","stationery","unauthorized","competent","contributor","demonstrates","gradually","desirable","journalist","afterwards","religions","explosion","signatures","disciplines","daughters","conversations","simplified","motherboard","bibliographic","champagne","deviation","superintendent","housewives","influences","inspections","irrigation","hydraulic","robertson","penetration","conviction","omissions","retrieval","qualities","prototype","importantly","apparatus","explaining","nomination","empirical","dependence","sexuality","polyester","commitments","suggesting","remainder","privileges","televisions","specializing","commodities","motorcycles","concentrate","reproductive","molecules","refrigerator","intervals","sentences","exclusion","workstation","holocaust","receivers","disposition","navigator","investigators","marijuana","cathedral","fairfield","fascinating","landscapes","lafayette","computation","cardiovascular","salvation","predictions","accompanying","selective","arbitration","configuring","editorials","sacrifice","removable","convergence","gibraltar","anthropology","malpractice","reporters","necessity","rendering","hepatitis","nationally","waterproof","specialties","humanitarian","invitations","functioning","economies","alexandria","bacterial","undertake","continuously","achievements","convertible","secretariat","paragraphs","adolescent","nominations","cancelled","introductory","reservoir","occurrence","worcester","demographic","disciplinary","respected","portraits","interpreted","evaluations","elimination","hypothetical","immigrants","complimentary","helicopter","performer","commissions","powerseller","graduated","surprising","unnecessary","dramatically","yugoslavia","characterization","likelihood","fundamentals","contamination","endangered","compromise","expiration","namespace","peripheral","negotiation","opponents","nominated","confidentiality","electoral","changelog","alternatively","greensboro","controversial","recovered","upgrading","frontpage","demanding","defensive","forbidden","programmers","monitored","installations","deutschland","practitioner","motivated","smithsonian","examining","revelation","delegation","dictionaries","greenhouse","transparency","currencies","survivors","positioning","descending","temporarily","frequencies","reflections","municipality","detective","experiencing","fireplace","endorsement","psychiatry","persistent","summaries","looksmart","magnificent","colleague","adaptation","paintball","enclosure","supervisors","westminster","distances","absorption","treasures","transcripts","disappointed","continually","communist","collectible","entrepreneurs","creations","acquisitions","biodiversity","excitement","presently","mysterious","librarian","subsidiaries","stockholm","indonesian","therapist","promising","relaxation","thereafter","commissioners","forwarding","nightmare","reductions","southampton","organisms","telescope","portsmouth","advancement","harassment","generators","generates","replication","inexpensive","receptors","interventions","huntington","internship","aluminium","snowboard","beastality","evanescence","coordinated","shipments","antarctica","chancellor","controversy","legendary","beautifully","antibodies","examinations","immunology","departmental","terminology","gentleman","reproduce","convicted","roommates","threatening","spokesman","activists","frankfurt","encourages","assembled","restructuring","terminals","simulations","sufficiently","conditional","crossword","conceptual","liechtenstein","translator","automobiles","continent","longitude","challenged","telecharger","insertion","instrumentation","constraint","groundwater","strengthening","insulation","infringement","subjective","swaziland","varieties","mediawiki","configurations"];class bt extends g.DecoratorNode{static clone(n){return new bt(n.__key)}static getType(){return"autocomplete"}static importJSON(n){return fr(n.uuid)}exportJSON(){return{...super.exportJSON(),type:"autocomplete",uuid:this.__uuid,version:1}}constructor(n,s){super(s),this.__uuid=n}updateDOM(){return!1}createDOM(){return document.createElement("span")}decorate(){return this.__uuid!==Rn?null:t.jsx(Oo,{})}}function fr(e){return new bt(e)}function Oo(){const[e]=hr(),n=window.navigator.userAgentData,s=n!==void 0?n.mobile:window.innerWidth<=800&&window.innerHeight<=600;return t.jsxs("span",{style:{color:"#ccc"},spellCheck:"false",children:[e," ",s?"(SWIPE ⮕)":"(TAB)"]})}const Ro="modulepreload",Lo=function(e){return"/"+e},Ns={},xr=function(n,s,r){let i=Promise.resolve();if(s&&s.length>0){const a=document.getElementsByTagName("link"),o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.all(s.map(c=>{if(c=Lo(c),c in Ns)return;Ns[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(!!r)for(let f=a.length-1;f>=0;f--){const y=a[f];if(y.href===c&&(!d||y.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${u}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":Ro,d||(m.as="script",m.crossOrigin=""),m.href=c,l&&m.setAttribute("nonce",l),document.head.appendChild(m),d)return new Promise((f,y)=>{m.addEventListener("load",f),m.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})}))}return i.then(()=>n()).catch(a=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a})},Do=h.lazy(()=>xr(()=>import("./InlineImageComponent-DCxnVYD1.js"),__vite__mapDeps([0,1,2])));function Po(e){if(e instanceof HTMLImageElement){const{alt:n,src:s,width:r,height:i}=e;return{node:dn({altText:n,height:i,src:s,width:r})}}return null}class Ye extends g.DecoratorNode{static getType(){return"image"}static clone(n){return new Ye(n.__src,n.__altText,n.__position,n.__width,n.__height,n.__showCaption,n.__caption,n.__key)}static importJSON(n){const{altText:s,height:r,width:i,caption:a,src:o,showCaption:l,position:c="full"}=n,d=dn({altText:s,height:r,position:c,showCaption:l,src:o,width:i}),u=d.__caption,p=u.parseEditorState(a.editorState);return p.isEmpty()||u.setEditorState(p),d}static importDOM(){return{img:n=>({conversion:Po,priority:0})}}constructor(n,s,r,i,a,o,l,c){super(c),this.__src=n,this.__altText=s,this.__width=i||"inherit",this.__height=a||"inherit",this.__showCaption=o||!1,this.__caption=l||g.createEditor(),this.__position=r}exportDOM(){const n=document.createElement("img");return n.setAttribute("src",this.__src),n.setAttribute("alt",this.__altText),n.setAttribute("width",this.__width.toString()),n.setAttribute("height",this.__height.toString()),{element:n}}exportJSON(){return{altText:this.getAltText(),caption:this.__caption.toJSON(),height:this.__height==="inherit"?0:this.__height,position:this.__position,showCaption:this.__showCaption,src:this.getSrc(),type:"image",version:1,width:this.__width==="inherit"?0:this.__width}}getSrc(){return this.__src}getAltText(){return this.__altText}setAltText(n){const s=this.getWritable();s.__altText=n}setWidthAndHeight(n,s){const r=this.getWritable();r.__width=n,r.__height=s}getShowCaption(){return this.__showCaption}setShowCaption(n){const s=this.getWritable();s.__showCaption=n}getPosition(){return this.__position}setPosition(n){const s=this.getWritable();s.__position=n}update(n){console.log("updating payload",n);const s=this.getWritable(),{altText:r,showCaption:i,position:a}=n;r!==void 0&&(s.__altText=r),i!==void 0&&(s.__showCaption=i),a!==void 0&&(s.__position=a)}createDOM(n){const s=document.createElement("span"),r=`${n.theme.inlineImage} position-${this.__position}`;return r!==void 0&&(s.className=r),s}updateDOM(n,s,r){const i=this.__position;if(i!==n.__position){const a=`${r.theme.inlineImage} position-${i}`;a!==void 0&&(s.className=a)}return!1}decorate(){return t.jsx(h.Suspense,{fallback:null,children:t.jsx(Do,{src:this.__src,altText:this.__altText,width:this.__width,height:this.__height,nodeKey:this.getKey(),showCaption:this.__showCaption,caption:this.__caption,position:this.__position})})}}function dn({altText:e,position:n,height:s,src:r,width:i,showCaption:a,caption:o,key:l}){return g.$applyNodeReplacement(new Ye(r,e,n,i,s,a,o,l))}function gr(e){return e instanceof Ye}class et extends g.TextNode{static getType(){return"keyword"}static clone(n){return new et(n.__text,n.__key)}static importJSON(n){const s=br(n.text);return s.setFormat(n.format),s.setDetail(n.detail),s.setMode(n.mode),s.setStyle(n.style),s}exportJSON(){return{...super.exportJSON(),type:"keyword",version:1}}createDOM(n){const s=super.createDOM(n);return s.style.cursor="default",s.className="keyword",s}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}isTextEntity(){return!0}}function br(e){return new et(e)}const Fo=[ke.HeadingNode,xe.ListNode,xe.ListItemNode,ge.CodeNode,ge.CodeHighlightNode,de.AutoLinkNode,de.LinkNode,Ye,bt,et];function zo({onClose:e,children:n,title:s,closeOnClickOutside:r}){const i=h.useRef(null);return h.useEffect(()=>{i.current!==null&&i.current.focus()},[]),h.useEffect(()=>{let a=null;const o=d=>{d.keyCode===27&&e()},l=d=>{const u=d.target;i.current!==null&&!i.current.contains(u)&&r&&e()},c=i.current;return c!==null&&(a=c.parentElement,a!==null&&a.addEventListener("click",l)),window.addEventListener("keydown",o),()=>{window.removeEventListener("keydown",o),a!==null&&(a==null||a.removeEventListener("click",l))}},[r,e]),t.jsx("div",{className:"flex justify-center items-center fixed flex-col top-0 bottom-0 left-0 right-0 bg-[rgba(40,_40,_40,_0.6)] flex-grow-[0px] flex-shrink-[1px]",role:"dialog",children:t.jsxs("div",{className:"p-[20px] min-h-[100px] min-w-[300px] flex flex-grow-[0px] bg-[#fff] flex-col relative [box-shadow:0_0_20px_0_#444] rounded-[10px]",tabIndex:-1,ref:i,children:[t.jsx("h2",{className:"text-[#444] m-0 pb-[10px] border-b-[1px_solid_#ccc]",children:s}),t.jsx("button",{className:"border-[0px] absolute right-[20px] rounded-[20px] justify-center items-center flex w-[30px] h-[30px] text-center cursor-pointer bg-[#eee] hover:bg-[#ddd]","aria-label":"Close modal",type:"button",onClick:e,children:"X"}),t.jsx("div",{className:"pt-[20px]",children:n})]})})}function Bo({onClose:e,children:n,title:s,closeOnClickOutside:r=!1}){return Le.createPortal(t.jsx(zo,{onClose:e,title:s,closeOnClickOutside:r,children:n}),document.body)}function Rt(){const[e,n]=h.useState(null),s=h.useCallback(()=>{n(null)},[]),r=h.useMemo(()=>{if(e===null)return null;const{title:a,content:o,closeOnClickOutside:l}=e;return t.jsx(Bo,{onClose:s,title:a,closeOnClickOutside:l,children:o})},[e,s]),i=h.useCallback((a,o,l=!1)=>{n({closeOnClickOutside:l,content:o(s),title:a})},[s]);return[r,i]}function Wo(...e){return e.filter(Boolean).join(" ")}function ht({"data-test-id":e,children:n,className:s,onClick:r,disabled:i,small:a,title:o}){return t.jsx("button",{disabled:i,className:Wo("pt-[10px] pb-[10px] pl-[15px] pr-[15px] border-[0px] bg-[#eee] rounded-[5px] cursor-pointer text-[14px] hover:bg-[#ddd]",i&&"cursor-not-allowed hover:bg-[#eee]",a&&"pt-[5px] pb-[5px] pl-[10px] pr-[10px] text-[13px]",s),onClick:r,title:o,"aria-label":o,...e&&{"data-test-id":e},children:n})}const Ho="https://platform.twitter.com/widgets.js";function Uo(e){const n=e.getAttribute("data-lexical-tweet-id");return n?{node:Gn(n)}:null}let Cs=!0;function qo({className:e,format:n,loadingComponent:s,nodeKey:r,onError:i,onLoad:a,tweetID:o}){const l=h.useRef(null),c=h.useRef(""),[d,u]=h.useState(!1),p=h.useCallback(async()=>{try{await window.twttr.widgets.createTweet(o,l.current),u(!1),Cs=!1,a&&a()}catch(m){i&&i(String(m))}},[i,a,o]);return h.useEffect(()=>{var m;if(o!==c.current){if(u(!0),Cs){const f=document.createElement("script");f.src=Ho,f.async=!0,(m=document.body)==null||m.appendChild(f),f.onload=p,i&&(f.onerror=i)}else p();c&&(c.current=o)}},[p,i,o]),t.jsxs(cr.BlockWithAlignableContents,{className:e,format:n,nodeKey:r,children:[d?s:null,t.jsx("div",{style:{display:"inline-block",width:"550px"},ref:l})]})}class Lt extends Un.DecoratorBlockNode{static getType(){return"tweet"}static clone(n){return new Lt(n.__id,n.__format,n.__key)}static importJSON(n){const s=Gn(n.id);return s.setFormat(n.format),s}exportJSON(){return{...super.exportJSON(),id:this.getId(),type:"tweet",version:1}}static importDOM(){return{div:n=>n.hasAttribute("data-lexical-tweet-id")?{conversion:Uo,priority:2}:null}}exportDOM(){const n=document.createElement("div");n.setAttribute("data-lexical-tweet-id",this.__id);const s=document.createTextNode(this.getTextContent());return n.append(s),{element:n}}constructor(n,s,r){super(s,r),this.__id=n}getId(){return this.__id}getTextContent(n,s){return`https://twitter.com/i/web/status/${this.__id}`}decorate(n,s){const r=s.theme.embedBlock||{},i={base:r.base||"",focus:r.focus||""};return t.jsx(qo,{className:i,format:this.__format,loadingComponent:"Loading...",nodeKey:this.getKey(),tweetID:this.__id})}isInline(){return!1}}function Gn(e){return new Lt(e)}function Vo(e){return e instanceof Lt}const Yo={dependencies:[pt.HorizontalRuleNode],export:e=>pt.$isHorizontalRuleNode(e)?"***":null,regExp:/^(---|\*\*\*|___)\s?$/,replace:(e,n,s,r)=>{const i=pt.$createHorizontalRuleNode();r||e.getNextSibling()!=null?e.replace(i):e.insertBefore(i),i.selectNext()},type:"element"},Go={dependencies:[Ye],export:e=>gr(e)?`![${e.getAltText()}](${e.getSrc()})`:null,importRegExp:/!(?:\[([^[]*)\])(?:\(([^(]+)\))/,regExp:/!(?:\[([^[]*)\])(?:\(([^(]+)\))$/,replace:(e,n)=>{const[,s,r]=n,i=dn({altText:s,maxWidth:800,src:r});e.replace(i)},trigger:")",type:"text-match"},Jo={dependencies:[Lt],export:e=>Vo(e)?`<tweet id="${e.getId()}" />`:null,regExp:/<tweet id="([^"]+?)"\s?\/>\s?$/,replace:(e,n,s)=>{const[,r]=s,i=Gn(r);e.replace(i)},type:"element"},yr=/^(?:\|)(.+)(?:\|)\s?$/,Ko=/^(\| ?:?-*:? ?)+\|\s?$/,Xo={dependencies:[L.TableNode,L.TableRowNode,L.TableCellNode],export:e=>{if(!L.$isTableNode(e))return null;const n=[];for(const s of e.getChildren()){const r=[];if(!L.$isTableRowNode(s))continue;let i=!1;for(const a of s.getChildren())L.$isTableCellNode(a)&&(r.push(Ue.$convertToMarkdownString(Zt,a).replace(/\n/g,"\\n")),a.__headerState===L.TableCellHeaderStates.ROW&&(i=!0));n.push(`| ${r.join(" | ")} |`),i&&n.push(`| ${r.map(a=>"---").join(" | ")} |`)}return n.join(`
`)},regExp:yr,replace:(e,n,s)=>{if(Ko.test(s[0])){const d=e.getPreviousSibling();if(!d||!L.$isTableNode(d))return;const u=d.getChildren(),p=u[u.length-1];if(!p||!L.$isTableRowNode(p))return;p.getChildren().forEach(m=>{L.$isTableCellNode(m)&&m.toggleHeaderStyle(L.TableCellHeaderStates.ROW)}),e.remove();return}const r=_s(s[0]);if(r==null)return;const i=[r];let a=e.getPreviousSibling(),o=r.length;for(;a&&!(!g.$isParagraphNode(a)||a.getChildrenSize()!==1);){const d=a.getFirstChild();if(!g.$isTextNode(d))break;const u=_s(d.getTextContent());if(u==null)break;o=Math.max(o,u.length),i.unshift(u);const p=a.getPreviousSibling();a.remove(),a=p}const l=L.$createTableNode();for(const d of i){const u=L.$createTableRowNode();l.append(u);for(let p=0;p<o;p++)u.append(p<d.length?d[p]:wr(""))}const c=e.getPreviousSibling();L.$isTableNode(c)&&Zo(c)===o?(c.append(...l.getChildren()),e.remove()):e.replace(l),l.selectEnd()},type:"element"};function Zo(e){const n=e.getFirstChild();return L.$isTableRowNode(n)?n.getChildrenSize():0}const wr=e=>{e=e.replace(/\\n/g,`
`);const n=L.$createTableCellNode(L.TableCellHeaderStates.NO_STATUS);return Ue.$convertFromMarkdownString(e,Zt,n),n},_s=e=>{const n=e.match(yr);return!n||!n[1]?null:n[1].split("|").map(s=>wr(s))},Zt=[Xo,Yo,Go,Jo,Ue.CHECK_LIST,...Ue.ELEMENT_TRANSFORMERS,...Ue.TEXT_FORMAT_TRANSFORMERS,...Ue.TEXT_MATCH_TRANSFORMERS],ks=()=>{let e=document.getElementById("report-container");return e===null&&(e=document.createElement("div"),e.id="report-container",e.style.position="fixed",e.style.top="50%",e.style.left="50%",e.style.fontSize="32px",e.style.transform="translate(-50%, -50px)",e.style.padding="20px",e.style.background="rgba(240, 240, 240, 0.4)",e.style.borderRadius="20px",document.body&&document.body.appendChild(e)),e};function Qo(){const e=h.useRef(null),n=h.useCallback(()=>{e!==null&&clearTimeout(e.current),document.body&&document.body.removeChild(ks())},[]);return h.useEffect(()=>n,[n]),h.useCallback(s=>{console.log(s);const r=ks();return clearTimeout(e.current),r.innerHTML=s,e.current=setTimeout(n,1e3),e.current},[n])}const vr=g.createCommand("SPEECH_TO_TEXT_COMMAND"),ea={"\n":({selection:e})=>{e.insertParagraph()},redo:({editor:e})=>{e.dispatchCommand(g.REDO_COMMAND,void 0)},undo:({editor:e})=>{e.dispatchCommand(g.UNDO_COMMAND,void 0)}},jr="SpeechRecognition"in window||"webkitSpeechRecognition"in window;function ta(){const[e]=ne.useLexicalComposerContext(),[n,s]=h.useState(!1),r=window.SpeechRecognition||window.webkitSpeechRecognition,i=h.useRef(null),a=Qo();return h.useEffect(()=>(n&&i.current===null&&(i.current=new r,i.current.continuous=!0,i.current.interimResults=!0,i.current.addEventListener("result",o=>{const l=o.results.item(o.resultIndex),{transcript:c}=l.item(0);a(c),l.isFinal&&e.update(()=>{const d=g.$getSelection();if(g.$isRangeSelection(d)){const u=ea[c.toLowerCase().trim()];u?u({editor:e,selection:d}):c.match(/\s*\n\s*/)?d.insertParagraph():d.insertText(c)}})})),i.current&&(n?i.current.start():i.current.stop()),()=>{i.current!==null&&i.current.stop()}),[r,e,n,a]),h.useEffect(()=>e.registerCommand(vr,o=>(s(o),!0),g.COMMAND_PRIORITY_EDITOR),[e]),null}const na=jr?ta:()=>null;async function sa(e){const n=JSON.stringify(e.getEditorState());try{await fetch("http://localhost:1235/setEditorState",{body:n,headers:{Accept:"application/json","Content-type":"application/json"},method:"POST"})}catch{}}async function ra(e){const n=JSON.stringify(e.getEditorState());let s=null;try{s=await fetch("http://localhost:1235/validateEditorState",{body:n,headers:{Accept:"application/json","Content-type":"application/json"},method:"POST"})}catch{}if(s!==null&&s.status===403)throw new Error("Editor state validation failed! Server did not accept changes.")}function ia({isRichText:e}){const[n]=ne.useLexicalComposerContext(),[s,r]=h.useState(()=>n.isEditable()),[i,a]=h.useState(!1);h.useState(!1);const[o,l]=h.useState(!0),[c,d]=Rt();Ti.useCollaborationContext(),h.useEffect(()=>n.registerUpdateListener(({dirtyElements:p,prevEditorState:m,tags:f})=>{!s&&p.size>0&&!f.has("historic")&&!f.has("collaboration")&&ra(n),n.getEditorState().read(()=>{const v=g.$getRoot().getChildren();if(v.length>1)l(!1);else if(g.$isParagraphNode(v[0])){const b=v[0].getChildren();l(b.length===0)}else l(!1)})}),[n,s]);const u=h.useCallback(()=>{n.update(()=>{const p=g.$getRoot(),m=p.getFirstChild();if(ge.$isCodeNode(m)&&m.getLanguage()==="markdown")Ue.$convertFromMarkdownString(m.getTextContent(),Zt);else{const f=Ue.$convertToMarkdownString(Zt);p.clear().append(ge.$createCodeNode("markdown").append(g.$createTextNode(f)))}p.selectEnd()})},[n]);return t.jsxs("div",{className:"actions",children:[jr&&t.jsx("button",{onClick:()=>{n.dispatchCommand(vr,!i),a(!i)},className:"action-button action-button-mic "+(i?"active":""),title:"Speech To Text","aria-label":`${i?"Enable":"Disable"} speech to text`,children:t.jsx("i",{className:"mic"})}),t.jsx("button",{className:"action-button import",onClick:()=>ys.importFile(n),title:"Import","aria-label":"Import editor state from JSON",children:t.jsx("i",{className:"import"})}),t.jsx("button",{className:"action-button export",onClick:()=>ys.exportFile(n,{fileName:`Playground ${new Date().toISOString()}`,source:"Playground"}),title:"Export","aria-label":"Export editor state to JSON",children:t.jsx("i",{className:"export"})}),t.jsx("button",{className:"action-button clear",disabled:o,onClick:()=>{d("Clear editor",p=>t.jsx(oa,{editor:n,onClose:p}))},title:"Clear","aria-label":"Clear editor contents",children:t.jsx("i",{className:"clear"})}),t.jsx("button",{className:`action-button ${s?"lock":"unlock"}`,onClick:()=>{s&&sa(n),n.setEditable(!n.isEditable())},title:"Read-Only Mode","aria-label":`${s?"Lock":"Unlock"} read-only mode`,children:t.jsx("i",{className:s?"lock":"unlock"})}),t.jsx("button",{className:"action-button",onClick:u,title:"Convert From Markdown","aria-label":"Convert from markdown",children:t.jsx("i",{className:"markdown"})}),c]})}function oa({editor:e,onClose:n}){return t.jsxs(t.Fragment,{children:["Are you sure you want to clear the editor?",t.jsxs("div",{className:"Modal__content",children:[t.jsx(ht,{onClick:()=>{e.dispatchCommand(g.CLEAR_EDITOR_COMMAND,void 0),e.focus(),n()},children:"Clear"})," ",t.jsx(ht,{onClick:()=>{e.focus(),n()},children:"Cancel"})]})]})}function un({"data-test-id":e,children:n}){return t.jsx("div",{className:"flex flex-row mt-[20px]","data-test-id":e,children:n})}function aa({className:e,format:n,nodeKey:s,videoID:r}){return t.jsx(cr.BlockWithAlignableContents,{className:e,format:n,nodeKey:s,children:t.jsx("iframe",{width:"560",height:"315",src:`https://www.youtube-nocookie.com/embed/${r}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:"YouTube video"})})}function la(e){const n=e.getAttribute("data-lexical-youtube");return n?{node:Jn(n)}:null}class Dt extends Un.DecoratorBlockNode{static getType(){return"youtube"}static clone(n){return new Dt(n.__id,n.__format,n.__key)}static importJSON(n){const s=Jn(n.videoID);return s.setFormat(n.format),s}exportJSON(){return{...super.exportJSON(),type:"youtube",version:1,videoID:this.__id}}constructor(n,s,r){super(s,r),this.__id=n}exportDOM(){const n=document.createElement("iframe");return n.setAttribute("data-lexical-youtube",this.__id),n.setAttribute("width","560"),n.setAttribute("height","315"),n.setAttribute("src",`https://www.youtube-nocookie.com/embed/${this.__id}`),n.setAttribute("frameborder","0"),n.setAttribute("allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"),n.setAttribute("allowfullscreen","true"),n.setAttribute("title","YouTube video"),{element:n}}static importDOM(){return{iframe:n=>n.hasAttribute("data-lexical-youtube")?{conversion:la,priority:1}:null}}updateDOM(){return!1}getId(){return this.__id}getTextContent(n,s){return`https://www.youtube.com/watch?v=${this.__id}`}decorate(n,s){const r=s.theme.embedBlock||{},i={base:r.base||"",focus:r.focus||""};return t.jsx(aa,{className:i,format:this.__format,nodeKey:this.getKey(),videoID:this.__id})}isInline(){return!1}}function Jn(e){return new Dt(e)}const Nr=g.createCommand("INSERT_YOUTUBE_COMMAND");function ca(){const[e]=ne.useLexicalComposerContext();return h.useEffect(()=>{if(!e.hasNodes([Dt]))throw new Error("YouTubePlugin: YouTubeNode not registered on editor");return e.registerCommand(Nr,n=>{const s=Jn(n);return te.$insertNodeToNearestRoot(s),!0},g.COMMAND_PRIORITY_EDITOR)},[e]),null}const da={contentName:"Youtube Video",exampleUrl:"https://www.youtube.com/watch?v=jNQXAC9IVRw",icon:t.jsx("i",{className:"icon youtube"}),insertNode:(e,n)=>{e.dispatchCommand(Nr,n.id)},keywords:["youtube","video"],parseUrl:async e=>{const n=/^.*(youtu\.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/.exec(e),s=n&&(n==null?void 0:n[2].length)===11?n[2]:null;return s!=null?{id:s,url:e}:null},type:"youtube-video"},Cr=[da];function ua({index:e,isSelected:n,onClick:s,onMouseEnter:r,option:i}){let a="item";return n&&(a+=" selected"),t.jsx("li",{tabIndex:-1,className:a,ref:i.setRefElement,role:"option","aria-selected":n,id:"typeahead-item-"+e,onMouseEnter:r,onClick:s,children:t.jsx("span",{className:"text",children:i.title})},i.key)}function pa({options:e,selectedItemIndex:n,onOptionClick:s,onOptionMouseEnter:r}){return t.jsx("div",{className:"typeahead-popover",children:t.jsx("ul",{children:e.map((i,a)=>t.jsx(ua,{index:a,isSelected:n===a,onClick:()=>s(i,a),onMouseEnter:()=>r(a),option:i},i.key))})})}const ma=(e,n)=>{let s;return r=>{window.clearTimeout(s),s=window.setTimeout(()=>{e(r)},n)}};function ha({embedConfig:e,onClose:n}){const[s,r]=h.useState(""),[i]=ne.useLexicalComposerContext(),[a,o]=h.useState(null),l=h.useMemo(()=>ma(d=>{const u=Tt.URL_MATCHER.exec(d);e!=null&&d!=null&&u!=null?Promise.resolve(e.parseUrl(d)).then(p=>{o(p)}):a!=null&&o(null)},200),[e,a]),c=()=>{a!=null&&(e.insertNode(i,a),n())};return t.jsxs("div",{style:{width:"600px"},children:[t.jsx("div",{className:"Input__wrapper",children:t.jsx("input",{type:"text",className:"Input__input",placeholder:e.exampleUrl,value:s,"data-test-id":`${e.type}-embed-modal-url`,onChange:d=>{const{value:u}=d.target;r(u),l(u)}})}),t.jsx(un,{children:t.jsx(ht,{disabled:!a,onClick:c,"data-test-id":`${e.type}-embed-modal-submit-btn`,children:"Embed"})})]})}function fa(){const[e,n]=Rt(),s=i=>{n(`Embed ${i.contentName}`,a=>t.jsx(ha,{embedConfig:i,onClose:a}))},r=(i,a,o)=>[new Tt.AutoEmbedOption("Dismiss",{onSelect:o}),new Tt.AutoEmbedOption(`Embed ${i.contentName}`,{onSelect:a})];return t.jsxs(t.Fragment,{children:[e,t.jsx(Tt.LexicalAutoEmbedPlugin,{embedConfigs:Cr,onOpenEmbedModalForConfig:s,getMenuOptions:r,menuRenderFn:(i,{selectedIndex:a,options:o,selectOptionAndCleanUp:l,setHighlightedIndex:c})=>i.current?Le.createPortal(t.jsx("div",{className:"typeahead-popover auto-embed-menu",style:{marginLeft:i.current.style.width,width:200},children:t.jsx(pa,{options:o,selectedItemIndex:a,onOptionClick:(d,u)=>{c(u),l(d)},onOptionMouseEnter:d=>{c(d)}})}),i.current):null})]})}const xa=/((https?:\/\/(www\.)?)|(www\.))[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/,ga=/(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))/,ba=[An.createLinkMatcherWithRegExp(xa,e=>e.startsWith("http")?e:`https://${e}`),An.createLinkMatcherWithRegExp(ga,e=>`mailto:${e}`)];function ya(){return t.jsx(An.AutoLinkPlugin,{matchers:ba})}function Ss({filter:e,newTab:n=!1}){const[s]=ne.useLexicalComposerContext();return h.useEffect(()=>{function r(i){const a=i,o=wa(a,s);if(o===null)return;const l=o.getAttribute("href");if(o.getAttribute("contenteditable")==="false"||l===void 0)return;const c=s.getEditorState().read(g.$getSelection);if(g.$isRangeSelection(c)&&!c.isCollapsed())return;let d=null;if(s.update(()=>{const u=g.$getNearestNodeFromDOMNode(o);de.$isLinkNode(u)&&(d=u)}),!(d===null||e!==void 0&&!e(a,d)))try{if(l!==null){const u=a.type==="auxclick"&&a.button===1;window.open(l,n||a.metaKey||a.ctrlKey||u?"_blank":"_self"),a.preventDefault()}}catch{}}return s.registerRootListener((i,a)=>{a!==null&&(a.removeEventListener("click",r),a.removeEventListener("auxclick",r)),i!==null&&(i.addEventListener("click",r),i.addEventListener("auxclick",r))})},[s,e,n]),null}function Ts(e){return e.nodeName.toLowerCase()==="a"}function wa(e,n){return n.getEditorState().read(()=>{const s=e.target;return Ts(s)?s:s.parentNode&&Ts(s.parentNode)?s.parentNode:null})}function va(){const[e]=ne.useLexicalComposerContext();return h.useEffect(()=>ge.registerCodeHighlighting(e),[e]),null}function ja(e){const n=e.open!==void 0?e.open:!0;return{node:Kn(n)}}class tt extends g.ElementNode{constructor(n,s){super(s),this.__open=n}static getType(){return"collapsible-container"}static clone(n){return new tt(n.__open,n.__key)}createDOM(n,s){const r=document.createElement("details");return r.classList.add("Collapsible__container"),r.open=this.__open,r.addEventListener("toggle",()=>{s.getEditorState().read(()=>this.getOpen())!==r.open&&s.update(()=>this.toggleOpen())}),r}updateDOM(n,s){return n.__open!==this.__open&&(s.open=this.__open),!1}static importDOM(){return{details:n=>({conversion:ja,priority:1})}}static importJSON(n){return Kn(n.open)}exportDOM(){const n=document.createElement("details");return n.setAttribute("open",this.__open.toString()),{element:n}}exportJSON(){return{...super.exportJSON(),open:this.__open,type:"collapsible-container",version:1}}setOpen(n){const s=this.getWritable();s.__open=n}getOpen(){return this.getLatest().__open}toggleOpen(){this.setOpen(!this.getOpen())}}function Kn(e){return new tt(e)}function ze(e){return e instanceof tt}function Na(e){return{node:Xn()}}class nt extends g.ElementNode{static getType(){return"collapsible-content"}static clone(n){return new nt(n.__key)}createDOM(n){const s=document.createElement("div");return s.classList.add("Collapsible__content"),s}updateDOM(n,s){return!1}static importDOM(){return{div:n=>n.hasAttribute("data-lexical-collapsible-content")?{conversion:Na,priority:2}:null}}exportDOM(){const n=document.createElement("div");return n.setAttribute("data-lexical-collapsible-content","true"),{element:n}}static importJSON(n){return Xn()}isShadowRoot(){return!0}exportJSON(){return{...super.exportJSON(),type:"collapsible-content",version:1}}}function Xn(){return new nt}function _r(e){return e instanceof nt}function Ca(e){return{node:Zn()}}class st extends g.ElementNode{static getType(){return"collapsible-title"}static clone(n){return new st(n.__key)}createDOM(n,s){const r=document.createElement("summary");return r.classList.add("Collapsible__title"),r.classList.add("w-full","font-sans","font-medium","text-md","uppercase"),r.classList.add("tracking-wider","py-1","pl-5"),r}updateDOM(n,s){return!1}static importDOM(){return{summary:n=>({conversion:Ca,priority:1})}}static importJSON(n){return Zn()}exportDOM(){return{element:document.createElement("summary")}}exportJSON(){return{...super.exportJSON(),type:"collapsible-title",version:1}}collapseAtStart(n){return this.getParentOrThrow().insertBefore(this),!0}insertNewAfter(n,s=!0){const r=this.getParentOrThrow();if(!ze(r))throw new Error("CollapsibleTitleNode expects to be child of CollapsibleContainerNode");if(r.getOpen()){const i=this.getNextSibling();if(!_r(i))throw new Error("CollapsibleTitleNode expects to have CollapsibleContentNode sibling");const a=i.getFirstChild();if(g.$isElementNode(a))return a;{const o=g.$createParagraphNode();return i.append(o),o}}else{const i=g.$createParagraphNode();return r.insertAfter(i,s),i}}}function Zn(){return new st}function Es(e){return e instanceof st}const Qn=g.createCommand();g.createCommand();function _a(){const[e]=ne.useLexicalComposerContext();return h.useEffect(()=>{if(!e.hasNodes([tt,st,nt]))throw new Error("CollapsiblePlugin: CollapsibleContainerNode, CollapsibleTitleNode, or CollapsibleContentNode not registered on editor");const n=()=>{var i;const r=g.$getSelection();if(g.$isRangeSelection(r)&&r.isCollapsed()&&r.anchor.offset===0){const a=te.$findMatchingParent(r.anchor.getNode(),ze);if(ze(a)){const o=a.getParent();o!==null&&o.getFirstChild()===a&&r.anchor.key===((i=a.getFirstDescendant())==null?void 0:i.getKey())&&a.insertBefore(g.$createParagraphNode())}}return!1},s=()=>{const r=g.$getSelection();if(g.$isRangeSelection(r)&&r.isCollapsed()){const i=te.$findMatchingParent(r.anchor.getNode(),ze);if(ze(i)){const a=i.getParent();if(a!==null&&a.getLastChild()===i){const o=i.getLastDescendant();o!==null&&r.anchor.key===o.getKey()&&r.anchor.offset===o.getTextContentSize()&&i.insertAfter(g.$createParagraphNode())}}}return!1};return te.mergeRegister(e.registerNodeTransform(nt,r=>{const i=r.getParent();if(!ze(i)){const a=r.getChildren();for(const o of a)r.insertBefore(o);r.remove()}}),e.registerNodeTransform(st,r=>{const i=r.getParent();if(!ze(i)){r.replace(g.$createParagraphNode().append(...r.getChildren()));return}}),e.registerNodeTransform(tt,r=>{const i=r.getChildren();if(i.length!==2||!Es(i[0])||!_r(i[1])){for(const a of i)r.insertBefore(a);r.remove()}}),e.registerCommand(g.DELETE_CHARACTER_COMMAND,()=>{const r=g.$getSelection();if(!g.$isRangeSelection(r)||!r.isCollapsed()||r.anchor.offset!==0)return!1;const a=r.anchor.getNode().getTopLevelElement();if(a===null)return!1;const o=a.getPreviousSibling();return!ze(o)||o.getOpen()?!1:(o.setOpen(!0),!0)},g.COMMAND_PRIORITY_LOW),e.registerCommand(g.KEY_ARROW_DOWN_COMMAND,s,g.COMMAND_PRIORITY_LOW),e.registerCommand(g.KEY_ARROW_RIGHT_COMMAND,s,g.COMMAND_PRIORITY_LOW),e.registerCommand(g.KEY_ARROW_UP_COMMAND,n,g.COMMAND_PRIORITY_LOW),e.registerCommand(g.KEY_ARROW_LEFT_COMMAND,n,g.COMMAND_PRIORITY_LOW),e.registerCommand(g.INSERT_PARAGRAPH_COMMAND,()=>{var i;const r=(i=e._window)==null?void 0:i.event;if(r&&(r.ctrlKey||r.metaKey)&&r.key==="Enter"){const a=g.$getPreviousSelection();if(g.$isRangeSelection(a)&&a.isCollapsed()){const o=te.$findMatchingParent(a.anchor.getNode(),l=>g.$isElementNode(l)&&!l.isInline());if(Es(o)){const l=o.getParent();if(ze(l))return l.toggleOpen(),g.$setSelection(a.clone()),!0}}}return!1},g.COMMAND_PRIORITY_LOW),e.registerCommand(Qn,()=>(e.update(()=>{const r=Zn();te.$insertNodeToNearestRoot(Kn(!0).append(r,Xn().append(g.$createParagraphNode()))),r.select()}),!0),g.COMMAND_PRIORITY_LOW))},[e]),null}function ka({accept:e,label:n,onChange:s,"data-test-id":r}){return t.jsxs("div",{className:`${InputStylese.Input__wrapper}`,children:[t.jsx("label",{className:`${InputStylese.Input__label}`,children:n}),t.jsx("input",{type:"file",accept:e,className:`${InputStylese.Input__input}`,onChange:i=>s(i.target.files),"data-test-id":r})]})}function Sa({children:e,label:n,className:s,...r}){return t.jsxs("div",{className:"Input__wrapper",children:[t.jsx("label",{style:{marginTop:"-1em"},className:"Input__label",children:n}),t.jsx("select",{...r,className:s||"min-w-[160px] max-w-[290px] border-[1px] border-[solid] border-[#393939] rounded-[0.25em] px-[0.5em] py-[0.25em] text-[1rem] cursor-pointer leading-[1.4] bg-[linear-gradient(to_bottom,_#ffffff_0%,_#e5e5e5_100%)]",children:e})]})}function ft({label:e,value:n,onChange:s,placeholder:r="","data-test-id":i,type:a="text"}){return t.jsxs("div",{className:`${InputStylese.Input__wrapper}`,children:[t.jsx("label",{className:`${InputStylese.Input__label}`,children:e}),t.jsx("input",{type:a,className:`${InputStylese.Input__input}`,placeholder:r,onChange:o=>s(o.target.files),"data-test-id":i})]})}const Ta=e=>Ot?(e||window).getSelection():null,pn=g.createCommand("INSERT_INLINE_IMAGE_COMMAND");function kr({activeEditor:e,onClose:n}){const s=h.useRef(!1),[r,i]=h.useState(""),[a,o]=h.useState(""),[l,c]=h.useState(!1),[d,u]=h.useState("left"),p=r==="",m=b=>{c(b.target.checked)},f=b=>{u(b.target.value)},y=b=>{const x=new FileReader;x.onload=function(){return typeof x.result=="string"&&i(x.result),""},b!==null&&x.readAsDataURL(b[0])};h.useEffect(()=>{s.current=!1;const b=x=>{s.current=x.altKey};return document.addEventListener("keydown",b),()=>{document.removeEventListener("keydown",b)}},[e]);const v=()=>{const b={altText:a,position:d,showCaption:l,src:r};e.dispatchCommand(pn,b),n()};return t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{marginBottom:"1em"},children:t.jsx(ka,{label:"Image Upload",onChange:y,accept:"image/*","data-test-id":"image-modal-file-upload"})}),t.jsx("div",{style:{marginBottom:"1em"},children:t.jsx(ft,{label:"Alt Text",placeholder:"Descriptive alternative text",onChange:o,value:a,"data-test-id":"image-modal-alt-text-input"})}),t.jsxs(Sa,{style:{marginBottom:"1em",width:"290px"},label:"Position",name:"position",id:"position-select",onChange:f,children:[t.jsx("option",{value:"left",children:"Left"}),t.jsx("option",{value:"right",children:"Right"}),t.jsx("option",{value:"full",children:"Full Width"})]}),t.jsxs("div",{className:"Input__wrapper",children:[t.jsx("input",{id:"caption",type:"checkbox",checked:l,onChange:m}),t.jsx("label",{htmlFor:"caption",children:"Show Caption"})]}),t.jsx(un,{children:t.jsx(ht,{"data-test-id":"image-modal-file-upload-btn",disabled:p,onClick:()=>v(),children:"Confirm"})})]})}function Ea(){const[e]=ne.useLexicalComposerContext();return h.useEffect(()=>{if(!e.hasNodes([Ye]))throw new Error("ImagesPlugin: ImageNode not registered on editor");return te.mergeRegister(e.registerCommand(pn,n=>{const s=dn(n);return g.$insertNodes([s]),g.$isRootOrShadowRoot(s.getParentOrThrow())&&te.$wrapNodeInElement(s,g.$createParagraphNode).selectEnd(),!0},g.COMMAND_PRIORITY_EDITOR),e.registerCommand(g.DRAGSTART_COMMAND,n=>Ma(n),g.COMMAND_PRIORITY_HIGH),e.registerCommand(g.DRAGOVER_COMMAND,n=>Ia(n),g.COMMAND_PRIORITY_LOW),e.registerCommand(g.DROP_COMMAND,n=>Aa(n,e),g.COMMAND_PRIORITY_HIGH))},[e]),null}const $a="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",Sr=document.createElement("img");Sr.src=$a;function Ma(e){const n=es();if(!n)return!1;const s=e.dataTransfer;return s?(s.setData("text/plain","_"),s.setDragImage(Sr,0,0),s.setData("application/x-lexical-drag",JSON.stringify({data:{altText:n.__altText,caption:n.__caption,height:n.__height,key:n.getKey(),showCaption:n.__showCaption,src:n.__src,width:n.__width},type:"image"})),!0):!1}function Ia(e){return es()?(Tr(e)||e.preventDefault(),!0):!1}function Aa(e,n){const s=es();if(!s)return!1;const r=Oa(e);if(!r)return!1;if(e.preventDefault(),Tr(e)){const i=Ra(e);s.remove();const a=g.$createRangeSelection();i!=null&&a.applyDOMRange(i),g.$setSelection(a),n.dispatchCommand(pn,r)}return!0}function es(){const e=g.$getSelection();if(!g.$isNodeSelection(e))return null;const s=e.getNodes()[0];return gr(s)?s:null}function Oa(e){var i;const n=(i=e.dataTransfer)==null?void 0:i.getData("application/x-lexical-drag");if(!n)return null;const{type:s,data:r}=JSON.parse(n);return s!=="image"?null:r}function Tr(e){const n=e.target;return!!(n&&n instanceof HTMLElement&&!n.closest("code, span.editor-image")&&n.parentElement&&n.parentElement.closest("div.ContentEditable__root"))}function Ra(e){let n;const s=e.target,r=s==null?null:s.nodeType===9?s.defaultView:s.ownerDocument.defaultView,i=Ta(r);if(document.caretRangeFromPoint)n=document.caretRangeFromPoint(e.clientX,e.clientY);else if(e.rangeParent&&i!==null)i.collapse(e.rangeParent,e.rangeOffset||0),n=i.getRangeAt(0);else throw Error("Cannot get the selection when dragging");return n}function Er(e,n,...s){if(!e)throw new Error("Internal Lexical error: invariant() is meant to be replaced at compile time. There is no runtime version. Error: "+n)}const La=new Map,Ap=new Map,$r='{"root":{"children":[{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1}],"direction":null,"format":"","indent":0,"type":"root","version":1}}',Mr=e=>e===""?$r:`{"root":{"children":[{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":${e},"type":"text","version":1}],"direction":"ltr","format":"","indent":0,"type":"paragraph","version":1}],"direction":"ltr","format":"","indent":0,"type":"root","version":1}}`,Da=h.lazy(()=>xr(()=>import("./TableComponent-BuO-MidS.js"),__vite__mapDeps([3,1,2])));function Ir(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,5)}function Xe(e){return{colSpan:1,id:Ir(),json:$r,type:e,width:null}}function It(){return{cells:[],height:null,id:Ir()}}function Op(e){const n=e.querySelectorAll("tr"),s=[];for(let r=0;r<n.length;r++){const a=n[r].querySelectorAll("td,th");if(!a||a.length===0)continue;const o=[];for(let c=0;c<a.length;c++){const d=a[c],u=d.nodeName==="TH",p=Xe(u?"header":"normal");p.json=Mr(JSON.stringify(d.innerText.replace(/\n/g," "))),o.push(p)}const l=It();l.cells=o,s.push(l)}return s}function Pa(e){const n=e.querySelectorAll("tr");if(!n||n.length===0)return null;const s=[];for(let r=0;r<n.length;r++){const a=n[r].querySelectorAll("td,th");if(!a||a.length===0)continue;const o=[];for(let c=0;c<a.length;c++){const d=a[c],u=d.nodeName==="TH",p=Xe(u?"header":"normal");p.json=Mr(JSON.stringify(d.innerText.replace(/\n/g," "))),o.push(p)}const l=It();l.cells=o,s.push(l)}return{node:Ar(s)}}function Fa(e,n){const s=document.createElement("table"),r=document.createElement("colgroup"),i=document.createElement("tbody"),a=e[0];for(let o=n!=null?n.startX:0;o<(n!=null?n.endX+1:a.cells.length);o++){const l=document.createElement("col");r.append(l)}for(let o=n!=null?n.startY:0;o<(n!=null?n.endY+1:e.length);o++){const c=e[o].cells,d=document.createElement("tr");for(let u=n!=null?n.startX:0;u<(n!=null?n.endX+1:c.length);u++){const p=c[u],m=document.createElement(p.type==="header"?"th":"td");m.innerHTML=La.get(p.json)||"",d.appendChild(m)}i.appendChild(d)}return s.appendChild(r),s.appendChild(i),s}class it extends g.DecoratorNode{static getType(){return"tablesheet"}static clone(n){return new it(Array.from(n.__rows),n.__key)}static importJSON(n){return Ar(n.rows)}exportJSON(){return{rows:this.__rows,type:"tablesheet",version:1}}static importDOM(){return{table:n=>({conversion:Pa,priority:0})}}exportDOM(){return{element:Fa(this.__rows)}}constructor(n,s){super(s),this.__rows=n||[]}createDOM(){return document.createElement("div")}updateDOM(){return!1}mergeRows(n,s,r){const a=this.getWritable().__rows,o=Math.min(a.length,s+r.length);for(let l=s;l<o;l++){const c=a[l],d=r[l-s],u=c.cells,p=Array.from(u),m={...c,cells:p},f=d.cells,y=Math.min(u.length,n+f.length);for(let v=n;v<y;v++){const b=u[v],x=f[v-n],w={...b,json:x.json,type:x.type};p[v]=w}a[l]=m}}updateCellJSON(n,s,r){const a=this.getWritable().__rows,o=a[s],l=o.cells,c=l[n],d=Array.from(l),u={...c,json:r},p={...o,cells:d};d[n]=u,a[s]=p}updateCellType(n,s,r){const a=this.getWritable().__rows,o=a[s],l=o.cells,c=l[n],d=Array.from(l),u={...c,type:r},p={...o,cells:d};d[n]=u,a[s]=p}insertColumnAt(n){const r=this.getWritable().__rows;for(let i=0;i<r.length;i++){const a=r[i],o=a.cells,l=Array.from(o),c={...a,cells:l},d=(o[n]||o[n-1]).type;l.splice(n,0,Xe(d)),r[i]=c}}deleteColumnAt(n){const r=this.getWritable().__rows;for(let i=0;i<r.length;i++){const a=r[i],o=a.cells,l=Array.from(o),c={...a,cells:l};l.splice(n,1),r[i]=c}}addColumns(n){const r=this.getWritable().__rows;for(let i=0;i<r.length;i++){const a=r[i],o=a.cells,l=Array.from(o),c={...a,cells:l},d=o[o.length-1].type;for(let u=0;u<n;u++)l.push(Xe(d));r[i]=c}}insertRowAt(n){const r=this.getWritable().__rows,i=r[n]||r[n-1],a=i.cells.length,o=It();for(let l=0;l<a;l++){const c=Xe(i.cells[l].type);o.cells.push(c)}r.splice(n,0,o)}deleteRowAt(n){this.getWritable().__rows.splice(n,1)}addRows(n){const r=this.getWritable().__rows,i=r[r.length-1],a=i.cells.length;for(let o=0;o<n;o++){const l=It();for(let c=0;c<a;c++){const d=Xe(i.cells[c].type);l.cells.push(d)}r.push(l)}}updateColumnWidth(n,s){const i=this.getWritable().__rows;for(let a=0;a<i.length;a++){const o=i[a],l=o.cells,c=Array.from(l),d={...o,cells:c};c[n].width=s,i[a]=d}}decorate(n,s){return t.jsx(h.Suspense,{children:t.jsx(Da,{nodeKey:this.__key,theme:s.theme,rows:this.__rows})})}isInline(){return!1}}function Rp(e){return e instanceof it}function Ar(e){return new it(e)}function za(e,n,s=!0){const r=[];for(let i=0;i<n;i++){const a=It();r.push(a);for(let o=0;o<e;o++)a.cells.push(Xe(s===!0&&(i===0||o===0)?"header":"normal"))}return new it(r)}const Or=g.createCommand("INSERT_NEW_TABLE_COMMAND"),Ba=h.createContext({cellEditorConfig:null,cellEditorPlugins:null,set:()=>{}});function Rr({activeEditor:e,onClose:n}){const[s,r]=h.useState("5"),[i,a]=h.useState("5"),[o,l]=h.useState(!0);h.useEffect(()=>{const d=Number(s),u=Number(i);d&&d>0&&d<=500&&u&&u>0&&u<=50?l(!1):l(!0)},[s,i]);const c=()=>{e.dispatchCommand(L.INSERT_TABLE_COMMAND,{columns:i,rows:s}),n()};return t.jsxs(t.Fragment,{children:[t.jsx(ft,{placeholder:"# of rows (1-500)",label:"Rows",onChange:r,value:s,"data-test-id":"table-modal-rows",type:"number"}),t.jsx(ft,{placeholder:"# of columns (1-50)",label:"Columns",onChange:a,value:i,"data-test-id":"table-modal-columns",type:"number"}),t.jsx(un,{"data-test-id":"table-model-confirm-insert",children:t.jsx(ht,{disabled:o,onClick:c,children:"Confirm"})})]})}function Wa({activeEditor:e,onClose:n}){const[s,r]=h.useState(""),[i,a]=h.useState(""),[o,l]=h.useState(!0);h.useEffect(()=>{const d=Number(s),u=Number(i);d&&d>0&&d<=500&&u&&u>0&&u<=50?l(!1):l(!0)},[s,i]);const c=()=>{e.dispatchCommand(Or,{columns:i,rows:s}),n()};return t.jsxs(t.Fragment,{children:[t.jsx(ft,{placeholder:"# of rows (1-500)",label:"Rows",onChange:r,value:s,"data-test-id":"table-modal-rows",type:"number"}),t.jsx(ft,{placeholder:"# of columns (1-50)",label:"Columns",onChange:a,value:i,"data-test-id":"table-modal-columns",type:"number"}),t.jsx(un,{"data-test-id":"table-model-confirm-insert",children:t.jsx(ht,{disabled:o,onClick:c,children:"Confirm"})})]})}function Ha({cellEditorConfig:e,children:n}){const[s]=ne.useLexicalComposerContext(),r=h.useContext(Ba);return h.useEffect(()=>(s.hasNodes([it])||Er(!1,"TablePlugin: TableNode is not registered on editor"),r.set(e,n),s.registerCommand(Or,({columns:i,rows:a,includeHeaders:o})=>{const l=za(Number(a),Number(i),o);return g.$insertNodes([l]),!0},g.COMMAND_PRIORITY_EDITOR)),[r,e,n,s]),null}class Ne extends On.MenuOption{constructor(n,s){super(n),this.title=n,this.keywords=s.keywords||[],this.icon=s.icon,this.keyboardShortcut=s.keyboardShortcut,this.onSelect=s.onSelect.bind(this)}}function Ua({index:e,isSelected:n,onClick:s,onMouseEnter:r,option:i}){let a="item";return n&&(a+=" selected"),t.jsxs("li",{tabIndex:-1,className:a,ref:i.setRefElement,role:"option","aria-selected":n,id:"typeahead-item-"+e,onMouseEnter:r,onClick:s,children:[i.icon,t.jsx("span",{className:"text",children:i.title})]},i.key)}function qa(e,n){const s=[];if(n==null)return s;const r=n.match(/^([1-9]\d?)(?:x([1-9]\d?)?)?$/);if(r!==null){const i=r[1],a=r[2]?[r[2]]:[1,2,3,4,5,6,7,8,9,10].map(String);s.push(...a.map(o=>new Ne(`${i}x${o} Table`,{icon:t.jsx("i",{className:"icon table"}),keywords:["table"],onSelect:()=>e.dispatchCommand(L.INSERT_TABLE_COMMAND,{columns:o,rows:i})})))}return s}function Va(e,n){return[new Ne("Paragraph",{icon:t.jsx("i",{className:"icon paragraph"}),keywords:["normal","paragraph","p","text"],onSelect:()=>e.update(()=>{const s=g.$getSelection();g.$isRangeSelection(s)&&he.$setBlocksType(s,()=>g.$createParagraphNode())})}),...[1,2,3,4].map(s=>new Ne(`Heading ${s}`,{icon:t.jsx("i",{className:`icon h${s}`}),keywords:["heading","header",`h${s}`],onSelect:()=>e.update(()=>{const r=g.$getSelection();g.$isRangeSelection(r)&&he.$setBlocksType(r,()=>ke.$createHeadingNode(`h${s}`))})})),new Ne("Table",{icon:t.jsx("i",{className:"icon table"}),keywords:["table","grid","spreadsheet","rows","columns"],onSelect:()=>n("Insert Table",s=>t.jsx(Rr,{activeEditor:e,onClose:s}))}),...Cr.map(s=>new Ne(`Embed ${s.contentName}`,{icon:s.icon,keywords:[...s.keywords,"embed"],onSelect:()=>e.dispatchCommand(Tt.INSERT_EMBED_COMMAND,s.type)})),new Ne("Numbered List",{icon:t.jsx("i",{className:"icon number"}),keywords:["numbered list","ordered list","ol"],onSelect:()=>e.dispatchCommand(xe.INSERT_ORDERED_LIST_COMMAND,void 0)}),new Ne("Bulleted List",{icon:t.jsx("i",{className:"icon bullet"}),keywords:["bulleted list","unordered list","ul"],onSelect:()=>e.dispatchCommand(xe.INSERT_UNORDERED_LIST_COMMAND,void 0)}),new Ne("Check List",{icon:t.jsx("i",{className:"icon check"}),keywords:["check list","todo list"],onSelect:()=>e.dispatchCommand(xe.INSERT_CHECK_LIST_COMMAND,void 0)}),new Ne("Quote",{icon:t.jsx("i",{className:"icon quote"}),keywords:["block quote"],onSelect:()=>e.update(()=>{const s=g.$getSelection();g.$isRangeSelection(s)&&he.$setBlocksType(s,()=>ke.$createQuoteNode())})}),new Ne("Code",{icon:t.jsx("i",{className:"icon code"}),keywords:["javascript","python","js","codeblock"],onSelect:()=>e.update(()=>{const s=g.$getSelection();if(g.$isRangeSelection(s))if(s.isCollapsed())he.$setBlocksType(s,()=>ge.$createCodeNode());else{const r=s.getTextContent(),i=ge.$createCodeNode();s.insertNodes([i]),s.insertRawText(r)}})}),new Ne("Divider",{icon:t.jsx("i",{className:"icon horizontal-rule"}),keywords:["horizontal rule","divider","hr"],onSelect:()=>e.dispatchCommand(pt.INSERT_HORIZONTAL_RULE_COMMAND,void 0)}),new Ne("Image",{icon:t.jsx("i",{className:"icon image"}),keywords:["image","photo","picture","file"],onSelect:()=>n("Insert Image",s=>t.jsx(kr,{activeEditor:e,onClose:s}))}),new Ne("Collapsible",{icon:t.jsx("i",{className:"icon caret-right"}),keywords:["collapse","collapsible","toggle"],onSelect:()=>e.dispatchCommand(Qn,void 0)}),...["left","center","right","justify"].map(s=>new Ne(`Align ${s}`,{icon:t.jsx("i",{className:`icon ${s}-align`}),keywords:["align","justify",s],onSelect:()=>e.dispatchCommand(g.FORMAT_ELEMENT_COMMAND,s)}))]}function Ya(){const[e]=ne.useLexicalComposerContext(),[n,s]=Rt(),[r,i]=h.useState(null),a=On.useBasicTypeaheadTriggerMatch("/",{minLength:0}),o=h.useMemo(()=>{const c=Va(e,s);if(!r)return c;const d=new RegExp(r,"i");return[...qa(e,r),...c.filter(u=>d.test(u.title)||u.keywords.some(p=>d.test(p)))]},[e,r,s]),l=h.useCallback((c,d,u,p)=>{e.update(()=>{d==null||d.remove(),c.onSelect(p),u()})},[e]);return t.jsxs(t.Fragment,{children:[n,t.jsx(On.LexicalTypeaheadMenuPlugin,{onQueryChange:i,onSelectOption:l,triggerFn:a,options:o,menuRenderFn:(c,{selectedIndex:d,selectOptionAndCleanUp:u,setHighlightedIndex:p})=>c.current&&o.length?Le.createPortal(t.jsx("div",{className:"typeahead-popover component-picker-menu",children:t.jsx("ul",{children:o.map((m,f)=>t.jsx(Ua,{index:f,isSelected:d===f,onClick:()=>{p(f),u(m)},onMouseEnter:()=>{p(f)},option:m},m.key))})}),c.current):null})]})}const $s=["image/","image/heic","image/heif","image/gif","image/webp"];function Ga(){const[e]=ne.useLexicalComposerContext();return h.useEffect(()=>e.registerCommand(ke.DRAG_DROP_PASTE,n=>((async()=>{const s=await te.mediaFileReader(n,[$s].flatMap(r=>r));for(const{file:r,result:i}of s)te.isMimeType(r,$s)&&e.dispatchCommand(pn,{altText:r.name,src:i})})(),!0),g.COMMAND_PRIORITY_LOW),[e]),null}function Nn(e){return e instanceof HTMLElement}class Lr{constructor(n,s){this._x=n,this._y=s}get x(){return this._x}get y(){return this._y}equals({x:n,y:s}){return this.x===n&&this.y===s}calcDeltaXTo({x:n}){return this.x-n}calcDeltaYTo({y:n}){return this.y-n}calcHorizontalDistanceTo(n){return Math.abs(this.calcDeltaXTo(n))}calcVerticalDistance(n){return Math.abs(this.calcDeltaYTo(n))}calcDistanceTo(n){return Math.sqrt(Math.pow(this.calcDeltaXTo(n),2)+Math.pow(this.calcDeltaYTo(n),2))}}function Ja(e){return e instanceof Lr}class Ke{constructor(n,s,r,i){const[a,o]=s<=i?[s,i]:[i,s],[l,c]=n<=r?[n,r]:[r,n];this._top=a,this._right=c,this._left=l,this._bottom=o}get top(){return this._top}get right(){return this._right}get bottom(){return this._bottom}get left(){return this._left}get width(){return Math.abs(this._left-this._right)}get height(){return Math.abs(this._bottom-this._top)}equals({top:n,left:s,bottom:r,right:i}){return n===this._top&&r===this._bottom&&s===this._left&&i===this._right}contains(n){if(Ja(n)){const{x:s,y:r}=n,i=r<this._top,a=r>this._bottom,o=s<this._left,l=s>this._right;return{reason:{isOnBottomSide:a,isOnLeftSide:o,isOnRightSide:l,isOnTopSide:i},result:!i&&!a&&!o&&!l}}else{const{top:s,left:r,bottom:i,right:a}=n;return s>=this._top&&s<=this._bottom&&i>=this._top&&i<=this._bottom&&r>=this._left&&r<=this._right&&a>=this._left&&a<=this._right}}intersectsWith(n){const{left:s,top:r,width:i,height:a}=n,{left:o,top:l,width:c,height:d}=this,u=s+i>=o+c?s+i:o+c,p=r+a>=l+d?r+a:l+d,m=s<=o?s:o,f=r<=l?r:l;return u-m<=i+c&&p-f<=a+d}generateNewRect({left:n=this.left,top:s=this.top,right:r=this.right,bottom:i=this.bottom}){return new Ke(n,s,r,i)}static fromLTRB(n,s,r,i){return new Ke(n,s,r,i)}static fromLWTH(n,s,r,i){return new Ke(n,r,n+s,r+i)}static fromPoints(n,s){const{y:r,x:i}=n,{y:a,x:o}=s;return Ke.fromLTRB(i,r,o,a)}static fromDOM(n){const{top:s,width:r,left:i,height:a}=n.getBoundingClientRect();return Ke.fromLWTH(i,r,s,a)}}const Ln=4,Ka=2,Xa="draggable-block-menu",Ms="application/x-lexical-drag-block",Is=28,Za=1,Qa=-1,As=0;let Gt=1/0;function el(e){return e===0?1/0:Gt>=0&&Gt<e?Gt:Math.floor(e/2)}function tl(e){return e.getEditorState().read(()=>g.$getRoot().getChildrenKeys())}function Dr(e){const n=(c,d)=>c?parseFloat(window.getComputedStyle(c)[d]):0,{marginTop:s,marginBottom:r}=window.getComputedStyle(e),i=n(e.previousElementSibling,"marginBottom"),a=n(e.nextElementSibling,"marginTop"),o=Math.max(parseFloat(s),i);return{marginBottom:Math.max(parseFloat(r),a),marginTop:o}}function Cn(e,n,s,r=!1){const i=e.getBoundingClientRect(),a=tl(n);let o=null;return n.getEditorState().read(()=>{if(r){const[d,u]=[n.getElementByKey(a[0]),n.getElementByKey(a[a.length-1])],[p,m]=[d==null?void 0:d.getBoundingClientRect(),u==null?void 0:u.getBoundingClientRect()];if(p&&m&&(s.y<p.top?o=d:s.y>m.bottom&&(o=u),o))return}let l=el(a.length),c=As;for(;l>=0&&l<a.length;){const d=a[l],u=n.getElementByKey(d);if(u===null)break;const p=new Lr(s.x,s.y),m=Ke.fromDOM(u),{marginTop:f,marginBottom:y}=Dr(u),v=m.generateNewRect({bottom:m.bottom+y,left:i.left,right:i.right,top:m.top-f}),{result:b,reason:{isOnTopSide:x,isOnBottomSide:w}}=v.contains(p);if(b){o=u,Gt=l;break}c===As&&(x?c=Qa:w?c=Za:c=1/0),l+=c}}),o}function nl(e){return!!e.closest(`.${Xa}`)}function sl(e,n,s){if(!e){n.style.opacity="0",n.style.transform="translate(-10000px, -10000px)";return}const r=e.getBoundingClientRect(),i=window.getComputedStyle(e),a=n.getBoundingClientRect(),o=s.getBoundingClientRect(),l=r.top+(parseInt(i.lineHeight,10)-a.height)/2-o.top,c=Ln;n.style.opacity="1",n.style.transform=`translate(${c}px, ${l}px)`}function rl(e,n){const{transform:s}=n.style;n.style.transform="translateZ(0)",e.setDragImage(n,0,0),setTimeout(()=>{n.style.transform=s})}function il(e,n,s,r){const{top:i,height:a}=n.getBoundingClientRect(),{top:o,width:l}=r.getBoundingClientRect(),{marginTop:c,marginBottom:d}=Dr(n);let u=i;s>=i?u+=a+d/2:u-=c/2;const p=u-o-Ka,m=Is-Ln;e.style.transform=`translate(${m}px, ${p}px)`,e.style.width=`${l-(Is-Ln)*2}px`,e.style.opacity=".4"}function ol(e){e&&(e.style.opacity="0",e.style.transform="translate(-10000px, -10000px)")}function al(e,n,s){const r=n.parentElement,i=h.useRef(null),a=h.useRef(null),o=h.useRef(!1),[l,c]=h.useState(null);h.useEffect(()=>{function p(f){const y=f.target;if(!Nn(y)){c(null);return}if(nl(y))return;const v=Cn(n,e,f);c(v)}function m(){c(null)}return r==null||r.addEventListener("mousemove",p),r==null||r.addEventListener("mouseleave",m),()=>{r==null||r.removeEventListener("mousemove",p),r==null||r.removeEventListener("mouseleave",m)}},[r,n,e]),h.useEffect(()=>{i.current&&sl(l,i.current,n)},[n,l]),h.useEffect(()=>{function p(f){if(!o.current)return!1;const[y]=ke.eventFiles(f);if(y)return!1;const{pageY:v,target:b}=f;if(!Nn(b))return!1;const x=Cn(n,e,f,!0),w=a.current;return x===null||w===null?!1:(il(w,x,v,n),f.preventDefault(),!0)}function m(f){if(!o.current)return!1;const[y]=ke.eventFiles(f);if(y)return!1;const{target:v,dataTransfer:b,pageY:x}=f,w=(b==null?void 0:b.getData(Ms))||"",k=g.$getNodeByKey(w);if(!k||!Nn(v))return!1;const T=Cn(n,e,f,!0);if(!T)return!1;const _=g.$getNearestNodeFromDOMNode(T);if(!_)return!1;if(_===k)return!0;const N=T.getBoundingClientRect().top;return x>=N?_.insertAfter(k):_.insertBefore(k),c(null),!0}return te.mergeRegister(e.registerCommand(g.DRAGOVER_COMMAND,f=>p(f),g.COMMAND_PRIORITY_LOW),e.registerCommand(g.DROP_COMMAND,f=>m(f),g.COMMAND_PRIORITY_HIGH))},[n,e]);function d(p){const m=p.dataTransfer;if(!m||!l)return;rl(m,l);let f="";e.update(()=>{const y=g.$getNearestNodeFromDOMNode(l);y&&(f=y.getKey())}),o.current=!0,m.setData(Ms,f)}function u(){o.current=!1,ol(a.current)}return Le.createPortal(t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"icon draggable-block-menu",ref:i,draggable:!0,onDragStart:d,onDragEnd:u,children:t.jsx("div",{className:s?"icon":""})}),t.jsx("div",{className:"draggable-block-target-line",ref:a})]}),n)}function ll({anchorElem:e=document.body}){const[n]=ne.useLexicalComposerContext();return al(n,e,n._editable)}function At(e){const n=e.anchor,s=e.focus,r=e.anchor.getNode(),i=e.focus.getNode();return r===i?r:e.isBackward()?he.$isAtNodeEnd(s)?r:i:he.$isAtNodeEnd(n)?r:i}const cl=10,dl=5;function Os(e,n,s,r=cl,i=dl){const a=s.parentElement;if(e===null||!a){n.style.opacity="0",n.style.transform="translate(-10000px, -10000px)";return}const o=n.getBoundingClientRect(),l=s.getBoundingClientRect(),c=a.getBoundingClientRect();let d=e.top-r,u=e.left-i;d<c.top&&(d+=o.height+e.height+r*2),u+o.width>c.right&&(u=c.right-o.width-i),d-=l.top,u-=l.left,n.style.opacity="1",n.style.transform=`translate(${u}px, ${d}px)`}function Qt(e){const n=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,s=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+/]+=*$/i;return e=String(e).trim(),e.match(n)||e.match(s)?e:"https://"}const ul=new RegExp(/((([A-Za-z]{3,9}:(?:\/\/)?)(?:[-;:&=+$,\w]+@)?[A-Za-z0-9.-]+|(?:www.|[-;:&=+$,\w]+@)[A-Za-z0-9.-]+)((?:\/[+~%/.\w-_]*)?\??(?:[-+=&;%@.\w_]*)#?(?:[\w]*))?)/);function pl(e){return e==="https://"||ul.test(e)}function ml({editor:e,isLink:n,setIsLink:s,anchorElem:r,isLinkEditMode:i,setIsLinkEditMode:a}){const o=h.useRef(null),l=h.useRef(null),[c,d]=h.useState(""),[u,p]=h.useState("https://"),[m,f]=h.useState(null),y=h.useCallback(()=>{var N,j;const x=g.$getSelection();if(g.$isRangeSelection(x)){const E=At(x),C=E.getParent();de.$isLinkNode(C)?d(C.getURL()):de.$isLinkNode(E)?d(E.getURL()):d("")}const w=o.current,k=window.getSelection(),T=document.activeElement;if(w===null)return;const _=e.getRootElement();if(x!==null&&k!==null&&_!==null&&_.contains(k.anchorNode)&&e.isEditable()){const E=(j=(N=k.focusNode)==null?void 0:N.parentElement)==null?void 0:j.getBoundingClientRect();E&&(E.y+=40,Os(E,w,r)),f(x)}else(!T||T.className!=="link-input")&&(_!==null&&Os(null,w,r),f(null),a&&a(!1),d(""));return!0},[r,e,a]);h.useEffect(()=>{const x=r.parentElement,w=()=>{e.getEditorState().read(()=>{y()})};return window.addEventListener("resize",w),x&&x.addEventListener("scroll",w),()=>{window.removeEventListener("resize",w),x&&x.removeEventListener("scroll",w)}},[r.parentElement,e,y]),h.useEffect(()=>te.mergeRegister(e.registerUpdateListener(({editorState:x})=>{x.read(()=>{y()})}),e.registerCommand(g.SELECTION_CHANGE_COMMAND,()=>(y(),!0),g.COMMAND_PRIORITY_LOW),e.registerCommand(g.KEY_ESCAPE_COMMAND,()=>n?(s(!1),!0):!1,g.COMMAND_PRIORITY_HIGH)),[e,y,s,n]),h.useEffect(()=>{e.getEditorState().read(()=>{y()})},[e,y]),h.useEffect(()=>{i&&l.current&&l.current.focus()},[i,n]);const v=x=>{x.key==="Enter"?(x.preventDefault(),b()):x.key==="Escape"&&(x.preventDefault(),a&&a(!1))},b=()=>{m!==null&&(c!==""&&e.dispatchCommand(de.TOGGLE_LINK_COMMAND,Qt(u)),p("https://"),a&&a(!1))};return t.jsx("div",{ref:o,className:"link-editor",children:n?i?t.jsxs(t.Fragment,{children:[t.jsx("input",{ref:l,className:"link-input",value:u,onChange:x=>{p(x.target.value)},onKeyDown:x=>{v(x)}}),t.jsxs("div",{children:[t.jsx("div",{className:"link-cancel",role:"button",tabIndex:0,onMouseDown:x=>x.preventDefault(),onClick:()=>{a&&a(!1)}}),t.jsx("div",{className:"link-confirm",role:"button",tabIndex:0,onMouseDown:x=>x.preventDefault(),onClick:b})]})]}):t.jsxs("div",{className:"link-view",children:[t.jsx("a",{href:Qt(c),target:"_blank",rel:"noopener noreferrer",children:c}),t.jsx("div",{className:"link-edit",role:"button",tabIndex:0,onMouseDown:x=>x.preventDefault(),onClick:()=>{p(c),a&&a(!0)}}),t.jsx("div",{className:"link-trash",role:"button",tabIndex:0,onMouseDown:x=>x.preventDefault(),onClick:()=>{e.dispatchCommand(de.TOGGLE_LINK_COMMAND,null)}})]}):null})}function hl(e,n,s,r){const[i,a]=h.useState(e),[o,l]=h.useState(!1);return h.useEffect(()=>{function c(){const d=g.$getSelection();if(g.$isRangeSelection(d)){const u=At(d),p=te.$findMatchingParent(u,de.$isLinkNode),m=te.$findMatchingParent(u,de.$isAutoLinkNode);l(p!==null&&m===null)}}return te.mergeRegister(e.registerUpdateListener(({editorState:d})=>{d.read(()=>{c()})}),e.registerCommand(g.SELECTION_CHANGE_COMMAND,(d,u)=>(c(),a(u),!1),g.COMMAND_PRIORITY_CRITICAL),e.registerCommand(g.CLICK_COMMAND,d=>{const u=g.$getSelection();if(g.$isRangeSelection(u)){const p=At(u),m=te.$findMatchingParent(p,de.$isLinkNode);if(de.$isLinkNode(m)&&(d.metaKey||d.ctrlKey))return window.open(m.getURL(),"_blank"),!0}return!1},g.COMMAND_PRIORITY_LOW))},[e]),Le.createPortal(t.jsx(ml,{editor:i,isLink:o,anchorElem:n,setIsLink:l,isLinkEditMode:s,setIsLinkEditMode:r}),n)}function fl({anchorElem:e=document.body,isLinkEditMode:n,setIsLinkEditMode:s}){const[r]=ne.useLexicalComposerContext();return hl(r,e,n,s)}function xl(e,n){const s=e.getRangeAt(0);let r;if(e.anchorNode===n){let i=n;for(;i.firstElementChild!=null;)i=i.firstElementChild;r=i.getBoundingClientRect()}else r=s.getBoundingClientRect();return r}const gl=10,bl=5;function yl(e,n,s,r=gl,i=bl){const a=s.parentElement;if(e===null||!a){n.style.opacity="0",n.style.transform="translate(-10000px, -10000px)";return}const o=n.getBoundingClientRect(),l=s.getBoundingClientRect(),c=a.getBoundingClientRect();let d=e.top-o.height-r,u=e.left-i;d<c.top&&(d+=o.height+e.height+r*2),u+o.width>c.right&&(u=c.right-o.width-i),d-=l.top,u-=l.left,n.style.opacity="1",n.style.transform=`translate(${u}px, ${d}px)`}function wl({editor:e,anchorElem:n,isLink:s,isBold:r,isItalic:i,isUnderline:a,isCode:o,isStrikethrough:l,isSubscript:c,isSuperscript:d}){const u=h.useRef(null),p=h.useCallback(()=>{s?e.dispatchCommand(de.TOGGLE_LINK_COMMAND,null):e.dispatchCommand(de.TOGGLE_LINK_COMMAND,"https://")},[e,s]);function m(v){u!=null&&u.current&&(v.buttons===1||v.buttons===3)&&(u.current.style.pointerEvents="none")}function f(v){u!=null&&u.current&&(u.current.style.pointerEvents="auto")}h.useEffect(()=>{if(u!=null&&u.current)return document.addEventListener("mousemove",m),document.addEventListener("mouseup",f),()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",f)}},[u]);const y=h.useCallback(()=>{const v=g.$getSelection(),b=u.current,x=window.getSelection();if(b===null)return;const w=e.getRootElement();if(v!==null&&x!==null&&!x.isCollapsed&&w!==null&&w.contains(x.anchorNode)){const k=xl(x,w);yl(k,b,n)}},[e,n]);return h.useEffect(()=>{const v=n.parentElement,b=()=>{e.getEditorState().read(()=>{y()})};return window.addEventListener("resize",b),v&&v.addEventListener("scroll",b),()=>{window.removeEventListener("resize",b),v&&v.removeEventListener("scroll",b)}},[e,y,n]),h.useEffect(()=>(e.getEditorState().read(()=>{y()}),te.mergeRegister(e.registerUpdateListener(({editorState:v})=>{v.read(()=>{y()})}),e.registerCommand(g.SELECTION_CHANGE_COMMAND,()=>(y(),!1),g.COMMAND_PRIORITY_LOW))),[e,y]),t.jsx("div",{ref:u,className:e.isEditable()&&"floating-text-format-popup",children:e.isEditable()&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>{e.dispatchCommand(g.FORMAT_TEXT_COMMAND,"bold")},className:"popup-item spaced "+(r?"active":""),"aria-label":"Format text as bold",children:t.jsx("i",{className:"format bold"})}),t.jsx("button",{onClick:()=>{e.dispatchCommand(g.FORMAT_TEXT_COMMAND,"italic")},className:"popup-item spaced "+(i?"active":""),"aria-label":"Format text as italics",children:t.jsx("i",{className:"format italic"})}),t.jsx("button",{onClick:()=>{e.dispatchCommand(g.FORMAT_TEXT_COMMAND,"underline")},className:"popup-item spaced "+(a?"active":""),"aria-label":"Format text to underlined",children:t.jsx("i",{className:"format underline"})}),t.jsx("button",{onClick:()=>{e.dispatchCommand(g.FORMAT_TEXT_COMMAND,"strikethrough")},className:"popup-item spaced "+(l?"active":""),"aria-label":"Format text with a strikethrough",children:t.jsx("i",{className:"format strikethrough"})}),t.jsx("button",{onClick:()=>{e.dispatchCommand(g.FORMAT_TEXT_COMMAND,"subscript")},className:"popup-item spaced "+(c?"active":""),title:"Subscript","aria-label":"Format Subscript",children:t.jsx("i",{className:"format subscript"})}),t.jsx("button",{onClick:()=>{e.dispatchCommand(g.FORMAT_TEXT_COMMAND,"superscript")},className:"popup-item spaced "+(d?"active":""),title:"Superscript","aria-label":"Format Superscript",children:t.jsx("i",{className:"format superscript"})}),t.jsx("button",{onClick:()=>{e.dispatchCommand(g.FORMAT_TEXT_COMMAND,"code")},className:"popup-item spaced "+(o?"active":""),"aria-label":"Insert code block",children:t.jsx("i",{className:"format code"})}),t.jsx("button",{onClick:p,className:"popup-item spaced "+(s?"active":""),"aria-label":"Insert link",children:t.jsx("i",{className:"format link"})})]})})}function vl(e,n){const[s,r]=h.useState(!1),[i,a]=h.useState(!1),[o,l]=h.useState(!1),[c,d]=h.useState(!1),[u,p]=h.useState(!1),[m,f]=h.useState(!1),[y,v]=h.useState(!1),[b,x]=h.useState(!1),[w,k]=h.useState(!1),T=h.useCallback(()=>{e.getEditorState().read(()=>{if(e.isComposing())return;const _=g.$getSelection(),N=window.getSelection(),j=e.getRootElement();if(N!==null&&(!g.$isRangeSelection(_)||j===null||!j.contains(N.anchorNode))){r(!1);return}if(!g.$isRangeSelection(_))return;const E=At(_);l(_.hasFormat("bold")),d(_.hasFormat("italic")),p(_.hasFormat("underline")),f(_.hasFormat("strikethrough")),v(_.hasFormat("subscript")),x(_.hasFormat("superscript")),k(_.hasFormat("code"));const C=E.getParent();de.$isLinkNode(C)||de.$isLinkNode(E)?a(!0):a(!1),!ge.$isCodeHighlightNode(_.anchor.getNode())&&_.getTextContent()!==""?r(g.$isTextNode(E)):r(!1);const M=_.getTextContent().replace(/\n/g,"");if(!_.isCollapsed()&&M===""){r(!1);return}})},[e]);return h.useEffect(()=>(document.addEventListener("selectionchange",T),()=>{document.removeEventListener("selectionchange",T)}),[T]),h.useEffect(()=>te.mergeRegister(e.registerUpdateListener(()=>{T()}),e.registerRootListener(()=>{e.getRootElement()===null&&r(!1)})),[e,T]),!s||i?null:Le.createPortal(t.jsx(wl,{editor:e,anchorElem:n,isLink:i,isBold:o,isItalic:c,isStrikethrough:m,isSubscript:y,isSuperscript:b,isUnderline:u,isCode:w}),n)}function Rs({anchorElem:e=document.body}){const[n]=ne.useLexicalComposerContext();return vl(n,e)}const jl=/(^|$|[^A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎↃↄⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〆〱-〵〻〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛥꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ])(congrats|congratulations|gratuluju|gratuluji|gratulujeme|blahopřeju|blahopřeji|blahopřejeme|Til lykke|Tillykke|Glückwunsch|Gratuliere|felicitaciones|enhorabuena|paljon onnea|onnittelut|Félicitations|gratula|gratulálok|gratulálunk|congratulazioni|complimenti|おめでとう|おめでとうございます|축하해|축하해요|gratulerer|Gefeliciteerd|gratulacje|Parabéns|parabéns|felicitações|felicitări|мои поздравления|поздравляем|поздравляю|gratulujem|blahoželám|ยินดีด้วย|ขอแสดงความยินดี|tebrikler|tebrik ederim|恭喜|祝贺你|恭喜你|恭喜|恭喜|baie geluk|veels geluk|অভিনন্দন|Čestitam|Čestitke|Čestitamo|Συγχαρητήρια|Μπράβο|અભિનંદન|badhai|बधाई|अभिनंदन|Честитам|Свака част|hongera|வாழ்த்துகள்|வாழ்த்துக்கள்|అభినందనలు|അഭിനന്ദനങ്ങൾ|Chúc mừng|מזל טוב|mazel tov|mazal tov)(^|$|[^A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎↃↄⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〆〱-〵〻〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛥꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ])/i;function Nl(){const[e]=ne.useLexicalComposerContext();h.useEffect(()=>{if(!e.hasNodes([et]))throw new Error("KeywordsPlugin: KeywordNode not registered on editor")},[e]);const n=h.useCallback(r=>br(r.getTextContent()),[]),s=h.useCallback(r=>{const i=jl.exec(r);if(i===null)return null;const a=i[2].length,o=i.index+i[1].length;return{end:o+a,start:o}},[]);return Ei.useLexicalTextEntity(s,et,n),null}function Ls(){return t.jsx($i.LinkPlugin,{validateUrl:pl})}function Cl(e){const n=e.getNodes();return n.length===0?new Set([e.anchor.getNode().getParentOrThrow(),e.focus.getNode().getParentOrThrow()]):new Set(n.map(s=>g.$isElementNode(s)?s:s.getParentOrThrow()))}function _l(e){const n=g.$getSelection();if(!g.$isRangeSelection(n))return!1;const s=Cl(n);let r=0;for(const i of s)if(xe.$isListNode(i))r=Math.max(xe.$getListDepth(i)+1,r);else if(xe.$isListItemNode(i)){const a=i.getParent();if(!xe.$isListNode(a))throw new Error("ListMaxIndentLevelPlugin: A ListItemNode must have a ListNode for a parent.");r=Math.max(xe.$getListDepth(a)+1,r)}return r<=e}function kl({maxDepth:e}){const[n]=ne.useLexicalComposerContext();return h.useEffect(()=>n.registerCommand(g.INDENT_CONTENT_COMMAND,()=>!_l(e??7),g.COMMAND_PRIORITY_CRITICAL),[n,e]),null}function Sl({maxLength:e}){const[n]=ne.useLexicalComposerContext();return h.useEffect(()=>{let s=null;return n.registerNodeTransform(g.RootNode,r=>{const i=g.$getSelection();if(!g.$isRangeSelection(i)||!i.isCollapsed())return;const a=n.getEditorState(),o=a.read(()=>r.getTextContentSize()),l=r.getTextContentSize();if(o!==l){const c=l-e,d=i.anchor;c>0&&(o===e&&s!==a?(s=a,te.$restoreEditorState(n,a)):he.trimTextContentFromAnchor(n,d,c))}})},[n,e]),null}const Tl=1,El=100;let Pr=0,Ds=!1;function $l(){window.addEventListener("keydown",e=>{e.keyCode===9&&(Pr=e.timeStamp)},!0)}function Ml(){const[e]=ne.useLexicalComposerContext();return h.useEffect(()=>(Ds||($l(),Ds=!0),e.registerCommand(g.FOCUS_COMMAND,n=>{const s=g.$getSelection();return g.$isRangeSelection(s)&&Pr+El>n.timeStamp&&g.$setSelection(s.clone()),!1},Tl)),[e]),null}const Il=["#d0021b","#f5a623","#f8e71c","#8b572a","#7ed321","#417505","#bd10e0","#9013fe","#4a90e2","#50e3c2","#b8e986","#000000","#4a4a4a","#9b9b9b","#ffffff"],Ct=214,Ps=150,Fe={"color-picker-wrapper":"p-[20px]","color-picker-basic-color":"flex flex-wrap gap-[10px] m-0 p-0","color-picker-basic-color-button":"border-[1px] border-[solid] border-[#ccc] rounded-[4px] h-[16px] w-[16px] cursor-pointer list-none","color-picker-basic-color-button.active":"[box-shadow:0px_0px_2px_2px_rgba(0,_0,_0,_0.3)]","color-picker-saturation":"w-full relative mt-[15px] h-[150px] bg-[linear-gradient(transparent,_black),_linear-gradient(to_right,_white,_transparent)] select-none","color-picker-saturation_cursor":"absolute w-[20px] h-[20px] border-[2px] border-[solid] border-[#ffffff] rounded-[50%] [box-shadow:0_0_15px_#00000026] box-border -translate-x-[10px] -translate-y-[10px]","color-picker-hue":"w-full relative mt-[15px] h-[12px] bg-[linear-gradient(_to_right,_rgb(255,_0,_0),_rgb(255,_255,_0),_rgb(0,_255,_0),_rgb(0,_255,_255),_rgb(0,_0,_255),_rgb(255,_0,_255),_rgb(255,_0,_0)_)] select-none rounded-[12px]","color-picker-hue_cursor":"absolute w-[20px] h-[20px] border-[2px] border-[solid] border-[#ffffff] rounded-full [box-shadow:#0003_0_0_0_0.5px] box-border -translate-x-[10px] -translate-y-[4px]","color-picker-color":"border-[1px] border-[solid] border-[#ccc] mt-[15px] w-full h-[20px]"};function Fr({color:e,onChange:n}){const[s,r]=h.useState(lt("hex",e)),[i,a]=h.useState(e),o=h.useRef(null),l=h.useMemo(()=>({x:s.hsv.s/100*Ct,y:(100-s.hsv.v)/100*Ps}),[s.hsv.s,s.hsv.v]),c=h.useMemo(()=>({x:s.hsv.h/360*Ct}),[s.hsv]),d=m=>{if(a(m),/^#[0-9A-Fa-f]{6}$/i.test(m)){const f=lt("hex",m);r(f)}},u=({x:m,y:f})=>{const y={...s.hsv,s:m/Ct*100,v:100-f/Ps*100},v=lt("hsv",y);r(v),a(v.hex)},p=({x:m})=>{const f={...s.hsv,h:m/Ct*360},y=lt("hsv",f);r(y),a(y.hex)};return h.useEffect(()=>{o.current!==null&&n&&(n(s.hex),a(s.hex))},[s,n]),h.useEffect(()=>{if(e===void 0)return;const m=lt("hex",e);r(m),a(m.hex)},[e]),t.jsxs("div",{className:`${Fe["color-picker-wrapper"]}`,style:{width:Ct},ref:o,children:[t.jsx(ft,{label:"Hex",onChange:d,value:i}),t.jsx("div",{className:`${Fe["color-picker-basic-color"]}`,children:Il.map(m=>t.jsx("button",{className:`${Fe["color-picker-basic-color-button"]} ${m===s.hex?Fe["color-picker-basic-color-button.active"]:""}`,style:{backgroundColor:m},onClick:()=>{a(m),r(lt("hex",m))}},m))}),t.jsx(Fs,{className:`${Fe["color-picker-saturation"]}`,style:{backgroundColor:`hsl(${s.hsv.h}, 100%, 50%)`},onChange:u,children:t.jsx("div",{className:`${Fe["color-picker-saturation_cursor"]}`,style:{backgroundColor:s.hex,left:l.x,top:l.y}})}),t.jsx(Fs,{className:`${Fe["color-picker-hue"]}`,onChange:p,children:t.jsx("div",{className:`${Fe["color-picker-hue_cursor"]}`,style:{backgroundColor:`hsl(${s.hsv.h}, 100%, 50%)`,left:c.x}})}),t.jsx("div",{className:`${Fe["color-picker-color"]}`,style:{backgroundColor:s.hex}})]})}function Fs({className:e,style:n,onChange:s,children:r}){const i=h.useRef(null),a=l=>{if(i.current){const{current:c}=i,{width:d,height:u,left:p,top:m}=c.getBoundingClientRect(),f=zs(l.clientX-p,d,0),y=zs(l.clientY-m,u,0);s({x:f,y})}},o=l=>{if(l.button!==0)return;a(l);const c=u=>{a(u)},d=u=>{document.removeEventListener("mousemove",c,!1),document.removeEventListener("mouseup",d,!1),a(u)};document.addEventListener("mousemove",c,!1),document.addEventListener("mouseup",d,!1)};return t.jsx("div",{ref:i,className:e,style:n,onMouseDown:o,children:r})}function zs(e,n,s){return e>n?n:e<s?s:e}function Bs(e){if(e.startsWith("#")){if(e.length===4||e.length===5)return e=e.split("").map((n,s)=>s?n+n:"#").join(""),e;if(e.length===7||e.length===9)return e}else{const n=document.createElement("canvas").getContext("2d");if(!n)throw new Error("2d context not supported or canvas already initialized");return n.fillStyle=e,n.fillStyle}return"#000000"}function Ws(e){const n=(e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(s,r,i,a)=>"#"+r+r+i+i+a+a).substring(1).match(/.{2}/g)||[]).map(s=>parseInt(s,16));return{b:n[2],g:n[1],r:n[0]}}function _n({r:e,g:n,b:s}){e/=255,n/=255,s/=255;const r=Math.max(e,n,s),i=r-Math.min(e,n,s),a=i?(r===e?(n-s)/i+(n<s?6:0):r===n?2+(s-e)/i:4+(e-n)/i)*60:0,o=r?i/r*100:0,l=r*100;return{h:a,s:o,v:l}}function Al({h:e,s:n,v:s}){n/=100,s/=100;const r=~~(e/60),i=e/60-r,a=s*(1-n),o=s*(1-n*i),l=s*(1-n*(1-i)),c=r%6,d=Math.round([s,o,a,a,l,s][c]*255),u=Math.round([l,s,s,o,a,a][c]*255);return{b:Math.round([a,a,l,s,s,o][c]*255),g:u,r:d}}function Hs({b:e,g:n,r:s}){return"#"+[s,n,e].map(r=>r.toString(16).padStart(2,"0")).join("")}function lt(e,n){let s=Bs("#121212"),r=Ws(s),i=_n(r);return e==="hex"?(s=Bs(n),r=Ws(s),i=_n(r)):e==="rgb"?(r=n,s=Hs(r),i=_n(r)):e==="hsv"&&(i=n,r=Al(i),s=Hs(r)),{hex:s,hsv:i,rgb:r}}function kn(e){const n=e.getShape();return{columns:n.toX-n.fromX+1,rows:n.toY-n.fromY+1}}function Ol(e){const n=e.getNodes(),s=[];let r=null,i=null,a=0;for(let o=0;o<n.length;o++){const l=n[o];if(L.$isTableCellNode(l)){const c=l.getParentOrThrow();if(Er(L.$isTableRowNode(c),"Expected CellNode to have a RowNode parent"),r!==c){if(i!==null&&a!==i)return!1;r!==null&&(i=a),r=c,a=0}const d=l.__colSpan;for(let u=0;u<d;u++)s[a+u]===void 0&&(s[a+u]=0),s[a+u]+=l.__rowSpan;a+=d}}return(i===null||a===i)&&s.every(o=>o===s[0])}function Rl(){const e=g.$getSelection();if(g.$isRangeSelection(e)&&!e.isCollapsed()||g.DEPRECATED_$isGridSelection(e)&&!e.anchor.is(e.focus)||!g.$isRangeSelection(e)&&!g.DEPRECATED_$isGridSelection(e))return!1;const[n]=g.DEPRECATED_$getNodeTriplet(e.anchor);return n.__colSpan>1||n.__rowSpan>1}function Us(e){if(e.getChildrenSize()!==1)return!1;const n=e.getFirstChildOrThrow();return!(!g.$isParagraphNode(n)||!n.isEmpty())}function Ll(e){const n=e.getLastDescendant();g.$isTextNode(n)?n.select():g.$isElementNode(n)?n.selectEnd():n!==null&&n.selectNext()}function qs(e){return e.getEditorState().read(()=>{const n=g.$getSelection();if(g.$isRangeSelection(n)||g.DEPRECATED_$isGridSelection(n)){const[s]=g.DEPRECATED_$getNodeTriplet(n.anchor);if(L.$isTableCellNode(s))return s.getBackgroundColor()}return null})}function Dl({onClose:e,tableCellNode:n,setIsMenuOpen:s,contextRef:r,cellMerge:i,showColorPickerModal:a}){const[o]=ne.useLexicalComposerContext(),l=h.useRef(null),[c,d]=h.useState(n),[u,p]=h.useState({columns:1,rows:1}),[m,f]=h.useState(!1),[y,v]=h.useState(!1),[b,x]=h.useState(()=>qs(o)||"");h.useEffect(()=>o.registerMutationListener(L.TableCellNode,P=>{P.get(c.getKey())==="updated"&&(o.getEditorState().read(()=>{d(c.getLatest())}),x(qs(o)||""))}),[o,c]),h.useEffect(()=>{o.getEditorState().read(()=>{const P=g.$getSelection();if(g.DEPRECATED_$isGridSelection(P)){const F=kn(P);p(kn(P)),f(Ol(P)&&(F.columns>1||F.rows>1))}v(Rl())})},[o]),h.useEffect(()=>{const P=r.current,F=l.current,Y=o.getRootElement();if(P!=null&&F!=null&&Y!=null){const V=Y.getBoundingClientRect(),H=P.getBoundingClientRect();F.style.opacity="1";const J=F.getBoundingClientRect(),D=5;let G=H.right+D;if(G+J.width>window.innerWidth||G+J.width>V.right){const ee=H.left-J.width-D;G=(ee<0?D:ee)+window.pageXOffset}F.style.left=`${G+window.pageXOffset}px`;let q=H.top;if(q+J.height>window.innerHeight){const ee=H.bottom-J.height;q=(ee<0?D:ee)+window.pageYOffset}F.style.top=`${q+ +window.pageYOffset}px`}},[r,l,o]),h.useEffect(()=>{function P(F){l.current!=null&&r.current!=null&&!l.current.contains(F.target)&&!r.current.contains(F.target)&&s(!1)}return window.addEventListener("click",P),()=>window.removeEventListener("click",P)},[s,r]);const w=h.useCallback(()=>{o.update(()=>{if(c.isAttached()){const F=L.$getTableNodeFromLexicalNodeOrThrow(c),Y=o.getElementByKey(F.getKey());if(!Y)throw new Error("Expected to find tableElement in DOM");const V=L.getTableSelectionFromTableElement(Y);V!==null&&V.clearHighlight(),F.markDirty(),d(c.getLatest())}g.$getRoot().selectStart()})},[o,c]),k=()=>{o.update(()=>{const P=g.$getSelection();if(g.DEPRECATED_$isGridSelection(P)){const{columns:F,rows:Y}=kn(P),V=P.getNodes();let H=null;for(let J=0;J<V.length;J++){const D=V[J];if(g.DEPRECATED_$isGridCellNode(D))if(H===null){D.setColSpan(F).setRowSpan(Y),H=D;const G=Us(D);let q;G&&g.$isParagraphNode(q=D.getFirstChild())&&q.remove()}else g.DEPRECATED_$isGridCellNode(H)&&(Us(D)||H.append(...D.getChildren()),D.remove())}H!==null&&(H.getChildrenSize()===0&&H.append(g.$createParagraphNode()),Ll(H)),e()}})},T=()=>{o.update(()=>{L.$unmergeCell()})},_=h.useCallback(P=>{o.update(()=>{L.$insertTableRow__EXPERIMENTAL(P),e()})},[o,e]),N=h.useCallback(P=>{o.update(()=>{for(let F=0;F<u.columns;F++)L.$insertTableColumn__EXPERIMENTAL(P);e()})},[o,e,u.columns]),j=h.useCallback(()=>{o.update(()=>{L.$deleteTableRow__EXPERIMENTAL(),e()})},[o,e]),E=h.useCallback(()=>{o.update(()=>{L.$getTableNodeFromLexicalNodeOrThrow(c).remove(),w(),e()})},[o,c,w,e]),C=h.useCallback(()=>{o.update(()=>{L.$deleteTableColumn__EXPERIMENTAL(),e()})},[o,e]),M=h.useCallback(()=>{o.update(()=>{const P=L.$getTableNodeFromLexicalNodeOrThrow(c),F=L.$getTableRowIndexFromTableCellNode(c),Y=P.getChildren();if(F>=Y.length||F<0)throw new Error("Expected table cell to be inside of table row.");const V=Y[F];if(!L.$isTableRowNode(V))throw new Error("Expected table row");V.getChildren().forEach(H=>{if(!L.$isTableCellNode(H))throw new Error("Expected table cell");H.toggleHeaderStyle(L.TableCellHeaderStates.ROW)}),w(),e()})},[o,c,w,e]),A=h.useCallback(()=>{o.update(()=>{const P=L.$getTableNodeFromLexicalNodeOrThrow(c),F=L.$getTableColumnIndexFromTableCellNode(c),Y=P.getChildren();for(let V=0;V<Y.length;V++){const H=Y[V];if(!L.$isTableRowNode(H))throw new Error("Expected table row");const J=H.getChildren();if(F>=J.length||F<0)throw new Error("Expected table cell to be inside of table row.");const D=J[F];if(!L.$isTableCellNode(D))throw new Error("Expected table cell");D.toggleHeaderStyle(L.TableCellHeaderStates.COLUMN)}w(),e()})},[o,c,w,e]),W=h.useCallback(P=>{o.update(()=>{const F=g.$getSelection();if(g.$isRangeSelection(F)||g.DEPRECATED_$isGridSelection(F)){const[Y]=g.DEPRECATED_$getNodeTriplet(F.anchor);L.$isTableCellNode(Y)&&Y.setBackgroundColor(P)}})},[o]);let $=null;return i&&(m?$=t.jsx("button",{className:"item",onClick:()=>k(),"data-test-id":"table-merge-cells",children:"Merge cells"}):y&&($=t.jsx("button",{className:"item",onClick:()=>T(),"data-test-id":"table-unmerge-cells",children:"Unmerge cells"}))),Le.createPortal(t.jsxs("div",{className:"dropdown",ref:l,onClick:P=>{P.stopPropagation()},children:[$,t.jsx("button",{className:"item",onClick:()=>a("Cell background color",()=>t.jsx(Fr,{color:b,onChange:W})),"data-test-id":"table-background-color",children:t.jsx("span",{className:"text",children:"Background color"})}),t.jsx("hr",{}),t.jsx("button",{className:"item",onClick:()=>_(!1),"data-test-id":"table-insert-row-above",children:t.jsxs("span",{className:"text",children:["Insert"," ",u.rows===1?"row":`${u.rows} rows`," ","above"]})}),t.jsx("button",{className:"item",onClick:()=>_(!0),"data-test-id":"table-insert-row-below",children:t.jsxs("span",{className:"text",children:["Insert"," ",u.rows===1?"row":`${u.rows} rows`," ","below"]})}),t.jsx("hr",{}),t.jsx("button",{className:"item",onClick:()=>N(!1),"data-test-id":"table-insert-column-before",children:t.jsxs("span",{className:"text",children:["Insert"," ",u.columns===1?"column":`${u.columns} columns`," ","left"]})}),t.jsx("button",{className:"item",onClick:()=>N(!0),"data-test-id":"table-insert-column-after",children:t.jsxs("span",{className:"text",children:["Insert"," ",u.columns===1?"column":`${u.columns} columns`," ","right"]})}),t.jsx("hr",{}),t.jsx("button",{className:"item",onClick:()=>C(),"data-test-id":"table-delete-columns",children:t.jsx("span",{className:"text",children:"Delete column"})}),t.jsx("button",{className:"item",onClick:()=>j(),"data-test-id":"table-delete-rows",children:t.jsx("span",{className:"text",children:"Delete row"})}),t.jsx("button",{className:"item",onClick:()=>E(),"data-test-id":"table-delete",children:t.jsx("span",{className:"text",children:"Delete table"})}),t.jsx("hr",{}),t.jsx("button",{className:"item",onClick:()=>M(),children:t.jsxs("span",{className:"text",children:[(c.__headerState&L.TableCellHeaderStates.ROW)===L.TableCellHeaderStates.ROW?"Remove":"Add"," ","row header"]})}),t.jsx("button",{className:"item",onClick:()=>A(),children:t.jsxs("span",{className:"text",children:[(c.__headerState&L.TableCellHeaderStates.COLUMN)===L.TableCellHeaderStates.COLUMN?"Remove":"Add"," ","column header"]})})]}),document.body)}function Pl({anchorElem:e,cellMerge:n}){const[s]=ne.useLexicalComposerContext(),r=h.useRef(null),i=h.useRef(null),[a,o]=h.useState(!1),[l,c]=h.useState(null),[d,u]=Rt(),p=h.useCallback(()=>{const f=r.current,y=g.$getSelection(),v=window.getSelection(),b=document.activeElement;if(y==null||f==null){c(null);return}const x=s.getRootElement();if(g.$isRangeSelection(y)&&x!==null&&v!==null&&x.contains(v.anchorNode)){const w=L.$getTableCellNodeFromLexicalNode(y.anchor.getNode());if(w==null){c(null);return}if(s.getElementByKey(w.getKey())==null){c(null);return}c(w)}else b||c(null)},[s]);h.useEffect(()=>s.registerUpdateListener(()=>{s.getEditorState().read(()=>{p()})})),h.useEffect(()=>{const f=r.current;if(f!=null&&l!=null){const y=s.getElementByKey(l.getKey());if(y!=null){const v=y.getBoundingClientRect(),b=f.getBoundingClientRect(),x=e.getBoundingClientRect(),w=v.top-x.top+4,k=v.right-b.width-10-x.left;f.style.opacity="1",f.style.transform=`translate(${k}px, ${w}px)`}else f.style.opacity="0",f.style.transform="translate(-10000px, -10000px)"}},[r,l,s,e]);const m=h.useRef(l);return h.useEffect(()=>{m.current!==l&&o(!1),m.current=l},[m,l]),t.jsx("div",{className:"table-cell-action-button-container",ref:r,children:l!=null&&t.jsxs(t.Fragment,{children:[t.jsx("button",{className:"table-cell-action-button chevron-down",onClick:f=>{f.stopPropagation(),o(!a)},ref:i,children:t.jsx("i",{className:"chevron-down"})}),d,a&&t.jsx(Dl,{contextRef:i,setIsMenuOpen:o,onClose:()=>o(!1),tableCellNode:l,cellMerge:n,showColorPickerModal:u})]})})}function Fl({anchorElem:e=document.body,cellMerge:n=!1}){const s=dr();return Le.createPortal(s?t.jsx(Pl,{anchorElem:e,cellMerge:n}):null,e)}const zl=33,Bl=50;function Wl({editor:e}){const n=h.useRef(null),s=h.useRef(null),r=h.useRef(null),i=h.useRef(null),[a,o]=h.useState(null),[l,c]=h.useState(null),[d,u]=h.useState(!1),[p,m]=h.useState(null);h.useEffect(()=>e.registerCommand(g.SELECTION_CHANGE_COMMAND,_=>{const N=g.$getSelection(),j=L.$isTableSelection(N);return d!==j&&u(j),!1},g.COMMAND_PRIORITY_HIGH));const f=h.useCallback(()=>{c(null),n.current=null,m(null),i.current=null,r.current=null},[]);h.useEffect(()=>{const _=N=>{setTimeout(()=>{const j=N.target;if(p){o({x:N.clientX,y:N.clientY});return}if(!(s.current&&s.current.contains(j))&&n.current!==j){n.current=j;const E=L.getDOMCellFromTarget(j);E&&l!==E?e.update(()=>{const C=g.$getNearestNodeFromDOMNode(E.elem);if(!C)throw new Error("TableCellResizer: Table cell node not found.");const M=L.$getTableNodeFromLexicalNodeOrThrow(C),A=e.getElementByKey(M.getKey());if(!A)throw new Error("TableCellResizer: Table element not found.");n.current=j,r.current=A.getBoundingClientRect(),c(E)}):E==null&&f()}},0)};return document.addEventListener("mousemove",_),()=>{document.removeEventListener("mousemove",_)}},[l,p,e,f]);const y=_=>_==="bottom",v=h.useCallback(_=>{if(!l)throw new Error("TableCellResizer: Expected active cell.");e.update(()=>{const N=g.$getNearestNodeFromDOMNode(l.elem);if(!L.$isTableCellNode(N))throw new Error("TableCellResizer: Table cell node not found.");const j=L.$getTableNodeFromLexicalNodeOrThrow(N),E=L.$getTableRowIndexFromTableCellNode(N),C=j.getChildren();if(E>=C.length||E<0)throw new Error("Expected table cell to be inside of table row.");const M=C[E];if(!L.$isTableRowNode(M))throw new Error("Expected table row");M.setHeight(_)})},[l,e]),b=h.useCallback(_=>{if(!l)throw new Error("TableCellResizer: Expected active cell.");e.update(()=>{const N=g.$getNearestNodeFromDOMNode(l.elem);if(!L.$isTableCellNode(N))throw new Error("TableCellResizer: Table cell node not found.");const j=L.$getTableNodeFromLexicalNodeOrThrow(N),E=L.$getTableColumnIndexFromTableCellNode(N),C=j.getChildren();for(let M=0;M<C.length;M++){const A=C[M];if(!L.$isTableRowNode(A))throw new Error("Expected table row");const W=A.getChildren(),F=W.map(V=>V.getColSpan()).reduce((V,H)=>{const J=V[V.length-1]??0;return V.push(J+H),V},[]).findIndex(V=>V>E);if(F>=W.length||F<0)throw new Error("Expected table cell to be inside of table row.");const Y=W[F];if(!L.$isTableCellNode(Y))throw new Error("Expected table cell");Y.setWidth(_)}})},[l,e]),x=h.useCallback(_=>{const N=j=>{if(j.preventDefault(),j.stopPropagation(),!l)throw new Error("TableCellResizer: Expected active cell.");if(i.current){const{x:E,y:C}=i.current;if(l===null)return;if(y(_)){const M=l.elem.getBoundingClientRect().height,A=Math.abs(j.clientY-C),W=_==="bottom"&&C>j.clientY;v(Math.max(W?M-A:A+M,zl))}else{const M=getComputedStyle(l.elem);let A=l.elem.clientWidth;A-=parseFloat(M.paddingLeft)+parseFloat(M.paddingRight);const W=Math.abs(j.clientX-E),$=_==="right"&&E>j.clientX;b(Math.max($?A-W:W+A,Bl))}f(),document.removeEventListener("mouseup",N)}};return N},[l,f,b,v]),w=h.useCallback(_=>N=>{if(N.preventDefault(),N.stopPropagation(),!l)throw new Error("TableCellResizer: Expected active cell.");i.current={x:N.clientX,y:N.clientY},o(i.current),m(_),document.addEventListener("mouseup",x(_))},[l,x]),T=h.useCallback(()=>{if(l){const{height:_,width:N,top:j,left:E}=l.elem.getBoundingClientRect(),C={bottom:{backgroundColor:"none",cursor:"row-resize",height:"10px",left:`${window.pageXOffset+E}px`,top:`${window.pageYOffset+j+_}px`,width:`${N}px`},right:{backgroundColor:"none",cursor:"col-resize",height:`${_}px`,left:`${window.pageXOffset+E+N}px`,top:`${window.pageYOffset+j}px`,width:"10px"}},M=r.current;return p&&a&&M&&(y(p)?(C[p].left=`${window.pageXOffset+M.left}px`,C[p].top=`${window.pageYOffset+a.y}px`,C[p].height="3px",C[p].width=`${M.width}px`):(C[p].top=`${window.pageYOffset+M.top}px`,C[p].left=`${window.pageXOffset+a.x}px`,C[p].width="3px",C[p].height=`${M.height}px`),C[p].backgroundColor="#adf"),C}return{bottom:null,left:null,right:null,top:null}},[l,p,a])();return t.jsx("div",{ref:s,children:l!=null&&!d&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"TableCellResizer__resizer TableCellResizer__ui",style:T.right||void 0,onMouseDown:w("right")}),t.jsx("div",{className:"TableCellResizer__resizer TableCellResizer__ui",style:T.bottom||void 0,onMouseDown:w("bottom")})]})})}function Hl(){const[e]=ne.useLexicalComposerContext(),n=dr();return h.useMemo(()=>n?Le.createPortal(t.jsx(Wl,{editor:e}),document.body):null,[e,n])}const en=624,zr=9;function Ul(e){if(e==="h2")return"heading2";if(e==="h3")return"heading3"}function ql(e){const n=e==null?void 0:e.getClientRects()[0].y;return n>=en&&n<=en+zr}function Ht(e){return(e==null?void 0:e.getClientRects()[0].y)<en}function Sn(e){return(e==null?void 0:e.getClientRects()[0].y)>=en+zr}function Vl({tableOfContents:e}){const[n,s]=h.useState(""),r=h.useRef(0),[i]=ne.useLexicalComposerContext();function a(o,l){i.getEditorState().read(()=>{const c=i.getElementByKey(o);c!==null&&(c.scrollIntoView(),s(o),r.current=l)})}return h.useEffect(()=>{function o(){if(e.length!==0&&r.current<e.length-1){let u=i.getElementByKey(e[r.current][0]);if(u!==null){if(Sn(u)){for(;u!==null&&Sn(u)&&r.current>0;){const m=i.getElementByKey(e[r.current-1][0]);m!==null&&(Ht(m)||Sn(m))&&r.current--,u=m}const p=e[r.current][0];s(p)}else if(Ht(u)){for(;u!==null&&Ht(u)&&r.current<e.length-1;){const m=i.getElementByKey(e[r.current+1][0]);m!==null&&(ql(m)||Ht(m))&&r.current++,u=m}const p=e[r.current][0];s(p)}}}else r.current=0}let l;function c(u,p){clearTimeout(l),l=setTimeout(u,p)}function d(){c(o,10)}return document.addEventListener("scroll",d),()=>document.removeEventListener("scroll",d)},[e,i]),t.jsx("div",{className:"table-of-contents",children:t.jsx("ul",{className:"headings",children:e.map(([o,l,c],d)=>d===0?t.jsxs("div",{className:"normal-heading-wrapper",children:[t.jsx("div",{className:"first-heading",onClick:()=>a(o,d),role:"button",tabIndex:0,children:(""+l).length>20?l.substring(0,20)+"...":l}),t.jsx("br",{})]},o):t.jsx("div",{className:`normal-heading-wrapper ${n===o?"selected-heading-wrapper":""}`,children:t.jsx("div",{onClick:()=>a(o,d),role:"button",className:Ul(c),tabIndex:0,children:t.jsx("li",{className:`normal-heading ${n===o?"selected-heading":""}
                    `,children:(""+l).length>27?l.substring(0,27)+"...":l})})},o))})})}function Yl(){return t.jsx(Mi,{children:e=>t.jsx(Vl,{tableOfContents:e})})}const Gl=Ot&&"documentMode"in document?document.documentMode:null,Vs=Ot&&/Mac|iPod|iPhone|iPad/.test(navigator.platform);Ot&&"InputEvent"in window&&!Gl&&"getTargetRanges"in new window.InputEvent("input");const Br=h.createContext(null),Ys=4;function X({children:e,className:n,onClick:s,title:r}){const i=h.useRef(null),a=h.useContext(Br);if(a===null)throw new Error("DropDownItem must be used within a DropDown");const{registerItem:o}=a;return h.useEffect(()=>{i&&i.current&&o(i)},[i,o]),t.jsx("button",{className:n,onClick:s,ref:i,title:r,type:"button",children:e})}function Jl({children:e,dropDownRef:n,onClose:s}){const[r,i]=h.useState(),[a,o]=h.useState(),l=h.useCallback(u=>{i(p=>p?[...p,u]:[u])},[i]),c=u=>{if(!r)return;const p=u.key;["Escape","ArrowUp","ArrowDown","Tab"].includes(p)&&u.preventDefault(),p==="Escape"||p==="Tab"?s():p==="ArrowUp"?o(m=>{if(!m)return r[0];const f=r.indexOf(m)-1;return r[f===-1?r.length-1:f]}):p==="ArrowDown"&&o(m=>m?r[r.indexOf(m)+1]:r[0])},d=h.useMemo(()=>({registerItem:l}),[l]);return h.useEffect(()=>{r&&!a&&o(r[0]),a&&a.current&&a.current.focus()},[r,a]),t.jsx(Br.Provider,{value:d,children:t.jsx("div",{className:"dropdown",ref:n,onKeyDown:c,children:e})})}function Ze({disabled:e=!1,buttonLabel:n,buttonAriaLabel:s,buttonClassName:r,buttonIconClassName:i,children:a,stopCloseOnClickSelf:o}){const l=h.useRef(null),c=h.useRef(null),[d,u]=h.useState(!1),p=()=>{u(!1),c&&c.current&&c.current.focus()};return h.useEffect(()=>{const m=c.current,f=l.current;if(d&&m!==null&&f!==null){const{top:y,left:v}=m.getBoundingClientRect();f.style.top=`${y+m.offsetHeight+Ys}px`,f.style.left=`${Math.min(v,window.innerWidth-f.offsetWidth-20)}px`}},[l,c,d]),h.useEffect(()=>{const m=c.current;if(m!==null&&d){const f=y=>{const v=y.target;o&&l.current&&l.current.contains(v)||m.contains(v)||u(!1)};return document.addEventListener("click",f),()=>{document.removeEventListener("click",f)}}},[l,c,d,o]),h.useEffect(()=>{const m=()=>{if(d){const f=c.current,y=l.current;if(f!==null&&y!==null){const{top:v}=f.getBoundingClientRect(),b=v+f.offsetHeight+Ys;b!==y.getBoundingClientRect().top&&(y.style.top=`${b}px`)}}};return document.addEventListener("scroll",m),()=>{document.removeEventListener("scroll",m)}},[c,l,d]),t.jsxs(t.Fragment,{children:[t.jsxs("button",{type:"button",disabled:e,"aria-label":s||n,className:r,onClick:()=>u(!d),ref:c,children:[i&&t.jsx("span",{className:i}),n&&t.jsx("span",{className:"text dropdown-button-text",children:n}),t.jsx("i",{className:"chevron-down"})]}),d&&Le.createPortal(t.jsx(Jl,{dropDownRef:l,onClose:p,children:a}),document.body)]})}function Gs({disabled:e=!1,stopCloseOnClickSelf:n=!0,color:s,onChange:r,...i}){return t.jsx(Ze,{...i,disabled:e,stopCloseOnClickSelf:n,children:t.jsx(Fr,{color:s,onChange:r})})}const Dn={bullet:"Bulleted List",check:"Check List",code:"Code Block",h1:"Heading 1",h2:"Heading 2",h3:"Heading 3",h4:"Heading 4",h5:"Heading 5",h6:"Heading 6",number:"Numbered List",paragraph:"Normal",quote:"Quote"};function Kl(){const e=[];for(const[n,s]of Object.entries(ge.CODE_LANGUAGE_FRIENDLY_NAME_MAP))e.push([n,s]);return e}const Xl=Kl(),_t={center:{icon:"center-align",iconRTL:"right-align",name:"Center Align"},end:{icon:"right-align",iconRTL:"left-align",name:"End Align"},justify:{icon:"justify-align",iconRTL:"justify-align",name:"Justify Align"},left:{icon:"left-align",iconRTL:"left-align",name:"Left Align"},right:{icon:"right-align",iconRTL:"left-align",name:"Right Align"},start:{icon:"left-align",iconRTL:"right-align",name:"Start Align"}};function Ce(e){return e?"active dropdown-item-active":""}function Zl({editor:e,blockType:n,rootType:s,disabled:r=!1}){const i=()=>{e.update(()=>{const p=g.$getSelection();g.$isRangeSelection(p)&&he.$setBlocksType(p,()=>g.$createParagraphNode())})},a=p=>{n!==p&&e.update(()=>{const m=g.$getSelection();he.$setBlocksType(m,()=>ke.$createHeadingNode(p))})},o=()=>{n!=="bullet"?e.dispatchCommand(xe.INSERT_UNORDERED_LIST_COMMAND,void 0):i()},l=()=>{n!=="check"?e.dispatchCommand(xe.INSERT_CHECK_LIST_COMMAND,void 0):i()},c=()=>{n!=="number"?e.dispatchCommand(xe.INSERT_ORDERED_LIST_COMMAND,void 0):i()},d=()=>{n!=="quote"&&e.update(()=>{const p=g.$getSelection();he.$setBlocksType(p,()=>ke.$createQuoteNode())})},u=()=>{n!=="code"&&e.update(()=>{let p=g.$getSelection();if(p!==null)if(p.isCollapsed())he.$setBlocksType(p,()=>ge.$createCodeNode());else{const m=p.getTextContent(),f=ge.$createCodeNode();p.insertNodes([f]),p=g.$getSelection(),g.$isRangeSelection(p)&&p.insertRawText(m)}})};return t.jsxs(Ze,{disabled:r,buttonClassName:"toolbar-item block-controls",buttonIconClassName:"icon block-type "+n,buttonLabel:Dn[n],buttonAriaLabel:"Formatting options for text style",children:[t.jsxs(X,{className:"item "+Ce(n==="paragraph"),onClick:i,children:[t.jsx("i",{className:"icon paragraph"}),t.jsx("span",{className:"text",children:"Normal"})]}),t.jsxs(X,{className:"item "+Ce(n==="h1"),onClick:()=>a("h1"),children:[t.jsx("i",{className:"icon h1"}),t.jsx("span",{className:"text",children:"Heading 1"})]}),t.jsxs(X,{className:"item "+Ce(n==="h2"),onClick:()=>a("h2"),children:[t.jsx("i",{className:"icon h2"}),t.jsx("span",{className:"text",children:"Heading 2"})]}),t.jsxs(X,{className:"item "+Ce(n==="h3"),onClick:()=>a("h3"),children:[t.jsx("i",{className:"icon h3"}),t.jsx("span",{className:"text",children:"Heading 3"})]}),t.jsxs(X,{className:"item "+Ce(n==="h4"),onClick:()=>a("h4"),children:[t.jsx("i",{className:"icon h4"}),t.jsx("span",{className:"text",children:"Heading 4"})]}),t.jsxs(X,{className:"item "+Ce(n==="bullet"),onClick:o,children:[t.jsx("i",{className:"icon bullet-list"}),t.jsx("span",{className:"text",children:"Bullet List"})]}),t.jsxs(X,{className:"item "+Ce(n==="number"),onClick:c,children:[t.jsx("i",{className:"icon numbered-list"}),t.jsx("span",{className:"text",children:"Numbered List"})]}),t.jsxs(X,{className:"item "+Ce(n==="check"),onClick:l,children:[t.jsx("i",{className:"icon check-list"}),t.jsx("span",{className:"text",children:"Check List"})]}),t.jsxs(X,{className:"item "+Ce(n==="quote"),onClick:d,children:[t.jsx("i",{className:"icon quote"}),t.jsx("span",{className:"text",children:"Quote"})]}),t.jsxs(X,{className:"item "+Ce(n==="code"),onClick:u,children:[t.jsx("i",{className:"icon code"}),t.jsx("span",{className:"text",children:"Code Block"})]})]})}function dt(){return t.jsx("div",{className:"divider"})}function Ql({editor:e,value:n,isRTL:s,disabled:r=!1}){const i=_t[n||"left"];return t.jsxs(Ze,{disabled:r,buttonLabel:i.name,buttonIconClassName:`icon ${s?i.iconRTL:i.icon}`,buttonClassName:"toolbar-item spaced alignment",buttonAriaLabel:"Formatting options for text alignment",children:[t.jsxs(X,{onClick:()=>{e.dispatchCommand(g.FORMAT_ELEMENT_COMMAND,"left")},className:"item",children:[t.jsx("i",{className:"icon left-align"}),t.jsx("span",{className:"text",children:"Left Align"})]}),t.jsxs(X,{onClick:()=>{e.dispatchCommand(g.FORMAT_ELEMENT_COMMAND,"center")},className:"item",children:[t.jsx("i",{className:"icon center-align"}),t.jsx("span",{className:"text",children:"Center Align"})]}),t.jsxs(X,{onClick:()=>{e.dispatchCommand(g.FORMAT_ELEMENT_COMMAND,"right")},className:"item",children:[t.jsx("i",{className:"icon right-align"}),t.jsx("span",{className:"text",children:"Right Align"})]}),t.jsxs(X,{onClick:()=>{e.dispatchCommand(g.FORMAT_ELEMENT_COMMAND,"justify")},className:"item",children:[t.jsx("i",{className:"icon justify-align"}),t.jsx("span",{className:"text",children:"Justify Align"})]}),t.jsxs(X,{onClick:()=>{e.dispatchCommand(g.FORMAT_ELEMENT_COMMAND,"start")},className:"item",children:[t.jsx("i",{className:`icon ${s?_t.start.iconRTL:_t.start.icon}`}),t.jsx("span",{className:"text",children:"Start Align"})]}),t.jsxs(X,{onClick:()=>{e.dispatchCommand(g.FORMAT_ELEMENT_COMMAND,"end")},className:"item",children:[t.jsx("i",{className:`icon ${s?_t.end.iconRTL:_t.end.icon}`}),t.jsx("span",{className:"text",children:"End Align"})]}),t.jsx(dt,{}),t.jsxs(X,{onClick:()=>{e.dispatchCommand(g.OUTDENT_CONTENT_COMMAND,void 0)},className:"item",children:[t.jsx("i",{className:"icon "+(s?"indent":"outdent")}),t.jsx("span",{className:"text",children:"Outdent"})]}),t.jsxs(X,{onClick:()=>{e.dispatchCommand(g.INDENT_CONTENT_COMMAND,void 0)},className:"item",children:[t.jsx("i",{className:"icon "+(s?"outdent":"indent")}),t.jsx("span",{className:"text",children:"Indent"})]})]})}function ec({setIsLinkEditMode:e}){const[n]=ne.useLexicalComposerContext(),[s,r]=h.useState(n),[i,a]=h.useState("paragraph"),[o,l]=h.useState("root"),[c,d]=h.useState(null),[u,p]=h.useState("15px"),[m,f]=h.useState("#000"),[y,v]=h.useState("#dfe6ef"),[b,x]=h.useState("Arial"),[w,k]=h.useState("left"),[T,_]=h.useState(!1),[N,j]=h.useState(!1),[E,C]=h.useState(!1),[M,A]=h.useState(!1),[W,$]=h.useState(!1),[P,F]=h.useState(!1),[Y,V]=h.useState(!1),[H,J]=h.useState(!1),[D,G]=h.useState(!1),[q,ee]=h.useState(!1),[O,S]=Rt(),[R,U]=h.useState(!1),[Q,K]=h.useState(""),[Z,ot]=h.useState(()=>n.isEditable()),De=h.useCallback(()=>{const B=g.$getSelection();if(g.$isRangeSelection(B)){const re=B.anchor.getNode();let ue=re.getKey()==="root"?re:te.$findMatchingParent(re,Re=>{const ae=Re.getParent();return ae!==null&&g.$isRootOrShadowRoot(ae)});ue===null&&(ue=re.getTopLevelElementOrThrow());const Oe=ue.getKey(),ie=s.getElementByKey(Oe);j(B.hasFormat("bold")),C(B.hasFormat("italic")),A(B.hasFormat("underline")),$(B.hasFormat("strikethrough")),F(B.hasFormat("subscript")),V(B.hasFormat("superscript")),J(B.hasFormat("code")),U(he.$isParentElementRTL(B));const Te=At(B),Ge=Te.getParent();de.$isLinkNode(Ge)||de.$isLinkNode(Te)?_(!0):_(!1);const Bt=te.$findMatchingParent(Te,L.$isTableNode);if(L.$isTableNode(Bt)?l("table"):l("root"),ie!==null)if(d(Oe),xe.$isListNode(ue)){const Re=te.$getNearestNodeOfType(re,xe.ListNode),ae=Re?Re.getListType():ue.getListType();a(ae)}else{const Re=ke.$isHeadingNode(ue)?ue.getTag():ue.getType();if(Re in Dn&&a(Re),ge.$isCodeNode(ue)){const ae=ue.getLanguage();K(ae?ge.CODE_LANGUAGE_MAP[ae]||ae:"");return}}p(he.$getSelectionStyleValueForProperty(B,"font-size","15px")),f(he.$getSelectionStyleValueForProperty(B,"color","#000")),v(he.$getSelectionStyleValueForProperty(B,"background-color","#dfe6ef")),x(he.$getSelectionStyleValueForProperty(B,"font-family","Arial")),k((g.$isElementNode(Te)?Te.getFormatType():Ge==null?void 0:Ge.getFormatType())||"left")}},[s]);h.useEffect(()=>n.registerCommand(g.SELECTION_CHANGE_COMMAND,(B,re)=>(De(),r(re),!1),g.COMMAND_PRIORITY_CRITICAL),[n,De]),h.useEffect(()=>(Z!==n.isEditable()&&ot(n.isEditable()),te.mergeRegister(n.registerEditableListener(B=>{ot(B)}),s.registerUpdateListener(({editorState:B})=>{B.read(()=>{De()})}),s.registerCommand(g.CAN_UNDO_COMMAND,B=>(G(B),!1),g.COMMAND_PRIORITY_CRITICAL),s.registerCommand(g.CAN_REDO_COMMAND,B=>(ee(B),!1),g.COMMAND_PRIORITY_CRITICAL))),[De,s,n]),h.useEffect(()=>s.registerCommand(g.KEY_MODIFIER_COMMAND,B=>{const re=B,{code:ue,ctrlKey:Oe,metaKey:ie}=re;return ue==="KeyK"&&(Oe||ie)?(re.preventDefault(),e(!T),s.dispatchCommand(de.TOGGLE_LINK_COMMAND,Qt("https://"))):!1},g.COMMAND_PRIORITY_NORMAL),[s,T,e]);const se=h.useCallback((B,re)=>{s.update(()=>{const ue=g.$getSelection();ue!==null&&he.$patchStyleText(ue,B)},re?{tag:"historic"}:{})},[s]),at=h.useCallback(()=>{s.update(()=>{const B=g.$getSelection();if(g.$isRangeSelection(B)){const re=B.anchor,ue=B.focus,Oe=B.getNodes();if(re.key===ue.key&&re.offset===ue.offset)return;Oe.forEach((ie,Te)=>{g.$isTextNode(ie)?(Te===0&&re.offset!==0&&(ie=ie.splitText(re.offset)[1]||ie),Te===Oe.length-1&&(ie=ie.splitText(ue.offset)[0]||ie),ie.__style!==""&&ie.setStyle(""),ie.__format!==0&&(ie.setFormat(0),te.$getNearestBlockElementAncestorOrThrow(ie).setFormat(""))):ke.$isHeadingNode(ie)||ke.$isQuoteNode(ie)?ie.replace(g.$createParagraphNode(),!0):Un.$isDecoratorBlockNode(ie)&&ie.setFormat("")})}})},[s]),bn=h.useCallback(B=>{se({color:B})},[se]),Pe=h.useCallback(B=>{se({"background-color":B}),se({padding:"4px 12px"}),se({border:"1px solid"}),se({"border-color":"#60a5fa"}),se({"border-radius":"8px"})},[se]);h.useCallback(()=>{T?n.dispatchCommand(de.TOGGLE_LINK_COMMAND,null):n.dispatchCommand(de.TOGGLE_LINK_COMMAND,Qt("https://"))},[n,T]);const yn=h.useCallback(B=>{s.update(()=>{if(c!==null){const re=g.$getNodeByKey(c);ge.$isCodeNode(re)&&re.setLanguage(B)}})},[s,c]);return Z?t.jsxs("div",{className:"toolbar",children:[t.jsx("button",{disabled:!D||!Z,onClick:()=>{s.dispatchCommand(g.UNDO_COMMAND,void 0)},title:Vs?"Undo (⌘Z)":"Undo (Ctrl+Z)",type:"button",className:"toolbar-item spaced","aria-label":"Undo",children:t.jsx("i",{className:"format undo"})}),t.jsx("button",{disabled:!q||!Z,onClick:()=>{s.dispatchCommand(g.REDO_COMMAND,void 0)},title:Vs?"Redo (⌘Y)":"Redo (Ctrl+Y)",type:"button",className:"toolbar-item","aria-label":"Redo",children:t.jsx("i",{className:"format redo"})}),t.jsx(dt,{}),i in Dn&&s===n&&t.jsxs(t.Fragment,{children:[t.jsx(Zl,{disabled:!Z,blockType:i,rootType:o,editor:n}),t.jsx(dt,{})]}),i==="code"?t.jsx(Ze,{disabled:!Z,buttonClassName:"toolbar-item code-language",buttonLabel:ge.getLanguageFriendlyName(Q),buttonAriaLabel:"Select language",children:Xl.map(([B,re])=>t.jsx(X,{className:`item ${Ce(B===Q)}`,onClick:()=>yn(B),children:t.jsx("span",{className:"text",children:re})},B))}):t.jsxs(t.Fragment,{children:[t.jsx(Gs,{disabled:!Z,buttonClassName:"toolbar-item color-picker",buttonAriaLabel:"Formatting text color",buttonIconClassName:"icon font-color",color:m,onChange:bn,title:"text color"}),t.jsx(Gs,{disabled:!Z,buttonClassName:"toolbar-item color-picker",buttonAriaLabel:"Formatting background color",buttonIconClassName:"icon bg-color",color:y,onChange:Pe,title:"bg color"}),t.jsxs(Ze,{disabled:!Z,buttonClassName:"toolbar-item spaced",buttonLabel:"",buttonAriaLabel:"Formatting options for additional text styles",buttonIconClassName:"icon dropdown-more",children:[t.jsxs(X,{onClick:()=>{s.dispatchCommand(g.FORMAT_TEXT_COMMAND,"strikethrough")},className:"item "+Ce(W),title:"Strikethrough","aria-label":"Format text with a strikethrough",children:[t.jsx("i",{className:"icon strikethrough"}),t.jsx("span",{className:"text",children:"Strikethrough"})]}),t.jsxs(X,{onClick:()=>{s.dispatchCommand(g.FORMAT_TEXT_COMMAND,"subscript")},className:"item "+Ce(P),title:"Subscript","aria-label":"Format text with a subscript",children:[t.jsx("i",{className:"icon subscript"}),t.jsx("span",{className:"text",children:"Subscript"})]}),t.jsxs(X,{onClick:()=>{s.dispatchCommand(g.FORMAT_TEXT_COMMAND,"superscript")},className:"item "+Ce(Y),title:"Superscript","aria-label":"Format text with a superscript",children:[t.jsx("i",{className:"icon superscript"}),t.jsx("span",{className:"text",children:"Superscript"})]}),t.jsxs(X,{onClick:at,className:"item",title:"Clear text formatting","aria-label":"Clear all text formatting",children:[t.jsx("i",{className:"icon clear"}),t.jsx("span",{className:"text",children:"Clear Formatting"})]})]}),t.jsx(dt,{}),o==="table"&&t.jsxs(t.Fragment,{children:[t.jsx(Ze,{disabled:!Z,buttonClassName:"toolbar-item spaced",buttonLabel:"Table",buttonAriaLabel:"Open table toolkit",buttonIconClassName:"icon table secondary",children:t.jsx(X,{onClick:()=>{},className:"item",children:t.jsx("span",{className:"text",children:"TODO"})})}),t.jsx(dt,{})]}),t.jsxs(Ze,{disabled:!Z,buttonClassName:"toolbar-item spaced",buttonLabel:"Insert",buttonAriaLabel:"Insert specialized editor node",buttonIconClassName:"icon plus",children:[t.jsxs(X,{onClick:()=>{s.dispatchCommand(pt.INSERT_HORIZONTAL_RULE_COMMAND,void 0)},className:"item",children:[t.jsx("i",{className:"icon horizontal-rule"}),t.jsx("span",{className:"text",children:"Horizontal Rule"})]}),t.jsxs(X,{onClick:()=>{S("Insert Image",B=>t.jsx(kr,{activeEditor:s,onClose:B}))},className:"item",children:[t.jsx("i",{className:"icon image"}),t.jsx("span",{className:"text",children:"Image"})]}),t.jsxs(X,{onClick:()=>{S("Insert Table",B=>t.jsx(Rr,{activeEditor:s,onClose:B}))},className:"item",children:[t.jsx("i",{className:"icon table"}),t.jsx("span",{className:"text",children:"Table"})]}),t.jsxs(X,{onClick:()=>{S("Insert Table",B=>t.jsx(Wa,{activeEditor:s,onClose:B}))},className:"item",children:[t.jsx("i",{className:"icon table"}),t.jsx("span",{className:"text",children:"Table (Experimental)"})]}),t.jsxs(X,{onClick:()=>{n.dispatchCommand(Qn,void 0)},className:"item",children:[t.jsx("i",{className:"icon caret-right"}),t.jsx("span",{className:"text",children:"Collapsible container"})]})]})]}),t.jsx(dt,{}),t.jsx(Ql,{disabled:!Z,value:w,editor:n,isRTL:R}),O]}):t.jsx("div",{className:"toolbar"})}function tc(){const[e]=ne.useLexicalComposerContext();return t.jsx(Ii.TreeView,{viewClassName:"tree-view-output",treeTypeButtonClassName:"debug-treetype-button",timeTravelPanelClassName:"debug-timetravel-panel",timeTravelButtonClassName:"debug-timetravel-button",timeTravelPanelSliderClassName:"debug-timetravel-panel-slider",timeTravelPanelButtonClassName:"debug-timetravel-panel-button",editor:e})}const Wr={blockCursor:"block pointer-events-none absolute content-['']  after:absolute after:-top-[2px] after:w-[20px] after:border-t-[1px_solid_black]",characterLimit:"inline !bg-[#ffbbbb]",code:"bg-[rgb(240,_242,_245)] font-[Menlo,_Consolas,_Monaco,_monospace] block pl-[52px] pr-[8px] py-[8px] leading-[1.53] text-[13px] m-0 mt-[8px] mb-[8px] [tab-size:2] relative after:content-[attr(data-gutter)] after:absolute after:bg-[#eee] after:left-[0] after:top-[0] after:border-r-[1px_solid_#ccc] after:p-[8px] after:text-[#777] after:whitespace-pre-wrap after:text-right after:min-w-[25px]",codeHighlight:{atrule:"text-[#07a]",attr:"text-[#07a]",boolean:"text-[#905]",builtin:"text-[#690]",cdata:"text-[slategray]",char:"text-[#690]",class:"text-[#dd4a68]","class-name":"text-[#dd4a68]",comment:"text-[slategray]",constant:"text-[#905]",deleted:"text-[#905]",doctype:"text-[slategray]",entity:"text-[#9a6e3a]",function:"text-[#dd4a68]",important:"text-[#e90]",inserted:"text-[#690]",keyword:"text-[#07a]",namespace:"text-[#e90]",number:"text-[#905]",operator:"text-[#9a6e3a]",prolog:"text-[slategray]",property:"text-[#905]",punctuation:"text-[#999]",regex:"text-[#e90]",selector:"text-[#690]",string:"text-[#690]",symbol:"text-[#905]",tag:"text-[#905]",url:"text-[#9a6e3a]",variable:"text-[#e90]"},embedBlock:{base:"select-none",focus:"outline-[2px_solid_rgb(60,_132,_244)]"},hashtag:"bg-[rgba(88,_144,_255,_0.15)] border-b-[1px_solid_rgba(88,_144,_255,_0.3)]",heading:{h1:"font-semibold text-2xl scroll-mt-36 font-display",h2:"font-medium text-xl scroll-mt-36 font-display",h3:"font-medium text-lg scroll-mt-36 font-display",h4:"font-medium scroll-mt-36 font-display",h5:"scroll-mt-36 font-display",h6:"scroll-mt-36 font-display"},image:"editor-image",indent:"PlaygroundEditorTheme__indent",inlineImage:"inline-editor-image",link:"PlaygroundEditorTheme__link",list:{listitem:"PlaygroundEditorTheme__listItem",listitemChecked:"PlaygroundEditorTheme__listItemChecked",listitemUnchecked:"PlaygroundEditorTheme__listItemUnchecked",nested:{listitem:"PlaygroundEditorTheme__nestedListItem"},olDepth:["PlaygroundEditorTheme__ol1 list-decimal","PlaygroundEditorTheme__ol2","PlaygroundEditorTheme__ol3","PlaygroundEditorTheme__ol4","PlaygroundEditorTheme__ol5"],ul:"PlaygroundEditorTheme__ul"},ltr:"PlaygroundEditorTheme__ltr",mark:"PlaygroundEditorTheme__mark",markOverlap:"PlaygroundEditorTheme__markOverlap",paragraph:"PlaygroundEditorTheme__paragraph",quote:"PlaygroundEditorTheme__quote",rtl:"PlaygroundEditorTheme__rtl",table:"PlaygroundEditorTheme__table",tableAddColumns:"PlaygroundEditorTheme__tableAddColumns",tableAddRows:"PlaygroundEditorTheme__tableAddRows",tableCell:"PlaygroundEditorTheme__tableCell",tableCellActionButton:"PlaygroundEditorTheme__tableCellActionButton",tableCellActionButtonContainer:"PlaygroundEditorTheme__tableCellActionButtonContainer",tableCellEditing:"PlaygroundEditorTheme__tableCellEditing",tableCellHeader:"PlaygroundEditorTheme__tableCellHeader",tableCellPrimarySelected:"PlaygroundEditorTheme__tableCellPrimarySelected",tableCellResizer:"PlaygroundEditorTheme__tableCellResizer",tableCellSelected:"PlaygroundEditorTheme__tableCellSelected",tableCellSortedIndicator:"PlaygroundEditorTheme__tableCellSortedIndicator",tableResizeRuler:"PlaygroundEditorTheme__tableCellResizeRuler",tableSelected:"PlaygroundEditorTheme__tableSelected",text:{bold:"PlaygroundEditorTheme__textBold",code:"PlaygroundEditorTheme__textCode",italic:"PlaygroundEditorTheme__textItalic",strikethrough:"PlaygroundEditorTheme__textStrikethrough",subscript:"PlaygroundEditorTheme__textSubscript",superscript:"PlaygroundEditorTheme__textSuperscript",underline:"PlaygroundEditorTheme__textUnderline",underlineStrikethrough:"PlaygroundEditorTheme__textUnderlineStrikethrough"}};function Tn({className:e}){return t.jsx(Ai.ContentEditable,{className:e||"border-none relative [tab-size:1] outline-none pt-[8px] px-[8px] lg:px-[28px] pb-[14px]"})}function nc({children:e,className:n}){return t.jsx("div",{className:n||"text-[15px] text-[#999] overflow-hidden absolute overflow-ellipsis top-[8px] left-[8px] lg:left-[28px] right-[28px] select-none whitespace-nowrap inline-block pointer-events-none",children:e})}function sc(e){const{historyState:n}=_o(),{isAutocomplete:s,isMaxLength:r,isCharLimit:i,isCharLimitUtf8:a,isRichText:o=!0,showTreeView:l,showTableOfContents:c,showActionBar:d,placeholderText:u="",editable:p=!0,bgColor:m}=e,f=t.jsx(nc,{children:u}),[y,v]=h.useState(null),[b,x]=h.useState(!1),[w,k]=h.useState(!1),T=N=>{N!==null&&v(N)},_={namespace:"Playground",nodes:[...Fo],onError:N=>{throw N},theme:Wr};return h.useEffect(()=>{const N=()=>{const j=Ot&&window.matchMedia("(max-width: 1025px)").matches;j!==w&&k(j)};return window.addEventListener("resize",N),()=>{window.removeEventListener("resize",N)}},[w]),t.jsxs(t.Fragment,{children:[o&&p&&t.jsx(ec,{}),t.jsxs("div",{className:`${p?"editor-container":"view-container"} ${l?"tree-view":""} ${o?"":"plain-text"}`,style:{backgroundColor:m},children:[r&&t.jsx(Sl,{maxLength:30}),t.jsx(Ga,{}),t.jsx(Oi.ClearEditorPlugin,{}),t.jsx(Ya,{}),t.jsx(fa,{}),t.jsx(Nl,{}),t.jsx(na,{}),t.jsx(ya,{}),o?t.jsxs(t.Fragment,{children:[t.jsx(wn.HistoryPlugin,{externalHistoryState:n}),t.jsx(ws.RichTextPlugin,{contentEditable:t.jsx("div",{className:p?"editor-scroller":"view-scroller",children:t.jsx("div",{className:"editor",ref:T,children:t.jsx(Tn,{})})}),placeholder:f,ErrorBoundary:vn}),t.jsx(va,{}),t.jsx(Ri.ListPlugin,{}),t.jsx(Li.CheckListPlugin,{}),t.jsx(kl,{maxDepth:7}),t.jsx(Di.TablePlugin,{}),t.jsx(Hl,{}),t.jsxs(Ha,{cellEditorConfig:_,children:[t.jsx(Pi.AutoFocusPlugin,{}),t.jsx(ws.RichTextPlugin,{contentEditable:t.jsx(Tn,{className:"min-h-[20px] border-[0px] resize-none cursor-text block relative [tab-size:1] outline-[0px] p-[10px] select-text text-[14px] leading-[1.4em] w-[calc(100%_-_20px)] whitespace-pre-wrap"}),placeholder:null,ErrorBoundary:vn}),t.jsx(wn.HistoryPlugin,{}),t.jsx(Ls,{}),t.jsx(Ss,{}),t.jsx(Rs,{})]}),t.jsx(Ea,{}),t.jsx(Ls,{}),t.jsx(ca,{}),t.jsx(Ss,{}),t.jsx(Fi.HorizontalRulePlugin,{}),t.jsx(Ml,{}),t.jsx(zi.TabIndentationPlugin,{}),t.jsx(_a,{}),y&&!w&&t.jsxs(t.Fragment,{children:[t.jsx(ll,{anchorElem:y}),t.jsx(fl,{anchorElem:y,isLinkEditMode:b,setIsLinkEditMode:x}),t.jsx(Fl,{anchorElem:y,cellMerge:!0}),t.jsx(Rs,{anchorElem:y,showComments:!0})]})]}):t.jsxs(t.Fragment,{children:[t.jsx(Bi.PlainTextPlugin,{contentEditable:t.jsx(Tn,{}),placeholder:f,ErrorBoundary:vn}),t.jsx(wn.HistoryPlugin,{externalHistoryState:n})]}),(i||a)&&t.jsx(Wi.CharacterLimitPlugin,{charset:i?"UTF-16":"UTF-8",maxLength:5}),s&&t.jsx(Mo,{}),t.jsx("div",{children:c&&t.jsx(Yl,{})}),d&&t.jsx(ia,{isRichText:o})]}),l&&t.jsx(tc,{})]})}const rc=[ke.HeadingNode,xe.ListNode,xe.ListItemNode,ke.QuoteNode,ge.CodeNode,it,L.TableNode,L.TableCellNode,L.TableRowNode,ge.CodeHighlightNode,de.AutoLinkNode,de.LinkNode,Hi.OverflowNode,Ye,bt,et,pt.HorizontalRuleNode,Dt,Ui.MarkNode,tt,nt,st];function Hr({value:e,onChange:n,bgColor:s,editable:r=!1,id:i}){var o,l,c,d;const a={editorState:(o=JSON.parse(e||"{}"))!=null&&o.root&&((d=(c=(l=JSON.parse(e||"{}"))==null?void 0:l.root)==null?void 0:c.children)!=null&&d.length)?e:null,namespace:"dms-lexical",nodes:[...rc],editable:r,readOnly:r,onError:u=>{throw u},theme:Wr};return t.jsx(qi.LexicalComposer,{initialConfig:a,children:t.jsxs("div",{className:"editor-shell",children:[t.jsx(sc,{editable:r,bgColor:s}),t.jsx(Vi.OnChangePlugin,{onChange:n})]})},i)}function ic(e){try{JSON.parse(e)}catch{return!1}return!0}function Ur(e){return e&&typeof e=="object"?JSON.stringify(e):ic(e)?e:null}const oc=({value:e,onChange:n,...s})=>t.jsx("div",{className:"editor-shell",children:t.jsx(Hr,{value:Ur(e),onChange:r=>{n(r)},editable:!0,...s})}),ac=({value:e,...n})=>t.jsx("div",{className:"editor-shell tracking-wide leading-7",children:t.jsx(Hr,{value:Ur(e),editable:!1,...n})}),lc={EditComp:oc,ViewComp:ac},cc=({value:e="",onChange:n,className:s,placeholder:r,options:i=[]})=>{var l,c;const a=we(),o=e&&!i.find(d=>(d.value||d)===e);return t.jsxs(t.Fragment,{children:[o?t.jsxs("div",{className:(l=a==null?void 0:a.select)==null?void 0:l.error,children:["Invalid Value: ",JSON.stringify(e)," "]}):null,t.jsxs("select",{className:s||((c=a==null?void 0:a.select)==null?void 0:c.input)||"w-full border p-2",value:e,onChange:d=>n(d.target.value),children:[t.jsx("option",{value:"",children:r}),i.map((d,u)=>t.jsx("option",{value:d.value||d,children:d.label||d},u))]})]})},dc=({className:e,value:n,options:s=[]})=>{var a;if(!n)return!1;const r=we(),i=s.find(o=>(o.value||o)===n)||n;return t.jsx("div",{className:e||((a=r==null?void 0:r.text)==null?void 0:a.view),children:(i==null?void 0:i.label)||i})},uc={EditComp:cc,ViewComp:dc},pc="flex px-2 py-1 w-full text-sm font-light border focus:border-blue-300 bg-white hover:bg-gray-100 transition ease-in",mc="focus:outline-none w-full",hc="flex px-2 py-1 mx-1 bg-gray-100 hover:bg-gray-300 rounded-md transition ease-in",fc="fa fa-x px-1 text-xs text-red-300 hover:text-red-500 self-center transition ease-in",xc="p-2 shadow-lg z-10",gc="px-2 py-1 hover:bg-gray-300 hover:cursor-pointer transition ease-in",bc=({token:e,value:n,onChange:s,theme:r})=>{var i,a;return t.jsxs("div",{className:((i=r==null?void 0:r.multiselect)==null?void 0:i.tokenWrapper)||hc,children:[t.jsx("div",{children:e.label||e}),t.jsx("i",{className:((a=r==null?void 0:r.multiselect)==null?void 0:a.removeIcon)||fc,onClick:o=>s(n.filter(l=>(l.value||l)!==(e.value||e)))})]})},yc=({options:e,isSearching:n,setIsSearching:s,searchKeyword:r,value:i,onChange:a,theme:o})=>{var c;const l=i.map(d=>d.value||d);return t.jsx("div",{className:`${n?"block":"hidden"} ${((c=o==null?void 0:o.multiselect)==null?void 0:c.menuWrapper)||xc}`,children:e.filter(d=>!l.includes(d.value||d)&&(d.label||d).includes(r)).map((d,u)=>{var p;return t.jsx("div",{className:((p=o==null?void 0:o.multiselect)==null?void 0:p.menuItem)||gc,onClick:m=>{a([...i,d]),s(!1)},children:d.label||d},`option-${u}`)})})};function wc(e){const[n,s]=h.useState(e),r=h.useRef(null),i=o=>{(o.key==="Escape"||o.key==="Tab")&&s(!1)},a=o=>{r.current&&!r.current.contains(o.target)&&s(!1)};return h.useEffect(()=>(document.addEventListener("keydown",i,!0),document.addEventListener("click",a,!0),()=>{document.removeEventListener("keydown",i,!0),document.removeEventListener("click",a,!0)})),{ref:r,isSearching:n,setIsSearching:s}}const vc=({value:e=[],onChange:n,className:s,placeholder:r,options:i=[]})=>{var f,y,v;const[a,o]=h.useState(""),l=Array.isArray(e)?e:[e],c=we(),{ref:d,isSearching:u,setIsSearching:p}=wc(!1),m=l.filter(b=>{var x;return(b.value||b)&&!((x=i.filter(w=>(w.value||w)===(b.value||b)))!=null&&x.length)});return t.jsxs("div",{ref:d,children:[m.length?t.jsxs("div",{className:(f=c==null?void 0:c.multiselect)==null?void 0:f.error,children:["Invalid Values: ",JSON.stringify(m)]}):null,t.jsxs("div",{className:s||((y=c==null?void 0:c.multiselect)==null?void 0:y.inputWrapper)||pc,children:[l.map((b,x)=>t.jsx(bc,{token:b,value:l,onChange:n,theme:c},x)),t.jsx("input",{placeholder:r,className:((v=c==null?void 0:c.multiselect)==null?void 0:v.input)||mc,onChange:b=>o(b.target.value),onFocus:()=>p(!0)},"input")]}),t.jsx(yc,{isSearching:u,setIsSearching:p,searchKeyword:a,value:l,onChange:n,options:i,theme:c})]})},jc=({className:e,value:n,options:s=[]})=>{var o;if(!n)return!1;const r=we(),i=(Array.isArray(n)?n:[n]).map(l=>l.value||l),a=s.filter(l=>i.includes(l.value||l)).map(l=>l.label||l).join(", ");return t.jsx("div",{className:e||((o=r==null?void 0:r.text)==null?void 0:o.view),children:a||JSON.stringify(i)})},Nc={EditComp:vc,ViewComp:jc},Cc=({value:e="",onChange:n,options:s=[],inline:r})=>{var o;const i=we(),a=e&&!s.find(l=>l===e);return t.jsxs(t.Fragment,{children:[a?t.jsxs("div",{className:(o=i==null?void 0:i.radio)==null?void 0:o.error,children:["Invalid Value: ",JSON.stringify(e)]}):null,t.jsx("div",{className:`flex ${r?"flex-row":"flex-col"}`,children:s.map((l,c)=>{var d,u,p;return t.jsxs("div",{className:((d=i==null?void 0:i.radio)==null?void 0:d.wrapper)||"p-1 flex",children:[t.jsx("input",{id:l,className:((u=i==null?void 0:i.radio)==null?void 0:u.input)||"self-center p-1",type:"radio",value:l,checked:e===l,onChange:m=>n(m.target.value)}),t.jsxs("label",{htmlFor:l,className:((p=i==null?void 0:i.radio)==null?void 0:p.label)||"text-sm font-light p-1 self-center",children:[" ",l," "]})]},c)})})]})},_c=({className:e,value:n})=>{var r;if(!n)return!1;const s=we();return t.jsx("div",{className:e||((r=s==null?void 0:s.text)==null?void 0:r.view),children:n})},kc={EditComp:Cc,ViewComp:_c},qe={text:jn,datetime:jn,textarea:fo,boolean:bo,"dms-format":vo,lexical:lc,select:uc,multiselect:Nc,radio:kc,default:jn};function qr(e,n){qe[e]=n}function Sc(e){const{type:n="default",isArray:s=!1,attributes:r}=e;let i=z(qe,`[${n}]`,qe.default),a=i.ViewComp;if(s){let o=e.DisplayComp?e.DisplayComp.ViewComp:mr.ViewComp;a=l=>t.jsx(o,{Component:i,...l,attr:e})}return a}function Tc(e){const{type:n="default",isArray:s=!1,attributes:r}=e;let i=z(qe,`[${n}]`,qe.default),a=i.EditComp;if(s){let o=e.DisplayComp?e.DisplayComp.EditComp:mr.EditComp;a=l=>t.jsx(o,{Component:i,...l,attr:e})}return a}function Pt(e,n={},s=""){const r=Vr(e),i=(n==null?void 0:n.accessor)||"key",a=e.attributes.filter(l=>s!=="edit"||typeof l.editable>"u"||!!l.editable).reduce((l,c)=>(c.format&&r[c.format]?l[c[i]]={...c,attributes:Pt(r[c.format])}:l[c[i]]=c,l),{}),o=Object.keys(a);return Object.keys(a).filter(l=>o.includes(l)).forEach(l=>{a[l].ViewComp=Sc(z(a,`${l}`,{})),a[l].EditComp=Tc(z(a,`${l}`,{}))}),a}function Vr(e,n={}){if(!e)return n;const s=le(e);return s.registerFormats&&s.registerFormats.forEach(r=>Vr(r,n)),n[`${s.app}+${s.type}`]=s,n}const Ec=(e,n="update")=>{let s=new FormData;return s.append("data",JSON.stringify(e)),s.append("requestType",n),s};function $c({Component:e,format:n,options:s,params:r,user:i,...a}){const{falcor:o}=Mt.useFalcor(),l=Pt(n,s,"edit"),c=Ie(),{pathname:d}=Ae(),{data:u}=qn();let p=Yi();const{defaultSort:m=k=>k}=n,[f,y]=I.useState(m(u).filter(k=>Pn(k,r,n))[0]||{});h.useEffect(()=>{let k=u.filter(T=>Pn(T,r,n))[0];Ve(f,k)||y(k||{})},[u,r]);const v=async({data:k,config:T={format:n},requestType:_=""})=>{await nn(o,T,k,_),c(null,{action:d})},b=(k,T,_)=>{y(_?{...f,..._}:{...f,[k]:T})},x=()=>{c(Ec(f),{method:"post",action:d})},w=I.useMemo(()=>e,[]);return t.jsx(w,{...a,format:n,attributes:l,item:f,dataItems:u,params:r,apiUpdate:v,updateAttribute:b,setItem:y,options:s,status:p,user:i,submit:x})}function Mc({Component:e,format:n,options:s,user:r,...i}){const a=Pt(n,s),{data:o}=qn(),l=I.useMemo(()=>e,[]);return t.jsx(l,{...i,format:n,attributes:a,dataItems:o,options:s,user:r},s==null?void 0:s.path)}function Ic({Component:e,format:n,options:s,params:r,user:i,...a}){let o=Pt(n,s);const{data:l}=qn(),{defaultSort:c=p=>p}=n,d=c(l).filter(p=>Pn(p,r,n))[0]||l[0],u=I.useMemo(()=>e,[]);return t.jsx(u,{...a,format:n,attributes:o,item:d,dataItems:l,options:s,user:i})}function Ac({Component:e,format:n,options:s,user:r,...i}){let a=Pt(n,s);return t.jsx(e,{...i,format:n,attributes:a,dataItems:[],options:s,user:r})}const Yr={edit:$c,error:Ac,list:Mc,view:Ic};function Oc(e){return t.jsx("div",{children:"404 - Config not found"})}function tn({item:e,attributes:n,next:s,nextDisabled:r,prev:i,prevDisabled:a,sectionId:o,preferredTheme:l}){var d,u,p;const c=l||we();return e?t.jsxs("div",{className:z(c,"card.wrapper",""),children:[Object.keys(n).filter(m=>!o||n[m].section===o).map((m,f)=>{var v,b;let y=n[m].ViewComp;return t.jsxs("div",{className:z(c,"card.row",""),children:[t.jsx("div",{className:z(c,"card.rowLabel",""),children:((v=n[m])==null?void 0:v.display_name)||((b=n[m])==null?void 0:b.label)||m}),t.jsx("div",{className:z(c,"card.rowContent",""),children:t.jsx(y,{value:e[m],...n[m]})})]},f)}),(i||s)&&o&&t.jsxs("div",{className:(d=c==null?void 0:c.card)==null?void 0:d.btnWrapper,children:[i&&o&&t.jsx("button",{className:(u=c==null?void 0:c.card)==null?void 0:u.backBtn,disabled:a,onClick:()=>i(),children:" Back "}),s&&o&&t.jsx("button",{className:(p=c==null?void 0:c.card)==null?void 0:p.continueBtn,disabled:r,onClick:()=>s(),children:" Continue "})]})]},e.id):t.jsx("div",{})}function Rc({dataItems:e=[],attributes:n}){return we(),t.jsxs("div",{className:"border border-pink-300",children:["Landing",e.map((s,r)=>t.jsx(tn,{item:s,attributes:n},r))]})}function Js(e,n){var s=/:(\w+)/g;return e.replace(s,function(r,i){return n[i]||":"+i})}const Ks={data:function({data:n,column:s,className:r,key:i}){return t.jsxs("td",{className:r,children:[" ",z(n,[s.path],"").toString()," "]},i)},date:function({data:n,column:s,className:r,key:i}){return t.jsxs("td",{className:r,children:[" ",new Date(n[s.path]).toLocaleString()," "]},i)},link:function({data:n,column:s,className:r,key:i}){return t.jsx("td",{className:r,children:t.jsx(Se,{to:Js(s.to,n),children:Js(s.text,n)})},i)}};function Lc({data:e,column:n,className:s}){let r=z(Ks,[n.type],Ks.data);return t.jsx(r,{data:e,column:n,className:s})}function Dc({dataItems:e=[],attributes:n={},options:s={}}){const r=we();let{columns:i=[]}=s;return i.length===0?t.jsx("div",{children:" No columns specified. "}):t.jsx("div",{className:"",children:t.jsxs("table",{className:`${r.table.table}`,children:[t.jsx("thead",{className:`${r.table.thead}`,children:t.jsx("tr",{children:i.map((a,o)=>t.jsx("th",{className:`${r.table.th}`,children:a.name},o))})}),t.jsx("tbody",{className:`${r.table.tbody}`,children:e.map(a=>t.jsx("tr",{children:i.map((o,l)=>t.jsx(Lc,{className:`${r.table.td}`,data:a,column:o},`${o.name}-${l}`))},a.id))})]})})}function Gr({item:e={},attributes:n,updateAttribute:s,status:r,submit:i,next:a,nextDisabled:o,prev:l,prevDisabled:c,sectionId:d,...u}){var m,f,y,v;const p=we();return t.jsxs("div",{className:z(p,"card.wrapper",""),children:[r?t.jsx("div",{children:JSON.stringify(r)}):"",Object.keys(n).filter(b=>!d||n[b].section===d).map((b,x)=>{var k,T,_,N;let w=n[b].EditComp;return t.jsxs("div",{className:z(p,"card.row",""),children:[t.jsxs("div",{className:z(p,"card.rowHeader",""),children:[t.jsx("div",{className:z(p,"card.rowLabel",""),children:((k=n[b])==null?void 0:k.display_name)||((T=n[b])==null?void 0:T.label)||b}),((_=n[b])==null?void 0:_.prompt)&&t.jsx("i",{title:(N=n[b])==null?void 0:N.prompt,className:z(p,"card.infoIcon","fad fa-info")})]}),t.jsx("div",{className:z(p,"card.rowContent",""),children:t.jsx(w,{value:e==null?void 0:e[b],onChange:j=>s(b,j),...n[b]},`${b}-${x}`)})]},`${b}-${x}`)}),t.jsxs("div",{className:(m=p==null?void 0:p.card)==null?void 0:m.btnWrapper,children:[l&&d&&t.jsx("button",{className:(f=p==null?void 0:p.card)==null?void 0:f.backBtn,disabled:c,onClick:()=>l(),children:" Back "}),a&&d&&t.jsx("button",{className:(y=p==null?void 0:p.card)==null?void 0:y.continueBtn,disabled:o,onClick:()=>a(),children:" Continue "}),t.jsx("button",{className:(v=p==null?void 0:p.card)==null?void 0:v.submitBtn,onClick:()=>i(),children:" Save"})]})]},e.id)}const Pc=({theme:e,tabs:n=[],activeIndex:s=0,setActiveIndex:r=null})=>{if(!n)return null;const[i,a]=I.useState(s);return I.useEffect(()=>{a(s)},[s]),t.jsx("div",{className:`${e.tabpanelWrapper}`,children:t.jsx("div",{className:`${e.tabWrapper}`,children:n.map(({icon:o,title:l,subtitle:c},d)=>t.jsxs("div",{onClick:u=>r?r(d):a(d),className:`${d===i?e.tabActive:e.tab}`,children:[t.jsx("span",{className:`${o} ${e.icon}`}),t.jsxs("span",{className:`${e.tabTitle}`,children:[" ",l," "]}),t.jsxs("span",{className:`${e.tabSubtitle}`,children:[" ",c," "]})]},d))})})};function Fc({item:e,updateAttribute:n,attributes:s,status:r,submit:i,format:a,...o}){var u,p,m;const[l,c]=h.useState(a!=null&&a.sections?0:void 0),d=we();return t.jsxs(t.Fragment,{children:[t.jsx(Pc,{tabs:a==null?void 0:a.sections,activeIndex:l,setActiveIndex:c,theme:d.form}),t.jsx(Gr,{item:e,status:r,attributes:s,sectionId:(p=(u=a==null?void 0:a.sections)==null?void 0:u[l])==null?void 0:p.id,updateAttribute:n,submit:i,next:()=>c(l+1),nextDisabled:l===((m=a==null?void 0:a.sections)==null?void 0:m.length)-1,prev:()=>c(l-1),prevDisabled:l===0})]})}function zc({item:e,updateAttribute:n,attributes:s,status:r,submit:i,format:a,...o}){var c;const l=we();return t.jsx("div",{className:(c=l==null?void 0:l.form)==null?void 0:c.sectionsWrapper,children:a!=null&&a.sections?((a==null?void 0:a.sections)||[]).map(d=>{var u,p,m,f,y;return t.jsxs("div",{className:(u=l==null?void 0:l.form)==null?void 0:u.sections,children:[t.jsxs("div",{className:(p=l==null?void 0:l.form)==null?void 0:p.tab,children:[t.jsx("span",{className:`${d.icon} ${(m=l==null?void 0:l.form)==null?void 0:m.icon}`}),t.jsxs("span",{className:`${(f=l==null?void 0:l.form)==null?void 0:f.tabTitle}`,children:[" ",d.title," "]}),t.jsxs("span",{className:`${(y=l==null?void 0:l.form)==null?void 0:y.tabSubtitle}`,children:[" ",d.subtitle," "]})]}),t.jsx(tn,{preferredTheme:l==null?void 0:l.form,item:e,status:r,attributes:s,sectionId:d==null?void 0:d.id})]},d==null?void 0:d.id)}):t.jsx(tn,{preferredTheme:l==null?void 0:l.form,item:e,status:r,attributes:s})})}function Bc({config:e}){return t.jsxs("div",{children:[" Invalid DMS Config :",t.jsx("pre",{style:{background:"#dedede"},children:JSON.stringify(e,null,3)})]})}function Wc({path:e}){return t.jsxs("div",{children:[" These aren't the droids you are looking for",t.jsx("div",{className:"text-5xl",children:"404"}),t.jsxs("div",{children:["/",e]})]})}const ts={devinfo:Oc,"dms-landing":Rc,"dms-table":Dc,"dms-card":tn,"dms-edit":Gr,"dms-form-edit":Fc,"dms-form-view":zc,InvalidConfig:Bc,NoRouteMatch:Wc},Hc=ts.devinfo,Uc=Yr.error;let qc=0;function Jr(e,n){let r=(Gi(e.map(i=>({path:i.path})),{pathname:n})||[]).reduce((i,a)=>(i[a.route.path]=a,i),{});return e.filter((i,a)=>{let o=(r==null?void 0:r[i.path])||!1;return o&&(i.params=o.params),o})}function Kr(e,n,s,r,i=0){return Jr(e,n).map(o=>{const l=typeof o.type=="function"?o.type:ts[o.type]||Hc,c=Yr[o.action]||Uc;let d=[];return o.children&&(d=Kr(o.children,n,s,r,i+1)),t.jsx(c,{Component:l,format:s,...o,children:d,user:r},qc++)})}function ns(e=[],n="/",s=0){let r=le(Jr(e,n)),i=r.reduce((a,o)=>{let l=ns(o.children,n,s+1);return l.length?[...a,...l]:a},[]);return[...r,...i]}function Vc(e){return e&&e.attributes&&e.attributes.length>0}function Pn(e,n,s){var a;let r=((a=s==null?void 0:s.attributes)==null?void 0:a.reduce((o,l)=>(l.matchWildcard&&(o=l.key),o),""))||"",i=!1;return Object.keys(n).forEach(o=>{e[o]==n[o]||e[r]&&e[r]===n["*"]?i=!0:i=!1}),n.id==e.id?!0:i}const Yc=(e,n="update")=>{let s=new FormData;return s.append("data",JSON.stringify(e)),s.append("requestType",n),s},Gc=(e,n,s,r)=>{var m,f,y,v,b,x,w,k,T,_,N,j;const{app:i,type:a}=n;let o=((m=e==null?void 0:e.filter)==null?void 0:m.attributes)||[],l=o.length>0?o.map(E=>`data ->> '${E}'`):["data"],c=typeof((f=e==null?void 0:e.filter)==null?void 0:f.fromIndex)=="function"?(y=e==null?void 0:e.filter)==null?void 0:y.fromIndex(s):+((b=e.params)==null?void 0:b[(v=e==null?void 0:e.filter)==null?void 0:v.fromIndex])||0,d=typeof((x=e==null?void 0:e.filter)==null?void 0:x.toIndex)=="function"?(w=e==null?void 0:e.filter)==null?void 0:w.toIndex(s):+((T=e.params)==null?void 0:T[(k=e==null?void 0:e.filter)==null?void 0:k.toIndex])||r-1,u=((_=e==null?void 0:e.filter)==null?void 0:_.options)||"{}",p=((N=e==null?void 0:e.filter)==null?void 0:N.tags)||[];if(((j=e==null?void 0:e.filter)==null?void 0:j.type)==="new")return[];switch(e.action){case"list":return["dms","data",`${i}+${a}`,u!=="{}"?"opts":!1,u!=="{}"?u:!1,"byIndex",{from:c,to:d},["id","app","type",...l]].filter(E=>E);case"view":case"edit":{const E=Xr(e,n);return E||["dms","data",`${i}+${a}`,"byIndex",{from:c,to:d},["id","updated_at","created_at","app","type",...l]]}case"load":return["dms","data",`${i}+${a}`,"options",u,"byIndex",{from:c,to:d},[...o.length>0?o:["data"]]];case"search":return["dms","search",`${i}+${a}`,"byTag",p];case"searchTags":return["dms","search",`${i}+${a}`,"tags"];default:return[]}};function Xr(e,n){var u,p;const{app:s,type:r,defaultSearch:i,attributes:a=[]}=n;let o=((u=e==null?void 0:e.filter)==null?void 0:u.attributes)||[],l=o.length>0?o.map(m=>`data ->> '${m}'`):["data"];const c=(a==null?void 0:a.reduce((m,f)=>(f.matchWildcard&&(m=f.key),m),""))||"";let d=(p=e.params)==null?void 0:p.id;return d?["dms","data","byId",d,["id","updated_at","created_at","app","type",...l]]:c?["dms","data",`${s}+${r}`,"searchOne",[JSON.stringify({wildKey:`data ->> '${c}'`,params:e.params["*"]||"",defaultSearch:i})],["id","updated_at","created_at","app","type",...l]]:null}async function Jc(e,n,s,r,i,a,o,l){var m;const c=Array.isArray(n)?n.map(f=>+f):n;let d=[],u=Object.values(z(e,["dms","data","byId"],{})).filter(f=>f.id&&f.app===r&&f.type===i);for(const f in u){let y=le(u[f]),v=((m=y==null?void 0:y.data)==null?void 0:m.value)||{};Object.keys(y).filter(b=>b!=="data").forEach(b=>{if(b.includes("data ->> ")){let x=b.split("->>")[1].trim().replace(/[']/g,"");v[x]=y[b]}else v[b]=y[b]}),d.push(v)}o!=null&&o.defaultSort&&(d=o.defaultSort(d));let p=0;for(const f in d)(c==="loadAll"||c.includes(+d[f].id)||p===0)&&await Zr(d[f],a,o,l),p++;return d}async function Zr(e,n,s,r){var o,l,c,d,u;let i=Object.keys(e).filter(p=>Object.keys(n).includes(p)),a=Object.keys(n).reduce((p,m)=>{var y,v;let f=(v=(y=s==null?void 0:s.registerFormats)==null?void 0:y.filter(b=>b.type===n[m].format.split("+")[1]))==null?void 0:v[0];return f&&(p[m]=f),p},{});for(const p of i){const m=[],f=Object.values(((o=a==null?void 0:a[p])==null?void 0:o.attributes)||{}).filter(y=>y.type==="dms-format").reduce((y,v)=>(y[v.key]=v,y),{});if(typeof(e==null?void 0:e[p])=="string"&&(e[p]=JSON.parse(e[p])),typeof((l=e==null?void 0:e[p])==null?void 0:l[Symbol.iterator])=="function")for(let y of e[p])y.id&&m.push(["dms","data","byId",y.id,"data"]);else(c=e[p])!=null&&c.id&&m.push(["dms","data","byId",(d=e[p])==null?void 0:d.id,"data"]);if(m.length>0){let y=await r.get(...m);if(typeof((u=e==null?void 0:e[p])==null?void 0:u[Symbol.iterator])=="function"){let v=0;for(let b of e[p])if(b.id){let x=z(y,["json","dms","data","byId",b.id,"data"]);Object.keys(f).length>0&&await Zr(x,f,a[p],r),e[p][v]={...b,...x},v+=1}}else{let v=z(y,["json","dms","data","byId",e[p].id,"data"]);e[p]={...e[p],...v}}}}}async function Kc(e,n,s){var i,a,o,l,c;let r={};for(const d of Object.keys(e)){r[d]=[];let[u,p]=n[d].format.split("+");const m=Array.isArray(e[d])?e[d]:[e[d]];for(const f of m){let y=le(f),v=(y==null?void 0:y.id)||!1;if(v){let b=z(s.getCache(["dms","data","byId",v,"data"]),["dms","data","byId",v,"data","value"],{});delete y.ref,delete y.id,b!=null&&b.ref&&delete b.ref,b!=null&&b.id&&delete b.id,Ve(b,y)||(console.log("update",v),await s.call(["dms","data","edit"],[v,y]),console.log("invalidate",v,f),await s.invalidate(["dms","data","byId",v])),r[d].push({ref:`${u}+${p}`,id:v})}else{console.log("create dms-format",`${u}+${p}`);const b=await s.call(["dms","data","create"],[u,p,y]);let x=((l=Object.keys(((o=(a=(i=b==null?void 0:b.json)==null?void 0:i.dms)==null?void 0:a.data)==null?void 0:o.byId)||{}).filter(w=>w!=="$__path"))==null?void 0:l[0])||-1;console.log(x),x!==-1&&r[d].push({ref:`${u}+${p}`,id:x})}}r[d]=Array.isArray(e[d])?r[d]:((c=r[d])==null?void 0:c[0])||""}return r}let Xc={};async function rt(e,n,s="/"){var T,_,N,j,E,C,M,A,W,$,P,F,Y,V,H,J,D,G,q,ee,O;n.formatFn&&(n.format=await n.formatFn());const{format:r}=n,{app:i,type:a,attributes:o={}}=r,l=ns(n.children,s),c=Object.values(o).filter(S=>S.type==="dms-format").reduce((S,R)=>(S[R.key]=R,S),{});let d=["dms","data",`${i}+${a}`,"length"];if(l.find(S=>["list","load"].includes(S.action))){const S=(_=(T=l.find(R=>["list","load"].includes(R.action)))==null?void 0:T.filter)==null?void 0:_.options;S&&(d=["dms","data",`${i}+${a}`,"options",S,"length"])}const u=z(await e.get(d),["json",...d],0),p=["dms","data",`${i}+${a}`,"byIndex"],m=l.map(S=>Gc(S,r,s,u)).filter(S=>S==null?void 0:S.length);m.length>0&&await e.get(...m);let f=e.getCache();if(l.find(S=>S.action==="search")){const S=m[0].filter((R,U)=>U<=m[0].indexOf("byTag"));return z(f,S,{})}if(l.find(S=>S.action==="searchTags")){const S=m[0].filter((R,U)=>U<=m[0].indexOf("tags"));return z(f,S,{})}if(l.find(S=>S.action==="load")){const S=m[0].filter((R,U)=>U<=m[0].indexOf("byIndex"));return Object.values(z(f,S,{}))}const y=l.filter(S=>S.action!=="load").map(S=>Xr(S,r)).filter(S=>S==null?void 0:S.length).map(S=>{let R=z(f,S.slice(0,-1),!1);return(R==null?void 0:R.$type)==="ref"?+R.value[3]:+(R==null?void 0:R.id)}).filter(S=>S);let v=(j=(N=l[0])==null?void 0:N.params)==null?void 0:j.id,b=typeof((C=(E=l==null?void 0:l[0])==null?void 0:E.filter)==null?void 0:C.fromIndex)=="function"?(A=(M=l==null?void 0:l[0])==null?void 0:M.filter)==null?void 0:A.fromIndex(s):+((F=(W=l==null?void 0:l[0])==null?void 0:W.params)==null?void 0:F[(P=($=l==null?void 0:l[0])==null?void 0:$.filter)==null?void 0:P.fromIndex]),x=typeof((V=(Y=l==null?void 0:l[0])==null?void 0:Y.filter)==null?void 0:V.toIndex)=="function"?(J=(H=l==null?void 0:l[0])==null?void 0:H.filter)==null?void 0:J.toIndex(s):+((ee=(D=l==null?void 0:l[0])==null?void 0:D.params)==null?void 0:ee[(q=(G=l==null?void 0:l[0])==null?void 0:G.filter)==null?void 0:q.toIndex]);const w=!v&&b&&x&&Object.keys(z(f,[...p],{})).filter(S=>+S>=+b&&+S<=+x-1).map(S=>z(f,[...p,S,"value",3])).filter(S=>S);y.push(...w||[]);const k=await Jc(f,y,w==null?void 0:w.length,i,a,c,r,e);return(O=l==null?void 0:l[0])!=null&&O.lazyLoad&&Xc[`${i}+${a}`],k}async function nn(e,n,s={},r){var m,f,y,v;const{app:i,type:a}=n.format,{id:o}=s,l=Object.keys(s).filter(b=>!["id","updated_at","created_at"].includes(b)),c=Object.values(((m=n==null?void 0:n.format)==null?void 0:m.attributes)||{}).filter(b=>b.type==="dms-format").reduce((b,x)=>(b[x.key]=x,b),{}),u=l.filter(b=>Object.keys(c).includes(b)).reduce((b,x)=>(b[x]=s[x],delete s[x],b),{});let p=await Kc(u,c,e);if(s={...s,...p},r==="delete"&&o)return await e.call(["dms","data","delete"],[i,a,o]),await e.invalidate(["dms","data",`${i}+${a}`,"length"]),{response:`Deleted item ${o}`};if(r==="updateType"&&o)return s.type?(await e.call(["dms","type","edit"],[o,s.type]),await e.invalidate(["dms","data","byId",o]),{message:"Update successful."}):{message:"No type found."};if(o&&l.length>0)return console.time(`falcor update data ${o}`),console.log("update",o,s),await e.call(["dms","data","edit"],[o,s]),await e.invalidate(["dms","data","byId",o]),console.timeEnd(`falcor update data ${o}`),{message:"Update successful."};if(l.length>0){const b=await e.call(["dms","data","create"],[i,a,s]);return await e.invalidate(["dms","data",`${i}+${a}`,"length"]),{response:"Item created.",id:Object.keys(((v=(y=(f=b==null?void 0:b.json)==null?void 0:f.dms)==null?void 0:y.data)==null?void 0:v.byId)||{})[0]}}return{message:"Not sure how I got here."}}const{InvalidConfig:Zc,NoRouteMatch:Qc}=ts,ed=e=>{const{config:n,path:s="",theme:r=Yn,user:i}=e,a=gt();if(I.useEffect(()=>{if(n.check){let l=ns(n.children,s,n.format);n.check(e,l,a)}},[s]),!n.children||!Vc(n.format))return t.jsx(Zc,{config:n});const o=I.useMemo(()=>Kr(n.children,s,n.format,i),[s]);return o?I.useMemo(()=>t.jsx(t.Fragment,{children:o}),[o]):t.jsx(Qc,{path:s})};function ss(e,n=r=>r,s=Yn){const{API_HOST:r="https://graph.availabs.org",baseUrl:i=""}=e,a=`${i}/`,o=Mt.falcorGraph(r);async function l({request:u,params:p}){return{data:await rt(o,e,`/${p["*"]||""}`)}}async function c({request:u,params:p}){const m=await u.formData();return nn(o,e,JSON.parse(m.get("data")),m.get("requestType"),p["*"])}function d(){const u=Ji(),p=n(ed);return I.useMemo(()=>t.jsx(Mt.FalcorProvider,{falcor:o,children:t.jsx(p,{path:`/${u["*"]||""}`,config:e,theme:s})}),[u["*"]])}return{path:`${a}*`,Component:u=>t.jsx(d,{...u}),loader:l,action:c}}const td={email:"user",authLevel:5};function Xs({children:e,theme:n,baseUrl:s="",user:r=td,pgEnv:i,...a}){const{falcor:o,falcorCache:l}=Mt.useFalcor();return t.jsx(oe.Provider,{value:{baseUrl:s,user:r,theme:n,falcor:o,falcorCache:l,pgEnv:i},children:e})}function Zs({icon:e,className:n}){return t.jsx("div",{className:`${n} flex justify-center items-center`,children:t.jsx("span",{className:e})})}const mn=({i:e=0,children:n,icon:s,to:r,onClick:i,className:a=null,type:o="side",active:l=!1,subMenus:c=[],themeOptions:d,subMenuActivate:u="onClick",subMenuOpen:p=!1})=>{const{theme:m}=I.useContext(oe),f=m[o==="side"?"sidenav":"topnav"](d),y=gt(),v=I.useMemo(()=>Array.isArray(r)?r:[r],[r]),b=I.useMemo(()=>{const M=c.reduce((A,W)=>(Array.isArray(W.path)?A.push(...W.path):W.path&&A.push(W.path),A),[]);return[...v,...M]},[v,c]),x=!!ur({path:`${b[0]}/*`||"",end:!0}),w=o==="side"?f.navitemSide:f.navitemTop,k=o==="side"?f.navitemSideActive:f.navitemTopActive,T=x||l,_=T?k:w,[N,j]=I.useState(p||x),[E,C]=I.useState(!1);return h.useEffect(()=>{j(x)},[x,N,r]),t.jsx("div",{className:o==="side"?f.subMenuParentWrapper:null,onMouseOutCapture:()=>u==="onHover"&&j(!1)||u!=="onHover"&&C(!1)&&j(!1),onMouseMove:()=>u==="onHover"&&j(!0)||u!=="onHover"&&C(!0)&&j(!0),children:t.jsx("div",{className:`${a||_}`,onClick:M=>{if(M.stopPropagation(),i)return i(v[0]);v[0]&&y(v[0])},children:t.jsxs("div",{className:"flex",children:[t.jsxs("div",{className:"flex-1 flex",children:[s?t.jsx(Zs,{icon:s,className:o==="side"?T?f.menuIconSideActive:f.menuIconSide:T?f.menuIconTopActive:f.menuIconTop}):null,t.jsx("div",{className:f.navItemContent,children:n})]}),t.jsx("div",{onClick:()=>{u==="onClick"&&j(!N)},children:c.length?t.jsx(Zs,{icon:N?f.indicatorIconOpen:f.indicatorIcon}):null}),c.length?t.jsx(nd,{i:e,showSubMenu:N,subMenuActivate:u,active:x,hovering:E,subMenus:c,type:o,themeOptions:d,className:a}):""]})})})},nd=({i:e,showSubMenu:n,subMenus:s,type:r,hovering:i,subMenuActivate:a,active:o,themeOptions:l})=>{const{theme:c}=I.useContext(oe),d=c[r==="side"?"sidenav":"topnav"](l),u=!o&&a!=="onHover"&&i;return(!n||!s.length)&&!u?null:t.jsx("div",{className:r==="side"?d.subMenuWrapper:u&&e===0?d.subMenuWrapperInactiveFlyout:u&&e>0?d.subMenuWrapperInactiveFlyoutBelow:d.subMenuWrapperTop,children:t.jsx("div",{className:`
							${u&&d.subMenuWrapperInactiveFlyoutDirection}
							${!u&&d.subMenuWrapperChild}
					flex ${r==="side"||u?"flex-col":"flex-row"}
				`,children:s.map((p,m)=>t.jsx(mn,{i:m+1,to:p.path,icon:p.icon,type:r,className:p.className,onClick:p.onClick,themeOptions:l,subMenus:p.subMenus,children:p.name},m))})})},Qr=({open:e,toggle:n,menuItems:s=[],rightMenu:r=null,themeOptions:i={}})=>{const{theme:a}=I.useContext(oe),o=a.topnav(i);return t.jsxs("div",{className:`${e?"md:hidden":"hidden"} ${o.topnavMobileContainer}`,id:"mobile-menu",children:[t.jsx("div",{className:"",children:s.map((l,c)=>t.jsx(mn,{type:"top",to:l.path,icon:l.icon,themeOptions:i,subMenus:z(l,"subMenus",[]),children:l.name},c))}),t.jsx("div",{className:"",children:r})]})},sd=({open:e,toggle:n,menuItems:s=[],rightMenu:r=null,leftMenu:i=null,subMenuActivate:a,themeOptions:o={}})=>{const{theme:l}=I.useContext(oe);let c=l.topnav(o);return t.jsx("div",{className:`${c.topnavWrapper}`,children:t.jsxs("div",{className:`${c.topnavContent} justify-between`,children:[t.jsx("div",{children:i}),t.jsx("div",{className:`${c.topnavMenu}`,children:s.map((d,u)=>t.jsx(mn,{type:"top",to:d.path,icon:d.icon,subMenuActivate:a,themeOptions:o,subMenus:z(d,"subMenus",[]),children:d.name},u))}),t.jsxs("div",{className:"flex items-center justify-center h-full",children:[t.jsx("div",{className:`${c.topmenuRightNavContainer}`,children:r}),t.jsxs("button",{type:"button",className:`${c.mobileButton}`,onClick:()=>n(!e),children:[t.jsx("span",{className:"sr-only",children:"Open main menu"}),t.jsx("div",{className:"flex justify-center items-center text-2xl",children:t.jsx("span",{className:e?c.menuCloseIcon:c.menuOpenIcon})})]})]})]})})},rd=({...e})=>{const[n,s]=h.useState(!1);return t.jsxs("nav",{children:[t.jsx(sd,{open:n,toggle:s,...e}),t.jsx(Qr,{open:n,...e})]})},ei=({i:e,item:n,themeOptions:s,subMenuActivate:r})=>t.jsx(mn,{to:n.path,icon:n.icon,className:n.className,onClick:n.onClick,themeOptions:s,subMenuActivate:r,subMenus:z(n,"subMenus",[]),children:n.name},e),id=({open:e,toggle:n,logo:s=null,topMenu:r,menuItems:i=[],bottomMenu:a,themeOptions:o={},subMenuActivate:l,subMenuStyle:c,...d})=>{const{theme:u}=I.useContext(oe),p=u.sidenav(o);return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"md:hidden",onClick:()=>n(!e),children:t.jsx("span",{className:e?p.menuIconOpen:p.menuIconClosed})}),t.jsxs("div",{style:{display:e?"block":"none"},className:"md:hidden",children:[t.jsx("div",{className:"fixed inset-0 z-20 transition-opacity ease-linear duration-300",children:t.jsx("div",{className:"absolute inset-0 opacity-75"})}),t.jsx("div",{className:`fixed inset-0 flex z-40 ${p.contentBgAccent}`,children:t.jsxs("div",{className:`flex-1 flex flex-col max-w-xs w-full transform ease-in-out duration-300 ${p.contentBg}`,children:[t.jsx("div",{className:"absolute top-0 right-0 -mr-14 p-1",children:t.jsx("button",{onClick:()=>n(!e),className:"flex items-center justify-center h-12 w-12 rounded-full focus:outline-none focus:bg-gray-600 os-icon os-icon-x"})}),t.jsxs("div",{className:"flex-1 h-0 pt-2 pb-4 overflow-y-auto overflow-x-hidden",children:[t.jsx("div",{className:"px-6 pt-4 pb-8 logo-text gray-900",children:t.jsx(Se,{to:"/",className:`flex-shrink-0 flex items-center ${p.text}`,children:s})}),t.jsx("div",{children:r}),t.jsx("nav",{className:"flex-1",children:i.map((m,f)=>t.jsx("div",{className:m.sectionClass,children:ei({i:f,page:m,themeOptions:o,subMenuActivate:l})},f))}),t.jsx("div",{children:a})]})]})})]})]})},od=({menuItems:e=[],logo:n=null,topMenu:s,bottomMenu:r,toggle:i,open:a,mobile:o,themeOptions:l={},subMenuActivate:c,subMenuStyle:d,...u})=>{const{theme:p}=I.useContext(oe),m=p.sidenav(l);return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:`${m.sidenavWrapper}`,children:[s,t.jsx("nav",{className:`${m.itemsWrapper}`,children:e.map((f,y)=>ei({i:y,item:f,themeOptions:l,subMenuActivate:c}))}),r]}),o==="side"?"":t.jsx("div",{className:`${m.topnavWrapper} md:hidden`,children:t.jsxs("div",{className:`${m.topnavContent} justify-between`,children:[t.jsx("div",{children:s}),t.jsxs("div",{className:"flex items-center justify-center h-full",children:[t.jsx("div",{className:`${m.topmenuRightNavContainer}`,children:r}),t.jsxs("button",{type:"button",className:m.mobileButton,onClick:()=>i(!a),children:[t.jsx("span",{className:"sr-only",children:"Open main menu"}),t.jsx("div",{className:"flex justify-center items-center text-2xl",children:t.jsx("span",{className:a?m.menuCloseIcon:m.menuOpenIcon})})]})]})]})})]})},hn=e=>{const[n,s]=h.useState(!1);return t.jsxs(t.Fragment,{children:[t.jsx(od,{...e,open:n,toggle:s}),e.mobile==="side"?t.jsx(id,{open:n,toggle:s,...e}):t.jsx(Qr,{open:n,...e,themeOptions:{}})]})};let ad={none:"",micro:"mr-14",mini:"mr-20",miniPad:"mr-0",compact:"mr-44",full:"mr-64"},ld={none:"",micro:"w-14",mini:"w-20",miniPad:"w-0",compact:"w-44",full:"w-64"};const cd=()=>t.jsx("div",{className:"h-12"}),Ft=({children:e,menus:n,sideNav:s={},topNav:r={},title:i})=>{I.useContext(oe);const a={size:s.size||"none",color:s.color||"dark",menuItems:s.menuItems||n,logo:(s==null?void 0:s.logo)||cd},o={position:r.position||"block",size:r.size||"compact",menu:r.menu||"left",subMenuStyle:r.subMenuStyle||"row",menuItems:(r.menuItems||[]).filter(c=>!c.hideInNav),logo:r.logo||t.jsxs("div",{className:"flex items-center justify-center h-12",children:[t.jsx("div",{to:"/",className:`${["none"].includes(a.size)?"":"md:hidden"}`}),i]}),rightMenu:r.rightMenu||t.jsx("div",{})},l=a.logo;return t.jsxs("div",{className:"flex",children:[a.size==="none"?"":t.jsx("div",{className:`hidden md:block ${ad[a.size]}`,children:t.jsx("div",{className:`fixed h-screen ${ld[a.size]}`,children:t.jsx(hn,{topMenu:t.jsx(l,{sideNav:a}),themeOptions:a,menuItems:a.menuItems})})}),t.jsxs("div",{className:"flex-1 flex items-start flex-col items-stretch w-full min-h-screen",children:[o.size==="none"?"":t.jsx(t.Fragment,{children:t.jsx("div",{className:`${o.position==="fixed"?"sticky top-0 z-20 w-full ":""}`,children:t.jsx(rd,{themeOptions:o,leftMenu:o.logo,menuItems:o.menuItems,rightMenu:o.rightMenu})})}),t.jsx("div",{id:"content",className:"flex-1",children:e})]})]})};function sn(e,n,s="",r){let i=n.filter(a=>e.id&&a.parent===e.id).sort((a,o)=>a.index-o.index);return i.length===0?!1:i.map((a,o)=>{let l={id:a.id,path:`${r?`${s}/edit`:s}/${a.url_slug||a.id}`,name:a.title};return sn(l,n)&&(l.subMenus=sn(a,n,s,r)),l})}function dd(e,n){const s=window.location.pathname.replace(n,"").replace("/","").replace("edit/","");return s===""?e.find(r=>r.index===0&&r.parent===""):e.find((r,i)=>r.url_slug===s||r.id===s)}function ti(e,n){var a,o;const s=dd(e,n),r=e.filter(l=>l.parent===(s==null?void 0:s.id)).length;return(s?(o=(a=s.url_slug)==null?void 0:a.split("/"))==null?void 0:o.length:1)+(r?1:0)}function ni(e,n="",s=!1){return e.sort((r,i)=>r.index-i.index).filter(r=>!r.parent).filter(r=>s||r.published!=="draft").map((r,i)=>{let a={id:r.id,path:`${s?`${n}/edit`:n}/${r.url_slug||r.id}`,name:`${r.title} ${r.published==="draft"?"*":""}`,hideInNav:r.hide_in_nav};return sn(a,e,n,s)&&(a.subMenus=sn(r,e,n,s)),a})}const me=(e,n="update")=>{let s=new FormData;return s.append("data",JSON.stringify(e)),s.append("requestType",n),s},ud=(e,n)=>e.parent?`${n.filter(r=>r.id===e.parent)[0].url_slug}/`:"",ut=(e,n)=>{let s=`${ud(e,n)}${si(e.title)}`;return e.url_slug&&e.url_slug===s||!n.map(r=>r.url_slug).includes(s)?s:`${s}_${e.index}`},si=e=>e&&e.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g).map(n=>n.toLowerCase()).join("_"),pd={1:" pt-2 pb-1 uppercase text-sm text-blue-400 hover:underline cursor-pointer border-r-2 mr-4",2:"pl-2 pt-2 pb-1 uppercase text-sm text-slate-400 hover:underline cursor-pointer border-r-2 mr-4",3:"pl-4 pt-2 pb-1 text-sm text-slate-400 hover:underline cursor-pointer border-r-2 mr-4",4:"pl-6 pt-2 pb-1 text-sm text-slate-400 hover:underline cursor-pointer border-r-2 mr-4"},md=e=>{var n;return e?typeof e=="object"?e:(n=JSON.parse(e))==null?void 0:n.text:{}};function rs(e,n=!1){const s=e;return{menuItems:((s==null?void 0:s.sections)||[]).reduce((i,{title:a,element:o,level:l="1",...c})=>{var u,p,m;if(!o||!a||l==="0")return i;const d=o["element-type"]==="lexical"||!o["element-type"]?(m=(p=(u=md(o["element-data"]))==null?void 0:u.root)==null?void 0:p.children)==null?void 0:m.reduce((f,{type:y,tag:v,children:b,...x})=>{var k,T,_,N;const w=y==="heading"&&((T=(k=b[0])==null?void 0:k.text)!=null&&T.length)?[{name:(_=b[0])==null?void 0:_.text,onClick:j=>{const E=[...window.document.querySelectorAll(v)].find(C=>{var M,A;return((M=C==null?void 0:C.children[0])==null?void 0:M.innerHTML)===((A=b[0])==null?void 0:A.text)});E==null||E.scrollIntoView({behavior:"smooth"})},className:`pl-2 pr-4 pb-1 text-sm text-slate-400 hover:text-slate-700 cursor-pointer border-r-2 mr-4
                            ${((N=[...window.document.querySelectorAll(v)].find(j=>{var E,C;return((E=j==null?void 0:j.children[0])==null?void 0:E.innerHTML)===((C=b[0])==null?void 0:C.text)}))==null?void 0:N.offsetParent)===null?"text-blue-200":""}`}]:[];return[...f,...w]},[]):[];return[...i,{name:a,onClick:f=>{const y=window.document.getElementById(`#${a==null?void 0:a.replace(/ /g,"_")}`);y==null||y.scrollIntoView({behavior:"smooth"})},className:pd[l]},...d||[]]},[]),themeOptions:{size:"full",color:"transparent"}}}function hd({item:e,dataItems:n,attributes:s,logo:r,rightMenu:i}){var y,v,b;e||(e={});const{baseUrl:a,theme:o,user:l}=I.useContext(oe),c=I.useMemo(()=>s.sections.ViewComp,[]),d=I.useMemo(()=>ni(n,a,!1),[n]),u=(e==null?void 0:e.index)==="999"?1:ti(n,a),p=rs(e),m=(v=(y=e.sections)==null?void 0:y.filter(x=>x.is_header))==null?void 0:v[0],f=(b=e.sections)==null?void 0:b.filter(x=>!x.is_header&&!x.is_footer);return t.jsxs("div",{id:"page_view",children:[(e==null?void 0:e.header)==="above"&&t.jsx(c,{item:e,value:[m],...s.sections}),t.jsx(Ft,{topNav:{menuItems:d,position:"fixed",logo:r,rightMenu:i},sideNav:e.sideNav?e.sideNav:p,children:t.jsxs("div",{className:`${o.page.wrapper1} ${o.navPadding[u]}`,children:[(e==null?void 0:e.header)==="below"&&t.jsx(c,{item:e,value:[m],...s.sections}),t.jsxs("div",{className:`${o.page.wrapper2}`,children:[(e==null?void 0:e.sidebar)==="show"&&t.jsx(xd,{inPageNav:p}),t.jsxs("div",{className:o.page.wrapper3,children:[(e==null?void 0:e.header)==="inpage"&&t.jsx(c,{item:e,value:[m],...s.sections}),(l==null?void 0:l.authLevel)>=5&&t.jsx(fd,{item:e,baseUrl:a}),t.jsx(c,{item:e,value:f,...s.sections})]})]})]})}),(e==null?void 0:e.footer)&&t.jsx("div",{className:"h-[300px] bg-slate-100"})]})}function fd({baseUrl:e,item:n}){return t.jsx(Se,{className:"z-30 absolute right-[10px] top-[5px]",to:`${e}/edit/${n.url_slug}`,children:t.jsx("i",{className:"fad fa-edit fa-fw flex-shrink-0 text-lg text-slate-400 hover:text-blue-500"})})}function xd({inPageNav:e}){return t.jsx("div",{className:"w-64 hidden xl:block",children:t.jsx("div",{className:"w-64 sticky top-20 hidden xl:block h-screen",children:t.jsx("div",{className:"h-[calc(100%_-_5rem)] overflow-y-auto overflow-x-hidden font-display",children:t.jsx(hn,{...e})})})})}const gd=({label:e,types:n,type:s,setType:r,multi:i=!1,size:a="small",disabled:o,disabledTitle:l,autoSelect:c=!0})=>(h.useEffect(()=>{var p,m;const d=((p=n[0])==null?void 0:p.value)||n[0];if(!d||!c||o)return;const u=i?[d]:d;(!s||Array.isArray(s)&&!((m=s.filter(f=>f))!=null&&m.length))&&r(u)},[n]),t.jsxs("div",{className:"my-1 flex flex-rows flex-wrap",title:o?l:null,children:[e&&t.jsx("div",{className:"p-2 pl-0 w-1/4",children:e}),t.jsx("span",{className:`
              
                space-x-1 rounded-lg bg-slate-100 py-0.5
                flex flex-row flex-wrap
                shadow-sm 
                ${a==="large"?"w-full":"w-fit"}`,children:n.map((d,u)=>{const p=(d==null?void 0:d.value)||d,m=i&&Array.isArray(s)?s:i&&!Array.isArray(s)?[s]:!i&&Array.isArray(s)?s[0]:s,f=i&&(m==null?void 0:m.includes(p))||!i&&m===p;return t.jsx("button",{type:"button",className:`
                            ${u!==0&&"-ml-px"} 
                            ${o&&"pointer-events-none"}
                            rounded-lg py-[0.4375rem] break-none
                            ${f?"text-gray-900 bg-white shadow":"text-gray-700"} hover:text-blue-500
                            min-w-[60px] min-h-[30px] uppercase
                            relative items-center px-2 text-xs items-center justify-center text-center 
                            focus:z-10`,onClick:()=>{const y=i&&(m!=null&&m.includes(p))?m.filter(v=>v!==p):i&&!(m!=null&&m.includes(p))?[...m,p]:p;r(y)},children:(d==null?void 0:d.label)||d},u)})})]}));function mt({options:e=[],onChange:n,value:s,nameAccessor:r=o=>(o==null?void 0:o.name)||o,valueAccessor:i,className:a}){const[o,l]=h.useState(""),c=o===""?e:e.filter(d=>(r(d)+"").toLowerCase().replace(/\s+/g,"").startsWith(o.toLowerCase().replace(/\s+/g,"")));return t.jsx("div",{className:"w-full",children:t.jsx(Ee,{value:s,onChange:n,children:t.jsxs("div",{className:"relative mt-1",children:[t.jsxs("div",{className:a||"relative w-full cursor-default overflow-hidden rounded-lg bg-white text-left shadow-md focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75 focus-visible:ring-offset-2 focus-visible:ring-offset-blue-300 sm:text-sm",children:[t.jsx(Ee.Input,{className:"w-full border-none py-2 pl-3 pr-10 text-sm leading-5 text-gray-900 focus:ring-0",displayValue:d=>r(d)||d,onChange:d=>l(d.target.value)}),t.jsx(Ee.Button,{className:"absolute inset-y-0 right-0 flex items-center pr-2",children:t.jsx("div",{className:"h-5 w-5 text-gray-400 flex items-center justify-center","aria-hidden":"true",children:t.jsx("div",{class:"fa fa-chevron-down"})})})]}),t.jsx(be,{as:h.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",afterLeave:()=>l(""),children:t.jsx(Ee.Options,{className:"z-50 absolute mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm",children:c.length===0&&o!==""?t.jsx("div",{className:"relative cursor-default select-none py-2 px-4 text-gray-700",children:"Nothing found."}):c.filter((d,u)=>u<60).map((d,u)=>t.jsx(Ee.Option,{className:({active:p})=>`relative cursor-default select-none py-2 pl-10 pr-4 ${p?"bg-blue-600 text-white":"text-gray-900"}`,value:d,children:({selected:p,active:m})=>t.jsxs(t.Fragment,{children:[t.jsx("span",{className:`block truncate ${p?"font-medium":"font-normal"}`,children:r(d)||d}),p?t.jsx("span",{className:`absolute inset-y-0 left-0 flex items-center pl-3 ${m?"text-white":"text-blue-600"}`,children:t.jsx("div",{className:"h-5 w-5 flex items-center justify-center","aria-hidden":"true",children:t.jsx("div",{className:"fa fa-check"})})}):null]})},u))})})]})})})}const ce="hazmit_dama",ri=e=>Object.entries(e||{}).reduce((n,s)=>{const[r,i]=s;return typeof i.value<"u"?n[r]=i.value:n[r]=i,n},{}),bd=({source_id:e,value:n,onChange:s})=>{const{falcor:r,falcorCache:i}=I.useContext(oe);h.useEffect(()=>{async function o(){const l=["dama",ce,"sources","byId",e,"views","length"],c=await r.get(l);await r.get(["dama",ce,"sources","byId",e,"views","byIndex",{from:0,to:z(c.json,l,0)-1},"attributes",["view_id","version"]])}o()},[r,ce]);const a=h.useMemo(()=>Object.values(z(i,["dama",ce,"sources","byId",e,"views","byIndex"],{})).map(o=>ri(z(i,o.value,{attributes:{}}).attributes)),[i,e,ce]);return h.useEffect(()=>{var o;!n&&((o=a==null?void 0:a[0])!=null&&o.view_id)&&s(a==null?void 0:a[0])},[a]),t.jsx(mt,{options:["",...a],value:n,nameAccessor:o=>o==null?void 0:o.version,onChange:o=>s(o)})},yd=({value:e,onChange:n})=>{const{falcor:s,falcorCache:r}=I.useContext(oe);h.useEffect(()=>{async function a(){const o=["dama",ce,"sources","length"],l=await s.get(o);await s.get(["dama",ce,"sources","byIndex",{from:0,to:z(l.json,o,0)-1},"attributes",["source_id","name","metadata"]])}a()},[s,ce]);const i=h.useMemo(()=>Object.values(z(r,["dama",ce,"sources","byIndex"],{})).map(a=>ri(z(r,a.value,{attributes:{}}).attributes)),[r,ce]);return t.jsx(mt,{options:["",...i],value:e,onChange:a=>n(a)})};function wd({item:e={}}){const{baseUrl:n}=I.useContext(oe),[s,r]=h.useState(!1);return t.jsxs("div",{className:"grid grid-cols-4 px-2 py-3 border-b hover:bg-blue-50",children:[t.jsx("div",{children:t.jsxs(Se,{to:`${n}/templates/edit/${e.id}`,children:[t.jsx("div",{className:"px-2 font-medium text-lg text-slate-700",children:e.title}),t.jsx("div",{className:"px-2 text-xs text-slate-400",children:e.id})]})}),t.jsx("div",{}),t.jsx("div",{}),t.jsxs("div",{className:"text-right flex items-center flex-row justify-end px-2 ",children:[t.jsx(Se,{to:`${n}/templates/pages/${e.id}`,className:"fa-thin fa-memo px-2 py-1 mx-2 text-bold cursor-pointer",title:"pages"}),t.jsx("i",{className:"fa fa-trash text-red-300 hover:text-red-500 cursor-pointer",onClick:()=>r(!s)}),t.jsx(Nd,{item:e,open:s,setOpen:r})]})]})}function vd({children:e,dataItems:n,edit:s,baseUrl:r="",logo:i,rightMenu:a,sideNav:o=[],...l}){const{path:c}=Ae(),[d,u]=h.useState(!1),p=[{path:`${r}/templates`,name:"Templates"}];return t.jsx(Ft,{topNav:{menuItems:p,position:"fixed",logo:i,rightMenu:a},sideNav:o,children:t.jsx("div",{className:"py-6 h-full",children:t.jsxs("div",{className:"bg-white h-full shadow border max-w-6xl mx-auto px-6",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"text-2xl p-3 font-thin flex-1",children:"Templates"}),c===`${r}/templates`?t.jsx("div",{className:"px-1",children:t.jsx(Se,{to:`${r}`,className:"inline-flex w-36 justify-center rounded-lg cursor-pointer text-sm font-semibold py-1 px-4 bg-blue-600 text-white hover:bg-blue-500 shadow-lg border border-b-4 border-blue-800 hover:border-blue-700 active:border-b-2 active:mb-[2px] active:shadow-none",children:" Templates "})}):t.jsx("div",{className:"px-1",children:t.jsx("div",{onClick:()=>u(!d),className:"inline-flex w-36 justify-center rounded-lg cursor-pointer text-sm font-semibold py-1 px-4 bg-blue-600 text-white hover:bg-blue-500 shadow-lg border border-b-4 border-blue-800 hover:border-blue-700 active:border-b-2 active:mb-[2px] active:shadow-none",children:" New Template"})})]}),t.jsx("div",{className:"px-6 pt-8",children:t.jsx("div",{className:"shadow rounded border",children:n.filter(m=>m.template_id=="-99").map(m=>t.jsx(wd,{item:m},m.id))})}),t.jsx(jd,{open:d,setOpen:u})]})})})}function jd({open:e,setOpen:n}){const s=h.useRef(null),r=Ie(),{pathname:i="/edit"}=Ae(),[a,o]=h.useState(!1),[l,c]=h.useState("");return t.jsxs(as,{open:e,setOpen:n,initialFocus:s,children:[t.jsxs("div",{className:"sm:flex sm:items-start",children:[t.jsx("div",{className:"mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-blue-100 sm:mx-0 sm:h-10 sm:w-10",children:t.jsx("i",{className:"fa fa-plus text-blue-400"})}),t.jsxs("div",{className:"mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left w-full px-2",children:[t.jsx(ye.Title,{as:"h3",className:"text-base font-semibold leading-6 text-gray-900",children:"New Template"}),t.jsx("div",{className:"mt-2 w-full",children:t.jsx("input",{className:"w-full px-2 py-1 text font-medium text-slate-500 focus:outline-none border-slate-300 border-b-2 focus:border-blue-500",value:l,onChange:d=>c(d.target.value),placeholder:"Template Title"})})]})]}),t.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[t.jsxs("button",{type:"button",disabled:a||l.length<3,className:"inline-flex w-full justify-center rounded-md disabled:bg-slate-300 bg-blue-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-blue-500 sm:ml-3 sm:w-auto",onClick:async()=>{const d={title:l,url_slug:si(l),template_id:-99,hide_in_nav:!0,index:999};o(!0),await r(me(d),{method:"post",action:i}),o(!1),n(!1)},children:["Creat",a?"ing...":"e"]}),t.jsx("button",{type:"button",className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto",onClick:()=>n(!1),ref:s,children:"Cancel"})]})]})}function Nd({item:e,open:n,setOpen:s}){const r=h.useRef(null),i=Ie(),{pathname:a="/edit"}=Ae(),[o,l]=h.useState(!1);return t.jsxs(as,{open:n,setOpen:s,initialFocus:r,children:[t.jsxs("div",{className:"sm:flex sm:items-start",children:[t.jsx("div",{className:"mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:t.jsx("i",{className:"fa fa-exlamation-triangle"})}),t.jsxs("div",{className:"mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left",children:[t.jsxs(ye.Title,{as:"h3",className:"text-base font-semibold leading-6 text-gray-900",children:["Delete Page ",e.title," ",e.id]}),t.jsx("div",{className:"mt-2",children:t.jsx("p",{className:"text-sm text-gray-500",children:"Are you sure you want to delete this Template? All of the page data will be permanently removed from our servers forever. This action cannot be undone."})})]})]}),t.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[t.jsxs("button",{type:"button",disabled:o,className:"inline-flex w-full justify-center rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-red-500 sm:ml-3 sm:w-auto",onClick:async()=>{l(!0),await i(me(e,"delete"),{method:"post",action:a}),l(!1),s(!1)},children:["Delet",o?"ing...":"e"]}),t.jsx("button",{type:"button",className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto",onClick:()=>s(!1),ref:r,children:"Cancel"})]})]})}const ii=e=>typeof(e==null?void 0:e.value)=="object"?ii(e.value):(e==null?void 0:e.value)||e,Cd={"docs-play":"Playground","docs-page":"Live","docs-draft":"Draft","docs-ctp":"CTP Live"},Qs={"docs-play":"/playground","docs-page":"","docs-ctp":"","docs-draft":"/drafts"},xt=({app:e,type:n,filter:s,action:r="load",tags:i,attributes:a=[{key:"id",label:"id"},{key:"app",label:"app"},{key:"type",label:"type"},{key:"data",label:"data"},{key:"updated_at",label:"updated_at"}]})=>({format:{app:e,type:n,attributes:a},children:[{type:()=>{},action:r,filter:{options:JSON.stringify({filter:s}),tags:i,attributes:a.map(o=>o.key)},path:"/"}]}),_d=e=>Object.keys(e).find(n=>n.toLowerCase().includes("name")||n.toLowerCase().includes("title")),kd=(e,n,s)=>e==="geoid"?(s==null?void 0:s.county)||(s==null?void 0:s.name)||n:(s==null?void 0:s[_d(s)])||n,Sd=({item:e,params:n,logo:s,rightMenu:r,baseUrl:i=""})=>{var w,k,T,_;const[a,o]=h.useState(10),{falcor:l,falcorCache:c}=I.useContext(oe),{id:d}=n,u=(k=(w=e.data_controls)==null?void 0:w.view)==null?void 0:k.view_id,p=(_=(T=e.data_controls)==null?void 0:T.id_column)==null?void 0:_.name,m=[e.type],f=[{path:`${i}/templates`,name:"Templates"}];if(!d)return null;const[y,v]=h.useState([]);h.useEffect(()=>{(async function(){const N=await m.reduce(async(j,E)=>{const C=await j,M=await rt(l,xt({app:"dms-site",type:E,filter:{"data->>'template_id'":[d]}}),"/");return[...C,...M]},Promise.resolve([]));v(N)})()},[d]),h.useEffect(()=>{u&&async function(){l.get(["dama",ce,"viewsbyId",u,"data","length"])}()},[d,u]);const b=I.useMemo(()=>z(c,["dama",ce,"viewsbyId",u,"data","length"],0),[d,ce,u,c]);h.useEffect(()=>{u&&async function(){l.get(["dama",ce,"viewsbyId",u,"databyIndex",{from:0,to:b-1},Object.keys(e.data_controls.active_row||{})])}()},[d,ce,u,c]);const x=I.useMemo(()=>Object.values(z(c,["dama",ce,"viewsbyId",u,"databyIndex"],{})).map(N=>z(c,[...N.value],"")),[d,p,u,c]);return y.map(({type:N,data:j,updated_at:E})=>{var M,A,W;const C=x.find($=>$[p]===j.value.id_column_value);return{title:kd(p,j.value.id_column_value,C)||j.value.title,location:Cd[N],view:`${Qs[N]}/${(M=j==null?void 0:j.value)==null?void 0:M.url_slug}`,edit:`${Qs[N]}/edit/${(A=j==null?void 0:j.value)==null?void 0:A.url_slug}`,updated:ii(E),status:((W=j==null?void 0:j.value)==null?void 0:W.num_errors)>0?"error":"success"}}),t.jsx(Ft,{topNav:{menuItems:f,position:"fixed",logo:s,rightMenu:r},sideNav:[],children:t.jsx("div",{className:"h-full flex-1 flex flex-col text-gray-900 bg-slate-100",children:t.jsx("div",{className:"py-6 h-full",children:t.jsxs("div",{className:"bg-white h-full shadow border max-w-6xl mx-auto px-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between",children:[t.jsxs("div",{className:"flex flex-col",children:[t.jsxs("label",{className:"text-2xl pt-3 font-thin flex-1",children:[t.jsx("span",{className:"font-semibold",children:e.title})," / Generated Pages"]}),t.jsxs("label",{className:"text-sm font-thin flex-1 italic",children:["Showing ",y==null?void 0:y.length," generated / ",b," available items"]})]}),t.jsxs("div",{className:"text-xs",children:[t.jsx("label",{children:"show"}),t.jsx("select",{className:"p-2 m-2 h-fit",value:a,onChange:N=>o(N.target.value),children:[10,25,50,75,100].map(N=>t.jsx("option",{value:N,children:N},N))}),t.jsx("label",{children:"rows"})]})]}),t.jsx("div",{className:"px-6 pt-8",children:t.jsx("div",{className:"shadow rounded border"})})]})})})})},is=(e,n={})=>{let s=n;try{s=JSON.parse(e)}catch{}return s},Td=(e,n,s)=>{n&&s([])},oi=(e,n,s)=>{var i;let r=(i=e[0])==null?void 0:i.key;n(e),s&&s(r)},Ed=({props:e,selected:n,setSelected:s,onChange:r})=>t.jsxs("div",{className:"w-fit inline-block ml-2",children:[e.label,t.jsx("button",{className:"hover:text-red-300 animate ml-1 p-1 rounded-md rbt-token-remove-button",onClick:i=>{const a=n.filter(o=>o.key!==e.key);oi(a,s,r)},children:t.jsx("i",{className:"fa fa-close"})})]}),$d=({results:e,menuProps:n,labelKey:s,filter:r,filters:i,setFilter:a,onChange:o,...l})=>t.jsxs(Xi,{className:"bg-slate-100 overflow-hidden z-10 rounded-md",...n,children:[t.jsx("div",{className:"flex flex-row flex-wrap items-center justify-start gap-1 p-1 bg-slate-200 text-xs font-bold",children:i.map(({icon:c,label:d,value:u,filterText:p})=>{const m=r===p,f=y=>u?o(u):a(m?null:p);return t.jsxs("button",{title:`Filter by: ${p}`,className:`py-1 px-2 my-0.5 
                                    ${m?"bg-slate-300 hover:bg-blue-300":"bg-slate-100 hover:bg-blue-100"} 
                                     rounded-md`,onClick:f,children:[t.jsx("i",{className:`${c} pr-2 pl-1`}),d]},p)})}),e.map((c,d)=>t.jsx(Zi,{className:"block hover:bg-slate-200 text-xl tracking-wide pl-1",option:c,position:d,children:c.label}))]}),Md=({className:e,value:n,onChange:s,options:r=[],filters:i=[],showAll:a=!1,placeholder:o="Search..."})=>{const[l,c]=h.useState([]),[d,u]=h.useState(""),[p,m]=h.useState(r);return h.useEffect(()=>{if(!n)return;const f=r.filter(y=>y.key===n);c(f)},[n]),h.useEffect(()=>{m(r.filter(f=>{var y;return!d||((y=f==null?void 0:f.label)==null?void 0:y.toLowerCase().includes(d.toLowerCase()))}))},[r,d]),t.jsx("div",{className:"flex justify-between",children:t.jsxs("div",{className:`flex flex row ${e} w-full shrink my-1 bg-white p-1 pl-3 rounded-l-md`,children:[t.jsx("i",{className:"fa fa-search font-light text-xl bg-white rounded-r-md"}),t.jsx(Ki,{className:"w-full",onSearch:Td,minLength:0,id:"search",placeholder:o,options:p,labelKey:f=>`${f==null?void 0:f.label}`,defaultSelected:l,onChange:f=>oi(f,c,s),selected:l,inputProps:{className:"w-full flex flex-row flex-wrap p-2"},renderMenu:(f,y,v)=>$d({results:f,menuProps:y,labelKey:v,filters:i,filter:d,setFilter:u,onChange:s}),renderToken:f=>t.jsx(Ed,{props:f,selected:l,setSelected:c,onChange:s})},"search")]})})};function ai({position:e="above",bgImg:n="",logo:s="",title:r="Title",bgClass:i="",subTitle:a="subTitle",note:o="note"}){return t.jsxs("div",{className:`h-[300px] bg-cover bg-center w-full flex ${i}`,style:{backgroundImage:`url("${n}")`},children:[t.jsx("div",{className:"p-2",children:s&&t.jsx("img",{src:s,alt:"NYS Logo"})}),t.jsxs("div",{className:"flex-1 flex flex-col  items-center p-4",children:[t.jsx("div",{className:"flex-1"}),t.jsx("div",{className:"text-3xl sm:text-7xl font-bold text-[#f2a91a] text-right w-full text-display",children:r&&t.jsx("div",{children:r})}),t.jsx("div",{className:"text-lg tracking-wider pt-2 sm:text-3xl font-bold text-slate-200 text-right w-full uppercase",children:a&&t.jsx("div",{children:a})}),t.jsx("div",{className:"text-lg tracking-wider sm:text-xl font-bold text-slate-200 text-right w-full uppercase",children:o&&t.jsx("div",{children:o})}),t.jsx("div",{className:"flex-1"})]})]})}const Id=({position:e="above",bgImg:n="/img/header.png",logo:s="/img/nygov-logo.png",bgClass:r="",title:i="MitigateNY",subTitle:a="New York State Hazard Mitigation Plan",note:o="2023 Update"})=>new Promise((l,c)=>{l({position:e,bgImg:n,bgClass:r,logo:s,title:i,subTitle:a,note:o})}),li=({value:e,onChange:n,size:s})=>{let r=h.useMemo(()=>e&&di(e)?JSON.parse(e):{},[e]);h.useState(!0),h.useState("");const[i,a]=h.useState({bgImg:r.bgImg||"",logo:r.logo||"",title:r.title||"Title",subTitle:r.subTitle||"subTitle",note:r.note||"note",bgClass:r.bgClass||""});return h.useEffect(()=>{e!==JSON.stringify(i)&&n(JSON.stringify(i))},[i]),t.jsx("div",{className:"w-full",children:t.jsxs("div",{className:"relative",children:[t.jsxs("div",{className:"border rounded-md border-blue-500 bg-blue-50 p-2 m-1",children:[t.jsxs("div",{className:"flex flex-row flex-wrap justify-between",children:[t.jsx("label",{className:"shrink-0 pr-2 py-1 my-1 w-1/4",children:"Title:"}),t.jsx("div",{className:"flex flex row w-3/4 shrink my-1",children:t.jsx("input",{type:"text",value:i.title,onChange:o=>a({...i,title:o.target.value})})})]}),t.jsxs("div",{className:"flex flex-row flex-wrap justify-between",children:[t.jsx("label",{className:"shrink-0 pr-2 py-1 my-1 w-1/4",children:"subTitle:"}),t.jsx("div",{className:"flex flex row w-3/4 shrink my-1",children:t.jsx("input",{type:"text",value:i.subTitle,onChange:o=>a({...i,subTitle:o.target.value})})})]}),t.jsxs("div",{className:"flex flex-row flex-wrap justify-between",children:[t.jsx("label",{className:"shrink-0 pr-2 py-1 my-1 w-1/4",children:"Note:"}),t.jsx("div",{className:"flex flex row w-3/4 shrink my-1",children:t.jsx("input",{type:"text",value:i.note,onChange:o=>a({...i,note:o.target.value})})})]}),t.jsxs("div",{className:"flex flex-row flex-wrap justify-between",children:[t.jsx("label",{className:"shrink-0 pr-2 py-1 my-1 w-1/4",children:"Bg Class:"}),t.jsx("div",{className:"flex flex row w-3/4 shrink my-1",children:t.jsx("input",{type:"text",value:i.bgClass,onChange:o=>a({...i,bgClass:o.target.value})})})]}),t.jsxs("div",{className:"flex flex-row flex-wrap justify-between",children:[t.jsx("label",{className:"shrink-0 pr-2 py-1 my-1 w-1/4",children:"bgImg:"}),t.jsx("div",{className:"flex flex row w-3/4 shrink my-1",children:t.jsx("input",{type:"text",value:i.bgImg,onChange:o=>a({...i,bgImg:o.target.value})})})]}),t.jsxs("div",{className:"flex flex-row flex-wrap justify-between",children:[t.jsx("label",{className:"shrink-0 pr-2 py-1 my-1 w-1/4",children:"logo:"}),t.jsx("div",{className:"flex flex row w-3/4 shrink my-1",children:t.jsx("input",{type:"text",value:i.logo,onChange:o=>a({...i,logo:o.target.value})})})]})]}),t.jsx(ai,{...i})]})})},Ad=({value:e})=>{if(!e)return"";let n=typeof e=="object"?e["element-data"]:JSON.parse(e);return t.jsx(ai,{...n})};li.settings={hasControls:!0,name:"ElementEdit"};const Od={name:"Header: Default",type:"Header",variables:[{name:"bgImg",default:"/img/header.png"},{name:"logo",default:"/img/nygov-logo.png"},{name:"title",default:"MitigateNY"},{name:"subTitle",default:"New York State Hazard Mitigation Plan"},{name:"bgClass",default:""},{name:"note",default:"2023 Update"}],getData:Id,EditComp:li,ViewComp:Ad},Rd=e=>{try{return JSON.parse(e)}catch{return{}}},Ld=({title:e,className:n,color:s,setColor:r})=>t.jsxs("div",{className:n,children:[t.jsx("label",{className:"shrink-0 pr-2 w-1/4",children:e}),t.jsx("input",{id:"background",list:"colors",className:"rounded-md shrink",type:"color",value:s,onChange:i=>r(i.target.value)}),t.jsx("datalist",{id:"colors",children:["#1e3a8a","#1e40af","#1d4ed8","#2563eb","#3b82f6","#60a5fa","#93c5fd","#bfdbfe","#dbeafe","#eff6ff","#713f12","#854d0e","#a16207","#ca8a04","#eab308","#facc15","#fde047","#fef08a","#fef9c3","#fefce8"].map(i=>t.jsx("option",{children:i},i))})]}),ci=({value:e,onChange:n})=>{const s=Rd(e),r={text:"",size:"4xl",color:"000000"},[i,a]=h.useState((s==null?void 0:s.bgColor)||"#fff"),[o,l]=h.useState((s==null?void 0:s.text)||e||r);h.useEffect(()=>{n(JSON.stringify({bgColor:i,text:o}))},[i,o]);const c=qe.lexical.EditComp;return t.jsx("div",{className:"w-full",children:t.jsxs("div",{className:"relative",children:[t.jsx(Ld,{title:"Background: ",className:"w-full px-2 py-1 flex flex-row text-sm items-center border border-dashed",color:i,setColor:a}),t.jsx(c,{value:o,onChange:l,bgColor:i})]})})};ci.settings={hasControls:!0,name:"ElementEdit"};const Dd=({value:e})=>{var i,a,o,l,c,d,u,p;if(!e)return"";let n=typeof e=="object"?e["element-data"]:JSON.parse(e);const s=(n==null?void 0:n.text)||e;if(!s||((a=(i=s==null?void 0:s.root)==null?void 0:i.children)==null?void 0:a.length)===1&&((d=(c=(l=(o=s==null?void 0:s.root)==null?void 0:o.children)==null?void 0:l[0])==null?void 0:c.children)==null?void 0:d.length)===0||((p=(u=s==null?void 0:s.root)==null?void 0:u.children)==null?void 0:p.length)===0)return null;const r=qe.lexical.ViewComp;return t.jsx("div",{children:t.jsx(r,{value:s,bgColor:n==null?void 0:n.bgColor})})},Pd={name:"Rich Text",EditComp:ci,ViewComp:Dd},Fd={lexical:Pd,"Header: Default Header":Od};let _e=Fd;const di=e=>{try{JSON.parse(e)}catch{return!1}return!0},zd={card:"fa-thin fa-credit-card",table:"fa-thin fa-table",graph:"fa-thin fa-chart-column",map:"fa-thin fa-map",lexical:"fa-thin fa-text"};function Bd(e){const{value:n,onChange:s,size:r}=e,i=(o,l)=>{Ve(n,{...n,[o]:l})||s({...n,[o]:l})};h.useEffect(()=>{n!=null&&n["element-type"]||s({...n,"element-type":"lexical"})},[]);let a=(_e[z(n,"element-type","lexical")]||_e.lexical).EditComp;return t.jsxs("div",{className:"w-full",children:[t.jsx("div",{className:"relative my-1",children:t.jsx(Md,{className:"flex-row-reverse",placeholder:"Search for a Component...",options:Object.keys(_e).filter(o=>!_e[o].hideInSelector).map(o=>({key:o,label:_e[o].name||o})),value:n==null?void 0:n["element-type"],onChange:async o=>{if(o==="paste")return navigator.clipboard.readText().then(l=>{const c=di(l)&&JSON.parse(l||"{}");return(c==null?void 0:c["element-type"])&&s({...n,...c})});i("element-type",o)},filters:[{icon:"fa-thin fa-paste",label:"Paste",value:"paste"},...[...new Set(Object.keys(_e).filter(o=>!_e[o].hideInSelector).map(o=>(_e[o].name||o).split(":")[0]))].map(o=>({icon:`${zd[o.toLowerCase()]||o.toLowerCase()}`,label:o,filterText:o}))]})}),t.jsx("div",{children:t.jsx(a,{value:(n==null?void 0:n["element-data"])||"",onChange:o=>i("element-data",o),size:r})})]})}function Wd({value:e}){let n=_e[z(e,"element-type","lexical")]?_e[z(e,"element-type","lexical")].ViewComp:()=>t.jsxs("div",{children:[" Component ",e["element-type"]," Not Registered "]});return t.jsx(n,{value:(e==null?void 0:e["element-data"])||""})}const ui={EditComp:Bd,ViewComp:Wd},En=async({item:e,url:n,destination:s,id_column:r,dataRows:i,falcor:a,setLoadingStatus:o,locationNameMap:l,setGeneratedPages:c,urlSuffixCol:d="geoid"})=>{o("Generating Pages...",i);const u=i.sort((f,y)=>f!=null&&f.state_fips?+y[r.name]-+f[r.name]:!0).map(f=>f[r.name]);let p=0;const m=[];await $n(u,async(f,y)=>{var _,N,j,E;const v=await l.reduce(async(C,M)=>(await C,(await rt(a,xt({app:"dms-site",type:M,filter:{"data->>'template_id'":[e.id],"data->>'id_column_value'":[f]}}),"/"))[0]),Promise.resolve([]));console.log("existing page",f,v);const b=((j=(N=(_=v==null?void 0:v.data)==null?void 0:_.value)==null?void 0:N.sections)==null?void 0:j.map(C=>C.id))||[];o(`${v?"Updating":"Generating"} page ${++p}/${u==null?void 0:u.length}`);const x=await b.reduce(async(C,M)=>{const A=await C,W=await rt(a,xt({app:"dms-site",type:"cms-section",filter:{id:[M]}}),"/");return[...A,...W]},Promise.resolve([])),w=e.data_controls,k=i.find(C=>C[r.name]===f)||{};let T=await $n(e.sections.map(C=>C.id),async C=>{var H,J,D,G;let M=e.sections.find(q=>q.id===C)||{},A=is((H=M==null?void 0:M.element)==null?void 0:H["element-data"])||{},W=((J=M==null?void 0:M.element)==null?void 0:J["element-type"])||"",$=_e[W]||{},P=(($==null?void 0:$.variables)||[]).reduce((q,ee)=>(q[ee.name]=ee.name===r.name?f:A[ee.name],q),{}),F=Object.keys(((D=w==null?void 0:w.sectionControls)==null?void 0:D[C])||{}).reduce((q,ee)=>{var S,R,U,Q,K,Z;const O=((U=(R=(S=w==null?void 0:w.sectionControls)==null?void 0:S[C])==null?void 0:R[ee])==null?void 0:U.name)||((K=(Q=w==null?void 0:w.sectionControls)==null?void 0:Q[C])==null?void 0:K[ee]);return q[ee]=O===r.name?f:k[O]||((Z=w==null?void 0:w.active_row)==null?void 0:Z[O])||null,q},{}),Y=(G=A.additionalVariables)==null?void 0:G.map(q=>{var S,R;const ee=q.name,O=(R=(S=w==null?void 0:w.sectionControls)==null?void 0:S[C])==null?void 0:R[ee];return q.defaultValue=k==null?void 0:k[O],q}),V={...P,...F,additionalVariables:Y};try{return $!=null&&$.getData?$.getData(V,a).then(q=>({section_id:C,data:q,type:W})):{section_id:C,data:A,type:W}}catch(q){return{section_id:C,data:A,err:q,type:W}}},{concurrency:5});if(T.length>0){const C=e.sections.map(D=>T.find(G=>G.section_id===D.id)||D).filter(D=>D).map(({section_id:D,data:G,err:q,type:ee})=>{var U;let O=e.sections.find(Q=>Q.id===D)||{},S=x.find(Q=>Q.data.value.element["template-section-id"]===D)||{},R=((U=S==null?void 0:S.data)==null?void 0:U.value)||{element:{}};return S!=null&&S.id&&(R.id=S==null?void 0:S.id),R.title=O.title,R.level=O.level,R.size=O.size,R.tags=O.tags,R.status=q?JSON.stringify(q,Object.getOwnPropertyNames(q)):"success",R.element["element-data"]=JSON.stringify(G),R.element["element-type"]=ee,R.element["template-section-id"]=D,R}),M="dms-site",A=s||e.type,$={format:{app:M,type:"cms-section"}},P={format:{app:M,type:A}},F=await $n(C.map(D=>nn($,D)),D=>D,{concurrency:5}),V=d==="county"&&(D=>D.toLowerCase().replace(" county","").replace(".","").replace(/ /g,"_"))((k==null?void 0:k.county)||(k==null?void 0:k.name))||f,H={...v&&{id:v.id},...((E=v==null?void 0:v.data)==null?void 0:E.value)||{},id_column_value:f,template_id:e.id,sidebar:e.sidebar,header:e.header,footer:e.footer,full_width:e.full_width,hide_in_nav:"true",index:999,url_slug:`${n||r.name}/${V}`,title:`${r.name} ${f} Template`,num_errors:C.filter(D=>D.status!=="success").length,sections:[...C.map((D,G)=>{var q;return{id:D.id||((q=F[G])==null?void 0:q.id),ref:"dms-site+cms-section"}}),...x.filter(D=>!D.data.value.element["template-section-id"]).map((D,G)=>({id:D.id,ref:"dms-site+cms-section"}))],draft_sections:[...C.map((D,G)=>{var q;return{id:D.id||((q=F[G])==null?void 0:q.id),ref:"dms-site+cms-section"}}),...x.filter(D=>!D.data.value.element["template-section-id"]).map((D,G)=>({id:D.id,ref:"dms-site+cms-section"}))]},J=await nn(P,H);m.push({id:J==null?void 0:J.id,num_errors:H.num_errors,id_column_value:H.id_column_value})}},{concurrency:5}),c(m),o(void 0)};function $n(e,n,s={}){let r=s.concurrency||1/0,i=0;const a=[],o=[],l=e[Symbol.iterator]();for(;r-- >0;){const d=c();if(d)o.push(d);else break}return Promise.all(o).then(()=>a);function c(){const d=l.next();if(d.done)return null;const u=i++,p=n(d.value,u);return Promise.resolve(p).then(m=>(a[u]=m,c()))}}const pi=({submit:e,item:n,onChange:s,loadingStatus:r,setLoadingStatus:i=()=>{}})=>{var W;const{falcor:a,falcorCache:o}=I.useContext(oe),[l,c]=h.useState([]),[d,u]=h.useState(!1),[p,m]=h.useState("geoid"),{url:f,destination:y=n.type,source:v,view:b,view_id:x,id_column:w,active_row:k}=n==null?void 0:n.data_controls,T=[y];I.useEffect(()=>{b.view_id&&a.get(["dama",ce,"viewsbyId",b.view_id,"data","length"])},[ce,b.view_id]);const _=I.useMemo(()=>z(o,["dama",ce,"viewsbyId",b.view_id,"data","length"],0),[ce,b.view_id,o]),N=I.useMemo(()=>{let $=z(v,["metadata","columns"],z(v,"metadata",[]));return Array.isArray($)||($=[]),$.filter(P=>!["geom","wkb_geometry","ogc_fid"].includes(P==null?void 0:P.name))},[v]);I.useEffect(()=>{b!=null&&b.view_id&&(w!=null&&w.name)&&_&&a.get(["dama",ce,"viewsbyId",b.view_id,"databyIndex",{from:0,to:_-1},N.map($=>$.name)])},[w,b.view_id,_]);const j=I.useMemo(()=>Object.values(z(o,["dama",ce,"viewsbyId",b.view_id,"databyIndex"],{})).map($=>z(o,[...$.value],"")),[w,b.view_id,o]);I.useEffect(()=>{(async function(){i("Loading Pages...");const $=await T.reduce(async(P,F)=>{const Y=await P,V=[{key:"id",label:"id"},{key:"data->>'id_column_value' as id_column_value",label:"id_column_value"},{key:"data->>'num_errors' as num_errors",label:"num_errors"}];let H=await rt(a,xt({app:"dms-site",type:F,filter:{"data->>'template_id'":[n.id]},attributes:V}),"/");return H=H.map(J=>V.reduce((D,G)=>(D[G.label]=J[G.key],D),{})),[...Y,...H]},Promise.resolve([]));c($),i(void 0)})()},[n.id,(W=n.data_controls)==null?void 0:W.sectionControls]);const E=h.useMemo(()=>l.filter($=>typeof+$.num_errors=="number"&&+$.num_errors>0).map($=>$.id_column_value.toString()),[l]),C=h.useMemo(()=>l.filter($=>$.id_column_value&&typeof $.id_column_value!="object").map($=>$.id_column_value.toString()),[l]),M=h.useMemo(()=>j.filter($=>!C.includes($[w.name])),[C,j,w.name]),A=h.useMemo(()=>j.filter($=>E.includes($[w.name])),[E,j,w.name]);return t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-xs uppercase font-bold text-slate-400 ml-4",children:" url suffix "}),t.jsx(mt,{className:"ml-2.5 relative w-full cursor-default overflow-hidden bg-transparent border-b-2 border-slate-300 text-slate-500 text-left sm:text-sm",options:N.map($=>$.name),value:p,nameAccessor:$=>$==null?void 0:$.name,valueAccessor:$=>$==null?void 0:$.name,onChange:$=>m($)}),t.jsx(mt,{options:["",...N],value:w,nameAccessor:$=>$==null?void 0:$.name,valueAccessor:$=>$==null?void 0:$.name,onChange:$=>s("id_column",$)}),w!=null&&w.name?t.jsx(mt,{options:j,value:k,nameAccessor:$=>(w==null?void 0:w.name)==="geoid"&&(($==null?void 0:$.county)||($==null?void 0:$.name))||($==null?void 0:$[w==null?void 0:w.name]),onChange:$=>s("active_row",{active_row:$})}):"",t.jsx("div",{className:"flex items-center pt-2",children:l!=null&&l.length||j!=null&&j.length?t.jsxs("div",{className:"flex flex-col",children:[t.jsxs("div",{className:"flex flex-row",children:[t.jsx("button",{className:`inline-flex w-36 justify-center rounded-lg cursor-pointer text-sm font-semibold 
                                            py-2 px-2 text-white shadow-lg border active:border-b-2 active:mb-[2px] active:shadow-none 
                                            ${r?"bg-gray-500 border-b-2 border-gray-800 cursor-not-allowed":"bg-blue-500 hover:bg-blue-400 border-b-4 border-blue-800 hover:border-blue-700"}`,disabled:r,onClick:$=>En({item:n,url:f,destination:y,id_column:w,dataRows:j,falcor:a,setLoadingStatus:i,locationNameMap:T,setGeneratedPages:c,urlSuffixCol:p}),children:r||(l!=null&&l.length?"Update Pages":"Generate Pages")}),t.jsx("button",{disabled:r,className:`inline-flex rounded-lg cursor-pointer text-white text-bold px-2 py-2.5 shadow-lg
                                border active:border-b-2 active:mb-[2px] active:shadow-none 
                                ${r?"bg-gray-500 border-b-2 border-gray-800 cursor-not-allowed":"bg-blue-500 hover:bg-blue-400 border-b-4 border-blue-800 hover:border-blue-700"}`,onClick:()=>u(!d),children:t.jsx("i",{className:d?"fa fa-caret-up":"fa fa-caret-down"})})]}),t.jsxs("div",{className:d?"flex flex-col":"hidden",children:[t.jsx("button",{className:`inline-flex w-36 justify-center rounded-lg text-sm font-semibold 
                                            py-2 px-2 text-white shadow-lg border active:border-b-2 active:mb-[2px] active:shadow-none' 
                                            ${r||!(M!=null&&M.length)?"bg-gray-500 border-b-2 border-gray-800 cursor-not-allowed":"bg-blue-500 hover:bg-blue-400 border-b-4 border-blue-800 hover:border-blue-700 cursor-pointer"}`,disabled:r||!(M!=null&&M.length),onClick:$=>(u(!1),En({item:n,url:f,destination:y,id_column:w,dataRows:M,falcor:a,setLoadingStatus:i,locationNameMap:T,setGeneratedPages:c,urlSuffixCol:p})),children:r||`Generate missing pages (${M==null?void 0:M.length})`}),t.jsx("button",{className:`inline-flex w-36 justify-center rounded-lg text-sm font-semibold 
                                            py-2 px-2 text-white shadow-lg border active:border-b-2 active:mb-[2px] active:shadow-none' 
                                            ${r||!(A!=null&&A.length)?"bg-gray-500 border-b-2 border-gray-800 cursor-not-allowed":"bg-blue-500 hover:bg-blue-400 border-b-4 border-blue-800 hover:border-blue-700 cursor-pointer"}`,disabled:r||!(A!=null&&A.length),onClick:$=>(u(!1),En({item:n,url:f,destination:y,id_column:w,dataRows:A,falcor:a,setLoadingStatus:i,locationNameMap:T,setGeneratedPages:c,urlSuffixCol:p})),children:r||`Update errored pages (${A==null?void 0:A.length})`})]})]}):t.jsx("button",{className:"mt-4 p-2 rounded-lg text-white bg-gray-500 border border-b-2 border-gray-800 cursor-not-allowed",disabled:!0,children:"No template data available."})})]})},Hd=()=>t.jsx("div",{children:"Path..."}),Ud=({section:e,source:n,sectionControl:s={},updateSectionControl:r})=>{var d,u;let i=is((d=e==null?void 0:e.element)==null?void 0:d["element-data"])||{},a=((u=e==null?void 0:e.element)==null?void 0:u["element-type"])||"",o=_e[a]||{},l=[...(o==null?void 0:o.variables)||[],...(i==null?void 0:i.additionalVariables)||[]];const c=I.useMemo(()=>{let p=z(n,["metadata","columns"],z(n,"metadata",[]));return Array.isArray(p)||(p=[]),p.map(m=>m.name)},[n]);return t.jsxs("div",{className:"p-4 border rounded mb-1",children:[t.jsxs("div",{children:["Title: ",e==null?void 0:e.title," ",e==null?void 0:e.id]}),t.jsx("div",{children:a}),t.jsx("div",{children:l.filter(p=>!p.hidden).map(p=>t.jsxs("div",{className:"flex",children:[t.jsxs("div",{className:"flex-1 items-center",children:[t.jsx("div",{children:p.name}),t.jsx("div",{className:"text-xs",children:typeof i[p.name]=="object"?JSON.stringify(i[p.name]):i[p.name]})]}),t.jsx("div",{className:"flex-1 flex items-center",children:t.jsx(mt,{options:["",...c],value:s[p.name]||"",onChange:m=>{r({...s,[p.name]:m})}})})]},p.name))})]})},qd=({sections:e=[],sectionControls:n,source:s,onChange:r})=>t.jsx("div",{children:e.map(i=>t.jsx(Ud,{section:i,source:s,sectionControl:(n==null?void 0:n[i.id])||{},updateSectionControl:a=>{r({...n,[i.id]:a})}},i.id))}),Vd=({item:e,dataControls:n={},setDataControls:s,baseUrl:r,loadingStatus:i,setLoadingStatus:a})=>{var l,c,d,u,p;const o=(m,f)=>{s({...n,[m]:f})};return t.jsxs("div",{className:"relative mt-6 flex-1 px-4 sm:px-6",children:[t.jsx("span",{className:"text-sm text-gray-500 p-1",children:"Select Template Source:"}),t.jsx(yd,{value:n==null?void 0:n.source,onChange:m=>{o("source",m)}}),(l=n==null?void 0:n.source)!=null&&l.source_id?t.jsx(bd,{source_id:(c=n==null?void 0:n.source)==null?void 0:c.source_id,value:(d=n.view)==null?void 0:d.view_id,onChange:m=>{o("view",m)}}):"",(u=n==null?void 0:n.source)!=null&&u.source_id&&((p=n==null?void 0:n.view)!=null&&p.view_id)?t.jsxs("div",{children:[t.jsx(pi,{item:e,source:n==null?void 0:n.source,view:n==null?void 0:n.view,id_column:n==null?void 0:n.id_column,active_row:n==null?void 0:n.active_row,onChange:(m,f)=>{m==="id_column"&&(o("id_column",f),s({...n,id_column:f,active_row:{}})),m==="active_row"&&s({...n,...f})},loadingStatus:i,setLoadingStatus:a,baseUrl:r}),t.jsx(Hd,{}),t.jsx(qd,{sections:e.sections,sectionControls:n.sectionControls,source:n==null?void 0:n.source,onChange:m=>{o("sectionControls",{...n.sectionControls,...m})}})]}):"",t.jsx("div",{children:t.jsx("pre",{children:JSON.stringify(n,null,3)})})]})};function Yd(e){const{open:n,setOpen:s}=e;return t.jsx(be.Root,{show:n,as:h.Fragment,children:t.jsx(ye,{as:"div",className:"relative z-20 ",onClose:()=>{s(!1),console.log("onclose")},children:t.jsx("div",{className:"fixed inset-x-0 bottom-0 top-12  overflow-hidden",children:t.jsx("div",{className:"absolute inset-0 overflow-hidden",children:t.jsx("div",{className:"pointer-events-none fixed inset-y-0 top-12 right-0 flex max-w-full pl-10",children:t.jsx(be.Child,{as:h.Fragment,enter:"transform transition ease-in-out duration-500 sm:duration-700",enterFrom:"translate-x-full",enterTo:"translate-x-0",leave:"transform transition ease-in-out duration-500 sm:duration-700",leaveFrom:"translate-x-0",leaveTo:"translate-x-full",children:t.jsx(ye.Panel,{className:"pointer-events-auto w-screen max-w-md",children:t.jsxs("div",{className:"flex h-full flex-col overflow-y-scroll bg-white py-6 shadow-xl",children:[t.jsx("div",{className:"px-4 sm:px-6",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsx(ye.Title,{className:"text-base font-semibold leading-6 text-gray-900",children:"Data Controls"}),t.jsx("div",{className:"ml-3 flex h-7 items-center",children:t.jsxs("button",{type:"button",className:"relative rounded-md bg-white text-gray-400 hover:text-gray-500 focus:outline-none",onClick:()=>s(!1),children:[t.jsx("span",{className:"absolute -inset-2.5"}),t.jsx("span",{className:"sr-only",children:"Close panel"}),t.jsx("i",{className:"h-6 w-6 text-lg fa fa-close","aria-hidden":"true"})]})})]})}),t.jsx(Vd,{...e})]})})})})})})})})}function $e(e){return typeof e=="object"&&!("toString"in e)?Object.prototype.toString.call(e).slice(8,-1):e}function Me(e,n){if(!e)throw new Error(n())}var Fn=Object.prototype.hasOwnProperty,Gd=Array.prototype.splice,Jd=Object.prototype.toString;function Qe(e){return Jd.call(e).slice(8,-1)}var zn=Object.assign||function(e,n){return os(n).forEach(function(s){Fn.call(n,s)&&(e[s]=n[s])}),e},os=typeof Object.getOwnPropertySymbols=="function"?function(e){return Object.keys(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.keys(e)};function He(e){return Array.isArray(e)?zn(e.constructor(e.length),e):Qe(e)==="Map"?new Map(e):Qe(e)==="Set"?new Set(e):e&&typeof e=="object"?zn(Object.create(Object.getPrototypeOf(e)),e):e}var Kd=function(){function e(){this.commands=zn({},Xd),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function(n,s){return n===s},this.update.newContext=function(){return new e().update}}return Object.defineProperty(e.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function(n){this.update.isEquals=n},enumerable:!1,configurable:!0}),e.prototype.extend=function(n,s){this.commands[n]=s},e.prototype.update=function(n,s){var r=this,i=typeof s=="function"?{$apply:s}:s;Array.isArray(n)&&Array.isArray(i)||Me(!Array.isArray(i),function(){return"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."}),Me(typeof i=="object"&&i!==null,function(){return"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the "+"following commands: ".concat(Object.keys(r.commands).join(", "),".")});var a=n;return os(i).forEach(o=>{if(Fn.call(this.commands,o)){var l=n===a;a=r.commands[o](i[o],a,i,n),l&&r.isEquals(a,n)&&(a=n)}else{var c=Qe(n)==="Map"?r.update(n.get(o),i[o]):r.update(n[o],i[o]),d=Qe(a)==="Map"?a.get(o):a[o];(!r.isEquals(c,d)||typeof c>"u"&&!Fn.call(n,o))&&(a===n&&(a=He(n)),Qe(a)==="Map"?a.set(o,c):a[o]=c)}}),a},e}(),Xd={$push:function(e,n,s){return er(n,s,"$push"),e.length?n.concat(e):n},$unshift:function(e,n,s){return er(n,s,"$unshift"),e.length?e.concat(n):n},$splice:function(e,n,s,r){return Qd(n,s),e.forEach(function(i){mi(i),n===r&&i.length&&(n=He(r)),Gd.apply(n,i)}),n},$set:function(e,n,s){return tu(s),e},$toggle:function(e,n){St(e,"$toggle");var s=e.length?He(n):n;return e.forEach(function(r){s[r]=!n[r]}),s},$unset:function(e,n,s,r){return St(e,"$unset"),e.forEach(function(i){Object.hasOwnProperty.call(n,i)&&(n===r&&(n=He(r)),delete n[i])}),n},$add:function(e,n,s,r){return tr(n,"$add"),St(e,"$add"),Qe(n)==="Map"?e.forEach(function(i){var a=i[0],o=i[1];n===r&&n.get(a)!==o&&(n=He(r)),n.set(a,o)}):e.forEach(function(i){n===r&&!n.has(i)&&(n=He(r)),n.add(i)}),n},$remove:function(e,n,s,r){return tr(n,"$remove"),St(e,"$remove"),e.forEach(function(i){n===r&&n.has(i)&&(n=He(r)),n.delete(i)}),n},$merge:function(e,n,s,r){return nu(n,e),os(e).forEach(function(i){e[i]!==n[i]&&(n===r&&(n=He(r)),n[i]=e[i])}),n},$apply:function(e,n){return eu(e),e(n)}},Zd=new Kd;function er(e,n,s){Me(Array.isArray(e),function(){return"update(): expected target of ".concat($e(s)," to be an array; got ").concat($e(e),".")}),St(n[s],s)}function St(e,n){Me(Array.isArray(e),function(){return"update(): expected spec of ".concat($e(n)," to be an array; got ").concat($e(e),". ")+"Did you forget to wrap your parameter in an array?"})}function Qd(e,n){Me(Array.isArray(e),function(){return"Expected $splice target to be an array; got ".concat($e(e))}),mi(n.$splice)}function mi(e){Me(Array.isArray(e),function(){return"update(): expected spec of $splice to be an array of arrays; got ".concat($e(e),". ")+"Did you forget to wrap your parameters in an array?"})}function eu(e){Me(typeof e=="function",function(){return"update(): expected spec of $apply to be a function; got ".concat($e(e),".")})}function tu(e){Me(Object.keys(e).length===1,function(){return"Cannot have more than one key in an object with $set"})}function nu(e,n){Me(n&&typeof n=="object",function(){return"update(): $merge expects a spec of type 'object'; got ".concat($e(n))}),Me(e&&typeof e=="object",function(){return"update(): $merge expects a target of type 'object'; got ".concat($e(e))})}function tr(e,n){var s=Qe(e);Me(s==="Map"||s==="Set",function(){return"update(): ".concat($e(n)," expects a target of type Set or Map; got ").concat($e(s))})}const nr=Zd.update,su=e=>Object.prototype.toString.call(e).slice(8,-1),ru=e=>su(e)==="Array",iu=(e,n)=>{for(;e;){if(e.matches&&e.matches(n))return e;e=e.parentNode}return null},ou=e=>{var n=e.getBoundingClientRect(),s=document.body,r=document.documentElement,i=window.pageYOffset||r.scrollTop||s.scrollTop,a=window.pageXOffset||r.scrollLeft||s.scrollLeft,o=r.clientTop||s.clientTop||0,l=r.clientLeft||s.clientLeft||0,c=n.top+i-o,d=n.left+a-l;return{top:Math.round(c),left:Math.round(d)}},au=e=>{let n=0,s=0;for(;e=e.parentNode;)n+=e.scrollTop||0,s+=e.scrollLeft||0;return{top:n,left:s}},lu=(e,n)=>({transform:"translate("+e+"px, "+n+"px)"}),Bn=(e,n)=>e.map(s=>({...s,[n]:s[n]?Bn(s[n],n):[]})),Jt=(e,{idProp:n,childrenProp:s})=>{let r=[];return e.filter(a=>a[s].length).map(a=>(r=r.concat(Jt(a[s],{idProp:n,childrenProp:s})),a[n])).concat(r)};function rn(){for(var e={}.hasOwnProperty,n=[],s=0;s<arguments.length;s++){var r=arguments[s];if(r){var i=typeof r;if(i==="string"||i==="number")n.push(r);else if(Array.isArray(r)){if(r.length){var a=rn.apply(null,r);a&&n.push(a)}}else if(i==="object"){if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]")){n.push(r.toString());continue}for(var o in r)e.call(r,o)&&r[o]&&n.push(o)}}}return n.join(" ")}function cu({children:e,className:n,...s}){return t.jsx("i",{className:`${nestable-icon}  ${n}`,...s})}const $t=class $t extends h.Component{constructor(){super(...arguments);fe(this,"renderCollapseIcon",({isCollapsed:s})=>t.jsx(cu,{className:rn("nestable-item-icon",{"icon-plus-gray":s,"icon-minus-gray":!s})}))}render(){const{item:s,isCopy:r,options:i,index:a,depth:o}=this.props,{dragItem:l,renderItem:c,handler:d,idProp:u,childrenProp:p,renderCollapseIcon:m=this.renderCollapseIcon}=i,f=i.isCollapsed(s),y=!r&&l&&l[u]===s[u],v=s[p]&&s[p].length>0;let b={},x={},w;r||(l?b={...b,onMouseEnter:j=>i.onMouseEnter(j,s)}:x={...x,draggable:!0,onDragStart:j=>i.onDragStart(j,s)}),d?w=t.jsx("span",{className:"nestable-item-handler",...x,children:d}):b={...b,...x};const k=v?t.jsx("span",{onClick:()=>i.onToggleCollapse(s),children:m({isCollapsed:f})}):null,T="nestable-item ml-2"+(r?"-copy":""),_={className:rn(T,T+"-"+s[u],{"is-dragging bg-slate-200 border pl-4":y,[T+"--with-children"]:v,[T+"--children-open"]:v&&!f,[T+"--children-collapsed"]:v&&f})},N=c({collapseIcon:k,depth:o,handler:w,index:a,item:s});return N?t.jsxs("li",{..._,children:[t.jsx("div",{className:"nestable-item-name",...b,children:N}),v&&!f&&t.jsx("ol",{className:"nestable-list border-l ml-4",children:s[p].map((j,E)=>t.jsx($t,{index:E,depth:o+1,item:j,options:i,isCopy:r},E))})]}):null}};fe($t,"propTypes",{item:pe.object,isCopy:pe.bool,options:pe.object,index:pe.number,depth:pe.number}),fe($t,"defaultProps",{depth:0});let on=$t;class Wn extends h.Component{constructor(s){super(s);fe(this,"collapse",s=>{const{idProp:r,childrenProp:i,collapsed:a}=this.props,{items:o}=this.state;s==="NONE"?this.setState({collapsedGroups:a?Jt(o,{idProp:r,childrenProp:i}):[]}):s==="ALL"?this.setState({collapsedGroups:a?[]:Jt(o,{idProp:r,childrenProp:i})}):ru(s)&&this.setState({collapsedGroups:Jt(o,{idProp:r,childrenProp:i}).filter(l=>s.indexOf(l)>-1^a)})});fe(this,"startTrackMouse",()=>{document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onDragEnd),document.addEventListener("keydown",this.onKeyDown)});fe(this,"stopTrackMouse",()=>{document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onDragEnd),document.removeEventListener("keydown",this.onKeyDown),this.elCopyStyles=null});fe(this,"getItemDepth",s=>{const{childrenProp:r}=this.props;let i=1;if(s[r].length>0){const a=s[r].map(this.getItemDepth);i+=Math.max(...a)}return i});fe(this,"isCollapsed",s=>{const{collapsed:r,idProp:i}=this.props,{collapsedGroups:a}=this.state;return!!(a.indexOf(s[i])>-1^r)});fe(this,"onDragStart",(s,r)=>{s&&(s.preventDefault(),s.stopPropagation()),this.el=iu(s.target,".nestable-item"),this.startTrackMouse(),this.onMouseMove(s),this.setState({dragItem:r,itemsOld:this.state.items})});fe(this,"onDragEnd",(s,r)=>{s&&s.preventDefault(),this.stopTrackMouse(),this.el=null,r?this.dragRevert():this.dragApply()});fe(this,"onMouseMove",s=>{const{group:r,threshold:i}=this.props,{dragItem:a}=this.state,{clientX:o,clientY:l}=s,c=lu(o,l),d=document.querySelector(".nestable-"+r+" .nestable-drag-layer > .nestable-list");if(this.elCopyStyles){this.elCopyStyles={...this.elCopyStyles,...c};for(let p in c)c.hasOwnProperty(p)&&(d.style[p]=c[p]);const u=o-this.mouse.last.x;u>=0&&this.mouse.shift.x>=0||u<=0&&this.mouse.shift.x<=0?this.mouse.shift.x+=u:this.mouse.shift.x=0,this.mouse.last.x=o,Math.abs(this.mouse.shift.x)>i&&(this.mouse.shift.x>0?this.tryIncreaseDepth(a):this.tryDecreaseDepth(a),this.mouse.shift.x=0)}else{const u=ou(this.el),p=au(this.el);this.elCopyStyles={marginTop:u.top-l-p.top,marginLeft:u.left-o-p.left,...c}}});fe(this,"onMouseEnter",(s,r)=>{s&&(s.preventDefault(),s.stopPropagation());const{collapsed:i,idProp:a,childrenProp:o}=this.props,{dragItem:l}=this.state;if(l[a]===r[a])return;const c=this.getPathById(l[a]),d=this.getPathById(r[a]);let u={};if(i&&c.length>1){const p=this.getItemByPath(c.slice(0,-1));p[o].length===1&&(u=this.onToggleCollapse(p,!0))}this.moveItem({dragItem:l,pathFrom:c,pathTo:d},u)});fe(this,"onToggleCollapse",(s,r)=>{const{collapsed:i,idProp:a}=this.props,{collapsedGroups:o}=this.state,c={collapsedGroups:this.isCollapsed(s)^i?o.filter(d=>d!==s[a]):o.concat(s[a])};if(r)return c;this.setState(c)});fe(this,"onKeyDown",s=>{s.which===27&&this.onDragEnd(null,!0)});this.state={items:[],itemsOld:null,dragItem:null,isDirty:!1,collapsedGroups:[]},this.el=null,this.elCopyStyles=null,this.mouse={last:{x:0},shift:{x:0}}}componentDidMount(){let{items:s,childrenProp:r}=this.props;s=Bn(s,r),this.setState({items:s})}componentDidUpdate(s){const{items:r,childrenProp:i}=this.props;if(Ve({props:s,state:{}},this.props)){this.stopTrackMouse();let o={};s.collapsed!==this.props.collapsed&&(o.collapsedGroups=[]),this.setState({items:Bn(r,i),dragItem:null,isDirty:!1,...o})}}componentWillUnmount(){this.stopTrackMouse()}moveItem({dragItem:s,pathFrom:r,pathTo:i},a={}){const{childrenProp:o,confirmChange:l}=this.props,c=this.getItemDepth(s);let{items:d}=this.state;const u=this.getRealNextPath(r,i,c);if(u.length===0)return;const p=u.length>i.length?i:i.slice(0,-1),m=this.getItemByPath(p);if(!l({dragItem:s,destinationParent:m}))return;const f=this.getSplicePath(r,{numToRemove:1,childrenProp:o}),y=this.getSplicePath(u,{numToRemove:0,itemsToInsert:[s],childrenProp:o});d=nr(d,f),d=nr(d,y),this.setState({items:d,isDirty:!0,...a})}tryIncreaseDepth(s){const{maxDepth:r,idProp:i,childrenProp:a,collapsed:o}=this.props,l=this.getPathById(s[i]),c=l[l.length-1],d=l.length+this.getItemDepth(s);if(c>0&&d<=r){const u=this.getItemByPath(l.slice(0,-1).concat(c-1));if(!u[a].length||!this.isCollapsed(u)){const p=l.slice(0,-1).concat(c-1).concat(u[a].length);let m={};o&&!u[a].length&&(m=this.onToggleCollapse(u,!0)),this.moveItem({dragItem:s,pathFrom:l,pathTo:p},m)}}}tryDecreaseDepth(s){const{idProp:r,childrenProp:i,collapsed:a}=this.props,o=this.getPathById(s[r]),l=o[o.length-1];if(o.length>1){const c=this.getItemByPath(o.slice(0,-1));if(l+1===c[i].length){let d=o.slice(0,-1);d[d.length-1]+=1;let u={};a&&c[i].length===1&&(u=this.onToggleCollapse(c,!0)),this.moveItem({dragItem:s,pathFrom:o,pathTo:d},u)}}}dragApply(){const{onChange:s,idProp:r}=this.props,{items:i,isDirty:a,dragItem:o}=this.state;if(this.setState({itemsOld:null,dragItem:null,isDirty:!1}),s&&a){const l=this.getPathById(o[r],i);s({items:i,dragItem:o,targetPath:l})}}dragRevert(){const{itemsOld:s}=this.state;this.setState({items:s,itemsOld:null,dragItem:null,isDirty:!1})}getPathById(s,r=this.state.items){const{idProp:i,childrenProp:a}=this.props;let o=[];return r.every((l,c)=>{if(l[i]===s)o.push(c);else if(l[a]){const d=this.getPathById(s,l[a]);d.length&&(o=o.concat(c).concat(d))}return o.length===0}),o}getItemByPath(s,r=this.state.items){const{childrenProp:i}=this.props;let a=null;return s.forEach(o=>{a=(a?a[i]:r)[o]}),a}getSplicePath(s,r={}){const i={},a=r.numToRemove||0,o=r.itemsToInsert||[],l=s.length-1;let c=i;return s.forEach((d,u)=>{if(u===l)c.$splice=[[d,a,...o]];else{const p={};c[d]={[r.childrenProp]:p},c=p}}),i}getRealNextPath(s,r,i){const{childrenProp:a,maxDepth:o}=this.props,l=s.length-1,c=r.length-1,d=r.length+i-1;if(s.length<r.length){let u=!1;return d>o&&r.length?this.getRealNextPath(s,r.slice(0,-1),i):r.map((p,m)=>u?m===c?p+1:p:typeof s[m]!="number"?p:r[m]>s[m]&&m===l?(u=!0,p-1):p)}else if(s.length===r.length&&r[c]>s[c]){const u=this.getItemByPath(r);if(d<o&&u[a]&&u[a].length&&!this.isCollapsed(u))return r.slice(0,-1).concat(r[c]-1).concat(0)}return r}getItemOptions(){const{renderItem:s,renderCollapseIcon:r,handler:i,idProp:a,childrenProp:o}=this.props,{dragItem:l}=this.state;return{dragItem:l,idProp:a,childrenProp:o,renderItem:s,renderCollapseIcon:r,handler:i,onDragStart:this.onDragStart,onMouseEnter:this.onMouseEnter,isCollapsed:this.isCollapsed,onToggleCollapse:this.onToggleCollapse}}renderDragLayer(){const{group:s,idProp:r}=this.props,{dragItem:i}=this.state,a=document.querySelector(".nestable-"+s+" .nestable-item-"+i[r]);let o={};a&&(o.width=a.clientWidth),this.elCopyStyles&&(o={...o,...this.elCopyStyles});const l=this.getItemOptions();return t.jsx("div",{className:"nestable-drag-layer",children:t.jsx("ol",{className:"nestable-list",style:o,children:t.jsx(on,{item:i,options:l,isCopy:!0})})})}render(){const{group:s,className:r}=this.props,{items:i,dragItem:a}=this.state,o=this.getItemOptions();return t.jsxs("div",{className:rn(r,"nestable","nestable-"+s,{"is-drag-active":a}),children:[t.jsx("ol",{className:"nestable-list nestable-group",children:i.map((l,c)=>t.jsx(on,{index:c,item:l,options:o},c))}),a&&this.renderDragLayer()]})}}fe(Wn,"propTypes",{childrenProp:pe.string,className:pe.string,collapsed:pe.bool,confirmChange:pe.func,group:pe.oneOfType([pe.number,pe.string]),handler:pe.node,idProp:pe.string,items:pe.array,maxDepth:pe.number,onChange:pe.func,renderCollapseIcon:pe.func,renderItem:pe.func,threshold:pe.number}),fe(Wn,"defaultProps",{childrenProp:"children",collapsed:!1,confirmChange:()=>!0,group:Math.random().toString(36).slice(2),idProp:"id",items:[],maxDepth:10,onChange:()=>{},renderItem:({item:s})=>String(s),threshold:30});function du({item:e,dataItems:n,edit:s,open:r,setOpen:i}){return I.useContext(oe),t.jsx(be.Root,{show:r,as:h.Fragment,children:t.jsxs(ye,{as:"div",className:"relative z-20",onClose:i,children:[t.jsx("div",{className:"fixed inset-0"}),t.jsx("div",{className:"fixed inset-0 overflow-hidden",children:t.jsx("div",{className:"absolute inset-0 overflow-hidden",children:t.jsx("div",{className:"pointer-events-none fixed inset-y-0 right-0 flex max-w-full pl-10",children:t.jsx(be.Child,{as:h.Fragment,enter:"transform transition ease-in-out duration-500 sm:duration-700",enterFrom:"translate-x-full",enterTo:"translate-x-0",leave:"transform transition ease-in-out duration-500 sm:duration-700",leaveFrom:"translate-x-0",leaveTo:"translate-x-full",children:t.jsx(ye.Panel,{className:"pointer-events-auto w-screen max-w-md",children:t.jsxs("div",{className:"flex h-full flex-col overflow-y-scroll bg-white py-6 shadow-xl",children:[t.jsx("div",{className:"px-4 sm:px-6",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsx(ye.Title,{className:"text-base font-semibold leading-6 text-gray-900",children:"Edit Pages"}),t.jsx("div",{className:"ml-3 flex h-7 items-center",children:t.jsxs("button",{type:"button",className:"relative rounded-md bg-white text-gray-400 hover:text-gray-500 focus:outline-none ",onClick:()=>i(!1),children:[t.jsx("span",{className:"absolute -inset-2.5"}),t.jsx("span",{className:"sr-only",children:"Close panel"}),t.jsx("i",{className:"h-6 w-6 fa fa-close","aria-hidden":"true"})]})})]})}),t.jsx("div",{className:"relative mt-6 flex-1 px-4 sm:px-6",children:t.jsx(uu,{item:e,dataItems:n,edit:s,open:r,setOpen:i})})]})})})})})})]})})}const Et={nav:{container:e=>"w-full ",navItemContainer:"h-full border-l overflow-y-auto overflow-x-hidden pt-3 scrollbar-xs",navItem:({isActive:e,isPending:n})=>`block px-4 py-2 font-light ${e?"w-[256px] bg-white text-blue-500 border-l border-y":"w-[248px] hover:bg-blue-100 text-slate-600"}`,navItemChild:({isActive:e,isPending:n})=>`block px-4 py-2 font-light ${e?"w-[238px] bg-white text-blue-500 border-l border-y":"w-[230px] hover:bg-blue-100 text-slate-600"}`,addItemButton:"cursor-pointer px-4 py-2 mt-3 hover:bg-blue-100 w-full text-slate-400 border-t border-slate-200"}};function an(e,n,s,r){let i=n.filter(a=>a.parent===e.id).sort((a,o)=>a.index-o.index);return i.length===0?!1:i.map((a,o)=>{let l={id:a.id,Comp:()=>t.jsx(pr,{to:`${r?`${s}/edit`:s}/${a.url_slug||a.id}`,className:Et.nav.navItem,children:a.title},o)};return an(l,n,s,r)&&(l.children=an(a,n,s,r)),l})}function uu({item:e,dataItems:n,edit:s,open:r,setOpen:i}){const a=Ie(),{pathname:o="/edit"}=Ae(),{baseUrl:l}=I.useContext(oe),c=I.useCallback(p=>{let m=n.reduce((b,x)=>(b[x.id]=x,b),{});function f(b,x="",w){let k=[];return b.forEach((T,_)=>{let N=w[T.id];const j={id:N.id,index:N.index,title:N.title,url_slug:N.url_slug};(N.index!==_||N.parent!==x)&&(j.index=_,j.parent=x,k.push(j)),T.children&&(k=[...k,...f(T.children,T.id,w)])}),k}let y=f(p.items,"",m),v=[...y,...n.filter(b=>!y.map(x=>x.id).includes(b.id))];y.forEach(b=>b.url_slug=ut(b,v)),Promise.all(y.map(b=>{a(me(b),{method:"post",action:o})})).then(b=>{})},[]),d=n.sort((p,m)=>p.index-m.index).filter(p=>!p.parent).map((p,m)=>{let f={id:p.id,index:p.index,Comp:()=>t.jsx(pr,{to:`${s?`${l}/edit`:l}/${p.url_slug||p.id}`,className:Et.nav.navItem,children:p.title})};return an(f,n,l)&&(f.children=an(p,n,l,s)),f}),u=p=>p.map(m=>{let f=m.Comp;return t.jsxs(I.Fragment,{children:[t.jsx(f,{}),m.children?t.jsx("div",{className:"border-l ml-4 pl-2",children:u(m.children)}):""]},m.id)});return t.jsx(t.Fragment,{children:t.jsx("div",{className:Et.nav.container(r),children:t.jsxs("div",{className:Et.nav.navItemContainer,children:[s?t.jsx(Wn,{items:d,onChange:c,maxDepth:4,renderItem:({item:p})=>{let m=p.Comp;return t.jsx(m,{})}}):u(d),s&&t.jsx(pu,{dataItems:n})]})})})}function pu({dataItems:e}){const n=Ie(),{pathname:s="/edit"}=Ae(),{baseUrl:r,user:i}=I.useContext(oe),o={title:"New Page",index:e.filter(c=>!c.parent).reduce((c,d)=>Math.max(isNaN(d.index)?-1:d.index,c),-1)+1,published:"draft",history:[{type:" created Page.",user:i.email,time:new Date().toString()}]};o.url_slug=ut(o,e);const l=()=>{n(me(o),{method:"post",action:s})};return t.jsx("div",{className:"pr-2",children:t.jsx("div",{onClick:l,className:Et.nav.addItemButton,children:"+ Add Page"})})}function mu({item:e,dataItems:n,historyOpen:s,setHistoryOpen:r}){return I.useContext(oe),t.jsx(be.Root,{show:s,as:h.Fragment,children:t.jsxs(ye,{as:"div",className:"relative z-20",onClose:r,children:[t.jsx("div",{className:"fixed inset-0"}),t.jsx("div",{className:"fixed inset-0 overflow-hidden",children:t.jsx("div",{className:"absolute inset-0 overflow-hidden",children:t.jsx("div",{className:"pointer-events-none fixed inset-y-0 right-0 flex max-w-full pl-10",children:t.jsx(be.Child,{as:h.Fragment,enter:"transform transition ease-in-out duration-500 sm:duration-700",enterFrom:"translate-x-full",enterTo:"translate-x-0",leave:"transform transition ease-in-out duration-500 sm:duration-700",leaveFrom:"translate-x-0",leaveTo:"translate-x-full",children:t.jsx(ye.Panel,{className:"pointer-events-auto w-screen max-w-md",children:t.jsxs("div",{className:"flex h-full flex-col overflow-y-scroll bg-white py-6 shadow-xl",children:[t.jsx("div",{className:"px-4 sm:px-6",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsx(ye.Title,{className:"text-base font-semibold leading-6 text-gray-900",children:"Edit History"}),t.jsx("div",{className:"ml-3 flex h-7 items-center",children:t.jsxs("button",{type:"button",className:"relative rounded-md bg-white text-gray-400 hover:text-gray-500 focus:outline-none",onClick:()=>r(!1),children:[t.jsx("span",{className:"absolute -inset-2.5"}),t.jsx("span",{className:"sr-only",children:"Close panel"}),t.jsx("i",{className:"h-6 w-6 text-lg fa fa-close","aria-hidden":"true"})]})})]})}),t.jsx("div",{className:"relative mt-6 flex-1 px-4 sm:px-6",children:t.jsx(fu,{history:(e==null?void 0:e.history)||[]})})]})})})})})})]})})}function hu(...e){return e.filter(Boolean).join(" ")}function fu({history:e}){return t.jsx(t.Fragment,{children:t.jsx("ul",{role:"list",className:"space-y-6",children:e.sort((n,s)=>new Date(s.time)-new Date(n.time)).map((n,s)=>t.jsxs("li",{className:"relative flex gap-x-4",children:[t.jsx("div",{className:hu(s===e.length-1?"h-6":"-bottom-6","absolute left-0 top-0 flex w-6 justify-center"),children:t.jsx("div",{className:"w-px bg-gray-200"})}),t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"relative flex h-6 w-6 flex-none items-center justify-center bg-white",children:t.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-gray-100 ring-1 ring-gray-300"})}),t.jsxs("p",{className:"flex-auto py-0.5 text-xs leading-5 text-gray-500",children:[t.jsx("span",{className:"font-medium text-gray-900",children:n.user})," ",n.type]}),t.jsx("time",{dateTime:n.time,className:"flex-none py-0.5 text-xs leading-5 text-gray-500",children:xu(n.time)})]})]},n.id))})})}function xu(e){const n=e instanceof Date?e:new Date(e),s=new Intl.RelativeTimeFormat("en"),r={years:3600*24*365,months:3600*24*30,weeks:3600*24*7,days:3600*24,hours:3600,minutes:60,seconds:1},i=(n.getTime()-Date.now())/1e3;for(let a in r)if(r[a]<Math.abs(i)){const o=i/r[a];return s.format(Math.round(o),a)}}const je={pageControls:{controlItem:"pl-6 py-0.5 text-md cursor-pointer hover:text-blue-500 text-slate-400 flex items-center",select:"bg-transparent border-none rounded-sm focus:ring-0 focus:border-0 pl-1",selectOption:"p-4 text-md cursor-pointer hover:text-blue-500 text-slate-400 hover:bg-blue-600",content:""}};function hi({item:e,dataItems:n,updateAttribute:s,attributes:r,edit:i,status:a,setItem:o,pageType:l="page"}){var q,ee;const c=Ie(),{pathname:d="/edit"}=Ae(),[u,p]=I.useState(!1),[m,f]=I.useState(!1),[y,v]=h.useState(!1),[b,x]=h.useState(!1);h.useState(a==null?void 0:a.message);const[w,k]=h.useState(!1),[T,_]=h.useState(e.type),[N,j]=h.useState(),{baseUrl:E,user:C,falcor:M,falcorCache:A}=I.useContext(oe),W=async O=>{let S={id:e.id,url_slug:ut(e,n)};O&&(S.sections=O),c(me(S),{method:"post",action:l==="template"?d:`${E}/edit/${S.url_slug}`})};async function $(O){var U,Q;const S=(Q=(U=Object.keys(O.sectionControls))==null?void 0:U.filter((K,Z)=>K&&K!=="undefined"))==null?void 0:Q.length;j("Loading sections...");const R=await Object.keys(O.sectionControls).filter((K,Z)=>K&&K!=="undefined").reduce(async(K,Z,ot)=>{var ie,Te,Ge,Bt,Re;const De=await K;let se=((ie=e.sections.filter(ae=>ae.id===Z))==null?void 0:ie[0])||{};j(`Updating section ${se==null?void 0:se.title}  ${(Te=se==null?void 0:se.element)==null?void 0:Te["element-type"]}  ${ot+1}/${S}`);let at=is((Ge=se==null?void 0:se.element)==null?void 0:Ge["element-data"])||{},bn=((Bt=se==null?void 0:se.element)==null?void 0:Bt["element-type"])||"",Pe=_e[bn]||{},yn=((Pe==null?void 0:Pe.variables)||[]).reduce((ae,We)=>(ae[We.name]=at[We.name],ae),{}),B=Object.keys(O.sectionControls[Z]).reduce((ae,We)=>{var Wt,vt,jt,Nt,xs,gs,bs;return ae[We]=((Nt=O==null?void 0:O.active_row)==null?void 0:Nt[(jt=(vt=(Wt=O==null?void 0:O.sectionControls)==null?void 0:Wt[Z])==null?void 0:vt[We])==null?void 0:jt.name])||((bs=O==null?void 0:O.active_row)==null?void 0:bs[(gs=(xs=O==null?void 0:O.sectionControls)==null?void 0:xs[Z])==null?void 0:gs[We]])||null,ae},{}),re=(Re=at.additionalVariables)==null?void 0:Re.map(ae=>{var vt,jt,Nt;const We=ae.name,Wt=(jt=(vt=O==null?void 0:O.sectionControls)==null?void 0:vt[Z])==null?void 0:jt[We];return ae.defaultValue=(Nt=O==null?void 0:O.active_row)==null?void 0:Nt[Wt],ae}),ue={...yn,...B,additionalVariables:re};const Oe=Pe!=null&&Pe.getData?await Pe.getData(ue,M).then(ae=>({section_id:Z,data:ae})):null;return Oe?[...De,Oe]:De},Promise.resolve([]));if(R.length>0){let K=le(e.sections);R.forEach(({section_id:Z,data:ot})=>{var se;let De=((se=K.filter(at=>at.id===Z))==null?void 0:se[0])||{};De.element["element-data"]=JSON.stringify(ot)}),s("sections",K),W(K)}j(void 0)}const P=()=>{const O=n.filter(R=>!R.parent).reduce((R,U)=>Math.max(isNaN(U.index)?-1:U.index,R),-1),S=le(e);delete S.id,S.title+=" Dup",S.index=O+1,S.url_slug=ut(S,n),S.sections.forEach(R=>{delete R.ref,delete R.id}),c(me(S),{method:"post",action:d})},F=async()=>{const O=n.filter(R=>R.parent===e.id).reduce((R,U)=>Math.max(isNaN(U.index)?0:U.index,R),0),S={title:"New Page",parent:e.id,index:O+1,published:"draft",history:[{type:" created Page.",user:C.email,time:new Date().toString()}]};S.url_slug=`${ut(S,n)}`,c(me(S),{method:"post",action:`${E}/edit/${S.url_slug}`})},Y=({item:O,dataItems:S,children:R})=>{const U=S.filter(Q=>Q.parent===O.id);U.length&&(R.push(...U),U.forEach(Q=>Y({item:Q,dataItems:S,children:R})))},V=async O=>{const S=[];Y({item:e,dataItems:n,children:S}),[...S,e].reduce(async(R,U)=>{await R;const Q={id:U.id,type:O};c(me(Q,"updateType"),{method:"post",action:`${E}/edit/`})},Promise.resolve()),k(!1),_(e.type)},H=async(O,S="")=>{var Q,K;const R=le(e);R[O]=S;let U=l==="template"?"sections":"draft_sections";O==="header"&&!((K=(Q=R==null?void 0:R[U])==null?void 0:Q.filter(Z=>Z.is_header))!=null&&K[0])?(R[U].unshift({is_header:!0,element:{"element-type":"Header: Default Header","element-data":{}}}),s("","",{header:S,[U]:R[U]})):s(O,S),c(me(R),{method:"post",action:d})},J=async(O="")=>{if(O!==e.title){let S=e.history?le(e.history):[],R={type:`changed page title to ${O}`,user:C.email,time:new Date().toString()};S.push(R);const U={id:e.id,title:O,history:S};U.url_slug=ut(U,n),s("title",O),c(me(U),{method:"post",action:`${E}/edit/${U.url_slug}`})}},D=async()=>{let O={type:"published changes.",user:C.email,time:new Date().toString()},S=e.history?le(e.history):[];S.push(O);const R={id:e.id,has_changes:!1,published:"",history:S};let U=le(e.sections||[]).reduce((Q,K)=>(K.draft_id&&(Q[K.draft_id]=K),Q),{});R.sections=le(e.draft_sections).reduce((Q,K)=>(U[K.id]?K.id=U[K.id].id:delete K.id,Q.push(K),Q),[]),s("","",{has_changes:!1,published:"",history:S}),c(me(R),{method:"post",action:d})},G=O=>{if(!Ve(e.data_controls,O)){console.log("------setting data controls-------------");const S=le(e);e.id,S.data_controls=O,s("data_controls",O),c(me(S),{method:"post",action:d})}};return t.jsxs(t.Fragment,{children:[t.jsx(du,{item:e,dataItems:n,edit:!0,open:u,setOpen:p}),t.jsx(mu,{item:e,historyOpen:m,setHistoryOpen:f}),t.jsx(Yd,{item:e,open:y,setOpen:v,dataControls:e==null?void 0:e.data_controls,setDataControls:G,loadingStatus:N,setLoadingStatus:j,baseUrl:E}),i&&t.jsxs("div",{className:"p-4",children:[l==="page"&&t.jsx("div",{className:"w-full flex justify-center pb-6",children:t.jsx(gu,{item:e,onClick:D})}),t.jsxs("div",{className:"pl-4 pb-2",children:[t.jsx("span",{className:"text-xs uppercase font-bold text-slate-400",children:" page name "}),t.jsx(sr,{value:e==null?void 0:e.title,onChange:J})]}),t.jsxs("div",{className:"flex w-full h-12 px-4",children:[l==="page"&&t.jsx(rr,{icon:"fad fa-wrench p-2 text-blue-300 hover:text-blue-500 cursor-pointer text-lg",children:t.jsxs("div",{className:"py-2",children:[t.jsx("div",{className:"px-6 font-medium text-sm",children:" Page Controls "}),(!(e!=null&&e.parent)||(e==null?void 0:e.parent)==="")&&t.jsxs("div",{className:je.pageControls.controlItem,children:[t.jsx("i",{className:"fa-solid fa-up-down-left-right text-sm"}),t.jsxs("select",{title:"Move Page",className:je.pageControls.select,value:T,onChange:O=>(k(!0),V(O.target.value)),children:[t.jsx("option",{value:"docs-page",className:je.pageControls.selectOption,children:"Live"},"cms"),t.jsx("option",{value:"docs-draft",className:je.pageControls.selectOption,children:"Draft"},"draft"),t.jsx("option",{value:"docs-play",className:je.pageControls.selectOption,children:"Playground"},"playground")]})]}),t.jsx("div",{onClick:F,className:je.pageControls.controlItem,children:"☲ New Page"}),t.jsx("div",{onClick:F,className:je.pageControls.controlItem,children:"☲ Insert Subpage"}),t.jsx("div",{onClick:P,className:je.pageControls.controlItem,children:"☳ Duplicate"}),t.jsx("div",{onClick:()=>x(!0),className:je.pageControls.controlItem,children:"☵ Delete"})]})}),t.jsx(rr,{icon:"fad fa-sliders-h p-2 text-blue-300 hover:text-blue-500 cursor-pointer text-lg",children:t.jsxs("div",{className:"py-2",children:[t.jsx("div",{className:"px-6 font-medium text-sm",children:" Page Settings "}),t.jsxs("div",{className:je.pageControls.controlItem,children:[t.jsx(Ut,{item:e,type:"sidebar",toggleSidebar:H}),"Show Sidebar"]}),t.jsxs("div",{className:je.pageControls.controlItem,children:[t.jsx(Ut,{type:"full_width",item:e,toggleSidebar:H}),"Full Width"]}),t.jsxs("div",{className:je.pageControls.controlItem,children:[t.jsx(Ut,{type:"hide_in_nav",item:e,toggleSidebar:H}),"Hide In Nav"]}),t.jsx("div",{className:je.pageControls.controlItem+" pr-4",children:t.jsx(gd,{label:"Header:",types:[{label:"None",value:"none"},{label:"Above",value:"above"},{label:"Below",value:"below"},{label:"In page",value:"inpage"}],type:e.header,setType:O=>H("header",O)})}),t.jsxs("div",{className:je.pageControls.controlItem,children:[t.jsx(Ut,{type:"footer",item:e,toggleSidebar:H}),"Show Footer"]})]})}),l==="page"&&t.jsx("div",{className:"fad fa-file-alt p-2 text-blue-300 hover:text-blue-500 cursor-pointer text-lg",onClick:()=>p(!0)}),l==="template"&&t.jsx("div",{className:"fad fa-sliders-h-square p-2 text-blue-300 hover:text-blue-500 cursor-pointer text-lg",onClick:()=>v(!0)}),t.jsx("div",{className:"fad fa-history p-2 text-blue-300 hover:text-blue-500 cursor-pointer text-lg",onClick:()=>f(!0)})]}),l==="template"&&t.jsxs("div",{className:"pl-4 pb-2",children:[t.jsx("span",{className:"text-xs uppercase font-bold text-slate-400",children:" url prefix "}),t.jsx(sr,{value:(q=e==null?void 0:e.data_controls)==null?void 0:q.url,onChange:O=>G({...e.data_controls,url:O})})]}),l==="template"&&((ee=e==null?void 0:e.data_controls)==null?void 0:ee.id_column)&&t.jsx("div",{children:t.jsx(pi,{item:e,submit:c,onChange:(O,S)=>{let R;console.log("test123",O,S),O==="id_column"&&(R={...e==null?void 0:e.data_controls,id_column:S,active_row:{}}),O==="active_row"&&(R={...e==null?void 0:e.data_controls,...S}),G(R),$(R)},loadingStatus:N,setLoadingStatus:j,baseUrl:E})}),t.jsx(bu,{item:e,open:b,setOpen:x})]})]})}function sr({value:e,onChange:n}){const[s,r]=I.useState(!1),[i,a]=I.useState(e||"");return t.jsx("div",{className:"flex justify-between group",children:t.jsx("div",{className:"flex-1",children:t.jsx("dd",{className:" text-sm text-gray-900 ",children:s?t.jsxs("div",{className:"flex group focus:outline-none border-slate-300 border-b-2 group-focus:border-blue-500",children:[t.jsx("input",{className:"w-full px-2 py-1 text font-medium text-slate-500 focus:outline-none focus:border-blue-500",value:i,onChange:o=>a(o.target.value)}),t.jsxs("div",{className:"flex cursor-pointer",children:[t.jsx("span",{className:" pt-0.5 text-green-500 rounded hover:bg-green-500 hover:text-white ",onClick:o=>{n(i),r(!1)},children:t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-6 h-6",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})})}),t.jsx("span",{className:"pt-0.5 text-slate-300  rounded  hover:text-red-300 ",onClick:o=>r(!1),children:t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-6 h-6",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})})})]})]}):t.jsxs("div",{className:"w-full min-h-[30px] flex flex-row px-2 py-1 text font-medium text-slate-500 focus:outline-none border-slate-300 border-b-2 focus:border-blue-500",children:[t.jsx("div",{className:"w-full",children:e}),t.jsx("span",{className:"hidden group-hover:block text-blue-300 hover:text-blue-500 cursor-pointer ",onClick:o=>r(!s),children:t.jsx("i",{className:"fad fa-pencil absolute -ml-4 -mt-0.5 p-1.5 rounded hover:bg-blue-500 hover:text-white"})})]})})})})}function gu({item:e,onClick:n}){const s=e.published==="draft"||e.has_changes;return t.jsx("div",{onClick:()=>s?n():null,className:`${s?"inline-flex w-36 justify-center rounded-lg cursor-pointer text-sm font-semibold py-2 px-2 bg-blue-600 text-white hover:bg-blue-500 shadow-lg border border-b-4 border-blue-800 hover:border-blue-700 active:border-b-2 active:mb-[2px] active:shadow-none":"inline-flex w-36 justify-center rounded-lg cursor-not-allowed text-sm font-semibold py-2 px-2 bg-slate-300 text-white shadow border border-slate-400 border-b-4"}`,children:t.jsxs("span",{className:"flex items-center",children:[t.jsx("span",{className:"pr-2",children:s?"Publish":"No Changes"}),s?t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})}):""]})})}function rr({icon:e,children:n}){let[s,r]=h.useState(),[i,a]=h.useState(),{styles:o,attributes:l}=Vn(s,i);return t.jsxs(Be,{className:"relative",children:[t.jsx(Be.Button,{ref:r,className:"text-md cursor-pointer hover:text-blue-800 text-blue-500",children:t.jsx("i",{className:e,title:"Help"})}),t.jsx(be,{as:h.Fragment,enter:"transition ease-out duration-200",enterFrom:"opacity-0 translate-y-1",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in duration-150",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-1",children:t.jsx(Be.Panel,{ref:a,style:o.popper,...l.popper,className:"shadow-lg bg-white rounded z-10 transform  border border-blue-200 w-[180px] ",children:n})})]})}function Ut({type:e,item:n,toggleSidebar:s}){let r=n[e]==="show";return t.jsxs(Qi,{checked:r,onChange:i=>s(e,r?"":"show"),className:"group relative inline-flex h-5 w-10 flex-shrink-0 cursor-pointer items-center justify-center rounded-full focus:outline-none focus:ring-2 focus:ring-indigo-600 focus:ring-offset-2",children:[t.jsx("span",{className:"sr-only",children:"Use setting"}),t.jsx("span",{"aria-hidden":"true",className:"pointer-events-none absolute h-full w-full rounded-md bg-white"}),t.jsx("span",{"aria-hidden":"true",className:`
          ${r?"bg-blue-500":"bg-gray-200"}
          pointer-events-none absolute mx-auto h-4 w-9 rounded-full transition-colors duration-200 ease-in-out
        `}),t.jsx("span",{"aria-hidden":"true",className:`
          ${r?"translate-x-5":"translate-x-0"}
          pointer-events-none absolute left-0 inline-block h-5 w-5 transform rounded-full border border-gray-200 bg-white shadow ring-0 transition-transform duration-200 ease-in-out
        `})]})}function bu({item:e,open:n,setOpen:s}){const r=h.useRef(null),i=Ie(),{baseUrl:a}=I.useContext(oe),[o,l]=h.useState(!1);return t.jsxs(as,{open:n,setOpen:s,initialFocus:r,children:[t.jsxs("div",{className:"sm:flex sm:items-start",children:[t.jsx("div",{className:"mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:t.jsx("i",{className:"fa fa-danger h-6 w-6 text-red-600","aria-hidden":"true"})}),t.jsxs("div",{className:"mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left",children:[t.jsxs(ye.Title,{as:"h3",className:"text-base font-semibold leading-6 text-gray-900",children:["Delete Page ",e.title," ",e.id]}),t.jsx("div",{className:"mt-2",children:t.jsx("p",{className:"text-sm text-gray-500",children:"Are you sure you want to delete this page? All of the page data will be permanently removed from our servers forever. This action cannot be undone."})})]})]}),t.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[t.jsxs("button",{type:"button",disabled:o,className:"inline-flex w-full justify-center rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-red-500 sm:ml-3 sm:w-auto",onClick:async()=>{l(!0),await i(me(e,"delete"),{method:"post",action:`${a}/edit/`}),l(!1),s(!1)},children:["Delet",o?"ing...":"e"]}),t.jsx("button",{type:"button",className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto",onClick:()=>s(!1),ref:r,children:"Cancel"})]})]})}function as({open:e,setOpen:n,initialFocus:s,children:r}){return t.jsx(be.Root,{show:e,as:h.Fragment,children:t.jsxs(ye,{as:"div",className:"relative z-30",initialFocus:s,onClose:n,children:[t.jsx(be.Child,{as:h.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:t.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"})}),t.jsx("div",{className:"fixed inset-0 z-10 overflow-y-auto",children:t.jsx("div",{onClick:()=>{n(!1)},className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:t.jsx(be.Child,{as:h.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:t.jsx(ye.Panel,{className:"relative transform overflow-hidden rounded-lg bg-white px-4 pb-4 pt-5 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg sm:p-6",children:r})})})})]})})}function yu({item:e,dataItems:n,updateAttribute:s,attributes:r,setItem:i,status:a,logo:o,rightMenu:l}){var _,N,j;const c=gt(),d=Ie();Ae();const{baseUrl:u,user:p,theme:m}=I.useContext(oe),f=I.useMemo(()=>ni(n,u,!0),[n]),y=(e==null?void 0:e.index)=="999"?1:ti(n,u),v=rs(e);I.useEffect(()=>{if(!(e!=null&&e.url_slug)){let E=n.sort((C,M)=>C.index-M.index).filter(C=>!C.parent&&C.url_slug)[0];E&&E.url_slug&&c(`edit/${E.url_slug}`)}},[]),I.useEffect(()=>{var E;if(e.sections&&((E=e==null?void 0:e.sections)==null?void 0:E.length)>0&&!e.draft_sections){const C=le(e.sections);C.forEach(A=>delete A.id);const M=le(e);M.draft_sections=C,e.draft_sections=C,s("draft_sections",C),d(me(M),{method:"post",action:`${u}/edit/${M.url_slug}`})}},[]);const b=(N=(_=e.draft_sections)==null?void 0:_.filter(E=>E.is_header))==null?void 0:N[0],x=(j=e.draft_sections)==null?void 0:j.filter(E=>!E.is_header&&!E.is_footer),w=E=>{let C=e.history?le(e.history):[];C.push({type:"Header updated.",user:(p==null?void 0:p.email)||"user",time:new Date().toString()}),s("","",{has_changes:!0,history:C,draft_sections:[...E,...x].filter(A=>A)});const M={id:e.id,draft_sections:[...E,...x].filter(A=>A),has_changes:!0,history:C};console.log("save header",M),d(me(M),{method:"post",action:`${u}/edit/${e.url_slug}`})},k=(E,C)=>{let M={type:C,user:(p==null?void 0:p.email)||"user",time:new Date().toString()},A=e.history?le(e.history):[];C&&A.push(M),s("","",{has_changes:!0,history:A,draft_sections:[b,...E].filter($=>$)});const W={id:e==null?void 0:e.id,draft_sections:[b,...E].filter($=>$),has_changes:!0,history:A};d(me(W),{method:"post",action:`${u}/edit/${e.url_slug}`})},T=I.useMemo(()=>r.sections.EditComp,[]);return t.jsxs("div",{children:[(e==null?void 0:e.header)==="above"&&t.jsx("div",{className:"w-full",children:t.jsx(T,{item:e,value:[b],onChange:w,...r.draft_sections})}),t.jsx(Ft,{topNav:{menuItems:f,position:"fixed",logo:o,rightMenu:l},sideNav:v,children:t.jsxs("div",{className:`${m.page.wrapper1} ${m.navPadding[y]}`,children:[(e==null?void 0:e.header)==="below"&&t.jsx("div",{className:"w-full",children:t.jsx(T,{item:e,value:[b],onChange:w,...r.draft_sections})}),t.jsxs("div",{className:`${m.page.wrapper2}`,children:[(e==null?void 0:e.sidebar)==="show"&&t.jsx(vu,{inPageNav:v}),t.jsxs("div",{className:m.page.wrapper3+" border-r",children:[(e==null?void 0:e.header)==="inpage"&&t.jsx("div",{className:"w-full",children:t.jsx(T,{item:e,value:[b],onChange:w,...r.draft_sections})}),(p==null?void 0:p.authLevel)>=5&&t.jsx(wu,{item:e,baseUrl:u}),t.jsx(T,{full_width:e.full_width,value:x,onChange:k,...r.draft_sections})]}),t.jsx("div",{className:"w-52 hidden xl:block",children:t.jsx("div",{className:"w-52 sticky top-24 hidden xl:block",children:t.jsx(hi,{item:e,dataItems:n,setItem:i,edit:!0,status:a,attributes:r,updateAttribute:s,pageType:"page"})})})]})]})}),(e==null?void 0:e.footer)&&t.jsx("div",{className:"h-[300px] bg-slate-100"})]})}function wu({baseUrl:e,item:n}){return t.jsx(Se,{className:"z-30 absolute right-[10px] top-[5px]",to:`${e}/${n.url_slug}`,children:t.jsx("i",{className:"fad fa-eye fa-fw flex-shrink-0 text-lg text-slate-400 hover:text-blue-500"})})}function vu({inPageNav:e}){return t.jsx("div",{className:"w-64 hidden xl:block",children:t.jsx("div",{className:"w-64 sticky top-20 hidden xl:block h-screen",children:t.jsx("div",{className:"h-[calc(100%_-_5rem)] overflow-y-auto overflow-x-hidden font-display",children:t.jsx(hn,{...e})})})})}function ju({item:e,dataItems:n,updateAttribute:s,attributes:r,setItem:i,status:a,params:o,logo:l,rightMenu:c,sideNav:d=[]}){var E,C,M;gt();const u=Ie(),{baseUrl:p,user:m,theme:f}=I.useContext(oe),{pathname:y="/edit"}=Ae(),{id:v}=o,b=1,x=rs(e),w=(C=(E=e.sections)==null?void 0:E.filter(A=>A.is_header))==null?void 0:C[0],k=(M=e.sections)==null?void 0:M.filter(A=>!A.is_header&&!A.is_footer),T=[{path:`${p}/templates`,name:"Templates"}],_=A=>{let W=e.history?le(e.history):[];W.push({type:"Header updated.",user:m.email,time:new Date().toString()}),s("","",{has_changes:!0,history:W,sections:[...A,...k].filter(P=>P)});const $={id:e.id,sections:[...A,...k].filter(P=>P),has_changes:!0,history:W};console.log("save header",$),u(me($),{method:"post",action:y})},N=(A,W)=>{let $={type:W,user:m.email,time:new Date().toString()},P=e.history?le(e.history):[];W&&P.push($),s("","",{has_changes:!0,history:P,sections:[w,...A].filter(Y=>Y)});const F={id:e.id,sections:[w,...A].filter(Y=>Y),has_changes:!0,history:P};u(me(F),{method:"post",action:y})},j=I.useMemo(()=>r.sections.EditComp,[]);return t.jsxs("div",{children:[(e==null?void 0:e.header)==="above"&&t.jsx("div",{className:"w-full",children:t.jsx(j,{full_width:e.full_width,value:[w],onChange:_,...r.sections})}),t.jsx(Ft,{topNav:{menuItems:T,position:"fixed",logo:l,rightMenu:c},sideNav:d,children:t.jsxs("div",{className:`${f.page.wrapper1} ${f.navPadding[b]}`,children:[(e==null?void 0:e.header)==="below"&&t.jsx("div",{className:"w-full",children:t.jsx(j,{item:e,value:[w],onChange:_,...r.sections})}),t.jsxs("div",{className:`${f.page.wrapper2}`,children:[(e==null?void 0:e.sidebar)==="show"&&t.jsx(Nu,{inPageNav:x}),t.jsxs("div",{className:f.page.wrapper3+" border-r",children:[(e==null?void 0:e.header)==="inpage"&&t.jsx("div",{className:"w-full",children:t.jsx(j,{item:e,value:[w],onChange:_,...r.sections})}),t.jsx(j,{full_width:e.full_width,value:k,onChange:N,...r.sections})]}),t.jsx("div",{className:"w-52 hidden xl:block",children:t.jsx("div",{className:"w-52 sticky top-12 hidden xl:block h-screen",children:t.jsx(hi,{item:e,dataItems:n,setItem:i,edit:!0,status:a,attributes:r,updateAttribute:s,pageType:"template"})})})]})]})}),(e==null?void 0:e.footer)&&t.jsx("div",{className:"h-[300px] bg-slate-100"})]},v)}function Nu({inPageNav:e}){return t.jsx("div",{className:"w-64 hidden xl:block",children:t.jsx("div",{className:"w-64 sticky top-20 hidden xl:block h-screen",children:t.jsx("div",{className:"h-[calc(100%_-_5rem)] overflow-y-auto overflow-x-hidden font-display",children:t.jsx(hn,{...e})})})})}const kt=(e=50,n=50,s=20,r=30,i=!1)=>t.jsxs("svg",{width:r,height:s,children:[t.jsx("line",{x1:"0",y1:"0",x2:"0",y2:s,stroke:"black",strokeDasharray:"4 1.5 4 1.5"}),t.jsx("rect",{x:e===100?0:5,y:"0",width:Math.max(Math.floor(r*e/100)-(e===100?0:6),0),height:s,rx:"1",ry:"1",style:{fill:"white",stroke:"black",strokeWidth:1,opacity:.5}}),t.jsx("rect",{x:r*e/100-1,y:"0",width:Math.max(Math.floor(r*n/100)-(e===100?0:6),0),height:s,rx:"1",ry:"1",style:{fill:"white",stroke:"black",strokeWidth:1,opacity:.5}}),t.jsx("line",{x1:r,y1:"0",x2:r,y2:s,stroke:"black",strokeDasharray:"4 1.5 4 1.5"})]}),Mn={"1/3":"col-span-6 md:col-span-2","1/2":"col-span-6 md:col-span-3","2/3":"col-span-6 md:col-span-4",1:"col-span-6 md:col-span-6",2:"col-span-6 lg:col-span-8"},ls=[{name:"1/3",value:2,icon:kt(40,60)},{name:"1/2",value:3,icon:kt(50,50)},{name:"2/3",value:4,icon:kt(60,40)},{name:"1",value:6,icon:kt(90,0)},{name:"2",value:8,icon:kt(100,0)}],fi=(e,n,s,r)=>["2"].includes(e)?Mn[e]:s<n?`${Mn[e]} md:col-start-2`:`${Mn[e]} md:col-start-${r}`,Cu=e=>{try{JSON.parse(e)}catch{return!1}return!0};function _u({size:e="1",setSize:n,onChange:s}){return t.jsx("div",{className:"flex space-x-1 rounded-lg bg-blue-50 p-0.5",role:"tablist","aria-orientation":"horizontal",children:ls.map((r,i)=>t.jsx("button",{className:r.name===e?"flex items-center rounded-md py-[0.4375rem] pl-2 pr-2 text-sm font-semibold lg:pr-3 bg-white shadow":"flex items-center rounded-md py-[0.4375rem] pl-2 pr-2 text-sm font-semibold lg:pr-3 hover:text-blue-500",id:"headlessui-tabs-tab-3",role:"tab",type:"button",tabIndex:-1,onClick:()=>{s(r.name)},children:r.icon},i))})}const ku=({data:e})=>t.jsxs("div",{className:"p-2 rounded-md bg-red-300 border-red-500 text-white min-h-[50px]",children:["Error: ",e==null?void 0:e.status]});function Su({value:e,i:n,onChange:s,attributes:r,size:i,onCancel:a,onSave:o,onRemove:l}){var T,_,N,j,E;let[c,d]=h.useState(),[u,p]=h.useState(),{styles:m,attributes:f}=Vn(c,u);const y=(C,M)=>{Ve(e,{...e,[C]:M})||s({...e,[C]:M})};let v=(T=r==null?void 0:r.title)==null?void 0:T.EditComp,b=(_=r==null?void 0:r.level)==null?void 0:_.EditComp,x=(N=r==null?void 0:r.tags)==null?void 0:N.EditComp,w=(j=r==null?void 0:r.element)==null?void 0:j.EditComp,k=(E=r==null?void 0:r.helpText)==null?void 0:E.EditComp;return t.jsxs("div",{className:`${n===0?"":"pt-4"}`,children:[t.jsxs("div",{className:"flex flex-col",children:[t.jsxs("div",{className:"flex flex-wrap border-y justify-end items-center",children:[t.jsx("div",{className:"flex-0 grow",children:t.jsx(v,{className:`p-2 w-full font-sans font-medium text-md  ${(e==null?void 0:e.level)==="1"?"text-blue-500 font-bold text-xl tracking-wider py-1 pl-1":(e==null?void 0:e.level)==="2"?"text-lg tracking-wider":(e==null?void 0:e.level)==="3"?"text-md tracking-wide":""}`,placeholder:"Section Title",value:e==null?void 0:e.title,onChange:C=>y("title",C)})}),t.jsx("div",{children:t.jsx(b,{className:"p-2 w-20 bg-white",value:e==null?void 0:e.level,placeholder:"level",options:r.level.options,onChange:C=>y("level",C)})}),t.jsx("div",{children:t.jsx(x,{className:"p-2 flex-0",value:e==null?void 0:e.tags,placeholder:"Add Tag...",onChange:C=>y("tags",C)})})]}),t.jsxs("div",{className:"flex flex-wrap border-y justify-end items-center",children:[t.jsx("div",{className:"self-center pl-2",children:t.jsx(_u,{size:e==null?void 0:e.size,onChange:C=>y("size",C)})}),t.jsx("div",{className:"flex-1"}),t.jsxs("div",{className:"flex flex-row flex-wrap",children:[t.jsx("div",{className:"py-2",children:t.jsxs(Be,{className:"relative",children:[t.jsx(Be.Button,{ref:d,className:"pl-3  text-md cursor-pointer hover:text-blue-800 text-blue-500",children:t.jsx("i",{className:"fa fa-circle-info text-2xl fa-fw",title:"Help"})}),t.jsx(be,{as:h.Fragment,enter:"transition ease-out duration-200",enterFrom:"opacity-0 translate-y-1",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in duration-150",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-1",children:t.jsx(Be.Panel,{ref:p,style:m.popper,...f.popper,className:"shadow-lg bg-white z-10 w-screen max-w-sm transform px-4 border border-blue-200 lg:max-w-3xl",children:t.jsx(k,{value:e==null?void 0:e.helpText,onChange:C=>y("helpText",C)})})})]})}),t.jsx("div",{className:"py-2",children:t.jsx("button",{className:"pl-6 py-0.5 text-md cursor-pointer hover:text-red-500 text-slate-400",onClick:l,children:t.jsx("i",{className:"fa-light fa-trash text-2xl fa-fw",title:"Delete"})})}),t.jsx("div",{className:"py-2",children:t.jsx("button",{className:"pl-6 py-0.5 text-md cursor-pointer hover:text-red-500 text-slate-400",onClick:a,children:t.jsx("i",{className:"fa-light fa-xmark text-2xl fa-fw",title:"Cancel"})})}),t.jsx("div",{className:"py-2",children:t.jsxs("button",{className:"pl-6 py-0.5 text-md cursor-pointer flex items-center hover:text-blue-500 text-slate-400",onClick:o,children:[t.jsx("i",{className:"fa-light fa-floppy-disk text-2xl fa-fw",title:"Save"}),"  "]})})]})]})]}),t.jsx("div",{children:t.jsx(w,{value:e==null?void 0:e.element,onChange:C=>y("element",C),size:i})})]})}function cs({value:e,i:n,attributes:s,edit:r,onEdit:i,moveItem:a,addAbove:o}){var N,j,E,C,M,A,W,$;let[l,c]=h.useState(),[d,u]=h.useState(),{styles:p,attributes:m}=Vn(l,d);I.useContext(oe);let f=(N=s==null?void 0:s.title)==null?void 0:N.ViewComp,y=(j=s==null?void 0:s.tags)==null?void 0:j.ViewComp,v=(E=s==null?void 0:s.element)==null?void 0:E.ViewComp,b=(C=s==null?void 0:s.helpText)==null?void 0:C.ViewComp,x=(e==null?void 0:e.title)||(e==null?void 0:e.tags),w=e==null?void 0:e.helpText,k=!1,T=(M=e==null?void 0:e.element)==null?void 0:M["template-section-id"];const _=I.useMemo(()=>t.jsx(v,{value:e==null?void 0:e.element}),[e==null?void 0:e.element,e==null?void 0:e.id]);return t.jsxs("div",{className:"h-full ",children:[t.jsxs("div",{className:"flex w-full ",children:[t.jsx("div",{className:"flex-1"}),e!=null&&e.is_header&&r?t.jsx("div",{className:"z-10 relative",children:t.jsx("div",{className:"absolute mr-16 right-[-60px] flex",children:t.jsx("button",{className:" flex items-center text-md cursor-pointer hover:text-blue-500 text-slate-400",onClick:i,children:t.jsx("i",{className:"fa-light fa-pencil text-xl fa-fw",title:"Edit"})})})}):t.jsx("div",{className:"z-10 relative",children:t.jsx("div",{className:`absolute mr-16 ${r?"top-[-14px]":"}top-[-6px]"} right-[-60px] flex`,children:r&&typeof i=="function"&&!T?t.jsxs(t.Fragment,{children:[t.jsx("button",{className:"flex items-center text-md cursor-pointer hover:text-blue-500 text-slate-400",onClick:()=>a(n,-1),children:t.jsx("i",{className:"fa-light fa-angle-up text-xl fa-fw",title:"Move Up"})}),t.jsx("button",{className:"flex items-center text-md cursor-pointer hover:text-blue-500 text-slate-400",onClick:()=>a(n,1),children:t.jsx("i",{className:"fa-light fa-angle-down text-xl fa-fw",title:"Move Down"})}),t.jsx("button",{className:" flex items-center text-md cursor-pointer hover:text-blue-500 text-slate-400",onClick:i,children:t.jsx("i",{className:"fa-light fa-pencil text-xl fa-fw",title:"Edit"})}),t.jsx("button",{className:"text-lg cursor-pointer hover:text-blue-500 text-slate-400 pr-1",onClick:o,children:t.jsx("i",{className:"fal fa-circle-plus text-lg fa-fw",title:"Add Section"})})]}):""})})]}),(x||w||k)&&t.jsxs("div",{className:`flex w-full h-[50px] items-center ${(e==null?void 0:e.level)==="1"?"border-b":""} `,children:[t.jsx("div",{id:`#${(A=e==null?void 0:e.title)==null?void 0:A.replace(/ /g,"_")}`,className:`flex-1 flex-row py-2  font-display font-medium uppercase scroll-mt-36 ${x?"":"invisible"}`,children:t.jsx(f,{className:`w-full ${(e==null?void 0:e.level)==="1"?"text-blue-500 font-bold text-xl tracking-wider py-1 pl-1":(e==null?void 0:e.level)==="2"?"text-lg tracking-wider":(e==null?void 0:e.level)==="3"?"text-md tracking-wide":""}`,value:e==null?void 0:e.title})}),t.jsx("div",{className:`${x?"p2":"invisible"}`,children:t.jsx(y,{className:"",value:e==null?void 0:e.tags})}),(($=(W=e==null?void 0:e.element)==null?void 0:W["element-type"])==null?void 0:$.includes("Map:"))&&t.jsx(Se,{className:"hidden",to:`/interact/${e==null?void 0:e.id}`,title:"interact",children:t.jsx("i",{className:"fa-light fa-window-restore"})}),t.jsx("div",{className:`${w?"p-0.5":"hidden"}`,children:t.jsxs(Be,{className:"relative",children:[t.jsx(Be.Button,{ref:c,className:"pl-3  text-md cursor-pointer hover:text-blue-200 text-blue-500",children:t.jsx("i",{className:"fa fa-circle-info text-2xl fa-fw",title:"Help"})}),t.jsx(be,{as:h.Fragment,enter:"transition ease-out duration-200",enterFrom:"opacity-0 translate-y-1",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in duration-150",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-1",children:t.jsx(Be.Panel,{ref:u,style:p.popper,...m.popper,className:"shadow-lg bg-white z-10 w-screen max-w-sm transform px-4 border border-blue-200 lg:max-w-3xl",children:t.jsx(b,{value:e==null?void 0:e.helpText})})})]})}),x&&typeof i=="function"&&!T?t.jsx(t.Fragment,{}):T&&typeof i=="function"?t.jsx("i",{className:"pl-5 py-0.5 fa-light fa-lock p-2 text-slate-400",title:"Template generated section"}):t.jsx(t.Fragment,{})]}),t.jsx("div",{className:"h-full",children:_})]})}I.memo(cs,(e,n)=>Ve(e.value,n.value));const Tu=({onClick:e,showpageToggle:n})=>t.jsxs("div",{className:"flex w-full",children:[t.jsx("div",{className:"flex-1"}),t.jsx("div",{className:`z-10 relative ${n?"w-12":"w-8"}`,children:t.jsx("div",{className:"absolute mr-8 top-[-14px] flex",children:t.jsx("button",{className:"text-lg cursor-pointer hover:text-blue-500 text-slate-400",onClick:e,children:t.jsx("i",{className:"fal fa-circle-plus text-lg fa-fw",title:"Add Section"})})})})]}),Eu=({Component:e,value:n,onChange:s,attr:r,full_width:i=!1})=>{(!n||!n.map)&&(n=[]);const a=[...n,""],[o,l]=I.useState({index:-1,value:"",type:"new"}),c=x=>l({...o,value:x}),d=x=>l({...o,index:x}),u=()=>{l({index:-1,value:"",type:"new"})},p=()=>{var k,T,_,N;let x=le(n),w="";o.type==="update"?(x[o.index]=o.value,w=`edited section ${(k=o==null?void 0:o.value)!=null&&k.title?`${(T=o==null?void 0:o.value)==null?void 0:T.title} ${o.index+1}`:o.index+1}`):(x.splice(o.index,0,o.value),w=`added section ${(_=o==null?void 0:o.value)!=null&&_.title?`${(N=o==null?void 0:o.value)==null?void 0:N.title} ${o.index+1}`:o.index+1}`),u(),s(x,w)},m=()=>{var w,k;let x=le(n);o.type==="update"&&x.splice(o.index,1),u(),s(x,`removed section ${(w=o==null?void 0:o.value)!=null&&w.title?`${(k=o==null?void 0:o.value)==null?void 0:k.title} ${o.index+1}`:o.index+1}`)},f=x=>{l({index:x,value:n[x],type:"update"})};function y(x,w){let k=le(n),T=x+w;if(!(T<0||T>=k.length)){var _=k.splice(x,1)[0];k.splice(T,0,_),s(k)}}let v=8;const b={centered:"md:grid-cols-[1fr_repeat(6,_minmax(_100px,_170px))_1fr]",fullwidth:"md:grid-cols-[_minmax(_0px,0px)_repeat(6,_1fr)_minmax(_0px,0px)]"};return t.jsx("div",{className:`w-full grid grid-cols-6 ${b[i==="show"?"fullwidth":"centered"]} gap-1`,children:a.map((x,w)=>{var j,E,C,M;const k=(o.index===w?(j=o==null?void 0:o.value)==null?void 0:j.size:x==null?void 0:x.size)||"1",T=(E=ls.find(A=>A.name===k))==null?void 0:E.value,_=6-v;v===0?v=T:T<=_?v+=T:v=T;const N=fi(k,T,_,v);return t.jsxs("div",{className:`${x!=null&&x.size?"h-full":""} ${N} `,children:[o.index===w?t.jsx(Su,{value:o.value,onChange:c,onSave:p,onCancel:u,onRemove:m,attributes:r.attributes,size:k,i:w}):"",x!==""&&!(o.index===w&&o.type==="update")&&(!(x!=null&&x.status)||(x==null?void 0:x.status)==="success")?t.jsx(cs,{value:x,i:w,moveItem:y,attributes:r.attributes,edit:!0,onEdit:o.index===-1?A=>f(w):null,addAbove:()=>d(w)}):((C=x==null?void 0:x.status)==null?void 0:C.length)>1?t.jsx(ku,{data:x}):"",!((M=a[0])!=null&&M.is_header)&&o.index==-1&&w===a.length-1?t.jsx("div",{className:"",children:t.jsx(Tu,{onClick:()=>d(w)})}):t.jsx("div",{className:""})]},w)})})},$u=({Component:e,value:n,attr:s,full_width:r})=>{if(!n||!n.map)return"";let i=8,a={centered:"md:grid-cols-[1fr_repeat(6,_minmax(_100px,_170px))_1fr]",fullwidth:"md:grid-cols-[_minmax(_0px,0px)_repeat(6,_1fr)_minmax(_0px,0px)]"};const o=l=>{var u;let c=(u=l==null?void 0:l.element)==null?void 0:u["element-data"],d=typeof c=="object"?c:c&&Cu(c)?JSON.parse(c):{};return!(d!=null&&d.hideSection)};return t.jsx("div",{className:`w-full grid grid-cols-6 ${a[r==="show"?"fullwidth":"centered"]} gap-1`,children:n.filter(l=>o(l)).map((l,c)=>{var f;const d=(l==null?void 0:l.size)||"1",u=(f=ls.find(y=>y.name===d))==null?void 0:f.value,p=6-i;i===0?i=u:u<=p?i+=u:i=u;const m=fi(d,u,p,i);return t.jsx("div",{className:`${m}`,children:t.jsx(cs,{attributes:s.attributes,i:c,value:l},c)},c)})})},ir={EditComp:Eu,ViewComp:$u},Mu={app:"dms-site",type:"cms-section",attributes:[{key:"title",type:"text",required:!1,default:"Untitled Section"},{key:"is_header",type:"boolean",hidden:"true",required:!1},{key:"helpText",type:"lexical"},{key:"level",type:"select",options:[{value:"0",label:"Hidden"},{value:"1",label:"H1"},{value:"2",label:"H2"},{value:"3",label:"H3"},{value:"4",label:"H4"}],required:!1,default:"1"},{key:"tags",type:"text",required:!1},{key:"requirements",type:"text",required:!1},{key:"size",type:"text"},{key:"element",type:"selector",required:!1}]},Iu={app:"dms-site",type:"page-edit",attributes:[{key:"action",type:"text"},{key:"user",type:"text"},{key:"time",type:"text"},{key:"parent_type",type:"text"}]},Au={app:"dms-site",type:"docs-page",registerFormats:[Mu,Iu],defaultSearch:"data ->> 'index' = '0' and (data ->> 'parent' = '' or data ->> 'parent' is null) and (data ->> 'template_id' is null)",defaultSort:e=>e.sort((n,s)=>(s.parent===null)-(n.parent===null)||n.index-s.index||+n.parent-+s.parent),attributes:[{key:"title",type:"text",required:!0,default:"New Page"},{key:"template_id",type:"number"},{key:"data_controls",type:"text",hidden:!0},{key:"generated-pages",type:"text",isArray:!0},{key:"hide_in_nav",type:"text",default:!1},{key:"index",type:"number",default:"props:index",editable:!1,hidden:!0},{key:"parent",type:"text",default:"",editable:!1,hidden:!0},{key:"url_slug",type:"text",matchWildcard:!0,hidden:!0},{key:"sidebar",type:"text",hidden:!0},{key:"header",type:"text",hidden:!0},{key:"footer",type:"text",hidden:!0},{key:"full_width",type:"text",hidden:!0},{key:"sections",type:"dms-format",isArray:!0,format:"dms-site+cms-section",DisplayComp:ir},{key:"draft_sections",type:"dms-format",isArray:!0,format:"dms-site+cms-section",DisplayComp:ir},{key:"published",type:"text",default:"draft"},{key:"has_changes",type:"boolean",default:!1},{key:"history",type:"dms-format",isArray:!0,format:"dms-site+page-edit"}]},Ou=(e={})=>{let{color:n="white",size:s="compact",subMenuStyle:r="inline",responsive:i="top"}=e,a={top:"hidden md:block",side:"hidden md:block",none:""},o={white:{contentBg:"bg-white border-r",sideItemActive:"",contentBgAccent:"bg-neutral-100",accentColor:"blue-600",accentBg:"",borderColor:"border-slate-200",textColor:"text-slate-600",textColorAccent:"text-slate-800",highlightColor:"text-blue-800"},transparent:{contentBg:"",contentBgAccent:"bg-neutral-100",accentColor:"blue-600",accentBg:"hover:bg-blue-400",borderColor:"border-slate-100",textColor:"text-slate-600",textColorAccent:"text-slate-800",highlightColor:"text-slate-800"},dark:{contentBg:"bg-neutral-800",contentBgAccent:"bg-neutral-900",accentColor:"white",accentBg:"",borderColor:"border-neutral-700",textColor:"text-slate-300",textColorAccent:"text-slate-100",highlightColor:"text-slate-100",sideItem:"text-slate-300 hover:text-white",sideItemActive:"text-slate-300 hover:text-white"},bright:{contentBg:"bg-blue-700",accentColor:"blue-400",accentBg:"hover:bg-blue-400",borderColor:"border-blue-600",textColor:"text-white",highlightColor:"text-white-500"}},l={none:{wrapper:"w-0 overflow-hidden",sideItem:"flex mx-2 pr-4 py-2 text-base ",topItem:"flex items-center text-sm px-4 border-r h-12",icon:"mr-3 text-lg"},compact:{fixed:"ml-0 md:ml-44",wrapper:"w-44",itemWrapper:"pt-5",sideItem:"group flex px-3 py-1.5 text-[14px] font-light hover:bg-blue-50 text-slate-700 mx-2 ",sideItemActive:"group flex px-3 py-1.5 text-[14px] font-light hover:bg-blue-50 text-slate-700  mx-2 ",topItem:"flex items-center text-sm px-4 border-r h-12",icon:"group w-6 mr-2 text-blue-500 ",iconActive:"group w-6 mr-2 text-blue-500 ",sideItemContent:"group-hover:translate-x-1.5 transition-transform duration-300 ease-in-out"},full:{fixed:"",wrapper:"w-full",sideItem:"group flex px-3 py-2 text-[14px] font-light hover:bg-blue-50 text-slate-700 mx-2 border-r-4 border-white",sideItemActive:"group flex px-3 py-2 text-[14px] font-light hover:bg-blue-50 text-slate-700 mx-2 border-r-4  border-white",topItem:"flex pr-4 py-2  font-",icon:"group w-6 mr-2 text-blue-500  ",iconActive:"group w-6 mr-2 text-blue-500",sideItemContent:"group-hover:translate-x-1.5 transition-transform duration-300 ease-in-out"},mini:{fixed:"ml-0 md:ml-20",wrapper:"w-20 overflow-x-hidden",sideItem:"text-white hover:bg-blue-100 hover:text-blue-100",sideItemActive:"text-blue-500 bg-blue-500  ",topItem:"flex px-4 items-center text-sm font-light ",icon:"w-20 h-10 text-xl text-blue-500",iconActive:"w-20 h-10 text-xl text-white",sideItemContent:"w-0"},micro:{fixed:"ml-0 md:ml-14",wrapper:"w-14 overflow-x-hidden",itemWrapper:"p-1",sideItem:"flex text-base font-base ",topItem:"flex mx-6 pr-4 py-2 text-sm font-light",icon:"w-12 text-2xl hover:bg-neutral-900 px-1 py-3 my-2 rounded-lg mr-4 hover:text-blue-500",sideItemContent:"hidden"}};l[s]||(s="none");let c={inline:{indicatorIcon:"fa fa-angle-right pt-2.5",indicatorIconOpen:"fal fa-angle-down pt-2.5",subMenuWrapper:"pl-2 w-full",subMenuParentWrapper:"flex flex-col w-full"},flyout:{indicatorIcon:"fal fa-angle-down",indicatorIconOpen:"fa fa-angle-right",subMenuWrapper:`absolute ml-${l[s].width-8}`,subMenuParentWrapper:"flex flex-row",subMenuWrapperTop:"absolute top-full"}};return{fixed:`md:${l[s].fixed}`,logoWrapper:`${l[s].wrapper} ${o[n].contentBgAccent} ${o[n].textColorAccent}`,sidenavWrapper:`${a[i]} ${o[n].contentBg} ${l[s].wrapper} h-full z-20`,menuIconSide:`${l[s].icon} group-hover:${o[n].highlightColor}`,menuIconSideActive:`${l[s].iconActive} group-hover:${o[n].highlightColor}`,itemsWrapper:`${o[n].borderColor} ${l[s].itemWrapper}  `,navItemContent:`${l[s].sideItemContent}`,navitemSide:`
        group  flex flex-col

        ${l[s].sideItem} ${o[n].sideItem}
        focus:outline-none focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300
        transition-all cursor-pointer
     `,navitemSideActive:`
        group  flex flex-col
         ${l[s].sideItemActive} ${o[n].sideItemActive} 
        
        focus:outline-none focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300
        transition-all cursor-pointer

      `,...c[r],vars:{colors:o,sizes:l,mobile:a}}},Ru=({color:e="white",size:n="compact",menu:s="left",subMenuStyle:r="inline"})=>{let i={white:{contentBg:"bg-slate-100",accentColor:"blue-500",accentBg:"hover:bg-white",borderColor:"border-slate-100",textColor:"text-slate-700",highlightColor:"text-blue-500"},bright:{contentBg:"bg-blue-700",accentColor:"blue-400",accentBg:"hover:bg-blue-400",borderColor:"border-blue-600",textColor:"text-white",highlightColor:"text-white"}},a={compact:{menu:`hidden uppercase md:flex flex-1 ${s==="left"?"":"justify-end"} divide-x-2`,sideItem:"flex  mx-6 pr-4 py-2 text-sm font-light hover:pl-4",topItem:`flex font-medium tracking-widest items-center text-[14px] px-4 h-12 ${i[e].textColor} ${i[e].borderColor}
        ${i[e].accentBg} hover:${i[e].highlightColor}`,activeItem:`flex font-medium  tracking-widest bg-white items-center text-[14px] px-4 h-12 ${i[e].highlightColor} ${i[e].borderColor}
        ${i[e].accentBg} hover:${i[e].highlightColor}`,icon:"mr-3 text-lg",responsive:"md:hidden"},inline:{menu:"flex flex-1",sideItem:"flex mx-4 pr-4 py-4 text-base font-base border-b hover:pl-4",topItem:`flex px-4 py-2 mx-2 font-medium text-gray-400 border-b-2 ${i[e].textColor} ${i[e].borderColor}
      hover:border-gray-300 hover:text-gray-700 border-gray-100 `,activeItem:`flex px-4 py-2 mx-2 font-medium text-blue-600 border-b-2 ${i[e].textColor} ${i[e].borderColor} border-blue-600 `,icon:"mr-4 text-2xl",responsive:"hidden"}},o={inline:{subMenuWrapperChild:"",subMenuWrapper:"pl-2 w-full ",subMenuParentWrapper:"flex flex-col w-full  "},flyout:{indicatorIcon:"fal fa-angle-down pl-2 pt-1",indicatorIconOpen:"fal fa-angle-down pl-2",subMenuWrapper:`absolute ml-${a[n].width-8} `,subMenuParentWrapper:"flex flex-row  ",subMenuWrapperTop:"absolute top-full  "},row:{indicatorIcon:"fal fa-angle-down pl-2 pt-1",indicatorIconOpen:"fal fa-angle-down pl-2 pt-1",subMenuWrapper:`absolute bg-white ml-${a[n].width-8}`,subMenuParentWrapper:"flex flex-row  ",subMenuWrapperChild:"divide-x overflow-x-auto",subMenuWrapperTop:"absolute top-full left-0 border-y border-gray-200 w-full bg-white normal-case",subMenuWrapperInactiveFlyout:"absolute  mt-8 normal-case bg-white shadow-lg z-10 p-2",subMenuWrapperInactiveFlyoutBelow:" absolute ml-40 normal-case bg-white shadow-lg z-10 p-2",subMenuWrapperInactiveFlyoutDirection:"flex flex-col divide-y-2"}};return{topnavWrapper:`w-full ${i[e].contentBg} border-b border-gray-200`,topnavContent:"flex w-full h-full",topnavMenu:`${a[n].menu} h-full overflow-x-auto overflow-y-hidden scrollbar-sm`,menuIconTop:`text-${i[e].accentColor} ${a[n].icon} group-hover:${i[e].highlightColor}`,menuIconTopActive:`text-${i[e].accentColor} ${a[n].icon} group-hover:${i[e].highlightColor}`,menuOpenIcon:"fa-light fa-bars fa-fw",menuCloseIcon:'fa-light fa-xmark fa-fw"',navitemTop:`
        w-fit group font-display whitespace-nowrap
        ${a[n].topItem}
        focus:outline-none focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300
        transition cursor-pointer
    `,topmenuRightNavContainer:"hidden md:block h-full",topnavMobileContainer:"bg-slate-50",navitemTopActive:` w-fit group font-display whitespace-nowrap
        ${a[n].activeItem}
        focus:outline-none focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300
        transition cursor-pointer 
      `,mobileButton:`${a[n].responsive} ${i[e].contentBg} inline-flex items-center justify-center pt-[12px] px-2 hover:text-blue-400  text-gray-400 hover:bg-gray-100 `,...o[r],vars:{colors:i,sizes:a}}},or={page:{wrapper1:"w-full flex-1 flex flex-col bg-slate-100",wrapper2:"w-full h-full flex-1 flex flex-row px-1 md:px-6 py-6",wrapper3:"flex flex-1 w-full  flex-col border shadow bg-white relative text-md font-light leading-7 p-4 min-h-[calc(100vh_-_102px)]"},navPadding:{1:"pt-0 ",2:"md:pt-12 pt-0",3:"md:pt-24 pt-0"},sidenav:Ou,topnav:Ru},Lu=({app:e,type:n})=>{const[s,r]=h.useState(!1);return t.jsxs("div",{className:"w-full h-full p-2",children:[t.jsxs("button",{className:"bg-white h-full w-full flex items-center text-sm leading-6 text-slate-400 hover:text-slate-600 rounded-lg shadow-sm py-1.5 pl-4 pr-8 transition ease-in",onClick:()=>r(!0),children:[t.jsx("i",{className:"fa-light fa-search pr-2 "})," Search"]}),t.jsx(Du,{open:s,setOpen:r,app:e,type:n})]})};function ct(...e){return e.filter(Boolean).join(" ")}const Du=({open:e,setOpen:n,app:s,type:r})=>{const{baseUrl:i,falcor:a,falcorCache:o}=h.useContext(oe),[l,c]=h.useState(""),[d,u]=h.useState(""),[p,m]=h.useState(!1),[f,y]=h.useState([]),[v,b]=h.useState([]);return h.useEffect(()=>{setTimeout(()=>c(d),0)},[d]),h.useEffect(()=>{async function x(){const w=xt({app:s,type:r,action:"searchTags"});return rt(a,w,"/")}x().then(w=>y(w.value.map(k=>k.tags).sort()))},[]),h.useEffect(()=>{if(!l)return;const x=xt({app:s,type:r,action:"search",tags:[l]});async function w(){var _,N;m(!0);const T=(N=(_=(await rt(a,x,"/"))[l])==null?void 0:_.value)==null?void 0:N.map(j=>({id:j.section_id,name:j.section_title,tags:j.tags,description:j.page_title,url:`${i}/${j.url_slug}`,type:j.type,color:"bg-indigo-500",icon:()=>t.jsx("i",{className:"fa-light fa-memo text-white"})}));console.log("setting items",l,T),b(T||[]),m(!1)}w()},[l]),t.jsx(be.Root,{show:e,as:h.Fragment,afterLeave:()=>c(""),appear:!0,children:t.jsxs(ye,{as:"div",className:"relative z-20",onClose:n,children:[t.jsx(be.Child,{as:h.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:t.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-25 transition-opacity"})}),t.jsx("div",{className:"fixed inset-0 z-20 w-screen overflow-y-auto p-4 sm:p-6 md:p-20",children:t.jsx(be.Child,{as:h.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:t.jsx(ye.Panel,{className:"mx-auto max-w-xl transform divide-y divide-gray-100 overflow-hidden rounded-xl bg-white shadow-2xl ring-1 ring-black ring-opacity-5 transition-all",children:t.jsxs(Ee,{onChange:x=>{x.url&&(window.location=x.url)},children:[t.jsxs("div",{className:"relative",children:[t.jsx("i",{className:"fa-light fa-search pointer-events-none absolute left-4 top-3.5 h-5 w-5 text-gray-400"}),t.jsx(Ee.Input,{className:"h-12 w-full border-0 bg-transparent pl-11 pr-4 text-gray-900 placeholder:text-gray-400 focus:ring-0 sm:text-sm",placeholder:"Search...",onChange:x=>{const w=f.find(k=>k.toLowerCase()===x.target.value.toLowerCase());u(w||x.target.value)}})]}),f.filter(x=>!(d!=null&&d.length)||x.toLowerCase().includes(d.toLowerCase())).length>0&&t.jsxs(Ee.Options,{static:!0,className:"max-h-96 transform-gpu scroll-py-3 overflow-y-auto p-3",children:[t.jsx("span",{className:"text-xs italic",children:"suggestions: "}),f.filter((x,w)=>w<=5&&(!(d!=null&&d.length)||x.toLowerCase().includes(d.toLowerCase()))).map(x=>t.jsx(Ee.Option,{value:x,onClick:()=>c(x),className:({active:w})=>ct("flex cursor-pointer select-none rounded-xl p-1",w&&"bg-gray-100"),children:({active:w})=>t.jsxs("div",{children:[t.jsx("i",{className:"text-sm text-red-400 fa fa-tag"}),t.jsx("span",{className:ct("ml-2 text-sm font-medium",w?"text-gray-900":"text-gray-700"),children:x})]})},x))]}),v.length>0&&t.jsx(Ee.Options,{static:!0,className:"max-h-96 transform-gpu scroll-py-3 overflow-y-auto p-3",children:v.map(x=>t.jsx(Ee.Option,{value:x,className:({active:w})=>ct("flex cursor-pointer select-none rounded-xl p-3",w&&"bg-gray-100"),children:({active:w})=>t.jsxs(t.Fragment,{children:[t.jsx("div",{className:ct("flex h-10 w-10 flex-none items-center justify-center rounded-lg",x.color),children:t.jsx(x.icon,{className:"h-6 w-6 text-white","aria-hidden":"true"})}),t.jsxs("div",{className:"ml-4 flex-auto",children:[t.jsx("p",{className:ct("text-sm font-medium",w?"text-gray-900":"text-gray-700"),children:x.name||x.id}),t.jsx("p",{className:ct("text-sm",w?"text-gray-700":"text-gray-500"),children:x.description}),t.jsx("span",{className:"tracking-wide p-1 bg-red-400 text-xs text-white font-semibold rounded-md border",children:x.tags})]})]})},x.id))}),p?t.jsxs("div",{className:"p-2 mx-auto w-1/4 h-full flex items-center justify-middle",children:[t.jsx("i",{className:"px-2 fa fa-loader text-gray-400"}),t.jsx("p",{className:"font-semibold text-gray-900",children:"Loading..."})]}):l!==""&&v.length===0&&t.jsxs("div",{className:"px-6 py-14 text-center text-sm sm:px-14",children:[t.jsx("i",{className:"fa fa-exclamation mx-auto h-6 w-6 text-gray-400"}),t.jsx("p",{className:"mt-4 font-semibold text-gray-900",children:"No results found"}),t.jsx("p",{className:"mt-2 text-gray-500",children:"No components found for this search term. Please try again."})]})]})})})})]})})},oe=I.createContext(void 0),Pu=({app:e="dms-site",type:n="docs-page",useFalcor:s,sideNav:r=null,logo:i=null,rightMenu:a=t.jsx("div",{}),baseUrl:o="",checkAuth:l=()=>{},theme:c=or,pgEnv:d})=>{c={...or,...c};const u=le(Au);u.app=e,u.type=n;const p=t.jsxs("div",{className:"flex flex-col md:flex-row",children:[t.jsx(Lu,{app:e,type:n}),a]});return{format:u,baseUrl:o,check:({user:m},f,y)=>{const v=x=>x.reduce((w,k)=>{let T=k.authLevel||-1;return k.children&&(T=Math.max(T,v(k.children))),Math.max(w,T)},-1);let b=v(f);l({user:m,authLevel:b},y)},children:[{type:m=>t.jsx(Xs,{...m,baseUrl:o,theme:c,useFalcor:s,pgEnv:d}),action:"list",path:"/*",filter:{options:JSON.stringify({filter:{"data->>'hide_in_nav'":["null"]}}),attributes:["title","index","url_slug","parent","published","hide_in_nav"]},children:[{type:m=>t.jsx(vd,{logo:i,rightMenu:p,...m}),action:"list",path:"templates/*",lazyLoad:!0,filter:{options:JSON.stringify({filter:{"data->>'template_id'":["-99"]}}),attributes:["title","index","url_slug","parent","hide_in_nav","template_id"]}},{type:m=>t.jsx(ju,{logo:i,rightMenu:p,...m}),action:"edit",path:"templates/edit/:id"},{type:m=>t.jsx(Sd,{logo:i,rightMenu:p,...m}),action:"edit",path:"templates/pages/:id"},{type:m=>t.jsx(hd,{...m,logo:i,rightMenu:p}),filter:{attributes:["title","index","url_slug","parent","published","hide_in_nav","sections","sidebar","header","footer","full_width"]},path:"/*",action:"view"}]},{type:m=>t.jsx(Xs,{...m,edit:!0,baseUrl:o,theme:c,useFalcor:s,pgEnv:d}),action:"list",path:"/edit/*",authLevel:5,filter:{options:JSON.stringify({filter:{"data->>'hide_in_nav'":["null"]}}),attributes:["title","index","url_slug","parent","published","hide_in_nav"]},children:[{type:m=>t.jsx(yu,{...m,logo:i,rightMenu:p}),action:"edit",path:"/edit/*"}]}]}},Fu=()=>{};function xi({button:e,location:n="left-0",width:s="w-36",className:r="relative inline-block text-left",children:i}){return t.jsxs(Yt,{as:"div",className:r,children:[t.jsx(Yt.Button,{className:"w-full h-full",children:e}),t.jsx(be,{as:h.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:t.jsx(Yt.Items,{className:`absolute z-30 ${n} mt-1 ${s} origin-top-left divide-y divide-gray-100 rounded-md bg-white shadow-lg ring-1 ring-black/5 focus:outline-none`,children:i})})]})}function Kt({children:e,onClick:n=Fu}){return t.jsx(Yt.Item,{children:({active:s})=>t.jsx("div",{className:`${s?"bg-zinc-100 ":""} group flex w-full items-center text-zinc-400 cursor-pointer text-sm`,onClick:n,children:e})})}function yt({children:e}){return t.jsx("h2",{className:"text-balance text-lg/6 font-semibold text-zinc-950 sm:text-base/6 dark:text-white",children:e})}function ds({children:e}){return t.jsx("h1",{className:"text-balance text-2xl/6 font-semibold text-zinc-950 sm:text-xl/6 dark:text-white",children:e})}function us({children:e}){return t.jsx("p",{className:"mt-2 text-pretty text-base/6 text-zinc-500 sm:text-sm/6 dark:text-zinc-400",children:e})}function zu({children:e,open:n}){return t.jsx("div",{className:`${n?"":"hidden"} z-10 fixed inset-0 flex w-screen justify-center overflow-y-auto bg-zinc-950/25 px-2 py-2 focus:outline-0 sm:px-6 sm:py-8 lg:px-8 lg:py-16 dark:bg-zinc-950/50`,children:t.jsx("div",{className:"fixed inset-0 w-screen overflow-y-auto pt-6 sm:pt-0",children:t.jsx("div",{className:"grid min-h-full grid-rows-[1fr_auto] justify-items-center sm:grid-rows-[1fr_auto_3fr] sm:p-4",children:e})})})}function ps({children:e,open:n,width:s="sm:max-w-lg",start:r="row-start-2"}){return t.jsx(zu,{open:n,children:t.jsx("div",{className:`${s} ${r}  w-full min-w-0 rounded-t-3xl bg-white p-[--gutter] shadow-lg ring-1 ring-zinc-950/10 [--gutter:theme(spacing.8)] sm:mb-auto sm:rounded-2xl dark:bg-zinc-900 dark:ring-white/10 forced-colors:outline`,children:e})})}function fn({children:e,onClick:n}){return t.jsxs("button",{onClick:n,className:"relative isolate inline-flex items-center justify-center gap-x-2 rounded-lg border text-base/6 font-semibold hover:bg-zinc-300 dark:hover:bg-zinc-500 cursor-pointer px-[calc(theme(spacing[3.5])-1px)] py-[calc(theme(spacing[2.5])-1px)] sm:px-[calc(theme(spacing.3)-1px)] sm:py-[calc(theme(spacing[1.5])-1px)] sm:text-sm/6 focus:outline-none data-[focus]:outline data-[focus]:outline-2 data-[focus]:outline-offset-2 data-[focus]:outline-blue-500 data-[disabled]:opacity-50 [&>[data-slot=icon]]:-mx-0.5 [&>[data-slot=icon]]:my-0.5 [&>[data-slot=icon]]:size-5 [&>[data-slot=icon]]:shrink-0 [&>[data-slot=icon]]:text-[--btn-icon] [&>[data-slot=icon]]:sm:my-1 [&>[data-slot=icon]]:sm:size-4 forced-colors:[--btn-icon:ButtonText] forced-colors:data-[hover]:[--btn-icon:ButtonText] border-transparent bg-[--btn-border] dark:bg-[--btn-bg] before:absolute before:inset-0 before:-z-10 before:rounded-[calc(theme(borderRadius.lg)-1px)] before:bg-[--btn-bg] before:shadow dark:before:hidden dark:border-white/5 after:absolute after:inset-0 after:-z-10 after:rounded-[calc(theme(borderRadius.lg)-1px)] after:shadow-[shadow:inset_0_1px_theme(colors.white/15%)] after:data-[active]:bg-[--btn-hover-overlay] after:data-[hover]:bg-[--btn-hover-overlay] dark:after:-inset-px dark:after:rounded-lg before:data-[disabled]:shadow-none after:data-[disabled]:shadow-none text-white [--btn-bg:theme(colors.zinc.900)] [--btn-border:theme(colors.zinc.950/90%)] [--btn-hover-overlay:theme(colors.white/10%)] dark:text-white dark:[--btn-bg:theme(colors.zinc.600)] dark:[--btn-hover-overlay:theme(colors.white/5%)] [--btn-icon:theme(colors.zinc.400)] data-[active]:[--btn-icon:theme(colors.zinc.300)] data-[hover]:[--btn-icon:theme()] cursor-default",type:"button","data-headlessui-state":"",children:[e,t.jsx("span",{className:"absolute left-1/2 top-1/2 size-[max(100%,2.75rem)] -translate-x-1/2 -translate-y-1/2 [@media(pointer:fine)]:hidden","aria-hidden":"true"})]})}function gi({children:e,onClick:n}){return t.jsxs("button",{onClick:n,className:"cursor-pointer hover:bg-zinc-100 dark:hover:bg-zing-300 relative isolate inline-flex items-center justify-center gap-x-2 rounded-lg border text-base/6 font-semibold px-[calc(theme(spacing[3.5])-1px)] py-[calc(theme(spacing[2.5])-1px)] sm:px-[calc(theme(spacing.3)-1px)] sm:py-[calc(theme(spacing[1.5])-1px)] sm:text-sm/6 focus:outline-none data-[focus]:outline data-[focus]:outline-2 data-[focus]:outline-offset-2 data-[focus]:outline-blue-500 data-[disabled]:opacity-50 [&>[data-slot=icon]]:-mx-0.5 [&>[data-slot=icon]]:my-0.5 [&>[data-slot=icon]]:size-5 [&>[data-slot=icon]]:shrink-0 [&>[data-slot=icon]]:text-[--btn-icon] [&>[data-slot=icon]]:sm:my-1 [&>[data-slot=icon]]:sm:size-4 forced-colors:[--btn-icon:ButtonText] forced-colors:data-[hover]:[--btn-icon:ButtonText] border-transparent text-zinc-950 data-[active]:bg-zinc-950/5 data-[hover]:bg-zinc-950/5 dark:text-white dark:data-[active]:bg-white/10 dark:data-[hover]:bg-white/10 [--btn-icon:theme(colors.zinc.500)] data-[active]:[--btn-icon:theme(colors.zinc.700)] data-[hover]:[--btn-icon:theme(colors.zinc.700)] dark:[--btn-icon:theme(colors.zinc.500)] dark:data-[active]:[--btn-icon:theme(colors.zinc.400)] dark:data-[hover]:[--btn-icon:theme(colors.zinc.400)] cursor-default",type:"button","data-headlessui-state":"",children:[e,t.jsx("span",{className:"absolute left-1/2 top-1/2 size-[max(100%,2.75rem)] -translate-x-1/2 -translate-y-1/2 [@media(pointer:fine)]:hidden","aria-hidden":"true"})]})}function xn({className:e="xl:col-span-5",children:n,...s}){return t.jsx("div",{className:e,children:t.jsx("div",{className:"relative h-full w-full rounded-xl bg-white shadow-[0px_0px_0px_1px_rgba(9,9,11,0.07),0px_2px_2px_0px_rgba(9,9,11,0.05)] dark:bg-zinc-900 dark:shadow-[0px_0px_0px_1px_rgba(255,255,255,0.1)] dark:before:pointer-events-none dark:before:absolute dark:before:-inset-px dark:before:rounded-xl dark:before:shadow-[0px_2px_8px_0px_rgba(0,_0,_0,_0.20),_0px_1px_0px_0px_rgba(255,_255,_255,_0.06)_inset] forced-colors:outline",children:t.jsx("div",{className:"grid h-full w-full  p-6 py-8 sm:p-8 lg:p-12",children:n})})})}function ms({children:e}){return t.jsxs("div",{className:"relative grid gap-[17px] sm:grid-cols-2 xl:grid-cols-[repeat(15,_minmax(0,_1fr))] h-full",children:[t.jsxs("svg",{className:"absolute -top-[9px] left-0 right-0 row-start-2 ml-[calc(50%-50vw)] h-px w-screen",fill:"none",children:[t.jsx("defs",{children:t.jsx("pattern",{id:":S1:",patternUnits:"userSpaceOnUse",width:"16",height:"1",children:t.jsx("line",{className:"stroke-zinc-950 dark:stroke-white",x1:"0",x2:"16",y1:"0.5",y2:"0.5",strokeDasharray:"2 2",strokeWidth:"1.5",strokeOpacity:"0.1",strokeLinejoin:"round"})})}),t.jsx("rect",{width:"100%",height:"100%",fill:"url(#:S1:)"})]}),t.jsxs("svg",{className:"absolute -top-[9px] left-0 right-0 row-start-3 ml-[calc(50%-50vw)] h-px w-screen",fill:"none",children:[t.jsx("defs",{children:t.jsx("pattern",{id:":S2:",patternUnits:"userSpaceOnUse",width:"16",height:"1",children:t.jsx("line",{className:"stroke-zinc-950 dark:stroke-white",x1:"0",x2:"16",y1:"0.5",y2:"0.5",strokeDasharray:"2 2",strokeWidth:"1.5",strokeOpacity:"0.1",strokeLinejoin:"round"})})}),t.jsx("rect",{width:"100%",height:"100%",fill:"url(#:S2:)"})]}),t.jsxs("svg",{className:"absolute -top-[9px] left-0 right-0 row-start-5 ml-[calc(50%-50vw)] h-px w-screen",fill:"none",children:[t.jsx("defs",{children:t.jsx("pattern",{id:":S4:",patternUnits:"userSpaceOnUse",width:"16",height:"1",children:t.jsx("line",{className:"stroke-zinc-950 dark:stroke-white",x1:"0",x2:"16",y1:"0.5",y2:"0.5",strokeDasharray:"2 2",strokeWidth:"1.5",strokeOpacity:"0.1",strokeLinejoin:"round"})})}),t.jsx("rect",{width:"100%",height:"100%",fill:"url(#:S4:)"})]}),t.jsxs("svg",{className:"absolute -top-[9px] left-0 right-0 row-start-6 ml-[calc(50%-50vw)] h-px w-screen xl:hidden",fill:"none",children:[t.jsx("defs",{children:t.jsx("pattern",{id:":S5:",patternUnits:"userSpaceOnUse",width:"16",height:"1",children:t.jsx("line",{className:"stroke-zinc-950 dark:stroke-white",x1:"0",x2:"16",y1:"0.5",y2:"0.5",strokeDasharray:"2 2",strokeWidth:"1.5",strokeOpacity:"0.1",strokeLinejoin:"round"})})}),t.jsx("rect",{width:"100%",height:"100%",fill:"url(#:S5:)"})]}),t.jsxs("svg",{className:"absolute -top-[9px] left-0 right-0 row-start-7 ml-[calc(50%-50vw)] h-px w-screen xl:hidden",fill:"none",children:[t.jsx("defs",{children:t.jsx("pattern",{id:":S6:",patternUnits:"userSpaceOnUse",width:"16",height:"1",children:t.jsx("line",{className:"stroke-zinc-950 dark:stroke-white",x1:"0",x2:"16",y1:"0.5",y2:"0.5",strokeDasharray:"2 2",strokeWidth:"1.5",strokeOpacity:"0.1",strokeLinejoin:"round"})})}),t.jsx("rect",{width:"100%",height:"100%",fill:"url(#:S6:)"})]}),t.jsxs("svg",{className:"absolute -top-[9px] left-0 right-0 row-start-8 ml-[calc(50%-50vw)] h-px w-screen md:hidden",fill:"none",children:[t.jsx("defs",{children:t.jsx("pattern",{id:":S7:",patternUnits:"userSpaceOnUse",width:"16",height:"1",children:t.jsx("line",{className:"stroke-zinc-950 dark:stroke-white",x1:"0",x2:"16",y1:"0.5",y2:"0.5",strokeDasharray:"2 2",strokeWidth:"1.5",strokeOpacity:"0.1",strokeLinejoin:"round"})})}),t.jsx("rect",{width:"100%",height:"100%",fill:"url(#:S7:)"})]}),t.jsxs("svg",{className:"absolute -top-[9px] left-0 right-0 row-start-9 ml-[calc(50%-50vw)] h-px w-screen md:hidden",fill:"none",children:[t.jsx("defs",{children:t.jsx("pattern",{id:":S8:",patternUnits:"userSpaceOnUse",width:"16",height:"1",children:t.jsx("line",{className:"stroke-zinc-950 dark:stroke-white",x1:"0",x2:"16",y1:"0.5",y2:"0.5",strokeDasharray:"2 2",strokeWidth:"1.5",strokeOpacity:"0.1",strokeLinejoin:"round"})})}),t.jsx("rect",{width:"100%",height:"100%",fill:"url(#:S8:)"})]}),t.jsxs("svg",{className:"absolute -top-[9px] left-0 right-0 row-start-10 ml-[calc(50%-50vw)] h-px w-screen md:hidden",fill:"none",children:[t.jsx("defs",{children:t.jsx("pattern",{id:":S9:",patternUnits:"userSpaceOnUse",width:"16",height:"1",children:t.jsx("line",{className:"stroke-zinc-950 dark:stroke-white",x1:"0",x2:"16",y1:"0.5",y2:"0.5",strokeDasharray:"2 2",strokeWidth:"1.5",strokeOpacity:"0.1",strokeLinejoin:"round"})})}),t.jsx("rect",{width:"100%",height:"100%",fill:"url(#:S9:)"})]}),t.jsxs("svg",{className:"absolute -top-[9px] left-0 right-0 row-start-11 ml-[calc(50%-50vw)] hidden h-px w-screen",fill:"none",children:[t.jsx("defs",{children:t.jsx("pattern",{id:":Sa:",patternUnits:"userSpaceOnUse",width:"16",height:"1",children:t.jsx("line",{className:"stroke-zinc-950 dark:stroke-white",x1:"0",x2:"16",y1:"0.5",y2:"0.5",strokeDasharray:"2 2",strokeWidth:"1.5",strokeOpacity:"0.1",strokeLinejoin:"round"})})}),t.jsx("rect",{width:"100%",height:"100%",fill:"url(#:Sa:)"})]}),t.jsxs("svg",{className:"absolute left-0 right-0 top-2 row-start-12 ml-[calc(50%-50vw)] h-px w-screen translate-y-1/2 sm:row-start-11 md:row-start-8 xl:row-start-6",fill:"none",children:[t.jsx("defs",{children:t.jsx("pattern",{id:":Sb:",patternUnits:"userSpaceOnUse",width:"16",height:"1",children:t.jsx("line",{className:"stroke-zinc-950 dark:stroke-white",x1:"0",x2:"16",y1:"0.5",y2:"0.5",strokeDasharray:"2 2",strokeWidth:"1.5",strokeOpacity:"0.1",strokeLinejoin:"round"})})}),t.jsx("rect",{width:"100%",height:"100%",fill:"url(#:Sb:)"})]}),t.jsxs("svg",{className:"absolute -left-[9px] top-[-88px] col-start-1 h-[calc(100%+88px+160px)] w-px",fill:"none",children:[t.jsx("defs",{children:t.jsx("pattern",{id:":Sc:",patternUnits:"userSpaceOnUse",width:"1",height:"16",children:t.jsx("line",{className:"stroke-zinc-950 dark:stroke-white",x1:"0.5",x2:"0.5",y1:"0",y2:"16",strokeDasharray:"2 2",strokeWidth:"1.5",strokeOpacity:"0.1",strokeLinejoin:"round"})})}),t.jsx("rect",{width:"100%",height:"100%",fill:"url(#:Sc:)"})]}),t.jsxs("svg",{className:"absolute -left-[9px] top-[-88px] hidden h-[calc(100%+88px+160px)] w-px sm:col-start-2 sm:block xl:col-start-6",fill:"none",children:[t.jsx("defs",{children:t.jsx("pattern",{id:":Sd:",patternUnits:"userSpaceOnUse",width:"1",height:"16",children:t.jsx("line",{className:"stroke-zinc-950 dark:stroke-white",x1:"0.5",x2:"0.5",y1:"0",y2:"16",strokeDasharray:"2 2",strokeWidth:"1.5",strokeOpacity:"0.1",strokeLinejoin:"round"})})}),t.jsx("rect",{width:"100%",height:"100%",fill:"url(#:Sd:)"})]}),t.jsxs("svg",{className:"absolute -left-[9px] top-[-88px] col-start-7 hidden h-[calc(100%+88px+160px)] w-px xl:block",fill:"none",children:[t.jsx("defs",{children:t.jsx("pattern",{id:":Se:",patternUnits:"userSpaceOnUse",width:"1",height:"16",children:t.jsx("line",{className:"stroke-zinc-950 dark:stroke-white",x1:"0.5",x2:"0.5",y1:"0",y2:"16",strokeDasharray:"2 2",strokeWidth:"1.5",strokeOpacity:"0.1",strokeLinejoin:"round"})})}),t.jsx("rect",{width:"100%",height:"100%",fill:"url(#:Se:)"})]}),t.jsxs("svg",{className:"absolute -left-[9px] top-[-88px] col-start-10 hidden h-[calc(100%+88px+160px)] w-px xl:block",fill:"none",children:[t.jsx("defs",{children:t.jsx("pattern",{id:":Sf:",patternUnits:"userSpaceOnUse",width:"1",height:"16",children:t.jsx("line",{className:"stroke-zinc-950 dark:stroke-white",x1:"0.5",x2:"0.5",y1:"0",y2:"16",strokeDasharray:"2 2",strokeWidth:"1.5",strokeOpacity:"0.1",strokeLinejoin:"round"})})}),t.jsx("rect",{width:"100%",height:"100%",fill:"url(#:Sf:)"})]}),t.jsxs("svg",{className:"absolute -left-[9px] top-[-88px] col-start-11 hidden h-[calc(100%+88px+160px)] w-px xl:block",fill:"none",children:[t.jsx("defs",{children:t.jsx("pattern",{id:":Sg:",patternUnits:"userSpaceOnUse",width:"1",height:"16",children:t.jsx("line",{className:"stroke-zinc-950 dark:stroke-white",x1:"0.5",x2:"0.5",y1:"0",y2:"16",strokeDasharray:"2 2",strokeWidth:"1.5",strokeOpacity:"0.1",strokeLinejoin:"round"})})}),t.jsx("rect",{width:"100%",height:"100%",fill:"url(#:Sg:)"})]}),t.jsxs("svg",{className:"absolute -right-2 top-[-88px] col-start-3 h-[calc(100%+88px+160px)] w-px translate-x-1/2 sm:col-start-4 xl:col-start-[16]",fill:"none",children:[t.jsx("defs",{children:t.jsx("pattern",{id:":Sh:",patternUnits:"userSpaceOnUse",width:"1",height:"16",children:t.jsx("line",{className:"stroke-zinc-950 dark:stroke-white",x1:"0.5",x2:"0.5",y1:"0",y2:"16",strokeDasharray:"2 2",strokeWidth:"1.5",strokeOpacity:"0.1",strokeLinejoin:"round"})})}),t.jsx("rect",{width:"100%",height:"100%",fill:"url(#:Sh:)"})]}),e]})}function Hn({label:e,value:n,placeholder:s="",onChange:r}){return t.jsx("div",{className:"mt-6",children:t.jsxs("div",{className:"[&>[data-slot=label]+[data-slot=control]]:mt-3 [&>[data-slot=label]+[data-slot=description]]:mt-1 [&>[data-slot=description]+[data-slot=control]]:mt-3 [&>[data-slot=control]+[data-slot=description]]:mt-3 [&>[data-slot=control]+[data-slot=error]]:mt-3 [&>[data-slot=label]]:font-medium","data-headlessui-state":"",children:[e&&t.jsx("label",{"data-slot":"label",className:"select-none text-base/6 text-zinc-950 data-[disabled]:opacity-50 sm:text-sm/6 dark:text-white",children:e}),t.jsx("span",{"data-slot":"control",className:"relative block w-full before:absolute before:inset-px before:rounded-[calc(theme(borderRadius.lg)-1px)] before:bg-white before:shadow dark:before:hidden after:pointer-events-none after:absolute after:inset-0 after:rounded-lg after:ring-inset after:ring-transparent sm:after:focus-within:ring-2 sm:after:focus-within:ring-blue-500 has-[[data-disabled]]:opacity-50 before:has-[[data-disabled]]:bg-zinc-950/5 before:has-[[data-disabled]]:shadow-none before:has-[[data-invalid]]:shadow-red-500/10",children:t.jsx("input",{value:n,placeholder:s,onChange:r,className:"relative block w-full appearance-none rounded-lg px-[calc(theme(spacing[3.5])-1px)] py-[calc(theme(spacing[2.5])-1px)] sm:px-[calc(theme(spacing[3])-1px)] sm:py-[calc(theme(spacing[1.5])-1px)] text-base/6 text-zinc-950 placeholder:text-zinc-500 sm:text-sm/6 dark:text-white border border-zinc-950/10 data-[hover]:border-zinc-950/20 dark:border-white/10 dark:data-[hover]:border-white/20 bg-transparent dark:bg-white/5 focus:outline-none data-[invalid]:border-red-500 data-[invalid]:data-[hover]:border-red-500 data-[invalid]:dark:border-red-500 data-[invalid]:data-[hover]:dark:border-red-500 data-[disabled]:border-zinc-950/20 dark:data-[hover]:data-[disabled]:border-white/15 data-[disabled]:dark:border-white/15 data-[disabled]:dark:bg-white/[2.5%]","data-autofocus":""})})]})})}function bi({label:e,value:n,placeholder:s="",onChange:r=()=>{},onSubmit:i=()=>{}}){return t.jsx("input",{value:n,placeholder:s,onChange:r,onBlur:a=>{var o,l;((l=(o=a.target)==null?void 0:o.value)==null?void 0:l.length)>0&&i()},onKeyUp:a=>{var o,l;a.key==="Enter"&&((l=(o=a.target)==null?void 0:o.value)==null?void 0:l.length)>0&&i()},className:"relative block w-full appearance-none  px-[calc(theme(spacing[3.5])-1px)] py-[calc(theme(spacing[2.5])-1px)] sm:px-[calc(theme(spacing[3])-1px)] sm:py-[calc(theme(spacing[1.5])-1px)] text-base/6 text-zinc-950 placeholder:text-zinc-500 sm:text-sm/6 dark:text-white border border-transparent hover:border-zinc-950/10 data-[hover]:border-zinc-950/20 dark:border-white/10 dark:data-[hover]:border-white/20 bg-transparent dark:bg-white/5 focus:outline-none data-[invalid]:border-red-500 data-[invalid]:data-[hover]:border-red-500 data-[invalid]:dark:border-red-500 data-[invalid]:data-[hover]:dark:border-red-500 data-[disabled]:border-zinc-950/20 dark:data-[hover]:data-[disabled]:border-white/15 data-[disabled]:dark:border-white/15 data-[disabled]:dark:bg-white/[2.5%]","data-autofocus":""})}function yi({label:e,value:n,onChange:s}){const r=qe.lexical.EditComp;return t.jsxs("div",{className:"",children:[e&&t.jsx("label",{"data-slot":"label",className:"font-medium  select-none text-base/6 text-zinc-950 data-[disabled]:opacity-50 sm:text-sm/6 dark:text-white",children:e}),t.jsx("div",{className:"dark:text-zinc-100 dark:bg-zinc-800 rounded border border-zinc-950/10 data-[hover]:border-zinc-950/20 dark:border-white/10 dark:data-[hover]:border-white/20",children:t.jsx(r,{value:n,onChange:s,bgColor:"bg-zinc-700"})})]})}function Bu({children:e}){return t.jsx("table",{className:"min-w-full text-left text-sm/6 rounded-lg",children:e})}function Wu({children:e,border:n}){return t.jsx("thead",{className:"text-zinc-500 dark:text-zinc-400 border-l-8 border-zinc-500",children:t.jsx("tr",{children:e})})}function Je({children:e}){return t.jsx("th",{className:"border text-center border-zinc-950/10 px-4 py-2 font-medium first:pl-[var(--gutter,theme(spacing.2))] last:pr-[var(--gutter,theme(spacing.2))] dark:border-b-white/10 sm:first:pl-2 sm:last:pr-2",children:e})}function ve({children:e,colspan:n,className:s,border:r="border"}){return t.jsx("td",{colSpan:n,className:`text-zinc-500 dark:text-zinc-400 relative ${r} border-zinc-950/5 dark:border-white/5 ${s}`,children:e})}const Hu=({className:e="w-6 h-6"})=>t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m15.75 15.75-2.489-2.489m0 0a3.375 3.375 0 1 0-4.773-4.773 3.375 3.375 0 0 0 4.774 4.774ZM21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),Uu=e=>t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:24,height:24,fill:"none",...e,children:t.jsx("path",{d:"M15 6C15 6 9.00001 10.4189 9 12C8.99999 13.5812 15 18 15 18",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),qu=e=>t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:24,height:24,fill:"none",...e,children:t.jsx("path",{d:"M9.00005 6C9.00005 6 15 10.4189 15 12C15 13.5812 9 18 9 18",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),Vu=e=>t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:24,height:24,fill:"none",...e,children:t.jsx("path",{d:"M19.0005 4.99988L5.00045 18.9999M5.00045 4.99988L19.0005 18.9999",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),Yu=e=>t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:24,height:24,fill:"none",...e,children:[t.jsx("path",{d:"M11.9959 12H12.0049",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),t.jsx("path",{d:"M17.9998 12H18.0088",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),t.jsx("path",{d:"M5.99981 12H6.00879",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})]});function Gu({storyId:e}){const{project:n,params:s,apiUpdate:r,baseUrl:i}=I.useContext(zt)||{},a=gt();let{story:o,arc:l}=I.useMemo(()=>((n==null?void 0:n.arcs)||[]).reduce((d,u)=>{let p=((u==null?void 0:u.stories)||[]).find(m=>m.id==e);return p?{story:p,arc:u}:d},{}),[n,e]);const c=async d=>{console.log("test",l,{id:l.id,stories:l.stories.filter(u=>+u.id!=+e)}),await r({data:{id:l.id,stories:l.stories.filter(u=>+u.id!=+e)},config:{format:hs}}),await r({data:{id:d},config:{format:cn},requestType:"delete"}),a(`${i}/project/${n.id}`)};return t.jsx(ps,{open:e,width:"sm:max-w-7xl ",start:"row-start-1  mt-10",children:t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"w-full flex justify-between items-center",children:[t.jsxs("div",{children:[" ",o==null?void 0:o.title," "]}),t.jsxs("div",{className:"flex",children:[t.jsx("div",{className:"h-9 w-9 flex items-center justify-center mx-1 border rounded hover:bg-zinc-200",children:t.jsx(Uu,{className:"h-5 w-5"})}),t.jsx("div",{className:"h-9 w-9 flex items-center justify-center mx-1 border rounded hover:bg-zinc-200",children:t.jsx(qu,{className:"h-5 w-5"})}),t.jsx("div",{className:"relative",children:t.jsxs(xi,{location:"right-0",width:"w-40",button:t.jsx("div",{className:"h-9 w-9 flex items-center justify-center hover:bg-zinc-200 rounded",children:t.jsx(Yu,{className:"h-5 w-5"})}),children:[t.jsx(Kt,{children:t.jsx("div",{className:"flex-1 p-2",children:"Copy Link"})}),t.jsx(Kt,{children:t.jsx("div",{className:"flex-1 p-2",children:" Archive"})}),t.jsxs(Kt,{onClick:()=>c(e),children:[" ",t.jsx("div",{className:"flex-1 p-2",children:"Delete"})]})]})}),t.jsx(Se,{className:"h-9 w-9 flex items-center justify-center hover:bg-zinc-200 rounded",to:`${i}/project/${n.id}`,children:t.jsx(Vu,{className:"h-5 w-5"})})]})]}),t.jsxs("div",{className:"flex py-4 ",children:[t.jsx("div",{className:"flex-1 text-sm  font-light",children:t.jsx(yi,{value:o==null?void 0:o.description,onChange:d=>r({data:{id:o.id,description:d},config:{format:cn}})})}),t.jsx("div",{className:"w-64 min-h-64 border"})]})]})})}const zt=I.createContext(void 0);function Ju({setOpen:e,state:n,setState:s,createArc:r}){return t.jsxs(ps,{open:n==null?void 0:n.showNewArc,width:"sm:max-w-3xl ",children:[t.jsx(yt,{children:"Create New Story Arc"}),t.jsx(us,{children:"Name the project and select an overview of the work."}),t.jsx(Hn,{label:"Project Name",value:n.name,onChange:i=>s({...n,name:i.target.value})}),t.jsx(yi,{label:"Description",value:n.description,onChange:i=>s({...n,description:i})}),t.jsxs("div",{className:"mt-8 flex flex-col-reverse items-center justify-end gap-3 *:w-full sm:flex-row sm:*:w-auto",children:[t.jsx(gi,{onClick:e,children:"Cancel"}),t.jsx(fn,{onClick:r,children:"Create Story Arc"})]})]})}function ar({dataItems:e,item:n,updateAttribute:s,attributes:r,apiUpdate:i,status:a,params:o,...l}){Ie(),Ae();const{baseUrl:c=""}=I.useContext(fs)||{},d={showNewArc:!1,name:"",description:"",projects:[{id:n==null?void 0:n.id}]},[u,p]=I.useState(d),m=async()=>{var v;if(((v=u==null?void 0:u.name)==null?void 0:v.length)>3){const b={id:n.id,arcs:[...(n==null?void 0:n.arcs)||[],{name:u.name,description:u.description,projects:u.projects}].filter(x=>x)};await i({data:b}),p(d)}},f=I.useMemo(()=>r.arcs.EditComp,[]),y=v=>{console.log("arc changes",v)};return t.jsxs(zt.Provider,{value:{project:n,params:o,apiUpdate:i,baseUrl:c},children:[t.jsx(Gu,{storyId:o.storyId}),t.jsx("div",{className:"relative mx-auto lg:max-w-7xl ",children:t.jsx("main",{className:"pb-40",children:t.jsxs(ms,{children:[t.jsx("div",{className:"relative xl:col-span-13 sm:col-span-1 flex items-center pt-4",children:t.jsx(ds,{children:n.name})}),t.jsxs("div",{className:"flex items-center xl:col-span-2 justify-end pt-4",children:[t.jsx(fn,{onClick:v=>p({...u,showNewArc:!0}),children:"New Story Arc"}),t.jsx(Ju,{state:u,setState:p,createArc:m,setOpen:()=>p({...u,showNewArc:!u.showNewArc})})]}),t.jsx(f,{value:n.arcs,item:n,onChange:y})]})})})]})}function Ku({item:e,attributes:n,arcIndex:s,onChange:r}){Mt.useFalcor();const{apiUpdate:i}=I.useContext(zt),a=I.useMemo(()=>n.stories.EditComp,[]),o=async l=>{console.log("updateStories",l),await i({data:{id:e.id,stories:l},config:{format:hs}}),console.log("updated story")};return t.jsxs(xn,{className:"xl:col-span-15 sm:col-span-2",children:[t.jsx(yt,{children:e.name}),t.jsx("div",{children:t.jsx(a,{value:e.stories,item:e,onChange:o})})]})}function Xu({Component:e,value:n,onChange:s,attr:r,...i}){return Array.isArray(n)?t.jsx(t.Fragment,{children:n.map((a,o)=>t.jsx(Ku,{item:a,arcIndex:o,attributes:r.attributes,onChange:()=>{}},a.id))}):t.jsx(xn,{className:"xl:col-span-15 sm:col-span-2 justify-center text-center",children:t.jsx(yt,{children:"Add a Story Arc"})})}function Zu({Component:e,value:n,attr:s}){return t.jsx("div",{children:" Story Arc View "})}const Qu={EditComp:Xu,ViewComp:Zu},ln={none:{bg:"bg-gray-300 hover:bg-gray-200 hover:text-gray-200 text-gray-300",index:-1,name:"x"},"Ready to Start":{bg:"bg-blue-500 hover:bg-blue-300",name:"Ready to Start",index:1},"In Progress":{bg:"bg-amber-400 hover:bg-amber-300",name:"In Progress",index:2},"Waiting Review":{bg:"bg-indigo-500 hover:bg-indigo-300",name:"Waiting Review",index:3},"Pending Deploy":{bg:"bg-orange-400 hover:bg-orange-300",name:"Pending Deploy",index:4},Done:{bg:"bg-emerald-500 hover:bg-emerald-400",name:"Done",index:5},Stuck:{bg:"bg-red-500 hover:bg-red-400",name:"Stuck",index:6}},wi={none:{bg:"bg-gray-300 hover:bg-gray-200 hover:text-gray-200 text-gray-300",name:"x"},Critical:{bg:"bg-rose-500 hover:bg-rose-300",name:"Critical"},High:{bg:"bg-yellow-400 hover:bg-yellow-300",name:"High"},Medium:{bg:"bg-sky-500 hover:bg-sky-300",name:"Medium"},Low:{bg:"bg-green-400 hover:bg-green-300",name:"Low"}},vi={none:{bg:"bg-gray-300 hover:bg-gray-200 hover:text-gray-200 text-gray-300",name:"x"},Feature:{bg:"bg-lime-500 hover:bg-lime-300",name:"Feature"},Research:{bg:"bg-purple-500 hover:bg-purple-300",name:"Research"},Bug:{bg:"bg-pink-400 hover:bg-pink-300",name:"Bug"}},ji={none:{bg:"bg-gray-300 hover:bg-gray-200",name:"0"},1:{bg:"bg-slate-300 hover:bg-slate-200",name:"1"},2:{bg:"bg-slate-400 hover:bg-slate-300",name:"2"},3:{bg:"bg-slate-500 hover:bg-slate-300",name:"3"},5:{bg:"bg-slate-600 hover:bg-slate-300",name:"5"},7:{bg:"bg-slate-700 hover:bg-slate-300",name:"7"},10:{bg:"bg-slate-900 hover:bg-slate-300",name:"10"}};function qt({story:e,type:n,values:s}){var i,a;const{apiUpdate:r}=I.useContext(zt)||{};return t.jsx(xi,{className:" ",width:"w-36",location:"-left-0",button:t.jsx("div",{className:`w-36 h-10 text-zinc-50 flex border border-transparent flex-1 items-center justify-center ${(i=s[(e==null?void 0:e[n])||"none"])==null?void 0:i.bg} focus:border-blue-700 active:border-blue-700`,children:(a=s[(e==null?void 0:e[n])||"none"])==null?void 0:a.name}),children:Object.keys(s).map(o=>{var l,c;return t.jsx(Kt,{onClick:()=>r({data:{id:e.id,[n]:o},config:{format:cn}}),children:t.jsx("div",{className:"flex flex-1 p-1 hover:bg-zinc-100",children:t.jsx("div",{className:`flex flex-1 p-1 h-8 text-zinc-50 items-center justify-center ${(l=s[o])==null?void 0:l.bg}`,children:(c=s[o])==null?void 0:c.name})})},o)})})}function ep({story:e,updateStory:n}){const{project:s,baseUrl:r,apiUpdate:i}=I.useContext(zt)||{};return t.jsxs("tr",{className:"hover:bg-zinc-50 hover:shadow-md dark:hover:bg-zinc-800 border-l-8 border-zinc-500",children:[t.jsx(ve,{children:t.jsx("div",{className:"w-full h-full flex items-center justify-center",children:t.jsx("input",{type:"checkbox"})})}),t.jsx(ve,{children:t.jsxs(Se,{to:`${r}/project/${s.id}/story/${e.id}`,className:"flex group",children:[t.jsx("div",{className:"flex-1",children:t.jsx(bi,{value:e.title})}),t.jsx("div",{className:"flex items-center justify-center text-transparent group-hover:text-zinc-400 px-2 cursor-pointer",children:t.jsx(Hu,{})})]})}),t.jsx(ve,{}),t.jsx(ve,{className:"w-36 h-10",children:t.jsx(qt,{story:e,type:"status",values:ln})}),t.jsx(ve,{className:"w-36 h-10",children:t.jsx(qt,{story:e,type:"priority",values:wi})}),t.jsx(ve,{className:"w-36 h-10",children:t.jsx(qt,{story:e,type:"type",values:vi})}),t.jsx(ve,{className:"w-36 h-10",children:t.jsx(qt,{story:e,type:"points",values:ji})})]})}function tp({createStory:e}){const[n,s]=I.useState();return t.jsxs("tr",{className:"hover:bg-zinc-50 hover:shadow-md dark:hover:bg-zinc-800 border-l-8 border-zinc-400",children:[t.jsx(ve,{children:t.jsx("div",{className:"w-full h-full flex items-center justify-center",children:t.jsx("input",{disabled:!0,type:"checkbox"})})}),t.jsx(ve,{border:"border-t border-b border-l",children:t.jsx(bi,{value:n,onChange:r=>s(r.target.value),placeholder:"+ Add Story",onSubmit:()=>{e(n),s("")},border:""})}),t.jsx(ve,{colspan:"5",border:"border-r border-y"})]})}function In({stories:e,type:n,values:s}){let r=(e||[]).reduce((i,a)=>(i[(a==null?void 0:a[n])||"none"]||(i[(a==null?void 0:a[n])||"none"]={bg:s[(a==null?void 0:a[n])||"none"].bg,count:0}),i[(a==null?void 0:a[n])||"none"].count+=1,i),{});return t.jsx("div",{className:"w-36 h-full flex p-1",children:Object.values(r).map((i,a)=>t.jsx("div",{className:`${i.bg} h-full`,style:{width:`${Math.round(i.count/e.length*100)}%`}},a))})}function np({stories:e,type:n}){let s=(e||[]).reduce((r,i)=>(r+=+((i==null?void 0:i[n])||0),r),0);return t.jsx("div",{className:"w-36 h-full flex p-1 items-center justify-center font-medium",children:s})}function sp({stories:e}){return t.jsxs("tr",{className:" dark:hover:bg-zinc-800",children:[t.jsx(ve,{colspan:"3",border:"border-none"}),t.jsx(ve,{className:"w-36 h-10",children:t.jsx(In,{stories:e,type:"status",values:ln})}),t.jsx(ve,{className:"w-36 h-10",children:t.jsx(In,{stories:e,type:"priority",values:wi})}),t.jsx(ve,{className:"w-36 h-10",children:t.jsx(In,{stories:e,type:"type",values:vi})}),t.jsx(ve,{className:"w-36 h-10",children:t.jsx(np,{stories:e,type:"points",values:ji})})]})}function rp({Component:e,item:n,value:s,onChange:r,attr:i,...a}){const o=l=>{r([...s||[],{title:l,state:"unstarted"}])};return t.jsx("div",{children:t.jsxs(Bu,{children:[t.jsxs(Wu,{border:"border-l-8 border-zinc-500",children:[t.jsx(Je,{}),t.jsx(Je,{children:"Story"}),t.jsx(Je,{children:"Owner"}),t.jsx(Je,{children:"Status"}),t.jsx(Je,{children:"Priority"}),t.jsx(Je,{children:"Type"}),t.jsx(Je,{children:"Points"})]}),t.jsxs("tbody",{children:[(s||[]).sort((l,c)=>ln[(c==null?void 0:c.status)||"none"].index-ln[(l==null?void 0:l.status)||"none"].index).map((l,c)=>t.jsx(ep,{story:l},c)),t.jsx(tp,{createStory:o}),t.jsx(sp,{stories:s})]})]})})}function ip({Component:e,value:n,attr:s}){return t.jsx("div",{children:" Story Arc View "})}const op={EditComp:rp,ViewComp:ip},hs={app:"project-manager2",type:"story-arc",attributes:[{key:"name",type:"text",required:!0},{key:"description",type:"lexical"},{key:"estimated-timespan",type:"text"},{key:"status",type:"text"},{key:"stories",type:"dms-format",isArray:!0,format:"project-manager2+story",DisplayComp:op},{key:"projects",type:"dms-format",isArray:!0,format:"project-manager2+project"}]},cn={app:"project-manager2",type:"story",attributes:[{key:"title",type:"text",required:!0},{key:"project",type:"text",default:"props:project.data.id"},{key:"projectVersion",type:"text",default:"props:project.data.version"},{key:"index",type:"number",required:!0,hidden:!0,editable:!0,default:"props:next",liveUpdate:!0},{key:"type",type:"text"},{key:"points",type:"text"},{key:"status",type:"text"},{key:"requestedBy",type:"text",required:!0,editable:!1,default:"props:pmMember.data.name",liveUpdate:!0},{key:"owner",type:"select",isArray:!0,liveUpdate:!0,inputProps:{valueAccessor:e=>e.id,accessor:e=>e.data.name,domain:"props:pmMembers"}},{key:"description",type:"lexical"}]},ap={app:"project-manager2",type:"project",registerFormats:[hs,cn],attributes:[{key:"name",type:"text",required:!0},{key:"id",type:"text",required:!0},{key:"version",type:"text",default:"1.0.0",verify:"^\\d+(?:[.]\\d+){0,2}$"},{key:"desc",type:"text"},{key:"icebox",type:"boolean",default:!1},{key:"arcs",type:"dms-format",isArray:!0,format:"project-manager2+story-arc",DisplayComp:Qu}]};function lp({setOpen:e,state:n,setState:s,createProject:r}){return t.jsxs(ps,{open:n.showNewProject,children:[t.jsx(yt,{children:"Create New Project"}),t.jsx(us,{children:"Name the project and select a project key abbreviation."}),t.jsx(Hn,{label:"Project Name",value:n.newProject.name,onChange:i=>s(a=>{a.newProject.name=i.target.value})}),t.jsx(Hn,{label:"Description",value:n.newProject.desc,onChange:i=>s(a=>{a.newProject.desc=i.target.value})}),t.jsxs("div",{className:"mt-8 flex flex-col-reverse items-center justify-end gap-3 *:w-full sm:flex-row sm:*:w-auto",children:[t.jsx(gi,{onClick:e,children:"Cancel"}),t.jsx(fn,{onClick:r,children:"Create Project"})]})]})}function cp({dataItems:e,...n}){const s=Ie(),{pathname:r}=Ae(),{baseUrl:i=""}=I.useContext(fs)||{},[a,o]=eo({showNewProject:!1,newProject:{name:"",desc:""}}),l=async()=>{var u;const d=a.newProject;((u=d==null?void 0:d.name)==null?void 0:u.length)>3&&d.desc.length&&(await s(Yc(d),{method:"post",action:r}),o({showNewProject:!1,newProject:{name:"",desc:""}}))},c=I.useMemo(()=>e.filter(d=>!d.icebox),[e]);return t.jsx("div",{className:"relative mx-auto lg:max-w-7xl ",children:t.jsx("main",{className:"pb-40",children:t.jsxs(ms,{children:[t.jsx("div",{className:"relative xl:col-span-13 sm:col-span-1 flex items-center pt-4",children:t.jsx(ds,{children:"Projects"})}),t.jsxs("div",{className:"flex items-center xl:col-span-2 justify-end pt-4",children:[t.jsx(fn,{onClick:d=>o({...a,showNewProject:!0}),children:"New Project"}),t.jsx(lp,{state:a,setState:o,createProject:l,setOpen:()=>o({...a,showNewProject:!a.showNewProject})})]}),c.map(d=>t.jsx(xn,{className:"xl:col-span-5",children:t.jsxs(Se,{to:`/${i}/project/${d.id}`,children:[t.jsx(yt,{children:d.name}),t.jsx(us,{children:d.desc})]})},d.id))]})})})}function dp({dataItems:e,...n}){return t.jsx("div",{className:"relative mx-auto lg:max-w-7xl ",children:t.jsx("main",{className:"pb-40",children:t.jsxs(ms,{children:[t.jsx("div",{className:"relative xl:col-span-15 sm:col-span-2 flex items-center pt-4",children:t.jsx(ds,{children:"Tasks"})}),t.jsx(xn,{className:"xl:col-span-5",children:t.jsx(yt,{children:"No Tasks"})})]})})})}const up=({color:e="white",size:n="compact",menu:s="left",subMenuStyle:r="inline"})=>{let i={white:{contentBg:"bg-transparent",accentColor:"blue-500",accentBg:"hover:bg-white",borderColor:"border-slate-100",textColor:"text-slate-700",highlightColor:"text-blue-500"}},a={compact:{menu:`hidden uppercase md:flex flex-1 ${s==="left"?"":"justify-end"} divide-x-2`,sideItem:"flex  mx-6 pr-4 py-2 text-sm font-light hover:pl-4",topItem:`flex font-medium tracking-widest items-center text-[14px] px-4 h-12 ${i[e].textColor} ${i[e].borderColor}
        ${i[e].accentBg} hover:${i[e].highlightColor}`,activeItem:`flex font-medium  tracking-widest bg-white items-center text-[14px] px-4 h-12 ${i[e].highlightColor} ${i[e].borderColor}
        ${i[e].accentBg} hover:${i[e].highlightColor}`,icon:"mr-3 text-lg",responsive:"md:hidden"}},o={inline:{subMenuWrapperChild:"",subMenuWrapper:"pl-2 w-full ",subMenuParentWrapper:"flex flex-col w-full  "},flyout:{indicatorIcon:"fal fa-angle-down pl-2 pt-1",indicatorIconOpen:"fal fa-angle-down pl-2",subMenuWrapper:`absolute ml-${a[n].width-8} `,subMenuParentWrapper:"flex flex-row  ",subMenuWrapperTop:"absolute top-full  "},row:{indicatorIcon:"fal fa-angle-down pl-2 pt-1",indicatorIconOpen:"fal fa-angle-down pl-2 pt-1",subMenuWrapper:`absolute bg-white ml-${a[n].width-8}`,subMenuParentWrapper:"flex flex-row  ",subMenuWrapperChild:"divide-x overflow-x-auto",subMenuWrapperTop:"absolute top-full left-0 border-y border-gray-200 w-full bg-white normal-case",subMenuWrapperInactiveFlyout:"absolute  mt-8 normal-case bg-white shadow-lg z-10 p-2",subMenuWrapperInactiveFlyoutBelow:" absolute ml-40 normal-case bg-white shadow-lg z-10 p-2",subMenuWrapperInactiveFlyoutDirection:"flex flex-col divide-y-2"}};return{topnavWrapper:`w-full ${i[e].contentBg} `,topnavContent:"flex w-full h-full",topnavMenu:`${a[n].menu} h-full overflow-x-auto overflow-y-hidden scrollbar-sm`,menuIconTop:`text-${i[e].accentColor} ${a[n].icon} group-hover:${i[e].highlightColor}`,menuIconTopActive:`text-${i[e].accentColor} ${a[n].icon} group-hover:${i[e].highlightColor}`,menuOpenIcon:"fa-light fa-bars fa-fw",menuCloseIcon:'fa-light fa-xmark fa-fw"',navitemTop:`
        w-fit group font-display whitespace-nowrap
        ${a[n].topItem}
        focus:outline-none focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300
        transition cursor-pointer
    `,topmenuRightNavContainer:"hidden md:block h-full",topnavMobileContainer:"bg-slate-50",navitemTopActive:` w-fit group font-display whitespace-nowrap
        ${a[n].activeItem}
        focus:outline-none focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300
        transition cursor-pointer 
      `,mobileButton:`${a[n].responsive} ${i[e].contentBg} inline-flex items-center justify-center pt-[12px] px-2 hover:text-blue-400  text-gray-400 hover:bg-gray-100 `,...o[r],vars:{colors:i,sizes:a}}},pp=(e={})=>{let{color:n="white",size:s="compact",subMenuStyle:r="inline",responsive:i="top"}=e,a={top:"hidden md:block",side:"hidden md:block",none:""},o={white:{contentBg:"bg-white dark:bg-zinc-900 dark:border-zinc-900  border-r",sideItemActive:"",contentBgAccent:"bg-neutral-100",accentColor:"blue-600",accentBg:"",borderColor:"border-slate-200",textColor:"text-slate-600",textColorAccent:"text-slate-800",highlightColor:"text-blue-800"}},l={none:{wrapper:"w-0 overflow-hidden",sideItem:"flex mx-2 pr-4 py-2 text-base ",topItem:"flex items-center text-sm px-4 border-r h-12",icon:"mr-3 text-lg"},full:{fixed:"",wrapper:"w-full",sideItem:"group flex px-3 py-2 text-[14px] font-light hover:bg-blue-50 text-slate-700 mx-2 border-r-4 border-white",sideItemActive:"group flex px-3 py-2 text-[14px] font-light hover:bg-blue-50 text-slate-700 mx-2 border-r-4  border-white",topItem:"flex pr-4 py-2  font-",icon:"group w-6 mr-2 text-blue-500  ",iconActive:"group w-6 mr-2 text-blue-500",sideItemContent:"group-hover:translate-x-1.5 transition-transform duration-300 ease-in-out"},mini:{fixed:"ml-0 md:ml-20",wrapper:"w-20 overflow-x-hidden",sideItem:"text-white hover:bg-blue-100 hover:text-blue-100",sideItemActive:"text-blue-500 bg-blue-500  ",topItem:"flex px-4 items-center text-sm font-light ",icon:"w-20 h-10 text-xl text-blue-500",iconActive:"w-20 h-10 text-xl text-white",sideItemContent:"w-0"},micro:{fixed:"ml-0 md:ml-14",wrapper:"w-14 overflow-x-hidden",itemWrapper:"p-1",sideItem:"flex text-base font-base ",topItem:"flex mx-6 pr-4 py-2 text-sm font-light",icon:"w-12 text-2xl hover:bg-neutral-900 px-1 py-3 my-2 rounded-lg mr-4 hover:text-blue-500",sideItemContent:"hidden"},compact:{fixed:"ml-0 md:ml-44",wrapper:"w-44",itemWrapper:"pt-5",sideItem:"group flex px-3 py-1.5 text-[13px]  hover:bg-zinc-100 dark:hover:bg-zinc-700 rounded-sm text-zinc-700 dark:text-zinc-200 mx-2 ",sideItemActive:"group flex px-3 py-1.5 text-[13px]  hover:bg-zinc-100 dark:hover:bg-zinc-700 rounded-sm text-zinc-700 dark:text-zinc-200 mx-2 ",topItem:"flex items-center text-sm px-4 border-r h-12",icon:"group w-6 mr-2 text-blue-500 ",iconActive:"group w-6 mr-2 text-blue-500 ",sideItemContent:" transition-transform duration-300 ease-in-out"}};l[s]||(s="none");let c={inline:{indicatorIcon:"fa fa-angle-right pt-2.5",indicatorIconOpen:"fal fa-angle-down pt-2.5",subMenuWrapper:"pl-2 w-full",subMenuParentWrapper:"flex flex-col w-full"},flyout:{indicatorIcon:"fal fa-angle-down",indicatorIconOpen:"fa fa-angle-right",subMenuWrapper:`absolute ml-${l[s].width-8}`,subMenuParentWrapper:"flex flex-row",subMenuWrapperTop:"absolute top-full"}};return{fixed:`md:${l[s].fixed}`,logoWrapper:`${l[s].wrapper} ${o[n].contentBgAccent} ${o[n].textColorAccent}`,sidenavWrapper:`${a[i]} ${o[n].contentBg} ${l[s].wrapper} h-full z-20`,menuIconSide:`${l[s].icon} group-hover:${o[n].highlightColor}`,menuIconSideActive:`${l[s].iconActive} group-hover:${o[n].highlightColor}`,itemsWrapper:`${o[n].borderColor} ${l[s].itemWrapper} shadow-lg-r`,navItemContent:`${l[s].sideItemContent}`,navitemSide:`
        group  flex flex-col

        ${l[s].sideItem} ${o[n].sideItem}
        focus:outline-none focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300
        transition-all cursor-pointer
     `,navitemSideActive:`
        group  flex flex-col
         ${l[s].sideItemActive} ${o[n].sideItemActive} 
        
        focus:outline-none focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300
        transition-all cursor-pointer

      `,...c[r],vars:{colors:o,sizes:l,mobile:a}}},wt={topnav:up,sidenav:pp};function lr({icon:e,className:n}){return t.jsx("div",{className:`${n} flex justify-center items-center`,children:t.jsx("span",{className:e})})}const gn=({i:e=0,children:n,icon:s,to:r,onClick:i,className:a=null,type:o="side",active:l=!1,subMenus:c=[],themeOptions:d,subMenuActivate:u="onClick",subMenuOpen:p=!1})=>{const m=wt[o==="side"?"sidenav":"topnav"](d),f=gt(),y=I.useMemo(()=>Array.isArray(r)?r:[r],[r]),v=I.useMemo(()=>{const C=c.reduce((M,A)=>(Array.isArray(A.path)?M.push(...A.path):A.path&&M.push(A.path),M),[]);return[...y,...C]},[y,c]),b=!!ur({path:`${v[0]}/*`||"",end:!0}),x=o==="side"?m.navitemSide:m.navitemTop,w=o==="side"?m.navitemSideActive:m.navitemTopActive,k=b||l,T=k?w:x,[_,N]=I.useState(p||b),[j,E]=I.useState(!1);return h.useEffect(()=>{N(b)},[b,_,r]),t.jsx("div",{className:o==="side"?m.subMenuParentWrapper:null,onMouseOutCapture:()=>u==="onHover"&&N(!1)||u!=="onHover"&&E(!1)&&N(!1),onMouseMove:()=>u==="onHover"&&N(!0)||u!=="onHover"&&E(!0)&&N(!0),children:t.jsx("div",{className:`${a||T}`,onClick:C=>{if(C.stopPropagation(),i)return i(y[0]);y[0]&&f(y[0])},children:t.jsxs("div",{className:"flex",children:[t.jsxs("div",{className:"flex-1 flex",children:[s?t.jsx(lr,{icon:s,className:o==="side"?k?m.menuIconSideActive:m.menuIconSide:k?m.menuIconTopActive:m.menuIconTop}):null,t.jsx("div",{className:m.navItemContent,children:n})]}),t.jsx("div",{onClick:()=>{u==="onClick"&&N(!_)},children:c.length?t.jsx(lr,{icon:_?m.indicatorIconOpen:m.indicatorIcon}):null}),c.length?t.jsx(mp,{i:e,showSubMenu:_,subMenuActivate:u,active:b,hovering:j,subMenus:c,type:o,themeOptions:d,className:a}):""]})})})},mp=({i:e,showSubMenu:n,subMenus:s,type:r,hovering:i,subMenuActivate:a,active:o,themeOptions:l})=>{const c=wt[r==="side"?"sidenav":"topnav"](l),d=!o&&a!=="onHover"&&i;return(!n||!s.length)&&!d?null:t.jsx("div",{className:r==="side"?c.subMenuWrapper:d&&e===0?c.subMenuWrapperInactiveFlyout:d&&e>0?c.subMenuWrapperInactiveFlyoutBelow:c.subMenuWrapperTop,children:t.jsx("div",{className:`
							${d&&c.subMenuWrapperInactiveFlyoutDirection}
							${!d&&c.subMenuWrapperChild}
					flex ${r==="side"||d?"flex-col":"flex-row"}
				`,children:s.map((u,p)=>t.jsx(gn,{i:p+1,to:u.path,icon:u.icon,type:r,className:u.className,onClick:u.onClick,themeOptions:l,subMenus:u.subMenus,children:u.name},p))})})},Ni=({open:e,toggle:n,menuItems:s=[],rightMenu:r=null,themeOptions:i={}})=>{const a=wt.topnav(i);return t.jsxs("div",{className:`${e?"md:hidden":"hidden"} ${a.topnavMobileContainer}`,id:"mobile-menu",children:[t.jsx("div",{className:"",children:s.map((o,l)=>t.jsx(gn,{type:"top",to:o.path,icon:o.icon,themeOptions:i,subMenus:z(o,"subMenus",[]),children:o.name},l))}),t.jsx("div",{className:"",children:r})]})},hp=({open:e,toggle:n,menuItems:s=[],rightMenu:r=null,leftMenu:i=null,subMenuActivate:a,themeOptions:o={}})=>{let l=wt.topnav(o);return t.jsx("div",{className:`${l.topnavWrapper}`,children:t.jsxs("div",{className:`${l.topnavContent} justify-between`,children:[t.jsx("div",{children:i}),t.jsx("div",{className:`${l.topnavMenu}`,children:s.map((c,d)=>t.jsx(gn,{type:"top",to:c.path,icon:c.icon,subMenuActivate:a,themeOptions:o,subMenus:z(c,"subMenus",[]),children:c.name},d))}),t.jsxs("div",{className:"flex items-center justify-center h-full",children:[t.jsx("div",{className:`${l.topmenuRightNavContainer}`,children:r}),t.jsxs("button",{type:"button",className:`${l.mobileButton}`,onClick:()=>n(!e),children:[t.jsx("span",{className:"sr-only",children:"Open main menu"}),t.jsx("div",{className:"flex justify-center items-center text-2xl",children:t.jsx("span",{className:e?l.menuCloseIcon:l.menuOpenIcon})})]})]})]})})},fp=({...e})=>{const[n,s]=h.useState(!1);return t.jsxs("nav",{children:[t.jsx(hp,{open:n,toggle:s,...e}),t.jsx(Ni,{open:n,...e})]})},Ci=({i:e,item:n,themeOptions:s,subMenuActivate:r})=>t.jsx(gn,{to:n.path,icon:n.icon,className:n.className,onClick:n.onClick,themeOptions:s,subMenuActivate:r,subMenus:z(n,"subMenus",[]),children:n.name},e),xp=({open:e,toggle:n,logo:s=null,topMenu:r,menuItems:i=[],bottomMenu:a,themeOptions:o={},subMenuActivate:l,subMenuStyle:c,...d})=>{const u=wt.sidenav(o);return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"md:hidden",onClick:()=>n(!e),children:t.jsx("span",{className:e?u.menuIconOpen:u.menuIconClosed})}),t.jsxs("div",{style:{display:e?"block":"none"},className:"md:hidden",children:[t.jsx("div",{className:"fixed inset-0 z-20 transition-opacity ease-linear duration-300",children:t.jsx("div",{className:"absolute inset-0 opacity-75"})}),t.jsx("div",{className:`fixed inset-0 flex z-40 ${u.contentBgAccent}`,children:t.jsxs("div",{className:`flex-1 flex flex-col max-w-xs w-full transform ease-in-out duration-300 ${u.contentBg}`,children:[t.jsx("div",{className:"absolute top-0 right-0 -mr-14 p-1",children:t.jsx("button",{onClick:()=>n(!e),className:"flex items-center justify-center h-12 w-12 rounded-full focus:outline-none focus:bg-gray-600 os-icon os-icon-x"})}),t.jsxs("div",{className:"flex-1 h-0 pt-2 pb-4 overflow-y-auto overflow-x-hidden",children:[t.jsx("div",{className:"px-6 pt-4 pb-8 logo-text gray-900",children:t.jsx(Se,{to:"/",className:`flex-shrink-0 flex items-center ${u.text}`,children:s})}),t.jsx("div",{children:r}),t.jsx("nav",{className:"flex-1",children:i.map((p,m)=>t.jsx("div",{className:p.sectionClass,children:Ci({i:m,page:p,themeOptions:o,subMenuActivate:l})},m))}),t.jsx("div",{children:a})]})]})})]})]})},gp=({menuItems:e=[],logo:n=null,topMenu:s,bottomMenu:r,toggle:i,open:a,mobile:o,themeOptions:l={},subMenuActivate:c,subMenuStyle:d,...u})=>{const p=wt.sidenav(l);return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:`${p.sidenavWrapper}`,children:[s,t.jsx("nav",{className:`${p.itemsWrapper}`,children:e.map((m,f)=>Ci({i:f,item:m,themeOptions:l,subMenuActivate:c}))}),r]}),o==="side"?"":t.jsx("div",{className:`${p.topnavWrapper} md:hidden`,children:t.jsxs("div",{className:`${p.topnavContent} justify-between`,children:[t.jsx("div",{children:s}),t.jsxs("div",{className:"flex items-center justify-center h-full",children:[t.jsx("div",{className:`${p.topmenuRightNavContainer}`,children:r}),t.jsxs("button",{type:"button",className:p.mobileButton,onClick:()=>i(!a),children:[t.jsx("span",{className:"sr-only",children:"Open main menu"}),t.jsx("div",{className:"flex justify-center items-center text-2xl",children:t.jsx("span",{className:a?p.menuCloseIcon:p.menuOpenIcon})})]})]})]})})]})},bp=e=>{const[n,s]=h.useState(!1);return t.jsxs(t.Fragment,{children:[t.jsx(gp,{...e,open:n,toggle:s}),e.mobile==="side"?t.jsx(xp,{open:n,toggle:s,...e}):t.jsx(Ni,{open:n,...e,themeOptions:{}})]})};let yp={none:"",micro:"mr-14",mini:"mr-20",miniPad:"mr-0",compact:"mr-44",full:"mr-64"},wp={none:"",micro:"w-14",mini:"w-20",miniPad:"w-0",compact:"w-44",full:"w-64"};const vp=()=>t.jsx("div",{className:"h-12"}),jp=({children:e,menus:n,sideNav:s={},topNav:r={},title:i})=>{const a={size:s.size||"none",color:s.color||"white",menuItems:s.menuItems||n,logo:(s==null?void 0:s.logo)||vp},o={position:r.position||"block",size:r.size||"compact",menu:r.menu||"left",subMenuStyle:r.subMenuStyle||"row",menuItems:(r.menuItems||[]).filter(l=>!l.hideInNav),logo:r.logo||t.jsxs("div",{className:"flex items-center justify-center h-12",children:[t.jsx("div",{to:"/",className:`${["none"].includes(a.size)?"":"md:hidden"}`}),i]}),rightMenu:r.rightMenu||t.jsx("div",{})};return a.logo,t.jsxs("div",{className:"flex",children:[a.size==="none"?"":t.jsx("div",{className:`hidden md:block ${yp[a.size]}`,children:t.jsx("div",{className:`fixed h-screen ${wp[a.size]}`,children:t.jsx(bp,{topMenu:a.logo,themeOptions:a,menuItems:a.menuItems})})}),t.jsxs("div",{className:"flex-1 flex items-start flex-col items-stretch w-full min-h-screen",children:[o.size==="none"?"":t.jsx(t.Fragment,{children:t.jsx("div",{className:`${o.position==="fixed"?"sticky top-0 z-20 w-full ":""}`,children:t.jsx(fp,{themeOptions:o,leftMenu:o.logo,menuItems:o.menuItems,rightMenu:o.rightMenu})})}),t.jsx("div",{id:"content",className:"flex-1",children:e})]})]})},Np=({dataItems:e,children:n,baseUrl:s,logo:r,rightMenu:i})=>{const a=I.useMemo(()=>e.filter(l=>!l.icebox),[e]),o=[{id:"Home",name:"Home",path:`${s}/`},{id:"tasks",name:"Tasks",path:`${s}/tasks`},{id:"projects",name:"PROJECTS",className:"font-bold cursor-pointer text-[10px] spacing-widest px-5 pb-2 pt-6  dark:text-zinc-100"},...a.map(l=>({id:l.id,path:`${s}/project/${l.id}`,name:`${l.name}`}))];return t.jsx("div",{className:"bg-zinc-50 font-sans dark:bg-zinc-950 min-h-screen overflow-hidden",children:t.jsx(jp,{topNav:{position:"fixed",rightMenu:i},sideNav:{size:"compact",logo:r,menuItems:o},children:n})})};qr("selector",ui);const fs=I.createContext(void 0),_i=e=>{const{baseUrl:n}=e;return{format:ap,baseUrl:n,children:[{type:s=>t.jsx(fs.Provider,{value:{baseUrl:n,user:s.user},children:t.jsx(Np,{logo:t.jsx("div",{className:"flex items-center px-8 h-14 bg-zinc-50 dark:bg-zinc-950 dark:text-zinc-100 text-lg font-bold",children:"Stories"}),rightMenu:t.jsx("div",{className:"flex items-center px-8 text-lg font-bold h-12 dark:text-zinc-100",to:"/stories",children:" Login "}),baseUrl:n,...s})}),action:"list",path:"/*",filter:{attributes:["name","desc"]},children:[{type:cp,action:"view",path:"/"},{type:dp,action:"view",path:"/tasks"},{type:ar,action:"edit",path:"/project/:id"},{type:ar,action:"edit",path:"/project/:id/story/:storyId"}]}]}},Cp=[ss(_i({baseUrl:""}))];qr("selector",ui);const _p="https://graph.availabs.org",kp={...ss(Pu({app:"dms-docs",type:"main",logo:t.jsx("div",{className:"flex items-center px-8 h-full text-lg font-bold",children:"DMS"}),rightMenu:t.jsx(Se,{className:"flex items-center px-8 text-lg font-bold h-12",to:"/",children:" right "}),baseUrl:"/docs",API_HOST:_p}))},Sp=[kp,ss(_i({baseUrl:""}))],Tp=e=>e.split(".").length>2||e.split(".").length>1?window.location.host.split(".")[0].toLowerCase():!1,Vt={docs:Sp,stories:Cp};function Ep(){const e=Tp(window.location.host),n=I.useMemo(()=>(Vt==null?void 0:Vt[e])||Vt.docs,[e]);return t.jsx(to,{router:no([...n])})}const $p=so.authProvider(Ep,{AUTH_HOST:oo,PROJECT_NAME:io,CLIENT_HOST:ao});ro.createRoot(document.getElementById("root")).render(t.jsx(I.StrictMode,{children:t.jsx($p,{})}));export{gr as $,ht as B,Ba as C,un as D,fl as F,Vs as I,Ls as L,nc as P,Sa as S,ft as T,Rs as a,Tn as b,Ap as c,Rp as d,La as e,Op as f,Fa as g,It as h,Ir as i,Rt as u};
