const __vite__fileDeps=["assets/InlineImageComponent-1hcMWywW.js","assets/vendor-9mQZ5CO5.js","assets/LexicalNestedComposer-B2QbZ0L1.js","assets/TableComponent-umCyKogP.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
var mi=Object.defineProperty;var hi=(e,n,s)=>n in e?mi(e,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[n]=s;var fe=(e,n,s)=>(hi(e,typeof n!="symbol"?n+"":n,s),s);import{R as A,r as h,j as t,g as B,i as tt,L as ne,a as te,b as x,c as he,d as _e,e as xe,f as ge,h as ce,k as Oe,l as Rn,m as Zs,n as He,o as ct,p as D,q as fi,s as cs,t as Ct,u as Cn,v as _n,w as xi,x as gi,y as Qs,z as bi,A as yi,B as wi,C as vi,D as pn,E as ds,F as mn,G as Ni,H as ji,I as Ci,J as _i,K as ki,M as Si,N as Ti,O as Ei,P as $i,Q as Mi,S as Ii,T as Ai,U as pe,V as $e,W as Me,X as Dn,Y as Oi,Z as Se,_ as Ri,$ as $t,a0 as Ut,a1 as Di,a2 as er,a3 as yt,a4 as Ce,a5 as Ne,a6 as Li,a7 as Pi,a8 as Fi,a9 as ue,aa as tr,ab as Ln,ac as Fe,ad as Bi,ae as nr,af as zi,ag as Wi,ah as Hi,ai as Ui}from"./vendor-9mQZ5CO5.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function s(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=s(i);fetch(i.href,a)}})();const qi="test";let Vi="https://graph.availabs.org",Yi="transportny.org";function Gi(){return{landing:{wrapper:"p-4 border-2 border-blue-300"},table:{table:"min-w-full divide-y divide-gray-300",thead:"",th:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900",tbody:"divide-y divide-gray-200 ",td:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},textarea:{viewWrapper:"overflow-hidden p-2 bg-gray-100 border-b-2"},card:{wrapper:"p-4",row:"flex py-1",rowLabel:"px-4 w-28 text-sm",rowContent:"flex-1"}}}const Pn=Gi(),Ji=A.createContext(Pn),be=()=>h.useContext(Ji),Ki=({value:e="",onChange:n,className:s,placeholder:r})=>{var a;const i=be();return t.jsx("input",{className:s||((a=i==null?void 0:i.text)==null?void 0:a.input)||"w-full border p-2",value:e,placeholder:r,onChange:o=>n(o.target.value)})},Xi=({value:e,className:n})=>{var r;if(!e)return!1;const s=be();return t.jsx("div",{className:n||((r=s==null?void 0:s.text)==null?void 0:r.view),children:e})},hn={EditComp:Ki,ViewComp:Xi},Zi=({value:e,onChange:n,className:s,placeholder:r})=>{var a;const i=be();return t.jsx("textarea",{className:s||((a=i==null?void 0:i.textarea)==null?void 0:a.input)||"w-full border p-2",value:e,placeholder:r,onChange:o=>n(o.target.value)})},Qi=({value:e})=>{const n=be();return e?t.jsx("div",{className:B(n,"textarea.viewWrapper",""),children:e}):!1},eo={EditComp:Zi,ViewComp:Qi},to=({value:e,onChange:n})=>t.jsxs("select",{value:e,onChange:s=>n(s.target.value),children:[t.jsx("option",{value:!0,children:"True"}),t.jsx("option",{value:!1,children:"False"})]}),no=({value:e})=>e?t.jsx("div",{children:e}):!1,so={EditComp:to,ViewComp:no};function ro({value:e,onChange:n,attributes:s={}}){console.log("dms-format",e,s);const r=(i,a)=>{tt(e,{...e,[i]:a})||n({...e,[i]:a})};return t.jsx("div",{children:Object.keys(s).map((i,a)=>{let o=s[i].EditComp;return t.jsxs("div",{children:[t.jsx("div",{children:i}),t.jsx("div",{children:t.jsx(o,{value:e==null?void 0:e[i],onChange:l=>r(i,l)},`${i}-${a}`)})]},`${i}-${a}`)})})}const io=({value:e={},attributes:n})=>t.jsx("div",{children:Object.keys(n).map((s,r)=>{let i=n[s].ViewComp;return t.jsxs("div",{children:[t.jsx("div",{children:s}),t.jsx("div",{children:t.jsx(i,{value:e[s]},`${s}-${r}`)})]},`${s}-${r}`)})}),oo={EditComp:ro,ViewComp:io},ao=({Component:e,value:n,onChange:s,attr:r})=>{(!n||!n.map)&&(n=[]);const[i,a]=A.useState(""),o=()=>{s([...n,i]),a("")};return t.jsxs(t.Fragment,{children:[n.map((l,c)=>h.createElement(e.ViewComp,{value:l,...r,key:c})),t.jsx(e.EditComp,{value:i,onChange:a,...r}),t.jsx("button",{onClick:o,children:"Add"})]})},lo=({Component:e,value:n,attr:s})=>!n||!n.map?"":n.map((r,i)=>h.createElement(e.ViewComp,{...s,key:i,value:r})),sr={EditComp:ao,ViewComp:lo},Mt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",co=h.createContext({}),uo=()=>h.useContext(co),po=h.createContext([e=>()=>e,e=>e]),rr=()=>{const[e,n]=h.useContext(po),[s,r]=h.useState(null);return h.useEffect(()=>e(i=>{r(i)}),[e]),[s,n]},qt=new WeakMap;function us(e){const n=e.changedTouches[0];return n===void 0?null:[n.clientX,n.clientY]}function mo(e,n){let s=qt.get(e);if(s===void 0){const r=new Set,i=o=>{s!==void 0&&(s.start=us(o))},a=o=>{if(s===void 0)return;const l=s.start;if(l===null)return;const c=us(o);for(const d of r)c!==null&&d([c[0]-l[0],c[1]-l[1]],o)};e.addEventListener("touchstart",i),e.addEventListener("touchend",a),s={handleTouchend:a,handleTouchstart:i,listeners:r,start:null},qt.set(e,s)}return s.listeners.add(n),()=>ho(e,n)}function ho(e,n){const s=qt.get(e);if(s===void 0)return;const r=s.listeners;r.delete(n),r.size===0&&(qt.delete(e),e.removeEventListener("touchstart",s.handleTouchstart),e.removeEventListener("touchend",s.handleTouchend))}function fo(e,n){return mo(e,(s,r)=>{const[i,a]=s;i>0&&i>Math.abs(a)&&n(i,r)})}const kn=Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,5);function ps(e){if(!x.$isRangeSelection(e)||!e.isCollapsed())return[!1,""];const n=e.getNodes()[0],s=e.anchor;if(!x.$isTextNode(n)||!n.isSimpleText()||!he.$isAtNodeEnd(s))return[!1,""];const r=[],i=n.getTextContent();let a=n.getTextContentSize(),o;for(;a--&&a>=0&&(o=i[a])!==" ";)r.push(o);return r.length===0?[!1,""]:[!0,r.reverse().join("")]}function xo(){return h.useCallback(e=>{const n=new bo;console.time("query");const s=n.query(e);return console.timeEnd("query"),s},[])}function go(){const[e]=ne.useLexicalComposerContext(),[,n]=rr(),s=xo();return h.useEffect(()=>{let r=null,i=null,a=null,o=null;function l(){const b=r!==null?x.$getNodeByKey(r):null;b!==null&&b.isAttached()&&(b.remove(),r=null),o!==null&&(o.dismiss(),o=null),i=null,a=null,n(null)}function c(b,g){o!==b||g===null||e.update(()=>{const w=x.$getSelection(),[T,$]=ps(w);if(!T||$!==i||!x.$isRangeSelection(w))return;const _=w.clone(),j=ir(kn);r=j.getKey(),w.insertNodes([j]),x.$setSelection(_),a=g,n(g)},{tag:"history-merge"})}function d(b){const g=b.getKey();b.__uuid===kn&&g!==r&&l()}function u(){e.update(()=>{const b=x.$getSelection(),[g,w]=ps(b);if(!g){l();return}w!==i&&(l(),o=s(w),o.promise.then(T=>{o!==null&&c(o,T)}).catch(T=>{console.error(T)}),i=w)})}function p(){if(a===null||r===null)return!1;const b=x.$getNodeByKey(r);if(b===null)return!1;const g=x.$createTextNode(a);return b.replace(g),g.selectNext(),l(),!0}function m(b){return p()?(b.preventDefault(),!0):!1}function f(b,g){e.update(()=>{p()&&g.preventDefault()})}function y(){e.update(()=>{l()})}const v=e.getRootElement();return te.mergeRegister(e.registerNodeTransform(mt,d),e.registerUpdateListener(u),e.registerCommand(x.KEY_TAB_COMMAND,m,x.COMMAND_PRIORITY_LOW),e.registerCommand(x.KEY_ARROW_RIGHT_COMMAND,m,x.COMMAND_PRIORITY_LOW),...v!==null?[fo(v,f)]:[],y)},[e,s,n]),null}class bo{constructor(){this.DATABASE=yo,this.LATENCY=200,this.query=n=>{let s=!1;const r=()=>{s=!0},i=new Promise((a,o)=>{setTimeout(()=>{if(s)return o("Dismissed");const l=n.length;if(n===""||l<4)return a(null);const c=n.charCodeAt(0),d=c>=65&&c<=90,u=d?String.fromCharCode(c+32)+n.substring(1):n,p=this.DATABASE.find(y=>y.startsWith(u)??null);if(p===void 0)return a(null);const f=(d?String.fromCharCode(p.charCodeAt(0)-32)+p.substring(1):p).substring(l);return a(f===""?null:f)},this.LATENCY)});return{dismiss:r,promise:i}}}}const yo=["information","available","copyright","university","management","international","development","education","community","technology","following","resources","including","directory","government","department","description","insurance","different","categories","conditions","accessories","september","questions","application","financial","equipment","performance","experience","important","activities","additional","something","professional","committee","washington","california","reference","companies","computers","president","australia","discussion","entertainment","agreement","marketing","association","collection","solutions","electronics","technical","microsoft","conference","environment","statement","downloads","applications","requirements","individual","subscribe","everything","production","commercial","advertising","treatment","newsletter","knowledge","currently","construction","registered","protection","engineering","published","corporate","customers","materials","countries","standards","political","advertise","environmental","availability","employment","commission","administration","institute","sponsored","electronic","condition","effective","organization","selection","corporation","executive","necessary","according","particular","facilities","opportunities","appropriate","statistics","investment","christmas","registration","furniture","wednesday","structure","distribution","industrial","potential","responsible","communications","associated","foundation","documents","communication","independent","operating","developed","telephone","population","navigation","operations","therefore","christian","understand","publications","worldwide","connection","publisher","introduction","properties","accommodation","excellent","opportunity","assessment","especially","interface","operation","restaurants","beautiful","locations","significant","technologies","manufacturer","providing","authority","considered","programme","enterprise","educational","employees","alternative","processing","responsibility","resolution","publication","relations","photography","components","assistance","completed","organizations","otherwise","transportation","disclaimer","membership","recommended","background","character","maintenance","functions","trademarks","phentermine","submitted","television","interested","throughout","established","programming","regarding","instructions","increased","understanding","beginning","associates","instruments","businesses","specified","restaurant","procedures","relationship","traditional","sometimes","themselves","transport","interesting","evaluation","implementation","galleries","references","presented","literature","respective","definition","secretary","networking","australian","magazines","francisco","individuals","guidelines","installation","described","attention","difference","regulations","certificate","directions","documentation","automotive","successful","communities","situation","publishing","emergency","developing","determine","temperature","announcements","historical","ringtones","difficult","scientific","satellite","particularly","functional","monitoring","architecture","recommend","dictionary","accounting","manufacturing","professor","generally","continued","techniques","permission","generation","component","guarantee","processes","interests","paperback","classifieds","supported","competition","providers","characters","thousands","apartments","generated","administrative","practices","reporting","essential","affiliate","immediately","designated","integrated","configuration","comprehensive","universal","presentation","languages","compliance","improvement","pennsylvania","challenge","acceptance","strategies","affiliates","multimedia","certified","computing","interactive","procedure","leadership","religious","breakfast","developer","approximately","recommendations","comparison","automatically","minnesota","adventure","institutions","assistant","advertisement","headlines","yesterday","determined","wholesale","extension","statements","completely","electrical","applicable","manufacturers","classical","dedicated","direction","basketball","wisconsin","personnel","identified","professionals","advantage","newsletters","estimated","anonymous","miscellaneous","integration","interview","framework","installed","massachusetts","associate","frequently","discussions","laboratory","destination","intelligence","specifications","tripadvisor","residential","decisions","industries","partnership","editorial","expression","provisions","principles","suggestions","replacement","strategic","economics","compatible","apartment","netherlands","consulting","recreation","participants","favorites","translation","estimates","protected","philadelphia","officials","contained","legislation","parameters","relationships","tennessee","representative","frequency","introduced","departments","residents","displayed","performed","administrator","addresses","permanent","agriculture","constitutes","portfolio","practical","delivered","collectibles","infrastructure","exclusive","originally","utilities","philosophy","regulation","reduction","nutrition","recording","secondary","wonderful","announced","prevention","mentioned","automatic","healthcare","maintained","increasing","connected","directors","participation","containing","combination","amendment","guaranteed","libraries","distributed","singapore","enterprises","convention","principal","certification","previously","buildings","household","batteries","positions","subscription","contemporary","panasonic","permalink","signature","provision","certainly","newspaper","liability","trademark","trackback","americans","promotion","conversion","reasonable","broadband","influence","importance","webmaster","prescription","specifically","represent","conservation","louisiana","javascript","marketplace","evolution","certificates","objectives","suggested","concerned","structures","encyclopedia","continuing","interracial","competitive","suppliers","preparation","receiving","accordance","discussed","elizabeth","reservations","playstation","instruction","annotation","differences","establish","expressed","paragraph","mathematics","compensation","conducted","percentage","mississippi","requested","connecticut","personals","immediate","agricultural","supporting","collections","participate","specialist","experienced","investigation","institution","searching","proceedings","transmission","characteristics","experiences","extremely","verzeichnis","contracts","concerning","developers","equivalent","chemistry","neighborhood","variables","continues","curriculum","psychology","responses","circumstances","identification","appliances","elementary","unlimited","printable","enforcement","hardcover","celebrity","chocolate","hampshire","bluetooth","controlled","requirement","authorities","representatives","pregnancy","biography","attractions","transactions","authorized","retirement","financing","efficiency","efficient","commitment","specialty","interviews","qualified","discovery","classified","confidence","lifestyle","consistent","clearance","connections","inventory","converter","organisation","objective","indicated","securities","volunteer","democratic","switzerland","parameter","processor","dimensions","contribute","challenges","recognition","submission","encourage","regulatory","inspection","consumers","territory","transaction","manchester","contributions","continuous","resulting","cambridge","initiative","execution","disability","increases","contractor","examination","indicates","committed","extensive","affordable","candidate","databases","outstanding","perspective","messenger","tournament","consideration","discounts","catalogue","publishers","caribbean","reservation","remaining","depending","expansion","purchased","performing","collected","absolutely","featuring","implement","scheduled","calculator","significantly","temporary","sufficient","awareness","vancouver","contribution","measurement","constitution","packaging","consultation","northwest","classroom","democracy","wallpaper","merchandise","resistance","baltimore","candidates","charlotte","biological","transition","preferences","instrument","classification","physician","hollywood","wikipedia","spiritual","photographs","relatively","satisfaction","represents","pittsburgh","preferred","intellectual","comfortable","interaction","listening","effectively","experimental","revolution","consolidation","landscape","dependent","mechanical","consultants","applicant","cooperation","acquisition","implemented","directories","recognized","notification","licensing","textbooks","diversity","cleveland","investments","accessibility","sensitive","templates","completion","universities","technique","contractors","subscriptions","calculate","alexander","broadcast","converted","anniversary","improvements","specification","accessible","accessory","typically","representation","arrangements","conferences","uniprotkb","consumption","birmingham","afternoon","consultant","controller","ownership","committees","legislative","researchers","unsubscribe","molecular","residence","attorneys","operators","sustainable","philippines","statistical","innovation","employers","definitions","elections","stainless","newspapers","hospitals","exception","successfully","indonesia","primarily","capabilities","recommendation","recruitment","organized","improving","expensive","organisations","explained","programmes","expertise","mechanism","jewellery","eventually","agreements","considering","innovative","conclusion","disorders","collaboration","detection","formation","engineers","proposals","moderator","tutorials","settlement","collectables","fantastic","governments","purchasing","appointed","operational","corresponding","descriptions","determination","animation","productions","telecommunications","instructor","approaches","highlights","designers","melbourne","scientists","blackjack","argentina","possibility","commissioner","dangerous","reliability","unfortunately","respectively","volunteers","attachment","appointment","workshops","hurricane","represented","mortgages","responsibilities","carefully","productivity","investors","underground","diagnosis","principle","vacations","calculated","appearance","incorporated","notebooks","algorithm","valentine","involving","investing","christopher","admission","terrorism","parliament","situations","allocated","corrections","structural","municipal","describes","disabilities","substance","prohibited","addressed","simulation","initiatives","concentration","interpretation","bankruptcy","optimization","substances","discovered","restrictions","participating","exhibition","composition","nationwide","definitely","existence","commentary","limousines","developments","immigration","destinations","necessarily","attribute","apparently","surrounding","mountains","popularity","postposted","coordinator","obviously","fundamental","substantial","progressive","championship","sacramento","impossible","depression","testimonials","memorabilia","cartridge","explanation","cincinnati","subsection","electricity","permitted","workplace","confirmed","wallpapers","infection","eligibility","involvement","placement","observations","vbulletin","subsequent","motorcycle","disclosure","establishment","presentations","undergraduate","occupation","donations","associations","citysearch","radiation","seriously","elsewhere","pollution","conservative","guestbook","effectiveness","demonstrate","atmosphere","experiment","purchases","federation","assignment","chemicals","everybody","nashville","counseling","acceptable","satisfied","measurements","milwaukee","medication","warehouse","shareware","violation","configure","stability","southwest","institutional","expectations","independence","metabolism","personally","excellence","somewhere","attributes","recognize","screening","thumbnail","forgotten","intelligent","edinburgh","obligation","regardless","restricted","republican","merchants","attendance","arguments","amsterdam","adventures","announcement","appreciate","regularly","mechanisms","customize","tradition","indicators","emissions","physicians","complaint","experiments","afghanistan","scholarship","governance","supplements","camcorder","implementing","ourselves","conversation","capability","producing","precision","contributed","reproduction","ingredients","franchise","complaints","promotions","rehabilitation","maintaining","environments","reception","correctly","consequences","geography","appearing","integrity","discrimination","processed","implications","functionality","intermediate","emotional","platforms","overnight","geographic","preliminary","districts","introduce","promotional","chevrolet","specialists","generator","suspension","correction","authentication","communicate","supplement","showtimes","promoting","machinery","bandwidth","probability","dimension","schedules","admissions","quarterly","illustrated","continental","alternate","achievement","limitations","automated","passenger","convenient","orientation","childhood","flexibility","jurisdiction","displaying","encouraged","cartridges","declaration","automation","advantages","preparing","recipient","extensions","athletics","southeast","alternatives","determining","personalized","conditioning","partnerships","destruction","increasingly","migration","basically","conventional","applicants","occupational","adjustment","treatments","camcorders","difficulty","collective","coalition","enrollment","producers","collector","interfaces","advertisers","representing","observation","restoration","convenience","returning","opposition","container","defendant","confirmation","supervisor","peripherals","bestsellers","departure","minneapolis","interactions","intervention","attraction","modification","customized","understood","assurance","happening","amendments","metropolitan","compilation","verification","attractive","recordings","jefferson","gardening","obligations","orchestra","polyphonic","outsourcing","adjustable","allocation","discipline","demonstrated","identifying","alphabetical","dispatched","installing","voluntary","photographer","messaging","constructed","additions","requiring","engagement","refinance","calendars","arrangement","conclusions","bibliography","compatibility","furthermore","cooperative","measuring","jacksonville","headquarters","transfers","transformation","attachments","administrators","personality","facilitate","subscriber","priorities","bookstore","parenting","incredible","commonwealth","pharmaceutical","manhattan","workforce","organizational","portuguese","everywhere","discharge","halloween","hazardous","methodology","housewares","reputation","resistant","democrats","recycling","qualifications","slideshow","variation","transferred","photograph","distributor","underlying","wrestling","photoshop","gathering","projection","mathematical","specialized","diagnostic","indianapolis","corporations","criticism","automobile","confidential","statutory","accommodations","northeast","downloaded","paintings","injection","yorkshire","populations","protective","initially","indicator","eliminate","sunglasses","preference","threshold","venezuela","exploration","sequences","astronomy","translate","announces","compression","establishing","constitutional","perfectly","instantly","litigation","submissions","broadcasting","horizontal","terrorist","informational","ecommerce","suffering","prospective","ultimately","artificial","spectacular","coordination","connector","affiliated","activation","naturally","subscribers","mitsubishi","underwear","potentially","constraints","inclusive","dimensional","considerable","selecting","processors","pantyhose","difficulties","complexity","constantly","barcelona","presidential","documentary","territories","palestinian","legislature","hospitality","procurement","theoretical","exercises","surveillance","protocols","highlight","substitute","inclusion","hopefully","brilliant","evaluated","assignments","termination","households","authentic","montgomery","architectural","louisville","macintosh","movements","amenities","virtually","authorization","projector","comparative","psychological","surprised","genealogy","expenditure","liverpool","connectivity","algorithms","similarly","collaborative","excluding","commander","suggestion","spotlight","investigate","connecting","logistics","proportion","significance","symposium","essentials","protecting","transmitted","screenshots","intensive","switching","correspondence","supervision","expenditures","separation","testimony","celebrities","mandatory","boundaries","syndication","celebration","filtering","luxembourg","offensive","deployment","colleagues","separated","directive","governing","retailers","occasionally","attending","recruiting","instructional","traveling","permissions","biotechnology","prescribed","catherine","reproduced","calculation","consolidated","occasions","equations","exceptional","respondents","considerations","queensland","musicians","composite","unavailable","essentially","designing","assessments","brunswick","sensitivity","preservation","streaming","intensity","technological","syndicate","antivirus","addressing","discounted","bangladesh","constitute","concluded","desperate","demonstration","governmental","manufactured","graduation","variations","addiction","springfield","synthesis","undefined","unemployment","enhancement","newcastle","performances","societies","brazilian","identical","petroleum","norwegian","retention","exchanges","soundtrack","wondering","profession","separately","physiology","collecting","participant","scholarships","recreational","dominican","friendship","expanding","provincial","investigations","medications","rochester","advertiser","encryption","downloadable","sophisticated","possession","laboratories","vegetables","thumbnails","stockings","respondent","destroyed","manufacture","wordpress","vulnerability","accountability","celebrate","accredited","appliance","compressed","scheduling","perspectives","mortality","christians","therapeutic","impressive","accordingly","architect","challenging","microwave","accidents","relocation","contributors","violations","temperatures","competitions","discretion","cosmetics","repository","concentrations","christianity","negotiations","realistic","generating","christina","congressional","photographic","modifications","millennium","achieving","fisheries","exceptions","reactions","macromedia","companion","divisions","additionally","fellowship","victorian","copyrights","lithuania","mastercard","chronicles","obtaining","distribute","decorative","enlargement","campaigns","conjunction","instances","indigenous","validation","corruption","incentives","cholesterol","differential","scientist","starsmerchant","arthritis","nevertheless","practitioners","transcript","inflation","compounds","contracting","structured","reasonably","graduates","recommends","controlling","distributors","arlington","particles","extraordinary","indicating","coordinate","exclusively","limitation","widescreen","illustration","construct","inquiries","inspiration","affecting","downloading","aggregate","forecasts","complicated","shopzilla","decorating","expressions","shakespeare","connectors","conflicts","travelers","offerings","incorrect","furnishings","guatemala","perception","renaissance","pathology","ordinance","photographers","infections","configured","festivals","possibilities","contributing","analytical","circulation","assumption","jerusalem","transexuales","invention","technician","executives","enquiries","cognitive","exploring","registrar","supporters","withdrawal","predicted","saskatchewan","cancellation","ministers","veterinary","prostores","relevance","incentive","butterfly","mechanics","numerical","reflection","accompanied","invitation","princeton","spirituality","meanwhile","proprietary","childrens","thumbzilla","porcelain","pichunter","translated","columnists","consensus","delivering","journalism","intention","undertaken","statewide","semiconductor","illustrations","happiness","substantially","identifier","calculations","conducting","accomplished","calculators","impression","correlation","fragrance","neighbors","transparent","charleston","champions","selections","projectors","inappropriate","comparing","vocational","pharmacies","introducing","appreciated","albuquerque","distinguished","projected","assumptions","shareholders","developmental","regulated","anticipated","completing","comparable","confusion","copyrighted","warranties","documented","paperbacks","keyboards","vulnerable","reflected","respiratory","notifications","transexual","mainstream","evaluating","subcommittee","maternity","journalists","foundations","volleyball","liabilities","decreased","tolerance","creativity","describing","lightning","quotations","inspector","bookmarks","behavioral","riverside","bathrooms","abilities","initiated","nonprofit","lancaster","suspended","containers","attitudes","simultaneously","integrate","sociology","screenshot","exhibitions","confident","retrieved","officially","consortium","recipients","delicious","traditions","periodically","hungarian","referring","transform","educators","vegetable","humanities","independently","alignment","henderson","britannica","competitors","visibility","consciousness","encounter","resolutions","accessing","attempted","witnesses","administered","strengthen","frederick","aggressive","advertisements","sublimedirectory","disturbed","determines","sculpture","motivation","pharmacology","passengers","quantities","petersburg","consistently","powerpoint","obituaries","punishment","appreciation","subsequently","providence","restriction","incorporate","backgrounds","treasurer","lightweight","transcription","complications","scripting","remembered","synthetic","testament","specifics","partially","wilderness","generations","tournaments","sponsorship","headphones","proceeding","volkswagen","uncertainty","breakdown","reconstruction","subsidiary","strengths","encouraging","furnished","terrorists","comparisons","beneficial","distributions","viewpicture","threatened","republicans","discusses","responded","abstracts","prediction","pharmaceuticals","thesaurus","individually","battlefield","literally","ecological","appraisal","consisting","submitting","citations","geographical","mozambique","disclaimers","championships","sheffield","finishing","wellington","prospects","bulgarian","aboriginal","remarkable","preventing","productive","boulevard","compliant","penalties","imagination","refurbished","activated","conferencing","armstrong","politicians","trackbacks","accommodate","christine","accepting","precipitation","isolation","sustained","approximate","programmer","greetings","inherited","incomplete","chronicle","legitimate","biographies","investigator","plaintiff","prisoners","mediterranean","nightlife","architects","entrepreneur","freelance","excessive","screensaver","valuation","unexpected","cigarette","characteristic","metallica","consequently","appointments","narrative","academics","quantitative","screensavers","subdivision","distinction","livestock","exemption","sustainability","formatting","nutritional","nicaragua","affiliation","relatives","satisfactory","revolutionary","bracelets","telephony","breathing","thickness","adjustments","graphical","discussing","aerospace","meaningful","maintains","shortcuts","voyeurweb","extending","specifies","accreditation","blackberry","meditation","microphone","macedonia","combining","instrumental","organizing","moderators","kazakhstan","standings","partition","invisible","translations","commodity","kilometers","thanksgiving","guarantees","indication","congratulations","cigarettes","controllers","consultancy","conventions","coordinates","responding","physically","stakeholders","hydrocodone","consecutive","attempting","representations","competing","peninsula","accurately","considers","ministries","vacancies","parliamentary","acknowledge","thoroughly","nottingham","identifies","questionnaire","qualification","modelling","miniature","interstate","consequence","systematic","perceived","madagascar","presenting","troubleshooting","uzbekistan","centuries","magnitude","richardson","fragrances","vocabulary","earthquake","fundraising","geological","assessing","introduces","webmasters","computational","acdbentity","participated","handhelds","answering","impressed","conspiracy","organizer","combinations","preceding","cumulative","amplifier","arbitrary","prominent","lexington","contacted","recorders","occasional","innovations","postcards","reviewing","explicitly","transsexual","citizenship","informative","girlfriend","bloomberg","hierarchy","influenced","abandoned","complement","mauritius","checklist","requesting","lauderdale","scenarios","extraction","elevation","utilization","beverages","calibration","efficiently","entertaining","prerequisite","hypothesis","medicines","regression","enhancements","renewable","intersection","passwords","consistency","collectors","azerbaijan","astrology","occurring","supplemental","travelling","induction","precisely","spreading","provinces","widespread","incidence","incidents","enhancing","interference","palestine","listprice","atmospheric","knowledgestorm","referenced","publicity","proposition","allowance","designation","duplicate","criterion","civilization","vietnamese","tremendous","corrected","encountered","internationally","surrounded","creatures","commented","accomplish","vegetarian","newfoundland","investigated","ambassador","stephanie","contacting","vegetation","findarticles","specially","infectious","continuity","phenomenon","conscious","referrals","differently","integrating","revisions","reasoning","charitable","annotated","convinced","burlington","replacing","researcher","watershed","occupations","acknowledged","equilibrium","characterized","privilege","qualifying","estimation","pediatric","techrepublic","institutes","brochures","traveller","appropriations","suspected","benchmark","beginners","instructors","highlighted","stationery","unauthorized","competent","contributor","demonstrates","gradually","desirable","journalist","afterwards","religions","explosion","signatures","disciplines","daughters","conversations","simplified","motherboard","bibliographic","champagne","deviation","superintendent","housewives","influences","inspections","irrigation","hydraulic","robertson","penetration","conviction","omissions","retrieval","qualities","prototype","importantly","apparatus","explaining","nomination","empirical","dependence","sexuality","polyester","commitments","suggesting","remainder","privileges","televisions","specializing","commodities","motorcycles","concentrate","reproductive","molecules","refrigerator","intervals","sentences","exclusion","workstation","holocaust","receivers","disposition","navigator","investigators","marijuana","cathedral","fairfield","fascinating","landscapes","lafayette","computation","cardiovascular","salvation","predictions","accompanying","selective","arbitration","configuring","editorials","sacrifice","removable","convergence","gibraltar","anthropology","malpractice","reporters","necessity","rendering","hepatitis","nationally","waterproof","specialties","humanitarian","invitations","functioning","economies","alexandria","bacterial","undertake","continuously","achievements","convertible","secretariat","paragraphs","adolescent","nominations","cancelled","introductory","reservoir","occurrence","worcester","demographic","disciplinary","respected","portraits","interpreted","evaluations","elimination","hypothetical","immigrants","complimentary","helicopter","performer","commissions","powerseller","graduated","surprising","unnecessary","dramatically","yugoslavia","characterization","likelihood","fundamentals","contamination","endangered","compromise","expiration","namespace","peripheral","negotiation","opponents","nominated","confidentiality","electoral","changelog","alternatively","greensboro","controversial","recovered","upgrading","frontpage","demanding","defensive","forbidden","programmers","monitored","installations","deutschland","practitioner","motivated","smithsonian","examining","revelation","delegation","dictionaries","greenhouse","transparency","currencies","survivors","positioning","descending","temporarily","frequencies","reflections","municipality","detective","experiencing","fireplace","endorsement","psychiatry","persistent","summaries","looksmart","magnificent","colleague","adaptation","paintball","enclosure","supervisors","westminster","distances","absorption","treasures","transcripts","disappointed","continually","communist","collectible","entrepreneurs","creations","acquisitions","biodiversity","excitement","presently","mysterious","librarian","subsidiaries","stockholm","indonesian","therapist","promising","relaxation","thereafter","commissioners","forwarding","nightmare","reductions","southampton","organisms","telescope","portsmouth","advancement","harassment","generators","generates","replication","inexpensive","receptors","interventions","huntington","internship","aluminium","snowboard","beastality","evanescence","coordinated","shipments","antarctica","chancellor","controversy","legendary","beautifully","antibodies","examinations","immunology","departmental","terminology","gentleman","reproduce","convicted","roommates","threatening","spokesman","activists","frankfurt","encourages","assembled","restructuring","terminals","simulations","sufficiently","conditional","crossword","conceptual","liechtenstein","translator","automobiles","continent","longitude","challenged","telecharger","insertion","instrumentation","constraint","groundwater","strengthening","insulation","infringement","subjective","swaziland","varieties","mediawiki","configurations"];class mt extends x.DecoratorNode{static clone(n){return new mt(n.__key)}static getType(){return"autocomplete"}static importJSON(n){return ir(n.uuid)}exportJSON(){return{...super.exportJSON(),type:"autocomplete",uuid:this.__uuid,version:1}}constructor(n,s){super(s),this.__uuid=n}updateDOM(){return!1}createDOM(){return document.createElement("span")}decorate(){return this.__uuid!==kn?null:t.jsx(wo,{})}}function ir(e){return new mt(e)}function wo(){const[e]=rr(),n=window.navigator.userAgentData,s=n!==void 0?n.mobile:window.innerWidth<=800&&window.innerHeight<=600;return t.jsxs("span",{style:{color:"#ccc"},spellCheck:"false",children:[e," ",s?"(SWIPE ⮕)":"(TAB)"]})}const vo="modulepreload",No=function(e){return"/"+e},ms={},or=function(n,s,r){let i=Promise.resolve();if(s&&s.length>0){const a=document.getElementsByTagName("link"),o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.all(s.map(c=>{if(c=No(c),c in ms)return;ms[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(!!r)for(let f=a.length-1;f>=0;f--){const y=a[f];if(y.href===c&&(!d||y.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${u}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":vo,d||(m.as="script",m.crossOrigin=""),m.href=c,l&&m.setAttribute("nonce",l),document.head.appendChild(m),d)return new Promise((f,y)=>{m.addEventListener("load",f),m.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})}))}return i.then(()=>n()).catch(a=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a})},jo=h.lazy(()=>or(()=>import("./InlineImageComponent-1hcMWywW.js"),__vite__mapDeps([0,1,2])));function Co(e){if(e instanceof HTMLImageElement){const{alt:n,src:s,width:r,height:i}=e;return{node:tn({altText:n,height:i,src:s,width:r})}}return null}class qe extends x.DecoratorNode{static getType(){return"image"}static clone(n){return new qe(n.__src,n.__altText,n.__position,n.__width,n.__height,n.__showCaption,n.__caption,n.__key)}static importJSON(n){const{altText:s,height:r,width:i,caption:a,src:o,showCaption:l,position:c="full"}=n,d=tn({altText:s,height:r,position:c,showCaption:l,src:o,width:i}),u=d.__caption,p=u.parseEditorState(a.editorState);return p.isEmpty()||u.setEditorState(p),d}static importDOM(){return{img:n=>({conversion:Co,priority:0})}}constructor(n,s,r,i,a,o,l,c){super(c),this.__src=n,this.__altText=s,this.__width=i||"inherit",this.__height=a||"inherit",this.__showCaption=o||!1,this.__caption=l||x.createEditor(),this.__position=r}exportDOM(){const n=document.createElement("img");return n.setAttribute("src",this.__src),n.setAttribute("alt",this.__altText),n.setAttribute("width",this.__width.toString()),n.setAttribute("height",this.__height.toString()),{element:n}}exportJSON(){return{altText:this.getAltText(),caption:this.__caption.toJSON(),height:this.__height==="inherit"?0:this.__height,position:this.__position,showCaption:this.__showCaption,src:this.getSrc(),type:"image",version:1,width:this.__width==="inherit"?0:this.__width}}getSrc(){return this.__src}getAltText(){return this.__altText}setAltText(n){const s=this.getWritable();s.__altText=n}setWidthAndHeight(n,s){const r=this.getWritable();r.__width=n,r.__height=s}getShowCaption(){return this.__showCaption}setShowCaption(n){const s=this.getWritable();s.__showCaption=n}getPosition(){return this.__position}setPosition(n){const s=this.getWritable();s.__position=n}update(n){console.log("updating payload",n);const s=this.getWritable(),{altText:r,showCaption:i,position:a}=n;r!==void 0&&(s.__altText=r),i!==void 0&&(s.__showCaption=i),a!==void 0&&(s.__position=a)}createDOM(n){const s=document.createElement("span"),r=`${n.theme.inlineImage} position-${this.__position}`;return r!==void 0&&(s.className=r),s}updateDOM(n,s,r){const i=this.__position;if(i!==n.__position){const a=`${r.theme.inlineImage} position-${i}`;a!==void 0&&(s.className=a)}return!1}decorate(){return t.jsx(h.Suspense,{fallback:null,children:t.jsx(jo,{src:this.__src,altText:this.__altText,width:this.__width,height:this.__height,nodeKey:this.getKey(),showCaption:this.__showCaption,caption:this.__caption,position:this.__position})})}}function tn({altText:e,position:n,height:s,src:r,width:i,showCaption:a,caption:o,key:l}){return x.$applyNodeReplacement(new qe(r,e,n,i,s,a,o,l))}function ar(e){return e instanceof qe}class Xe extends x.TextNode{static getType(){return"keyword"}static clone(n){return new Xe(n.__text,n.__key)}static importJSON(n){const s=lr(n.text);return s.setFormat(n.format),s.setDetail(n.detail),s.setMode(n.mode),s.setStyle(n.style),s}exportJSON(){return{...super.exportJSON(),type:"keyword",version:1}}createDOM(n){const s=super.createDOM(n);return s.style.cursor="default",s.className="keyword",s}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}isTextEntity(){return!0}}function lr(e){return new Xe(e)}const _o=[_e.HeadingNode,xe.ListNode,xe.ListItemNode,ge.CodeNode,ge.CodeHighlightNode,ce.AutoLinkNode,ce.LinkNode,qe,mt,Xe];function ko({onClose:e,children:n,title:s,closeOnClickOutside:r}){const i=h.useRef(null);return h.useEffect(()=>{i.current!==null&&i.current.focus()},[]),h.useEffect(()=>{let a=null;const o=d=>{d.keyCode===27&&e()},l=d=>{const u=d.target;i.current!==null&&!i.current.contains(u)&&r&&e()},c=i.current;return c!==null&&(a=c.parentElement,a!==null&&a.addEventListener("click",l)),window.addEventListener("keydown",o),()=>{window.removeEventListener("keydown",o),a!==null&&(a==null||a.removeEventListener("click",l))}},[r,e]),t.jsx("div",{className:"flex justify-center items-center fixed flex-col top-0 bottom-0 left-0 right-0 bg-[rgba(40,_40,_40,_0.6)] flex-grow-[0px] flex-shrink-[1px]",role:"dialog",children:t.jsxs("div",{className:"p-[20px] min-h-[100px] min-w-[300px] flex flex-grow-[0px] bg-[#fff] flex-col relative [box-shadow:0_0_20px_0_#444] rounded-[10px]",tabIndex:-1,ref:i,children:[t.jsx("h2",{className:"text-[#444] m-0 pb-[10px] border-b-[1px_solid_#ccc]",children:s}),t.jsx("button",{className:"border-[0px] absolute right-[20px] rounded-[20px] justify-center items-center flex w-[30px] h-[30px] text-center cursor-pointer bg-[#eee] hover:bg-[#ddd]","aria-label":"Close modal",type:"button",onClick:e,children:"X"}),t.jsx("div",{className:"pt-[20px]",children:n})]})})}function So({onClose:e,children:n,title:s,closeOnClickOutside:r=!1}){return Oe.createPortal(t.jsx(ko,{onClose:e,title:s,closeOnClickOutside:r,children:n}),document.body)}function It(){const[e,n]=h.useState(null),s=h.useCallback(()=>{n(null)},[]),r=h.useMemo(()=>{if(e===null)return null;const{title:a,content:o,closeOnClickOutside:l}=e;return t.jsx(So,{onClose:s,title:a,closeOnClickOutside:l,children:o})},[e,s]),i=h.useCallback((a,o,l=!1)=>{n({closeOnClickOutside:l,content:o(s),title:a})},[s]);return[r,i]}function To(...e){return e.filter(Boolean).join(" ")}function ut({"data-test-id":e,children:n,className:s,onClick:r,disabled:i,small:a,title:o}){return t.jsx("button",{disabled:i,className:To("pt-[10px] pb-[10px] pl-[15px] pr-[15px] border-[0px] bg-[#eee] rounded-[5px] cursor-pointer text-[14px] hover:bg-[#ddd]",i&&"cursor-not-allowed hover:bg-[#eee]",a&&"pt-[5px] pb-[5px] pl-[10px] pr-[10px] text-[13px]",s),onClick:r,title:o,"aria-label":o,...e&&{"data-test-id":e},children:n})}const Eo="https://platform.twitter.com/widgets.js";function $o(e){const n=e.getAttribute("data-lexical-tweet-id");return n?{node:Fn(n)}:null}let hs=!0;function Mo({className:e,format:n,loadingComponent:s,nodeKey:r,onError:i,onLoad:a,tweetID:o}){const l=h.useRef(null),c=h.useRef(""),[d,u]=h.useState(!1),p=h.useCallback(async()=>{try{await window.twttr.widgets.createTweet(o,l.current),u(!1),hs=!1,a&&a()}catch(m){i&&i(String(m))}},[i,a,o]);return h.useEffect(()=>{var m;if(o!==c.current){if(u(!0),hs){const f=document.createElement("script");f.src=Eo,f.async=!0,(m=document.body)==null||m.appendChild(f),f.onload=p,i&&(f.onerror=i)}else p();c&&(c.current=o)}},[p,i,o]),t.jsxs(Zs.BlockWithAlignableContents,{className:e,format:n,nodeKey:r,children:[d?s:null,t.jsx("div",{style:{display:"inline-block",width:"550px"},ref:l})]})}class At extends Rn.DecoratorBlockNode{static getType(){return"tweet"}static clone(n){return new At(n.__id,n.__format,n.__key)}static importJSON(n){const s=Fn(n.id);return s.setFormat(n.format),s}exportJSON(){return{...super.exportJSON(),id:this.getId(),type:"tweet",version:1}}static importDOM(){return{div:n=>n.hasAttribute("data-lexical-tweet-id")?{conversion:$o,priority:2}:null}}exportDOM(){const n=document.createElement("div");n.setAttribute("data-lexical-tweet-id",this.__id);const s=document.createTextNode(this.getTextContent());return n.append(s),{element:n}}constructor(n,s,r){super(s,r),this.__id=n}getId(){return this.__id}getTextContent(n,s){return`https://twitter.com/i/web/status/${this.__id}`}decorate(n,s){const r=s.theme.embedBlock||{},i={base:r.base||"",focus:r.focus||""};return t.jsx(Mo,{className:i,format:this.__format,loadingComponent:"Loading...",nodeKey:this.getKey(),tweetID:this.__id})}isInline(){return!1}}function Fn(e){return new At(e)}function Io(e){return e instanceof At}const Ao={dependencies:[ct.HorizontalRuleNode],export:e=>ct.$isHorizontalRuleNode(e)?"***":null,regExp:/^(---|\*\*\*|___)\s?$/,replace:(e,n,s,r)=>{const i=ct.$createHorizontalRuleNode();r||e.getNextSibling()!=null?e.replace(i):e.insertBefore(i),i.selectNext()},type:"element"},Oo={dependencies:[qe],export:e=>ar(e)?`![${e.getAltText()}](${e.getSrc()})`:null,importRegExp:/!(?:\[([^[]*)\])(?:\(([^(]+)\))/,regExp:/!(?:\[([^[]*)\])(?:\(([^(]+)\))$/,replace:(e,n)=>{const[,s,r]=n,i=tn({altText:s,maxWidth:800,src:r});e.replace(i)},trigger:")",type:"text-match"},Ro={dependencies:[At],export:e=>Io(e)?`<tweet id="${e.getId()}" />`:null,regExp:/<tweet id="([^"]+?)"\s?\/>\s?$/,replace:(e,n,s)=>{const[,r]=s,i=Fn(r);e.replace(i)},type:"element"},cr=/^(?:\|)(.+)(?:\|)\s?$/,Do=/^(\| ?:?-*:? ?)+\|\s?$/,Lo={dependencies:[D.TableNode,D.TableRowNode,D.TableCellNode],export:e=>{if(!D.$isTableNode(e))return null;const n=[];for(const s of e.getChildren()){const r=[];if(!D.$isTableRowNode(s))continue;let i=!1;for(const a of s.getChildren())D.$isTableCellNode(a)&&(r.push(He.$convertToMarkdownString(Vt,a).replace(/\n/g,"\\n")),a.__headerState===D.TableCellHeaderStates.ROW&&(i=!0));n.push(`| ${r.join(" | ")} |`),i&&n.push(`| ${r.map(a=>"---").join(" | ")} |`)}return n.join(`
`)},regExp:cr,replace:(e,n,s)=>{if(Do.test(s[0])){const d=e.getPreviousSibling();if(!d||!D.$isTableNode(d))return;const u=d.getChildren(),p=u[u.length-1];if(!p||!D.$isTableRowNode(p))return;p.getChildren().forEach(m=>{D.$isTableCellNode(m)&&m.toggleHeaderStyle(D.TableCellHeaderStates.ROW)}),e.remove();return}const r=fs(s[0]);if(r==null)return;const i=[r];let a=e.getPreviousSibling(),o=r.length;for(;a&&!(!x.$isParagraphNode(a)||a.getChildrenSize()!==1);){const d=a.getFirstChild();if(!x.$isTextNode(d))break;const u=fs(d.getTextContent());if(u==null)break;o=Math.max(o,u.length),i.unshift(u);const p=a.getPreviousSibling();a.remove(),a=p}const l=D.$createTableNode();for(const d of i){const u=D.$createTableRowNode();l.append(u);for(let p=0;p<o;p++)u.append(p<d.length?d[p]:dr(""))}const c=e.getPreviousSibling();D.$isTableNode(c)&&Po(c)===o?(c.append(...l.getChildren()),e.remove()):e.replace(l),l.selectEnd()},type:"element"};function Po(e){const n=e.getFirstChild();return D.$isTableRowNode(n)?n.getChildrenSize():0}const dr=e=>{e=e.replace(/\\n/g,`
`);const n=D.$createTableCellNode(D.TableCellHeaderStates.NO_STATUS);return He.$convertFromMarkdownString(e,Vt,n),n},fs=e=>{const n=e.match(cr);return!n||!n[1]?null:n[1].split("|").map(s=>dr(s))},Vt=[Lo,Ao,Oo,Ro,He.CHECK_LIST,...He.ELEMENT_TRANSFORMERS,...He.TEXT_FORMAT_TRANSFORMERS,...He.TEXT_MATCH_TRANSFORMERS],xs=()=>{let e=document.getElementById("report-container");return e===null&&(e=document.createElement("div"),e.id="report-container",e.style.position="fixed",e.style.top="50%",e.style.left="50%",e.style.fontSize="32px",e.style.transform="translate(-50%, -50px)",e.style.padding="20px",e.style.background="rgba(240, 240, 240, 0.4)",e.style.borderRadius="20px",document.body&&document.body.appendChild(e)),e};function Fo(){const e=h.useRef(null),n=h.useCallback(()=>{e!==null&&clearTimeout(e.current),document.body&&document.body.removeChild(xs())},[]);return h.useEffect(()=>n,[n]),h.useCallback(s=>{console.log(s);const r=xs();return clearTimeout(e.current),r.innerHTML=s,e.current=setTimeout(n,1e3),e.current},[n])}const ur=x.createCommand("SPEECH_TO_TEXT_COMMAND"),Bo={"\n":({selection:e})=>{e.insertParagraph()},redo:({editor:e})=>{e.dispatchCommand(x.REDO_COMMAND,void 0)},undo:({editor:e})=>{e.dispatchCommand(x.UNDO_COMMAND,void 0)}},pr="SpeechRecognition"in window||"webkitSpeechRecognition"in window;function zo(){const[e]=ne.useLexicalComposerContext(),[n,s]=h.useState(!1),r=window.SpeechRecognition||window.webkitSpeechRecognition,i=h.useRef(null),a=Fo();return h.useEffect(()=>(n&&i.current===null&&(i.current=new r,i.current.continuous=!0,i.current.interimResults=!0,i.current.addEventListener("result",o=>{const l=o.results.item(o.resultIndex),{transcript:c}=l.item(0);a(c),l.isFinal&&e.update(()=>{const d=x.$getSelection();if(x.$isRangeSelection(d)){const u=Bo[c.toLowerCase().trim()];u?u({editor:e,selection:d}):c.match(/\s*\n\s*/)?d.insertParagraph():d.insertText(c)}})})),i.current&&(n?i.current.start():i.current.stop()),()=>{i.current!==null&&i.current.stop()}),[r,e,n,a]),h.useEffect(()=>e.registerCommand(ur,o=>(s(o),!0),x.COMMAND_PRIORITY_EDITOR),[e]),null}const Wo=pr?zo:()=>null;async function Ho(e){const n=JSON.stringify(e.getEditorState());try{await fetch("http://localhost:1235/setEditorState",{body:n,headers:{Accept:"application/json","Content-type":"application/json"},method:"POST"})}catch{}}async function Uo(e){const n=JSON.stringify(e.getEditorState());let s=null;try{s=await fetch("http://localhost:1235/validateEditorState",{body:n,headers:{Accept:"application/json","Content-type":"application/json"},method:"POST"})}catch{}if(s!==null&&s.status===403)throw new Error("Editor state validation failed! Server did not accept changes.")}function qo({isRichText:e}){const[n]=ne.useLexicalComposerContext(),[s,r]=h.useState(()=>n.isEditable()),[i,a]=h.useState(!1);h.useState(!1);const[o,l]=h.useState(!0),[c,d]=It();fi.useCollaborationContext(),h.useEffect(()=>n.registerUpdateListener(({dirtyElements:p,prevEditorState:m,tags:f})=>{!s&&p.size>0&&!f.has("historic")&&!f.has("collaboration")&&Uo(n),n.getEditorState().read(()=>{const v=x.$getRoot().getChildren();if(v.length>1)l(!1);else if(x.$isParagraphNode(v[0])){const b=v[0].getChildren();l(b.length===0)}else l(!1)})}),[n,s]);const u=h.useCallback(()=>{n.update(()=>{const p=x.$getRoot(),m=p.getFirstChild();if(ge.$isCodeNode(m)&&m.getLanguage()==="markdown")He.$convertFromMarkdownString(m.getTextContent(),Vt);else{const f=He.$convertToMarkdownString(Vt);p.clear().append(ge.$createCodeNode("markdown").append(x.$createTextNode(f)))}p.selectEnd()})},[n]);return t.jsxs("div",{className:"actions",children:[pr&&t.jsx("button",{onClick:()=>{n.dispatchCommand(ur,!i),a(!i)},className:"action-button action-button-mic "+(i?"active":""),title:"Speech To Text","aria-label":`${i?"Enable":"Disable"} speech to text`,children:t.jsx("i",{className:"mic"})}),t.jsx("button",{className:"action-button import",onClick:()=>cs.importFile(n),title:"Import","aria-label":"Import editor state from JSON",children:t.jsx("i",{className:"import"})}),t.jsx("button",{className:"action-button export",onClick:()=>cs.exportFile(n,{fileName:`Playground ${new Date().toISOString()}`,source:"Playground"}),title:"Export","aria-label":"Export editor state to JSON",children:t.jsx("i",{className:"export"})}),t.jsx("button",{className:"action-button clear",disabled:o,onClick:()=>{d("Clear editor",p=>t.jsx(Vo,{editor:n,onClose:p}))},title:"Clear","aria-label":"Clear editor contents",children:t.jsx("i",{className:"clear"})}),t.jsx("button",{className:`action-button ${s?"lock":"unlock"}`,onClick:()=>{s&&Ho(n),n.setEditable(!n.isEditable())},title:"Read-Only Mode","aria-label":`${s?"Lock":"Unlock"} read-only mode`,children:t.jsx("i",{className:s?"lock":"unlock"})}),t.jsx("button",{className:"action-button",onClick:u,title:"Convert From Markdown","aria-label":"Convert from markdown",children:t.jsx("i",{className:"markdown"})}),c]})}function Vo({editor:e,onClose:n}){return t.jsxs(t.Fragment,{children:["Are you sure you want to clear the editor?",t.jsxs("div",{className:"Modal__content",children:[t.jsx(ut,{onClick:()=>{e.dispatchCommand(x.CLEAR_EDITOR_COMMAND,void 0),e.focus(),n()},children:"Clear"})," ",t.jsx(ut,{onClick:()=>{e.focus(),n()},children:"Cancel"})]})]})}function nn({"data-test-id":e,children:n}){return t.jsx("div",{className:"flex flex-row mt-[20px]","data-test-id":e,children:n})}function Yo({className:e,format:n,nodeKey:s,videoID:r}){return t.jsx(Zs.BlockWithAlignableContents,{className:e,format:n,nodeKey:s,children:t.jsx("iframe",{width:"560",height:"315",src:`https://www.youtube-nocookie.com/embed/${r}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:"YouTube video"})})}function Go(e){const n=e.getAttribute("data-lexical-youtube");return n?{node:Bn(n)}:null}class Ot extends Rn.DecoratorBlockNode{static getType(){return"youtube"}static clone(n){return new Ot(n.__id,n.__format,n.__key)}static importJSON(n){const s=Bn(n.videoID);return s.setFormat(n.format),s}exportJSON(){return{...super.exportJSON(),type:"youtube",version:1,videoID:this.__id}}constructor(n,s,r){super(s,r),this.__id=n}exportDOM(){const n=document.createElement("iframe");return n.setAttribute("data-lexical-youtube",this.__id),n.setAttribute("width","560"),n.setAttribute("height","315"),n.setAttribute("src",`https://www.youtube-nocookie.com/embed/${this.__id}`),n.setAttribute("frameborder","0"),n.setAttribute("allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"),n.setAttribute("allowfullscreen","true"),n.setAttribute("title","YouTube video"),{element:n}}static importDOM(){return{iframe:n=>n.hasAttribute("data-lexical-youtube")?{conversion:Go,priority:1}:null}}updateDOM(){return!1}getId(){return this.__id}getTextContent(n,s){return`https://www.youtube.com/watch?v=${this.__id}`}decorate(n,s){const r=s.theme.embedBlock||{},i={base:r.base||"",focus:r.focus||""};return t.jsx(Yo,{className:i,format:this.__format,nodeKey:this.getKey(),videoID:this.__id})}isInline(){return!1}}function Bn(e){return new Ot(e)}const mr=x.createCommand("INSERT_YOUTUBE_COMMAND");function Jo(){const[e]=ne.useLexicalComposerContext();return h.useEffect(()=>{if(!e.hasNodes([Ot]))throw new Error("YouTubePlugin: YouTubeNode not registered on editor");return e.registerCommand(mr,n=>{const s=Bn(n);return te.$insertNodeToNearestRoot(s),!0},x.COMMAND_PRIORITY_EDITOR)},[e]),null}const Ko={contentName:"Youtube Video",exampleUrl:"https://www.youtube.com/watch?v=jNQXAC9IVRw",icon:t.jsx("i",{className:"icon youtube"}),insertNode:(e,n)=>{e.dispatchCommand(mr,n.id)},keywords:["youtube","video"],parseUrl:async e=>{const n=/^.*(youtu\.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/.exec(e),s=n&&(n==null?void 0:n[2].length)===11?n[2]:null;return s!=null?{id:s,url:e}:null},type:"youtube-video"},hr=[Ko];function Xo({index:e,isSelected:n,onClick:s,onMouseEnter:r,option:i}){let a="item";return n&&(a+=" selected"),t.jsx("li",{tabIndex:-1,className:a,ref:i.setRefElement,role:"option","aria-selected":n,id:"typeahead-item-"+e,onMouseEnter:r,onClick:s,children:t.jsx("span",{className:"text",children:i.title})},i.key)}function Zo({options:e,selectedItemIndex:n,onOptionClick:s,onOptionMouseEnter:r}){return t.jsx("div",{className:"typeahead-popover",children:t.jsx("ul",{children:e.map((i,a)=>t.jsx(Xo,{index:a,isSelected:n===a,onClick:()=>s(i,a),onMouseEnter:()=>r(a),option:i},i.key))})})}const Qo=(e,n)=>{let s;return r=>{window.clearTimeout(s),s=window.setTimeout(()=>{e(r)},n)}};function ea({embedConfig:e,onClose:n}){const[s,r]=h.useState(""),[i]=ne.useLexicalComposerContext(),[a,o]=h.useState(null),l=h.useMemo(()=>Qo(d=>{const u=Ct.URL_MATCHER.exec(d);e!=null&&d!=null&&u!=null?Promise.resolve(e.parseUrl(d)).then(p=>{o(p)}):a!=null&&o(null)},200),[e,a]),c=()=>{a!=null&&(e.insertNode(i,a),n())};return t.jsxs("div",{style:{width:"600px"},children:[t.jsx("div",{className:"Input__wrapper",children:t.jsx("input",{type:"text",className:"Input__input",placeholder:e.exampleUrl,value:s,"data-test-id":`${e.type}-embed-modal-url`,onChange:d=>{const{value:u}=d.target;r(u),l(u)}})}),t.jsx(nn,{children:t.jsx(ut,{disabled:!a,onClick:c,"data-test-id":`${e.type}-embed-modal-submit-btn`,children:"Embed"})})]})}function ta(){const[e,n]=It(),s=i=>{n(`Embed ${i.contentName}`,a=>t.jsx(ea,{embedConfig:i,onClose:a}))},r=(i,a,o)=>[new Ct.AutoEmbedOption("Dismiss",{onSelect:o}),new Ct.AutoEmbedOption(`Embed ${i.contentName}`,{onSelect:a})];return t.jsxs(t.Fragment,{children:[e,t.jsx(Ct.LexicalAutoEmbedPlugin,{embedConfigs:hr,onOpenEmbedModalForConfig:s,getMenuOptions:r,menuRenderFn:(i,{selectedIndex:a,options:o,selectOptionAndCleanUp:l,setHighlightedIndex:c})=>i.current?Oe.createPortal(t.jsx("div",{className:"typeahead-popover auto-embed-menu",style:{marginLeft:i.current.style.width,width:200},children:t.jsx(Zo,{options:o,selectedItemIndex:a,onOptionClick:(d,u)=>{c(u),l(d)},onOptionMouseEnter:d=>{c(d)}})}),i.current):null})]})}const na=/((https?:\/\/(www\.)?)|(www\.))[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/,sa=/(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))/,ra=[Cn.createLinkMatcherWithRegExp(na,e=>e.startsWith("http")?e:`https://${e}`),Cn.createLinkMatcherWithRegExp(sa,e=>`mailto:${e}`)];function ia(){return t.jsx(Cn.AutoLinkPlugin,{matchers:ra})}function gs({filter:e,newTab:n=!1}){const[s]=ne.useLexicalComposerContext();return h.useEffect(()=>{function r(i){const a=i,o=oa(a,s);if(o===null)return;const l=o.getAttribute("href");if(o.getAttribute("contenteditable")==="false"||l===void 0)return;const c=s.getEditorState().read(x.$getSelection);if(x.$isRangeSelection(c)&&!c.isCollapsed())return;let d=null;if(s.update(()=>{const u=x.$getNearestNodeFromDOMNode(o);ce.$isLinkNode(u)&&(d=u)}),!(d===null||e!==void 0&&!e(a,d)))try{if(l!==null){const u=a.type==="auxclick"&&a.button===1;window.open(l,n||a.metaKey||a.ctrlKey||u?"_blank":"_self"),a.preventDefault()}}catch{}}return s.registerRootListener((i,a)=>{a!==null&&(a.removeEventListener("click",r),a.removeEventListener("auxclick",r)),i!==null&&(i.addEventListener("click",r),i.addEventListener("auxclick",r))})},[s,e,n]),null}function bs(e){return e.nodeName.toLowerCase()==="a"}function oa(e,n){return n.getEditorState().read(()=>{const s=e.target;return bs(s)?s:s.parentNode&&bs(s.parentNode)?s.parentNode:null})}function aa(){const[e]=ne.useLexicalComposerContext();return h.useEffect(()=>ge.registerCodeHighlighting(e),[e]),null}function la(e){const n=e.open!==void 0?e.open:!0;return{node:zn(n)}}class Ze extends x.ElementNode{constructor(n,s){super(s),this.__open=n}static getType(){return"collapsible-container"}static clone(n){return new Ze(n.__open,n.__key)}createDOM(n,s){const r=document.createElement("details");return r.classList.add("Collapsible__container"),r.open=this.__open,r.addEventListener("toggle",()=>{s.getEditorState().read(()=>this.getOpen())!==r.open&&s.update(()=>this.toggleOpen())}),r}updateDOM(n,s){return n.__open!==this.__open&&(s.open=this.__open),!1}static importDOM(){return{details:n=>({conversion:la,priority:1})}}static importJSON(n){return zn(n.open)}exportDOM(){const n=document.createElement("details");return n.setAttribute("open",this.__open.toString()),{element:n}}exportJSON(){return{...super.exportJSON(),open:this.__open,type:"collapsible-container",version:1}}setOpen(n){const s=this.getWritable();s.__open=n}getOpen(){return this.getLatest().__open}toggleOpen(){this.setOpen(!this.getOpen())}}function zn(e){return new Ze(e)}function Pe(e){return e instanceof Ze}function ca(e){return{node:Wn()}}class Qe extends x.ElementNode{static getType(){return"collapsible-content"}static clone(n){return new Qe(n.__key)}createDOM(n){const s=document.createElement("div");return s.classList.add("Collapsible__content"),s}updateDOM(n,s){return!1}static importDOM(){return{div:n=>n.hasAttribute("data-lexical-collapsible-content")?{conversion:ca,priority:2}:null}}exportDOM(){const n=document.createElement("div");return n.setAttribute("data-lexical-collapsible-content","true"),{element:n}}static importJSON(n){return Wn()}isShadowRoot(){return!0}exportJSON(){return{...super.exportJSON(),type:"collapsible-content",version:1}}}function Wn(){return new Qe}function fr(e){return e instanceof Qe}function da(e){return{node:Hn()}}class et extends x.ElementNode{static getType(){return"collapsible-title"}static clone(n){return new et(n.__key)}createDOM(n,s){const r=document.createElement("summary");return r.classList.add("Collapsible__title"),r.classList.add("w-full","font-sans","font-medium","text-md","uppercase"),r.classList.add("tracking-wider","py-1","pl-5"),r}updateDOM(n,s){return!1}static importDOM(){return{summary:n=>({conversion:da,priority:1})}}static importJSON(n){return Hn()}exportDOM(){return{element:document.createElement("summary")}}exportJSON(){return{...super.exportJSON(),type:"collapsible-title",version:1}}collapseAtStart(n){return this.getParentOrThrow().insertBefore(this),!0}insertNewAfter(n,s=!0){const r=this.getParentOrThrow();if(!Pe(r))throw new Error("CollapsibleTitleNode expects to be child of CollapsibleContainerNode");if(r.getOpen()){const i=this.getNextSibling();if(!fr(i))throw new Error("CollapsibleTitleNode expects to have CollapsibleContentNode sibling");const a=i.getFirstChild();if(x.$isElementNode(a))return a;{const o=x.$createParagraphNode();return i.append(o),o}}else{const i=x.$createParagraphNode();return r.insertAfter(i,s),i}}}function Hn(){return new et}function ys(e){return e instanceof et}const Un=x.createCommand();x.createCommand();function ua(){const[e]=ne.useLexicalComposerContext();return h.useEffect(()=>{if(!e.hasNodes([Ze,et,Qe]))throw new Error("CollapsiblePlugin: CollapsibleContainerNode, CollapsibleTitleNode, or CollapsibleContentNode not registered on editor");const n=()=>{var i;const r=x.$getSelection();if(x.$isRangeSelection(r)&&r.isCollapsed()&&r.anchor.offset===0){const a=te.$findMatchingParent(r.anchor.getNode(),Pe);if(Pe(a)){const o=a.getParent();o!==null&&o.getFirstChild()===a&&r.anchor.key===((i=a.getFirstDescendant())==null?void 0:i.getKey())&&a.insertBefore(x.$createParagraphNode())}}return!1},s=()=>{const r=x.$getSelection();if(x.$isRangeSelection(r)&&r.isCollapsed()){const i=te.$findMatchingParent(r.anchor.getNode(),Pe);if(Pe(i)){const a=i.getParent();if(a!==null&&a.getLastChild()===i){const o=i.getLastDescendant();o!==null&&r.anchor.key===o.getKey()&&r.anchor.offset===o.getTextContentSize()&&i.insertAfter(x.$createParagraphNode())}}}return!1};return te.mergeRegister(e.registerNodeTransform(Qe,r=>{const i=r.getParent();if(!Pe(i)){const a=r.getChildren();for(const o of a)r.insertBefore(o);r.remove()}}),e.registerNodeTransform(et,r=>{const i=r.getParent();if(!Pe(i)){r.replace(x.$createParagraphNode().append(...r.getChildren()));return}}),e.registerNodeTransform(Ze,r=>{const i=r.getChildren();if(i.length!==2||!ys(i[0])||!fr(i[1])){for(const a of i)r.insertBefore(a);r.remove()}}),e.registerCommand(x.DELETE_CHARACTER_COMMAND,()=>{const r=x.$getSelection();if(!x.$isRangeSelection(r)||!r.isCollapsed()||r.anchor.offset!==0)return!1;const a=r.anchor.getNode().getTopLevelElement();if(a===null)return!1;const o=a.getPreviousSibling();return!Pe(o)||o.getOpen()?!1:(o.setOpen(!0),!0)},x.COMMAND_PRIORITY_LOW),e.registerCommand(x.KEY_ARROW_DOWN_COMMAND,s,x.COMMAND_PRIORITY_LOW),e.registerCommand(x.KEY_ARROW_RIGHT_COMMAND,s,x.COMMAND_PRIORITY_LOW),e.registerCommand(x.KEY_ARROW_UP_COMMAND,n,x.COMMAND_PRIORITY_LOW),e.registerCommand(x.KEY_ARROW_LEFT_COMMAND,n,x.COMMAND_PRIORITY_LOW),e.registerCommand(x.INSERT_PARAGRAPH_COMMAND,()=>{var i;const r=(i=e._window)==null?void 0:i.event;if(r&&(r.ctrlKey||r.metaKey)&&r.key==="Enter"){const a=x.$getPreviousSelection();if(x.$isRangeSelection(a)&&a.isCollapsed()){const o=te.$findMatchingParent(a.anchor.getNode(),l=>x.$isElementNode(l)&&!l.isInline());if(ys(o)){const l=o.getParent();if(Pe(l))return l.toggleOpen(),x.$setSelection(a.clone()),!0}}}return!1},x.COMMAND_PRIORITY_LOW),e.registerCommand(Un,()=>(e.update(()=>{const r=Hn();te.$insertNodeToNearestRoot(zn(!0).append(r,Wn().append(x.$createParagraphNode()))),r.select()}),!0),x.COMMAND_PRIORITY_LOW))},[e]),null}function pa({accept:e,label:n,onChange:s,"data-test-id":r}){return t.jsxs("div",{className:`${InputStylese.Input__wrapper}`,children:[t.jsx("label",{className:`${InputStylese.Input__label}`,children:n}),t.jsx("input",{type:"file",accept:e,className:`${InputStylese.Input__input}`,onChange:i=>s(i.target.files),"data-test-id":r})]})}function ma({children:e,label:n,className:s,...r}){return t.jsxs("div",{className:"Input__wrapper",children:[t.jsx("label",{style:{marginTop:"-1em"},className:"Input__label",children:n}),t.jsx("select",{...r,className:s||"min-w-[160px] max-w-[290px] border-[1px] border-[solid] border-[#393939] rounded-[0.25em] px-[0.5em] py-[0.25em] text-[1rem] cursor-pointer leading-[1.4] bg-[linear-gradient(to_bottom,_#ffffff_0%,_#e5e5e5_100%)]",children:e})]})}function pt({label:e,value:n,onChange:s,placeholder:r="","data-test-id":i,type:a="text"}){return t.jsxs("div",{className:`${InputStylese.Input__wrapper}`,children:[t.jsx("label",{className:`${InputStylese.Input__label}`,children:e}),t.jsx("input",{type:a,className:`${InputStylese.Input__input}`,placeholder:r,onChange:o=>s(o.target.files),"data-test-id":i})]})}const ha=e=>Mt?(e||window).getSelection():null,sn=x.createCommand("INSERT_INLINE_IMAGE_COMMAND");function xr({activeEditor:e,onClose:n}){const s=h.useRef(!1),[r,i]=h.useState(""),[a,o]=h.useState(""),[l,c]=h.useState(!1),[d,u]=h.useState("left"),p=r==="",m=b=>{c(b.target.checked)},f=b=>{u(b.target.value)},y=b=>{const g=new FileReader;g.onload=function(){return typeof g.result=="string"&&i(g.result),""},b!==null&&g.readAsDataURL(b[0])};h.useEffect(()=>{s.current=!1;const b=g=>{s.current=g.altKey};return document.addEventListener("keydown",b),()=>{document.removeEventListener("keydown",b)}},[e]);const v=()=>{const b={altText:a,position:d,showCaption:l,src:r};e.dispatchCommand(sn,b),n()};return t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{marginBottom:"1em"},children:t.jsx(pa,{label:"Image Upload",onChange:y,accept:"image/*","data-test-id":"image-modal-file-upload"})}),t.jsx("div",{style:{marginBottom:"1em"},children:t.jsx(pt,{label:"Alt Text",placeholder:"Descriptive alternative text",onChange:o,value:a,"data-test-id":"image-modal-alt-text-input"})}),t.jsxs(ma,{style:{marginBottom:"1em",width:"290px"},label:"Position",name:"position",id:"position-select",onChange:f,children:[t.jsx("option",{value:"left",children:"Left"}),t.jsx("option",{value:"right",children:"Right"}),t.jsx("option",{value:"full",children:"Full Width"})]}),t.jsxs("div",{className:"Input__wrapper",children:[t.jsx("input",{id:"caption",type:"checkbox",checked:l,onChange:m}),t.jsx("label",{htmlFor:"caption",children:"Show Caption"})]}),t.jsx(nn,{children:t.jsx(ut,{"data-test-id":"image-modal-file-upload-btn",disabled:p,onClick:()=>v(),children:"Confirm"})})]})}function fa(){const[e]=ne.useLexicalComposerContext();return h.useEffect(()=>{if(!e.hasNodes([qe]))throw new Error("ImagesPlugin: ImageNode not registered on editor");return te.mergeRegister(e.registerCommand(sn,n=>{const s=tn(n);return x.$insertNodes([s]),x.$isRootOrShadowRoot(s.getParentOrThrow())&&te.$wrapNodeInElement(s,x.$createParagraphNode).selectEnd(),!0},x.COMMAND_PRIORITY_EDITOR),e.registerCommand(x.DRAGSTART_COMMAND,n=>ga(n),x.COMMAND_PRIORITY_HIGH),e.registerCommand(x.DRAGOVER_COMMAND,n=>ba(n),x.COMMAND_PRIORITY_LOW),e.registerCommand(x.DROP_COMMAND,n=>ya(n,e),x.COMMAND_PRIORITY_HIGH))},[e]),null}const xa="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",gr=document.createElement("img");gr.src=xa;function ga(e){const n=qn();if(!n)return!1;const s=e.dataTransfer;return s?(s.setData("text/plain","_"),s.setDragImage(gr,0,0),s.setData("application/x-lexical-drag",JSON.stringify({data:{altText:n.__altText,caption:n.__caption,height:n.__height,key:n.getKey(),showCaption:n.__showCaption,src:n.__src,width:n.__width},type:"image"})),!0):!1}function ba(e){return qn()?(br(e)||e.preventDefault(),!0):!1}function ya(e,n){const s=qn();if(!s)return!1;const r=wa(e);if(!r)return!1;if(e.preventDefault(),br(e)){const i=va(e);s.remove();const a=x.$createRangeSelection();i!=null&&a.applyDOMRange(i),x.$setSelection(a),n.dispatchCommand(sn,r)}return!0}function qn(){const e=x.$getSelection();if(!x.$isNodeSelection(e))return null;const s=e.getNodes()[0];return ar(s)?s:null}function wa(e){var i;const n=(i=e.dataTransfer)==null?void 0:i.getData("application/x-lexical-drag");if(!n)return null;const{type:s,data:r}=JSON.parse(n);return s!=="image"?null:r}function br(e){const n=e.target;return!!(n&&n instanceof HTMLElement&&!n.closest("code, span.editor-image")&&n.parentElement&&n.parentElement.closest("div.ContentEditable__root"))}function va(e){let n;const s=e.target,r=s==null?null:s.nodeType===9?s.defaultView:s.ownerDocument.defaultView,i=ha(r);if(document.caretRangeFromPoint)n=document.caretRangeFromPoint(e.clientX,e.clientY);else if(e.rangeParent&&i!==null)i.collapse(e.rangeParent,e.rangeOffset||0),n=i.getRangeAt(0);else throw Error("Cannot get the selection when dragging");return n}function yr(e,n,...s){if(!e)throw new Error("Internal Lexical error: invariant() is meant to be replaced at compile time. There is no runtime version. Error: "+n)}const Na=new Map,dp=new Map,wr='{"root":{"children":[{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1}],"direction":null,"format":"","indent":0,"type":"root","version":1}}',vr=e=>e===""?wr:`{"root":{"children":[{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":${e},"type":"text","version":1}],"direction":"ltr","format":"","indent":0,"type":"paragraph","version":1}],"direction":"ltr","format":"","indent":0,"type":"root","version":1}}`,ja=h.lazy(()=>or(()=>import("./TableComponent-umCyKogP.js"),__vite__mapDeps([3,1,2])));function Nr(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,5)}function Ge(e){return{colSpan:1,id:Nr(),json:wr,type:e,width:null}}function St(){return{cells:[],height:null,id:Nr()}}function up(e){const n=e.querySelectorAll("tr"),s=[];for(let r=0;r<n.length;r++){const a=n[r].querySelectorAll("td,th");if(!a||a.length===0)continue;const o=[];for(let c=0;c<a.length;c++){const d=a[c],u=d.nodeName==="TH",p=Ge(u?"header":"normal");p.json=vr(JSON.stringify(d.innerText.replace(/\n/g," "))),o.push(p)}const l=St();l.cells=o,s.push(l)}return s}function Ca(e){const n=e.querySelectorAll("tr");if(!n||n.length===0)return null;const s=[];for(let r=0;r<n.length;r++){const a=n[r].querySelectorAll("td,th");if(!a||a.length===0)continue;const o=[];for(let c=0;c<a.length;c++){const d=a[c],u=d.nodeName==="TH",p=Ge(u?"header":"normal");p.json=vr(JSON.stringify(d.innerText.replace(/\n/g," "))),o.push(p)}const l=St();l.cells=o,s.push(l)}return{node:jr(s)}}function _a(e,n){const s=document.createElement("table"),r=document.createElement("colgroup"),i=document.createElement("tbody"),a=e[0];for(let o=n!=null?n.startX:0;o<(n!=null?n.endX+1:a.cells.length);o++){const l=document.createElement("col");r.append(l)}for(let o=n!=null?n.startY:0;o<(n!=null?n.endY+1:e.length);o++){const c=e[o].cells,d=document.createElement("tr");for(let u=n!=null?n.startX:0;u<(n!=null?n.endX+1:c.length);u++){const p=c[u],m=document.createElement(p.type==="header"?"th":"td");m.innerHTML=Na.get(p.json)||"",d.appendChild(m)}i.appendChild(d)}return s.appendChild(r),s.appendChild(i),s}class nt extends x.DecoratorNode{static getType(){return"tablesheet"}static clone(n){return new nt(Array.from(n.__rows),n.__key)}static importJSON(n){return jr(n.rows)}exportJSON(){return{rows:this.__rows,type:"tablesheet",version:1}}static importDOM(){return{table:n=>({conversion:Ca,priority:0})}}exportDOM(){return{element:_a(this.__rows)}}constructor(n,s){super(s),this.__rows=n||[]}createDOM(){return document.createElement("div")}updateDOM(){return!1}mergeRows(n,s,r){const a=this.getWritable().__rows,o=Math.min(a.length,s+r.length);for(let l=s;l<o;l++){const c=a[l],d=r[l-s],u=c.cells,p=Array.from(u),m={...c,cells:p},f=d.cells,y=Math.min(u.length,n+f.length);for(let v=n;v<y;v++){const b=u[v],g=f[v-n],w={...b,json:g.json,type:g.type};p[v]=w}a[l]=m}}updateCellJSON(n,s,r){const a=this.getWritable().__rows,o=a[s],l=o.cells,c=l[n],d=Array.from(l),u={...c,json:r},p={...o,cells:d};d[n]=u,a[s]=p}updateCellType(n,s,r){const a=this.getWritable().__rows,o=a[s],l=o.cells,c=l[n],d=Array.from(l),u={...c,type:r},p={...o,cells:d};d[n]=u,a[s]=p}insertColumnAt(n){const r=this.getWritable().__rows;for(let i=0;i<r.length;i++){const a=r[i],o=a.cells,l=Array.from(o),c={...a,cells:l},d=(o[n]||o[n-1]).type;l.splice(n,0,Ge(d)),r[i]=c}}deleteColumnAt(n){const r=this.getWritable().__rows;for(let i=0;i<r.length;i++){const a=r[i],o=a.cells,l=Array.from(o),c={...a,cells:l};l.splice(n,1),r[i]=c}}addColumns(n){const r=this.getWritable().__rows;for(let i=0;i<r.length;i++){const a=r[i],o=a.cells,l=Array.from(o),c={...a,cells:l},d=o[o.length-1].type;for(let u=0;u<n;u++)l.push(Ge(d));r[i]=c}}insertRowAt(n){const r=this.getWritable().__rows,i=r[n]||r[n-1],a=i.cells.length,o=St();for(let l=0;l<a;l++){const c=Ge(i.cells[l].type);o.cells.push(c)}r.splice(n,0,o)}deleteRowAt(n){this.getWritable().__rows.splice(n,1)}addRows(n){const r=this.getWritable().__rows,i=r[r.length-1],a=i.cells.length;for(let o=0;o<n;o++){const l=St();for(let c=0;c<a;c++){const d=Ge(i.cells[c].type);l.cells.push(d)}r.push(l)}}updateColumnWidth(n,s){const i=this.getWritable().__rows;for(let a=0;a<i.length;a++){const o=i[a],l=o.cells,c=Array.from(l),d={...o,cells:c};c[n].width=s,i[a]=d}}decorate(n,s){return t.jsx(h.Suspense,{children:t.jsx(ja,{nodeKey:this.__key,theme:s.theme,rows:this.__rows})})}isInline(){return!1}}function pp(e){return e instanceof nt}function jr(e){return new nt(e)}function ka(e,n,s=!0){const r=[];for(let i=0;i<n;i++){const a=St();r.push(a);for(let o=0;o<e;o++)a.cells.push(Ge(s===!0&&(i===0||o===0)?"header":"normal"))}return new nt(r)}const Cr=x.createCommand("INSERT_NEW_TABLE_COMMAND"),Sa=h.createContext({cellEditorConfig:null,cellEditorPlugins:null,set:()=>{}});function _r({activeEditor:e,onClose:n}){const[s,r]=h.useState("5"),[i,a]=h.useState("5"),[o,l]=h.useState(!0);h.useEffect(()=>{const d=Number(s),u=Number(i);d&&d>0&&d<=500&&u&&u>0&&u<=50?l(!1):l(!0)},[s,i]);const c=()=>{e.dispatchCommand(D.INSERT_TABLE_COMMAND,{columns:i,rows:s}),n()};return t.jsxs(t.Fragment,{children:[t.jsx(pt,{placeholder:"# of rows (1-500)",label:"Rows",onChange:r,value:s,"data-test-id":"table-modal-rows",type:"number"}),t.jsx(pt,{placeholder:"# of columns (1-50)",label:"Columns",onChange:a,value:i,"data-test-id":"table-modal-columns",type:"number"}),t.jsx(nn,{"data-test-id":"table-model-confirm-insert",children:t.jsx(ut,{disabled:o,onClick:c,children:"Confirm"})})]})}function Ta({activeEditor:e,onClose:n}){const[s,r]=h.useState(""),[i,a]=h.useState(""),[o,l]=h.useState(!0);h.useEffect(()=>{const d=Number(s),u=Number(i);d&&d>0&&d<=500&&u&&u>0&&u<=50?l(!1):l(!0)},[s,i]);const c=()=>{e.dispatchCommand(Cr,{columns:i,rows:s}),n()};return t.jsxs(t.Fragment,{children:[t.jsx(pt,{placeholder:"# of rows (1-500)",label:"Rows",onChange:r,value:s,"data-test-id":"table-modal-rows",type:"number"}),t.jsx(pt,{placeholder:"# of columns (1-50)",label:"Columns",onChange:a,value:i,"data-test-id":"table-modal-columns",type:"number"}),t.jsx(nn,{"data-test-id":"table-model-confirm-insert",children:t.jsx(ut,{disabled:o,onClick:c,children:"Confirm"})})]})}function Ea({cellEditorConfig:e,children:n}){const[s]=ne.useLexicalComposerContext(),r=h.useContext(Sa);return h.useEffect(()=>(s.hasNodes([nt])||yr(!1,"TablePlugin: TableNode is not registered on editor"),r.set(e,n),s.registerCommand(Cr,({columns:i,rows:a,includeHeaders:o})=>{const l=ka(Number(a),Number(i),o);return x.$insertNodes([l]),!0},x.COMMAND_PRIORITY_EDITOR)),[r,e,n,s]),null}class we extends _n.MenuOption{constructor(n,s){super(n),this.title=n,this.keywords=s.keywords||[],this.icon=s.icon,this.keyboardShortcut=s.keyboardShortcut,this.onSelect=s.onSelect.bind(this)}}function $a({index:e,isSelected:n,onClick:s,onMouseEnter:r,option:i}){let a="item";return n&&(a+=" selected"),t.jsxs("li",{tabIndex:-1,className:a,ref:i.setRefElement,role:"option","aria-selected":n,id:"typeahead-item-"+e,onMouseEnter:r,onClick:s,children:[i.icon,t.jsx("span",{className:"text",children:i.title})]},i.key)}function Ma(e,n){const s=[];if(n==null)return s;const r=n.match(/^([1-9]\d?)(?:x([1-9]\d?)?)?$/);if(r!==null){const i=r[1],a=r[2]?[r[2]]:[1,2,3,4,5,6,7,8,9,10].map(String);s.push(...a.map(o=>new we(`${i}x${o} Table`,{icon:t.jsx("i",{className:"icon table"}),keywords:["table"],onSelect:()=>e.dispatchCommand(D.INSERT_TABLE_COMMAND,{columns:o,rows:i})})))}return s}function Ia(e,n){return[new we("Paragraph",{icon:t.jsx("i",{className:"icon paragraph"}),keywords:["normal","paragraph","p","text"],onSelect:()=>e.update(()=>{const s=x.$getSelection();x.$isRangeSelection(s)&&he.$setBlocksType(s,()=>x.$createParagraphNode())})}),...[1,2,3,4].map(s=>new we(`Heading ${s}`,{icon:t.jsx("i",{className:`icon h${s}`}),keywords:["heading","header",`h${s}`],onSelect:()=>e.update(()=>{const r=x.$getSelection();x.$isRangeSelection(r)&&he.$setBlocksType(r,()=>_e.$createHeadingNode(`h${s}`))})})),new we("Table",{icon:t.jsx("i",{className:"icon table"}),keywords:["table","grid","spreadsheet","rows","columns"],onSelect:()=>n("Insert Table",s=>t.jsx(_r,{activeEditor:e,onClose:s}))}),...hr.map(s=>new we(`Embed ${s.contentName}`,{icon:s.icon,keywords:[...s.keywords,"embed"],onSelect:()=>e.dispatchCommand(Ct.INSERT_EMBED_COMMAND,s.type)})),new we("Numbered List",{icon:t.jsx("i",{className:"icon number"}),keywords:["numbered list","ordered list","ol"],onSelect:()=>e.dispatchCommand(xe.INSERT_ORDERED_LIST_COMMAND,void 0)}),new we("Bulleted List",{icon:t.jsx("i",{className:"icon bullet"}),keywords:["bulleted list","unordered list","ul"],onSelect:()=>e.dispatchCommand(xe.INSERT_UNORDERED_LIST_COMMAND,void 0)}),new we("Check List",{icon:t.jsx("i",{className:"icon check"}),keywords:["check list","todo list"],onSelect:()=>e.dispatchCommand(xe.INSERT_CHECK_LIST_COMMAND,void 0)}),new we("Quote",{icon:t.jsx("i",{className:"icon quote"}),keywords:["block quote"],onSelect:()=>e.update(()=>{const s=x.$getSelection();x.$isRangeSelection(s)&&he.$setBlocksType(s,()=>_e.$createQuoteNode())})}),new we("Code",{icon:t.jsx("i",{className:"icon code"}),keywords:["javascript","python","js","codeblock"],onSelect:()=>e.update(()=>{const s=x.$getSelection();if(x.$isRangeSelection(s))if(s.isCollapsed())he.$setBlocksType(s,()=>ge.$createCodeNode());else{const r=s.getTextContent(),i=ge.$createCodeNode();s.insertNodes([i]),s.insertRawText(r)}})}),new we("Divider",{icon:t.jsx("i",{className:"icon horizontal-rule"}),keywords:["horizontal rule","divider","hr"],onSelect:()=>e.dispatchCommand(ct.INSERT_HORIZONTAL_RULE_COMMAND,void 0)}),new we("Image",{icon:t.jsx("i",{className:"icon image"}),keywords:["image","photo","picture","file"],onSelect:()=>n("Insert Image",s=>t.jsx(xr,{activeEditor:e,onClose:s}))}),new we("Collapsible",{icon:t.jsx("i",{className:"icon caret-right"}),keywords:["collapse","collapsible","toggle"],onSelect:()=>e.dispatchCommand(Un,void 0)}),...["left","center","right","justify"].map(s=>new we(`Align ${s}`,{icon:t.jsx("i",{className:`icon ${s}-align`}),keywords:["align","justify",s],onSelect:()=>e.dispatchCommand(x.FORMAT_ELEMENT_COMMAND,s)}))]}function Aa(){const[e]=ne.useLexicalComposerContext(),[n,s]=It(),[r,i]=h.useState(null),a=_n.useBasicTypeaheadTriggerMatch("/",{minLength:0}),o=h.useMemo(()=>{const c=Ia(e,s);if(!r)return c;const d=new RegExp(r,"i");return[...Ma(e,r),...c.filter(u=>d.test(u.title)||u.keywords.some(p=>d.test(p)))]},[e,r,s]),l=h.useCallback((c,d,u,p)=>{e.update(()=>{d==null||d.remove(),c.onSelect(p),u()})},[e]);return t.jsxs(t.Fragment,{children:[n,t.jsx(_n.LexicalTypeaheadMenuPlugin,{onQueryChange:i,onSelectOption:l,triggerFn:a,options:o,menuRenderFn:(c,{selectedIndex:d,selectOptionAndCleanUp:u,setHighlightedIndex:p})=>c.current&&o.length?Oe.createPortal(t.jsx("div",{className:"typeahead-popover component-picker-menu",children:t.jsx("ul",{children:o.map((m,f)=>t.jsx($a,{index:f,isSelected:d===f,onClick:()=>{p(f),u(m)},onMouseEnter:()=>{p(f)},option:m},m.key))})}),c.current):null})]})}const ws=["image/","image/heic","image/heif","image/gif","image/webp"];function Oa(){const[e]=ne.useLexicalComposerContext();return h.useEffect(()=>e.registerCommand(_e.DRAG_DROP_PASTE,n=>((async()=>{const s=await te.mediaFileReader(n,[ws].flatMap(r=>r));for(const{file:r,result:i}of s)te.isMimeType(r,ws)&&e.dispatchCommand(sn,{altText:r.name,src:i})})(),!0),x.COMMAND_PRIORITY_LOW),[e]),null}function fn(e){return e instanceof HTMLElement}class kr{constructor(n,s){this._x=n,this._y=s}get x(){return this._x}get y(){return this._y}equals({x:n,y:s}){return this.x===n&&this.y===s}calcDeltaXTo({x:n}){return this.x-n}calcDeltaYTo({y:n}){return this.y-n}calcHorizontalDistanceTo(n){return Math.abs(this.calcDeltaXTo(n))}calcVerticalDistance(n){return Math.abs(this.calcDeltaYTo(n))}calcDistanceTo(n){return Math.sqrt(Math.pow(this.calcDeltaXTo(n),2)+Math.pow(this.calcDeltaYTo(n),2))}}function Ra(e){return e instanceof kr}class Ye{constructor(n,s,r,i){const[a,o]=s<=i?[s,i]:[i,s],[l,c]=n<=r?[n,r]:[r,n];this._top=a,this._right=c,this._left=l,this._bottom=o}get top(){return this._top}get right(){return this._right}get bottom(){return this._bottom}get left(){return this._left}get width(){return Math.abs(this._left-this._right)}get height(){return Math.abs(this._bottom-this._top)}equals({top:n,left:s,bottom:r,right:i}){return n===this._top&&r===this._bottom&&s===this._left&&i===this._right}contains(n){if(Ra(n)){const{x:s,y:r}=n,i=r<this._top,a=r>this._bottom,o=s<this._left,l=s>this._right;return{reason:{isOnBottomSide:a,isOnLeftSide:o,isOnRightSide:l,isOnTopSide:i},result:!i&&!a&&!o&&!l}}else{const{top:s,left:r,bottom:i,right:a}=n;return s>=this._top&&s<=this._bottom&&i>=this._top&&i<=this._bottom&&r>=this._left&&r<=this._right&&a>=this._left&&a<=this._right}}intersectsWith(n){const{left:s,top:r,width:i,height:a}=n,{left:o,top:l,width:c,height:d}=this,u=s+i>=o+c?s+i:o+c,p=r+a>=l+d?r+a:l+d,m=s<=o?s:o,f=r<=l?r:l;return u-m<=i+c&&p-f<=a+d}generateNewRect({left:n=this.left,top:s=this.top,right:r=this.right,bottom:i=this.bottom}){return new Ye(n,s,r,i)}static fromLTRB(n,s,r,i){return new Ye(n,s,r,i)}static fromLWTH(n,s,r,i){return new Ye(n,r,n+s,r+i)}static fromPoints(n,s){const{y:r,x:i}=n,{y:a,x:o}=s;return Ye.fromLTRB(i,r,o,a)}static fromDOM(n){const{top:s,width:r,left:i,height:a}=n.getBoundingClientRect();return Ye.fromLWTH(i,r,s,a)}}const Sn=4,Da=2,La="draggable-block-menu",vs="application/x-lexical-drag-block",Ns=28,Pa=1,Fa=-1,js=0;let Wt=1/0;function Ba(e){return e===0?1/0:Wt>=0&&Wt<e?Wt:Math.floor(e/2)}function za(e){return e.getEditorState().read(()=>x.$getRoot().getChildrenKeys())}function Sr(e){const n=(c,d)=>c?parseFloat(window.getComputedStyle(c)[d]):0,{marginTop:s,marginBottom:r}=window.getComputedStyle(e),i=n(e.previousElementSibling,"marginBottom"),a=n(e.nextElementSibling,"marginTop"),o=Math.max(parseFloat(s),i);return{marginBottom:Math.max(parseFloat(r),a),marginTop:o}}function xn(e,n,s,r=!1){const i=e.getBoundingClientRect(),a=za(n);let o=null;return n.getEditorState().read(()=>{if(r){const[d,u]=[n.getElementByKey(a[0]),n.getElementByKey(a[a.length-1])],[p,m]=[d==null?void 0:d.getBoundingClientRect(),u==null?void 0:u.getBoundingClientRect()];if(p&&m&&(s.y<p.top?o=d:s.y>m.bottom&&(o=u),o))return}let l=Ba(a.length),c=js;for(;l>=0&&l<a.length;){const d=a[l],u=n.getElementByKey(d);if(u===null)break;const p=new kr(s.x,s.y),m=Ye.fromDOM(u),{marginTop:f,marginBottom:y}=Sr(u),v=m.generateNewRect({bottom:m.bottom+y,left:i.left,right:i.right,top:m.top-f}),{result:b,reason:{isOnTopSide:g,isOnBottomSide:w}}=v.contains(p);if(b){o=u,Wt=l;break}c===js&&(g?c=Fa:w?c=Pa:c=1/0),l+=c}}),o}function Wa(e){return!!e.closest(`.${La}`)}function Ha(e,n,s){if(!e){n.style.opacity="0",n.style.transform="translate(-10000px, -10000px)";return}const r=e.getBoundingClientRect(),i=window.getComputedStyle(e),a=n.getBoundingClientRect(),o=s.getBoundingClientRect(),l=r.top+(parseInt(i.lineHeight,10)-a.height)/2-o.top,c=Sn;n.style.opacity="1",n.style.transform=`translate(${c}px, ${l}px)`}function Ua(e,n){const{transform:s}=n.style;n.style.transform="translateZ(0)",e.setDragImage(n,0,0),setTimeout(()=>{n.style.transform=s})}function qa(e,n,s,r){const{top:i,height:a}=n.getBoundingClientRect(),{top:o,width:l}=r.getBoundingClientRect(),{marginTop:c,marginBottom:d}=Sr(n);let u=i;s>=i?u+=a+d/2:u-=c/2;const p=u-o-Da,m=Ns-Sn;e.style.transform=`translate(${m}px, ${p}px)`,e.style.width=`${l-(Ns-Sn)*2}px`,e.style.opacity=".4"}function Va(e){e&&(e.style.opacity="0",e.style.transform="translate(-10000px, -10000px)")}function Ya(e,n,s){const r=n.parentElement,i=h.useRef(null),a=h.useRef(null),o=h.useRef(!1),[l,c]=h.useState(null);h.useEffect(()=>{function p(f){const y=f.target;if(!fn(y)){c(null);return}if(Wa(y))return;const v=xn(n,e,f);c(v)}function m(){c(null)}return r==null||r.addEventListener("mousemove",p),r==null||r.addEventListener("mouseleave",m),()=>{r==null||r.removeEventListener("mousemove",p),r==null||r.removeEventListener("mouseleave",m)}},[r,n,e]),h.useEffect(()=>{i.current&&Ha(l,i.current,n)},[n,l]),h.useEffect(()=>{function p(f){if(!o.current)return!1;const[y]=_e.eventFiles(f);if(y)return!1;const{pageY:v,target:b}=f;if(!fn(b))return!1;const g=xn(n,e,f,!0),w=a.current;return g===null||w===null?!1:(qa(w,g,v,n),f.preventDefault(),!0)}function m(f){if(!o.current)return!1;const[y]=_e.eventFiles(f);if(y)return!1;const{target:v,dataTransfer:b,pageY:g}=f,w=(b==null?void 0:b.getData(vs))||"",T=x.$getNodeByKey(w);if(!T||!fn(v))return!1;const $=xn(n,e,f,!0);if(!$)return!1;const _=x.$getNearestNodeFromDOMNode($);if(!_)return!1;if(_===T)return!0;const j=$.getBoundingClientRect().top;return g>=j?_.insertAfter(T):_.insertBefore(T),c(null),!0}return te.mergeRegister(e.registerCommand(x.DRAGOVER_COMMAND,f=>p(f),x.COMMAND_PRIORITY_LOW),e.registerCommand(x.DROP_COMMAND,f=>m(f),x.COMMAND_PRIORITY_HIGH))},[n,e]);function d(p){const m=p.dataTransfer;if(!m||!l)return;Ua(m,l);let f="";e.update(()=>{const y=x.$getNearestNodeFromDOMNode(l);y&&(f=y.getKey())}),o.current=!0,m.setData(vs,f)}function u(){o.current=!1,Va(a.current)}return Oe.createPortal(t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"icon draggable-block-menu",ref:i,draggable:!0,onDragStart:d,onDragEnd:u,children:t.jsx("div",{className:s?"icon":""})}),t.jsx("div",{className:"draggable-block-target-line",ref:a})]}),n)}function Ga({anchorElem:e=document.body}){const[n]=ne.useLexicalComposerContext();return Ya(n,e,n._editable)}function Tt(e){const n=e.anchor,s=e.focus,r=e.anchor.getNode(),i=e.focus.getNode();return r===i?r:e.isBackward()?he.$isAtNodeEnd(s)?r:i:he.$isAtNodeEnd(n)?r:i}const Ja=10,Ka=5;function Cs(e,n,s,r=Ja,i=Ka){const a=s.parentElement;if(e===null||!a){n.style.opacity="0",n.style.transform="translate(-10000px, -10000px)";return}const o=n.getBoundingClientRect(),l=s.getBoundingClientRect(),c=a.getBoundingClientRect();let d=e.top-r,u=e.left-i;d<c.top&&(d+=o.height+e.height+r*2),u+o.width>c.right&&(u=c.right-o.width-i),d-=l.top,u-=l.left,n.style.opacity="1",n.style.transform=`translate(${u}px, ${d}px)`}function Yt(e){const n=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,s=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+/]+=*$/i;return e=String(e).trim(),e.match(n)||e.match(s)?e:"https://"}const Xa=new RegExp(/((([A-Za-z]{3,9}:(?:\/\/)?)(?:[-;:&=+$,\w]+@)?[A-Za-z0-9.-]+|(?:www.|[-;:&=+$,\w]+@)[A-Za-z0-9.-]+)((?:\/[+~%/.\w-_]*)?\??(?:[-+=&;%@.\w_]*)#?(?:[\w]*))?)/);function Za(e){return e==="https://"||Xa.test(e)}function Qa({editor:e,isLink:n,setIsLink:s,anchorElem:r,isLinkEditMode:i,setIsLinkEditMode:a}){const o=h.useRef(null),l=h.useRef(null),[c,d]=h.useState(""),[u,p]=h.useState("https://"),[m,f]=h.useState(null),y=h.useCallback(()=>{var j,C;const g=x.$getSelection();if(x.$isRangeSelection(g)){const k=Tt(g),N=k.getParent();ce.$isLinkNode(N)?d(N.getURL()):ce.$isLinkNode(k)?d(k.getURL()):d("")}const w=o.current,T=window.getSelection(),$=document.activeElement;if(w===null)return;const _=e.getRootElement();if(g!==null&&T!==null&&_!==null&&_.contains(T.anchorNode)&&e.isEditable()){const k=(C=(j=T.focusNode)==null?void 0:j.parentElement)==null?void 0:C.getBoundingClientRect();k&&(k.y+=40,Cs(k,w,r)),f(g)}else(!$||$.className!=="link-input")&&(_!==null&&Cs(null,w,r),f(null),a&&a(!1),d(""));return!0},[r,e,a]);h.useEffect(()=>{const g=r.parentElement,w=()=>{e.getEditorState().read(()=>{y()})};return window.addEventListener("resize",w),g&&g.addEventListener("scroll",w),()=>{window.removeEventListener("resize",w),g&&g.removeEventListener("scroll",w)}},[r.parentElement,e,y]),h.useEffect(()=>te.mergeRegister(e.registerUpdateListener(({editorState:g})=>{g.read(()=>{y()})}),e.registerCommand(x.SELECTION_CHANGE_COMMAND,()=>(y(),!0),x.COMMAND_PRIORITY_LOW),e.registerCommand(x.KEY_ESCAPE_COMMAND,()=>n?(s(!1),!0):!1,x.COMMAND_PRIORITY_HIGH)),[e,y,s,n]),h.useEffect(()=>{e.getEditorState().read(()=>{y()})},[e,y]),h.useEffect(()=>{i&&l.current&&l.current.focus()},[i,n]);const v=g=>{g.key==="Enter"?(g.preventDefault(),b()):g.key==="Escape"&&(g.preventDefault(),a&&a(!1))},b=()=>{m!==null&&(c!==""&&e.dispatchCommand(ce.TOGGLE_LINK_COMMAND,Yt(u)),p("https://"),a&&a(!1))};return t.jsx("div",{ref:o,className:"link-editor",children:n?i?t.jsxs(t.Fragment,{children:[t.jsx("input",{ref:l,className:"link-input",value:u,onChange:g=>{p(g.target.value)},onKeyDown:g=>{v(g)}}),t.jsxs("div",{children:[t.jsx("div",{className:"link-cancel",role:"button",tabIndex:0,onMouseDown:g=>g.preventDefault(),onClick:()=>{a&&a(!1)}}),t.jsx("div",{className:"link-confirm",role:"button",tabIndex:0,onMouseDown:g=>g.preventDefault(),onClick:b})]})]}):t.jsxs("div",{className:"link-view",children:[t.jsx("a",{href:Yt(c),target:"_blank",rel:"noopener noreferrer",children:c}),t.jsx("div",{className:"link-edit",role:"button",tabIndex:0,onMouseDown:g=>g.preventDefault(),onClick:()=>{p(c),a&&a(!0)}}),t.jsx("div",{className:"link-trash",role:"button",tabIndex:0,onMouseDown:g=>g.preventDefault(),onClick:()=>{e.dispatchCommand(ce.TOGGLE_LINK_COMMAND,null)}})]}):null})}function el(e,n,s,r){const[i,a]=h.useState(e),[o,l]=h.useState(!1);return h.useEffect(()=>{function c(){const d=x.$getSelection();if(x.$isRangeSelection(d)){const u=Tt(d),p=te.$findMatchingParent(u,ce.$isLinkNode),m=te.$findMatchingParent(u,ce.$isAutoLinkNode);l(p!==null&&m===null)}}return te.mergeRegister(e.registerUpdateListener(({editorState:d})=>{d.read(()=>{c()})}),e.registerCommand(x.SELECTION_CHANGE_COMMAND,(d,u)=>(c(),a(u),!1),x.COMMAND_PRIORITY_CRITICAL),e.registerCommand(x.CLICK_COMMAND,d=>{const u=x.$getSelection();if(x.$isRangeSelection(u)){const p=Tt(u),m=te.$findMatchingParent(p,ce.$isLinkNode);if(ce.$isLinkNode(m)&&(d.metaKey||d.ctrlKey))return window.open(m.getURL(),"_blank"),!0}return!1},x.COMMAND_PRIORITY_LOW))},[e]),Oe.createPortal(t.jsx(Qa,{editor:i,isLink:o,anchorElem:n,setIsLink:l,isLinkEditMode:s,setIsLinkEditMode:r}),n)}function tl({anchorElem:e=document.body,isLinkEditMode:n,setIsLinkEditMode:s}){const[r]=ne.useLexicalComposerContext();return el(r,e,n,s)}function nl(e,n){const s=e.getRangeAt(0);let r;if(e.anchorNode===n){let i=n;for(;i.firstElementChild!=null;)i=i.firstElementChild;r=i.getBoundingClientRect()}else r=s.getBoundingClientRect();return r}const sl=10,rl=5;function il(e,n,s,r=sl,i=rl){const a=s.parentElement;if(e===null||!a){n.style.opacity="0",n.style.transform="translate(-10000px, -10000px)";return}const o=n.getBoundingClientRect(),l=s.getBoundingClientRect(),c=a.getBoundingClientRect();let d=e.top-o.height-r,u=e.left-i;d<c.top&&(d+=o.height+e.height+r*2),u+o.width>c.right&&(u=c.right-o.width-i),d-=l.top,u-=l.left,n.style.opacity="1",n.style.transform=`translate(${u}px, ${d}px)`}function ol({editor:e,anchorElem:n,isLink:s,isBold:r,isItalic:i,isUnderline:a,isCode:o,isStrikethrough:l,isSubscript:c,isSuperscript:d}){const u=h.useRef(null),p=h.useCallback(()=>{s?e.dispatchCommand(ce.TOGGLE_LINK_COMMAND,null):e.dispatchCommand(ce.TOGGLE_LINK_COMMAND,"https://")},[e,s]);function m(v){u!=null&&u.current&&(v.buttons===1||v.buttons===3)&&(u.current.style.pointerEvents="none")}function f(v){u!=null&&u.current&&(u.current.style.pointerEvents="auto")}h.useEffect(()=>{if(u!=null&&u.current)return document.addEventListener("mousemove",m),document.addEventListener("mouseup",f),()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",f)}},[u]);const y=h.useCallback(()=>{const v=x.$getSelection(),b=u.current,g=window.getSelection();if(b===null)return;const w=e.getRootElement();if(v!==null&&g!==null&&!g.isCollapsed&&w!==null&&w.contains(g.anchorNode)){const T=nl(g,w);il(T,b,n)}},[e,n]);return h.useEffect(()=>{const v=n.parentElement,b=()=>{e.getEditorState().read(()=>{y()})};return window.addEventListener("resize",b),v&&v.addEventListener("scroll",b),()=>{window.removeEventListener("resize",b),v&&v.removeEventListener("scroll",b)}},[e,y,n]),h.useEffect(()=>(e.getEditorState().read(()=>{y()}),te.mergeRegister(e.registerUpdateListener(({editorState:v})=>{v.read(()=>{y()})}),e.registerCommand(x.SELECTION_CHANGE_COMMAND,()=>(y(),!1),x.COMMAND_PRIORITY_LOW))),[e,y]),t.jsx("div",{ref:u,className:e.isEditable()&&"floating-text-format-popup",children:e.isEditable()&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>{e.dispatchCommand(x.FORMAT_TEXT_COMMAND,"bold")},className:"popup-item spaced "+(r?"active":""),"aria-label":"Format text as bold",children:t.jsx("i",{className:"format bold"})}),t.jsx("button",{onClick:()=>{e.dispatchCommand(x.FORMAT_TEXT_COMMAND,"italic")},className:"popup-item spaced "+(i?"active":""),"aria-label":"Format text as italics",children:t.jsx("i",{className:"format italic"})}),t.jsx("button",{onClick:()=>{e.dispatchCommand(x.FORMAT_TEXT_COMMAND,"underline")},className:"popup-item spaced "+(a?"active":""),"aria-label":"Format text to underlined",children:t.jsx("i",{className:"format underline"})}),t.jsx("button",{onClick:()=>{e.dispatchCommand(x.FORMAT_TEXT_COMMAND,"strikethrough")},className:"popup-item spaced "+(l?"active":""),"aria-label":"Format text with a strikethrough",children:t.jsx("i",{className:"format strikethrough"})}),t.jsx("button",{onClick:()=>{e.dispatchCommand(x.FORMAT_TEXT_COMMAND,"subscript")},className:"popup-item spaced "+(c?"active":""),title:"Subscript","aria-label":"Format Subscript",children:t.jsx("i",{className:"format subscript"})}),t.jsx("button",{onClick:()=>{e.dispatchCommand(x.FORMAT_TEXT_COMMAND,"superscript")},className:"popup-item spaced "+(d?"active":""),title:"Superscript","aria-label":"Format Superscript",children:t.jsx("i",{className:"format superscript"})}),t.jsx("button",{onClick:()=>{e.dispatchCommand(x.FORMAT_TEXT_COMMAND,"code")},className:"popup-item spaced "+(o?"active":""),"aria-label":"Insert code block",children:t.jsx("i",{className:"format code"})}),t.jsx("button",{onClick:p,className:"popup-item spaced "+(s?"active":""),"aria-label":"Insert link",children:t.jsx("i",{className:"format link"})})]})})}function al(e,n){const[s,r]=h.useState(!1),[i,a]=h.useState(!1),[o,l]=h.useState(!1),[c,d]=h.useState(!1),[u,p]=h.useState(!1),[m,f]=h.useState(!1),[y,v]=h.useState(!1),[b,g]=h.useState(!1),[w,T]=h.useState(!1),$=h.useCallback(()=>{e.getEditorState().read(()=>{if(e.isComposing())return;const _=x.$getSelection(),j=window.getSelection(),C=e.getRootElement();if(j!==null&&(!x.$isRangeSelection(_)||C===null||!C.contains(j.anchorNode))){r(!1);return}if(!x.$isRangeSelection(_))return;const k=Tt(_);l(_.hasFormat("bold")),d(_.hasFormat("italic")),p(_.hasFormat("underline")),f(_.hasFormat("strikethrough")),v(_.hasFormat("subscript")),g(_.hasFormat("superscript")),T(_.hasFormat("code"));const N=k.getParent();ce.$isLinkNode(N)||ce.$isLinkNode(k)?a(!0):a(!1),!ge.$isCodeHighlightNode(_.anchor.getNode())&&_.getTextContent()!==""?r(x.$isTextNode(k)):r(!1);const M=_.getTextContent().replace(/\n/g,"");if(!_.isCollapsed()&&M===""){r(!1);return}})},[e]);return h.useEffect(()=>(document.addEventListener("selectionchange",$),()=>{document.removeEventListener("selectionchange",$)}),[$]),h.useEffect(()=>te.mergeRegister(e.registerUpdateListener(()=>{$()}),e.registerRootListener(()=>{e.getRootElement()===null&&r(!1)})),[e,$]),!s||i?null:Oe.createPortal(t.jsx(ol,{editor:e,anchorElem:n,isLink:i,isBold:o,isItalic:c,isStrikethrough:m,isSubscript:y,isSuperscript:b,isUnderline:u,isCode:w}),n)}function _s({anchorElem:e=document.body}){const[n]=ne.useLexicalComposerContext();return al(n,e)}const ll=/(^|$|[^A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎↃↄⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〆〱-〵〻〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛥꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ])(congrats|congratulations|gratuluju|gratuluji|gratulujeme|blahopřeju|blahopřeji|blahopřejeme|Til lykke|Tillykke|Glückwunsch|Gratuliere|felicitaciones|enhorabuena|paljon onnea|onnittelut|Félicitations|gratula|gratulálok|gratulálunk|congratulazioni|complimenti|おめでとう|おめでとうございます|축하해|축하해요|gratulerer|Gefeliciteerd|gratulacje|Parabéns|parabéns|felicitações|felicitări|мои поздравления|поздравляем|поздравляю|gratulujem|blahoželám|ยินดีด้วย|ขอแสดงความยินดี|tebrikler|tebrik ederim|恭喜|祝贺你|恭喜你|恭喜|恭喜|baie geluk|veels geluk|অভিনন্দন|Čestitam|Čestitke|Čestitamo|Συγχαρητήρια|Μπράβο|અભિનંદન|badhai|बधाई|अभिनंदन|Честитам|Свака част|hongera|வாழ்த்துகள்|வாழ்த்துக்கள்|అభినందనలు|അഭിനന്ദനങ്ങൾ|Chúc mừng|מזל טוב|mazel tov|mazal tov)(^|$|[^A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎↃↄⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〆〱-〵〻〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛥꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ])/i;function cl(){const[e]=ne.useLexicalComposerContext();h.useEffect(()=>{if(!e.hasNodes([Xe]))throw new Error("KeywordsPlugin: KeywordNode not registered on editor")},[e]);const n=h.useCallback(r=>lr(r.getTextContent()),[]),s=h.useCallback(r=>{const i=ll.exec(r);if(i===null)return null;const a=i[2].length,o=i.index+i[1].length;return{end:o+a,start:o}},[]);return xi.useLexicalTextEntity(s,Xe,n),null}function ks(){return t.jsx(gi.LinkPlugin,{validateUrl:Za})}function dl(e){const n=e.getNodes();return n.length===0?new Set([e.anchor.getNode().getParentOrThrow(),e.focus.getNode().getParentOrThrow()]):new Set(n.map(s=>x.$isElementNode(s)?s:s.getParentOrThrow()))}function ul(e){const n=x.$getSelection();if(!x.$isRangeSelection(n))return!1;const s=dl(n);let r=0;for(const i of s)if(xe.$isListNode(i))r=Math.max(xe.$getListDepth(i)+1,r);else if(xe.$isListItemNode(i)){const a=i.getParent();if(!xe.$isListNode(a))throw new Error("ListMaxIndentLevelPlugin: A ListItemNode must have a ListNode for a parent.");r=Math.max(xe.$getListDepth(a)+1,r)}return r<=e}function pl({maxDepth:e}){const[n]=ne.useLexicalComposerContext();return h.useEffect(()=>n.registerCommand(x.INDENT_CONTENT_COMMAND,()=>!ul(e??7),x.COMMAND_PRIORITY_CRITICAL),[n,e]),null}function ml({maxLength:e}){const[n]=ne.useLexicalComposerContext();return h.useEffect(()=>{let s=null;return n.registerNodeTransform(x.RootNode,r=>{const i=x.$getSelection();if(!x.$isRangeSelection(i)||!i.isCollapsed())return;const a=n.getEditorState(),o=a.read(()=>r.getTextContentSize()),l=r.getTextContentSize();if(o!==l){const c=l-e,d=i.anchor;c>0&&(o===e&&s!==a?(s=a,te.$restoreEditorState(n,a)):he.trimTextContentFromAnchor(n,d,c))}})},[n,e]),null}const hl=1,fl=100;let Tr=0,Ss=!1;function xl(){window.addEventListener("keydown",e=>{e.keyCode===9&&(Tr=e.timeStamp)},!0)}function gl(){const[e]=ne.useLexicalComposerContext();return h.useEffect(()=>(Ss||(xl(),Ss=!0),e.registerCommand(x.FOCUS_COMMAND,n=>{const s=x.$getSelection();return x.$isRangeSelection(s)&&Tr+fl>n.timeStamp&&x.$setSelection(s.clone()),!1},hl)),[e]),null}const bl=["#d0021b","#f5a623","#f8e71c","#8b572a","#7ed321","#417505","#bd10e0","#9013fe","#4a90e2","#50e3c2","#b8e986","#000000","#4a4a4a","#9b9b9b","#ffffff"],wt=214,Ts=150,Le={"color-picker-wrapper":"p-[20px]","color-picker-basic-color":"flex flex-wrap gap-[10px] m-0 p-0","color-picker-basic-color-button":"border-[1px] border-[solid] border-[#ccc] rounded-[4px] h-[16px] w-[16px] cursor-pointer list-none","color-picker-basic-color-button.active":"[box-shadow:0px_0px_2px_2px_rgba(0,_0,_0,_0.3)]","color-picker-saturation":"w-full relative mt-[15px] h-[150px] bg-[linear-gradient(transparent,_black),_linear-gradient(to_right,_white,_transparent)] select-none","color-picker-saturation_cursor":"absolute w-[20px] h-[20px] border-[2px] border-[solid] border-[#ffffff] rounded-[50%] [box-shadow:0_0_15px_#00000026] box-border -translate-x-[10px] -translate-y-[10px]","color-picker-hue":"w-full relative mt-[15px] h-[12px] bg-[linear-gradient(_to_right,_rgb(255,_0,_0),_rgb(255,_255,_0),_rgb(0,_255,_0),_rgb(0,_255,_255),_rgb(0,_0,_255),_rgb(255,_0,_255),_rgb(255,_0,_0)_)] select-none rounded-[12px]","color-picker-hue_cursor":"absolute w-[20px] h-[20px] border-[2px] border-[solid] border-[#ffffff] rounded-full [box-shadow:#0003_0_0_0_0.5px] box-border -translate-x-[10px] -translate-y-[4px]","color-picker-color":"border-[1px] border-[solid] border-[#ccc] mt-[15px] w-full h-[20px]"};function Er({color:e,onChange:n}){const[s,r]=h.useState(it("hex",e)),[i,a]=h.useState(e),o=h.useRef(null),l=h.useMemo(()=>({x:s.hsv.s/100*wt,y:(100-s.hsv.v)/100*Ts}),[s.hsv.s,s.hsv.v]),c=h.useMemo(()=>({x:s.hsv.h/360*wt}),[s.hsv]),d=m=>{if(a(m),/^#[0-9A-Fa-f]{6}$/i.test(m)){const f=it("hex",m);r(f)}},u=({x:m,y:f})=>{const y={...s.hsv,s:m/wt*100,v:100-f/Ts*100},v=it("hsv",y);r(v),a(v.hex)},p=({x:m})=>{const f={...s.hsv,h:m/wt*360},y=it("hsv",f);r(y),a(y.hex)};return h.useEffect(()=>{o.current!==null&&n&&(n(s.hex),a(s.hex))},[s,n]),h.useEffect(()=>{if(e===void 0)return;const m=it("hex",e);r(m),a(m.hex)},[e]),t.jsxs("div",{className:`${Le["color-picker-wrapper"]}`,style:{width:wt},ref:o,children:[t.jsx(pt,{label:"Hex",onChange:d,value:i}),t.jsx("div",{className:`${Le["color-picker-basic-color"]}`,children:bl.map(m=>t.jsx("button",{className:`${Le["color-picker-basic-color-button"]} ${m===s.hex?Le["color-picker-basic-color-button.active"]:""}`,style:{backgroundColor:m},onClick:()=>{a(m),r(it("hex",m))}},m))}),t.jsx(Es,{className:`${Le["color-picker-saturation"]}`,style:{backgroundColor:`hsl(${s.hsv.h}, 100%, 50%)`},onChange:u,children:t.jsx("div",{className:`${Le["color-picker-saturation_cursor"]}`,style:{backgroundColor:s.hex,left:l.x,top:l.y}})}),t.jsx(Es,{className:`${Le["color-picker-hue"]}`,onChange:p,children:t.jsx("div",{className:`${Le["color-picker-hue_cursor"]}`,style:{backgroundColor:`hsl(${s.hsv.h}, 100%, 50%)`,left:c.x}})}),t.jsx("div",{className:`${Le["color-picker-color"]}`,style:{backgroundColor:s.hex}})]})}function Es({className:e,style:n,onChange:s,children:r}){const i=h.useRef(null),a=l=>{if(i.current){const{current:c}=i,{width:d,height:u,left:p,top:m}=c.getBoundingClientRect(),f=$s(l.clientX-p,d,0),y=$s(l.clientY-m,u,0);s({x:f,y})}},o=l=>{if(l.button!==0)return;a(l);const c=u=>{a(u)},d=u=>{document.removeEventListener("mousemove",c,!1),document.removeEventListener("mouseup",d,!1),a(u)};document.addEventListener("mousemove",c,!1),document.addEventListener("mouseup",d,!1)};return t.jsx("div",{ref:i,className:e,style:n,onMouseDown:o,children:r})}function $s(e,n,s){return e>n?n:e<s?s:e}function Ms(e){if(e.startsWith("#")){if(e.length===4||e.length===5)return e=e.split("").map((n,s)=>s?n+n:"#").join(""),e;if(e.length===7||e.length===9)return e}else{const n=document.createElement("canvas").getContext("2d");if(!n)throw new Error("2d context not supported or canvas already initialized");return n.fillStyle=e,n.fillStyle}return"#000000"}function Is(e){const n=(e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(s,r,i,a)=>"#"+r+r+i+i+a+a).substring(1).match(/.{2}/g)||[]).map(s=>parseInt(s,16));return{b:n[2],g:n[1],r:n[0]}}function gn({r:e,g:n,b:s}){e/=255,n/=255,s/=255;const r=Math.max(e,n,s),i=r-Math.min(e,n,s),a=i?(r===e?(n-s)/i+(n<s?6:0):r===n?2+(s-e)/i:4+(e-n)/i)*60:0,o=r?i/r*100:0,l=r*100;return{h:a,s:o,v:l}}function yl({h:e,s:n,v:s}){n/=100,s/=100;const r=~~(e/60),i=e/60-r,a=s*(1-n),o=s*(1-n*i),l=s*(1-n*(1-i)),c=r%6,d=Math.round([s,o,a,a,l,s][c]*255),u=Math.round([l,s,s,o,a,a][c]*255);return{b:Math.round([a,a,l,s,s,o][c]*255),g:u,r:d}}function As({b:e,g:n,r:s}){return"#"+[s,n,e].map(r=>r.toString(16).padStart(2,"0")).join("")}function it(e,n){let s=Ms("#121212"),r=Is(s),i=gn(r);return e==="hex"?(s=Ms(n),r=Is(s),i=gn(r)):e==="rgb"?(r=n,s=As(r),i=gn(r)):e==="hsv"&&(i=n,r=yl(i),s=As(r)),{hex:s,hsv:i,rgb:r}}function bn(e){const n=e.getShape();return{columns:n.toX-n.fromX+1,rows:n.toY-n.fromY+1}}function wl(e){const n=e.getNodes(),s=[];let r=null,i=null,a=0;for(let o=0;o<n.length;o++){const l=n[o];if(D.$isTableCellNode(l)){const c=l.getParentOrThrow();if(yr(D.$isTableRowNode(c),"Expected CellNode to have a RowNode parent"),r!==c){if(i!==null&&a!==i)return!1;r!==null&&(i=a),r=c,a=0}const d=l.__colSpan;for(let u=0;u<d;u++)s[a+u]===void 0&&(s[a+u]=0),s[a+u]+=l.__rowSpan;a+=d}}return(i===null||a===i)&&s.every(o=>o===s[0])}function vl(){const e=x.$getSelection();if(x.$isRangeSelection(e)&&!e.isCollapsed()||x.DEPRECATED_$isGridSelection(e)&&!e.anchor.is(e.focus)||!x.$isRangeSelection(e)&&!x.DEPRECATED_$isGridSelection(e))return!1;const[n]=x.DEPRECATED_$getNodeTriplet(e.anchor);return n.__colSpan>1||n.__rowSpan>1}function Os(e){if(e.getChildrenSize()!==1)return!1;const n=e.getFirstChildOrThrow();return!(!x.$isParagraphNode(n)||!n.isEmpty())}function Nl(e){const n=e.getLastDescendant();x.$isTextNode(n)?n.select():x.$isElementNode(n)?n.selectEnd():n!==null&&n.selectNext()}function Rs(e){return e.getEditorState().read(()=>{const n=x.$getSelection();if(x.$isRangeSelection(n)||x.DEPRECATED_$isGridSelection(n)){const[s]=x.DEPRECATED_$getNodeTriplet(n.anchor);if(D.$isTableCellNode(s))return s.getBackgroundColor()}return null})}function jl({onClose:e,tableCellNode:n,setIsMenuOpen:s,contextRef:r,cellMerge:i,showColorPickerModal:a}){const[o]=ne.useLexicalComposerContext(),l=h.useRef(null),[c,d]=h.useState(n),[u,p]=h.useState({columns:1,rows:1}),[m,f]=h.useState(!1),[y,v]=h.useState(!1),[b,g]=h.useState(()=>Rs(o)||"");h.useEffect(()=>o.registerMutationListener(D.TableCellNode,P=>{P.get(c.getKey())==="updated"&&(o.getEditorState().read(()=>{d(c.getLatest())}),g(Rs(o)||""))}),[o,c]),h.useEffect(()=>{o.getEditorState().read(()=>{const P=x.$getSelection();if(x.DEPRECATED_$isGridSelection(P)){const F=bn(P);p(bn(P)),f(wl(P)&&(F.columns>1||F.rows>1))}v(vl())})},[o]),h.useEffect(()=>{const P=r.current,F=l.current,Y=o.getRootElement();if(P!=null&&F!=null&&Y!=null){const V=Y.getBoundingClientRect(),H=P.getBoundingClientRect();F.style.opacity="1";const J=F.getBoundingClientRect(),L=5;let G=H.right+L;if(G+J.width>window.innerWidth||G+J.width>V.right){const ee=H.left-J.width-L;G=(ee<0?L:ee)+window.pageXOffset}F.style.left=`${G+window.pageXOffset}px`;let U=H.top;if(U+J.height>window.innerHeight){const ee=H.bottom-J.height;U=(ee<0?L:ee)+window.pageYOffset}F.style.top=`${U+ +window.pageYOffset}px`}},[r,l,o]),h.useEffect(()=>{function P(F){l.current!=null&&r.current!=null&&!l.current.contains(F.target)&&!r.current.contains(F.target)&&s(!1)}return window.addEventListener("click",P),()=>window.removeEventListener("click",P)},[s,r]);const w=h.useCallback(()=>{o.update(()=>{if(c.isAttached()){const F=D.$getTableNodeFromLexicalNodeOrThrow(c),Y=o.getElementByKey(F.getKey());if(!Y)throw new Error("Expected to find tableElement in DOM");const V=D.getTableSelectionFromTableElement(Y);V!==null&&V.clearHighlight(),F.markDirty(),d(c.getLatest())}x.$getRoot().selectStart()})},[o,c]),T=()=>{o.update(()=>{const P=x.$getSelection();if(x.DEPRECATED_$isGridSelection(P)){const{columns:F,rows:Y}=bn(P),V=P.getNodes();let H=null;for(let J=0;J<V.length;J++){const L=V[J];if(x.DEPRECATED_$isGridCellNode(L))if(H===null){L.setColSpan(F).setRowSpan(Y),H=L;const G=Os(L);let U;G&&x.$isParagraphNode(U=L.getFirstChild())&&U.remove()}else x.DEPRECATED_$isGridCellNode(H)&&(Os(L)||H.append(...L.getChildren()),L.remove())}H!==null&&(H.getChildrenSize()===0&&H.append(x.$createParagraphNode()),Nl(H)),e()}})},$=()=>{o.update(()=>{D.$unmergeCell()})},_=h.useCallback(P=>{o.update(()=>{D.$insertTableRow__EXPERIMENTAL(P),e()})},[o,e]),j=h.useCallback(P=>{o.update(()=>{for(let F=0;F<u.columns;F++)D.$insertTableColumn__EXPERIMENTAL(P);e()})},[o,e,u.columns]),C=h.useCallback(()=>{o.update(()=>{D.$deleteTableRow__EXPERIMENTAL(),e()})},[o,e]),k=h.useCallback(()=>{o.update(()=>{D.$getTableNodeFromLexicalNodeOrThrow(c).remove(),w(),e()})},[o,c,w,e]),N=h.useCallback(()=>{o.update(()=>{D.$deleteTableColumn__EXPERIMENTAL(),e()})},[o,e]),M=h.useCallback(()=>{o.update(()=>{const P=D.$getTableNodeFromLexicalNodeOrThrow(c),F=D.$getTableRowIndexFromTableCellNode(c),Y=P.getChildren();if(F>=Y.length||F<0)throw new Error("Expected table cell to be inside of table row.");const V=Y[F];if(!D.$isTableRowNode(V))throw new Error("Expected table row");V.getChildren().forEach(H=>{if(!D.$isTableCellNode(H))throw new Error("Expected table cell");H.toggleHeaderStyle(D.TableCellHeaderStates.ROW)}),w(),e()})},[o,c,w,e]),I=h.useCallback(()=>{o.update(()=>{const P=D.$getTableNodeFromLexicalNodeOrThrow(c),F=D.$getTableColumnIndexFromTableCellNode(c),Y=P.getChildren();for(let V=0;V<Y.length;V++){const H=Y[V];if(!D.$isTableRowNode(H))throw new Error("Expected table row");const J=H.getChildren();if(F>=J.length||F<0)throw new Error("Expected table cell to be inside of table row.");const L=J[F];if(!D.$isTableCellNode(L))throw new Error("Expected table cell");L.toggleHeaderStyle(D.TableCellHeaderStates.COLUMN)}w(),e()})},[o,c,w,e]),W=h.useCallback(P=>{o.update(()=>{const F=x.$getSelection();if(x.$isRangeSelection(F)||x.DEPRECATED_$isGridSelection(F)){const[Y]=x.DEPRECATED_$getNodeTriplet(F.anchor);D.$isTableCellNode(Y)&&Y.setBackgroundColor(P)}})},[o]);let E=null;return i&&(m?E=t.jsx("button",{className:"item",onClick:()=>T(),"data-test-id":"table-merge-cells",children:"Merge cells"}):y&&(E=t.jsx("button",{className:"item",onClick:()=>$(),"data-test-id":"table-unmerge-cells",children:"Unmerge cells"}))),Oe.createPortal(t.jsxs("div",{className:"dropdown",ref:l,onClick:P=>{P.stopPropagation()},children:[E,t.jsx("button",{className:"item",onClick:()=>a("Cell background color",()=>t.jsx(Er,{color:b,onChange:W})),"data-test-id":"table-background-color",children:t.jsx("span",{className:"text",children:"Background color"})}),t.jsx("hr",{}),t.jsx("button",{className:"item",onClick:()=>_(!1),"data-test-id":"table-insert-row-above",children:t.jsxs("span",{className:"text",children:["Insert"," ",u.rows===1?"row":`${u.rows} rows`," ","above"]})}),t.jsx("button",{className:"item",onClick:()=>_(!0),"data-test-id":"table-insert-row-below",children:t.jsxs("span",{className:"text",children:["Insert"," ",u.rows===1?"row":`${u.rows} rows`," ","below"]})}),t.jsx("hr",{}),t.jsx("button",{className:"item",onClick:()=>j(!1),"data-test-id":"table-insert-column-before",children:t.jsxs("span",{className:"text",children:["Insert"," ",u.columns===1?"column":`${u.columns} columns`," ","left"]})}),t.jsx("button",{className:"item",onClick:()=>j(!0),"data-test-id":"table-insert-column-after",children:t.jsxs("span",{className:"text",children:["Insert"," ",u.columns===1?"column":`${u.columns} columns`," ","right"]})}),t.jsx("hr",{}),t.jsx("button",{className:"item",onClick:()=>N(),"data-test-id":"table-delete-columns",children:t.jsx("span",{className:"text",children:"Delete column"})}),t.jsx("button",{className:"item",onClick:()=>C(),"data-test-id":"table-delete-rows",children:t.jsx("span",{className:"text",children:"Delete row"})}),t.jsx("button",{className:"item",onClick:()=>k(),"data-test-id":"table-delete",children:t.jsx("span",{className:"text",children:"Delete table"})}),t.jsx("hr",{}),t.jsx("button",{className:"item",onClick:()=>M(),children:t.jsxs("span",{className:"text",children:[(c.__headerState&D.TableCellHeaderStates.ROW)===D.TableCellHeaderStates.ROW?"Remove":"Add"," ","row header"]})}),t.jsx("button",{className:"item",onClick:()=>I(),children:t.jsxs("span",{className:"text",children:[(c.__headerState&D.TableCellHeaderStates.COLUMN)===D.TableCellHeaderStates.COLUMN?"Remove":"Add"," ","column header"]})})]}),document.body)}function Cl({anchorElem:e,cellMerge:n}){const[s]=ne.useLexicalComposerContext(),r=h.useRef(null),i=h.useRef(null),[a,o]=h.useState(!1),[l,c]=h.useState(null),[d,u]=It(),p=h.useCallback(()=>{const f=r.current,y=x.$getSelection(),v=window.getSelection(),b=document.activeElement;if(y==null||f==null){c(null);return}const g=s.getRootElement();if(x.$isRangeSelection(y)&&g!==null&&v!==null&&g.contains(v.anchorNode)){const w=D.$getTableCellNodeFromLexicalNode(y.anchor.getNode());if(w==null){c(null);return}if(s.getElementByKey(w.getKey())==null){c(null);return}c(w)}else b||c(null)},[s]);h.useEffect(()=>s.registerUpdateListener(()=>{s.getEditorState().read(()=>{p()})})),h.useEffect(()=>{const f=r.current;if(f!=null&&l!=null){const y=s.getElementByKey(l.getKey());if(y!=null){const v=y.getBoundingClientRect(),b=f.getBoundingClientRect(),g=e.getBoundingClientRect(),w=v.top-g.top+4,T=v.right-b.width-10-g.left;f.style.opacity="1",f.style.transform=`translate(${T}px, ${w}px)`}else f.style.opacity="0",f.style.transform="translate(-10000px, -10000px)"}},[r,l,s,e]);const m=h.useRef(l);return h.useEffect(()=>{m.current!==l&&o(!1),m.current=l},[m,l]),t.jsx("div",{className:"table-cell-action-button-container",ref:r,children:l!=null&&t.jsxs(t.Fragment,{children:[t.jsx("button",{className:"table-cell-action-button chevron-down",onClick:f=>{f.stopPropagation(),o(!a)},ref:i,children:t.jsx("i",{className:"chevron-down"})}),d,a&&t.jsx(jl,{contextRef:i,setIsMenuOpen:o,onClose:()=>o(!1),tableCellNode:l,cellMerge:n,showColorPickerModal:u})]})})}function _l({anchorElem:e=document.body,cellMerge:n=!1}){const s=Qs();return Oe.createPortal(s?t.jsx(Cl,{anchorElem:e,cellMerge:n}):null,e)}const kl=33,Sl=50;function Tl({editor:e}){const n=h.useRef(null),s=h.useRef(null),r=h.useRef(null),i=h.useRef(null),[a,o]=h.useState(null),[l,c]=h.useState(null),[d,u]=h.useState(!1),[p,m]=h.useState(null);h.useEffect(()=>e.registerCommand(x.SELECTION_CHANGE_COMMAND,_=>{const j=x.$getSelection(),C=D.$isTableSelection(j);return d!==C&&u(C),!1},x.COMMAND_PRIORITY_HIGH));const f=h.useCallback(()=>{c(null),n.current=null,m(null),i.current=null,r.current=null},[]);h.useEffect(()=>{const _=j=>{setTimeout(()=>{const C=j.target;if(p){o({x:j.clientX,y:j.clientY});return}if(!(s.current&&s.current.contains(C))&&n.current!==C){n.current=C;const k=D.getDOMCellFromTarget(C);k&&l!==k?e.update(()=>{const N=x.$getNearestNodeFromDOMNode(k.elem);if(!N)throw new Error("TableCellResizer: Table cell node not found.");const M=D.$getTableNodeFromLexicalNodeOrThrow(N),I=e.getElementByKey(M.getKey());if(!I)throw new Error("TableCellResizer: Table element not found.");n.current=C,r.current=I.getBoundingClientRect(),c(k)}):k==null&&f()}},0)};return document.addEventListener("mousemove",_),()=>{document.removeEventListener("mousemove",_)}},[l,p,e,f]);const y=_=>_==="bottom",v=h.useCallback(_=>{if(!l)throw new Error("TableCellResizer: Expected active cell.");e.update(()=>{const j=x.$getNearestNodeFromDOMNode(l.elem);if(!D.$isTableCellNode(j))throw new Error("TableCellResizer: Table cell node not found.");const C=D.$getTableNodeFromLexicalNodeOrThrow(j),k=D.$getTableRowIndexFromTableCellNode(j),N=C.getChildren();if(k>=N.length||k<0)throw new Error("Expected table cell to be inside of table row.");const M=N[k];if(!D.$isTableRowNode(M))throw new Error("Expected table row");M.setHeight(_)})},[l,e]),b=h.useCallback(_=>{if(!l)throw new Error("TableCellResizer: Expected active cell.");e.update(()=>{const j=x.$getNearestNodeFromDOMNode(l.elem);if(!D.$isTableCellNode(j))throw new Error("TableCellResizer: Table cell node not found.");const C=D.$getTableNodeFromLexicalNodeOrThrow(j),k=D.$getTableColumnIndexFromTableCellNode(j),N=C.getChildren();for(let M=0;M<N.length;M++){const I=N[M];if(!D.$isTableRowNode(I))throw new Error("Expected table row");const W=I.getChildren(),F=W.map(V=>V.getColSpan()).reduce((V,H)=>{const J=V[V.length-1]??0;return V.push(J+H),V},[]).findIndex(V=>V>k);if(F>=W.length||F<0)throw new Error("Expected table cell to be inside of table row.");const Y=W[F];if(!D.$isTableCellNode(Y))throw new Error("Expected table cell");Y.setWidth(_)}})},[l,e]),g=h.useCallback(_=>{const j=C=>{if(C.preventDefault(),C.stopPropagation(),!l)throw new Error("TableCellResizer: Expected active cell.");if(i.current){const{x:k,y:N}=i.current;if(l===null)return;if(y(_)){const M=l.elem.getBoundingClientRect().height,I=Math.abs(C.clientY-N),W=_==="bottom"&&N>C.clientY;v(Math.max(W?M-I:I+M,kl))}else{const M=getComputedStyle(l.elem);let I=l.elem.clientWidth;I-=parseFloat(M.paddingLeft)+parseFloat(M.paddingRight);const W=Math.abs(C.clientX-k),E=_==="right"&&k>C.clientX;b(Math.max(E?I-W:W+I,Sl))}f(),document.removeEventListener("mouseup",j)}};return j},[l,f,b,v]),w=h.useCallback(_=>j=>{if(j.preventDefault(),j.stopPropagation(),!l)throw new Error("TableCellResizer: Expected active cell.");i.current={x:j.clientX,y:j.clientY},o(i.current),m(_),document.addEventListener("mouseup",g(_))},[l,g]),$=h.useCallback(()=>{if(l){const{height:_,width:j,top:C,left:k}=l.elem.getBoundingClientRect(),N={bottom:{backgroundColor:"none",cursor:"row-resize",height:"10px",left:`${window.pageXOffset+k}px`,top:`${window.pageYOffset+C+_}px`,width:`${j}px`},right:{backgroundColor:"none",cursor:"col-resize",height:`${_}px`,left:`${window.pageXOffset+k+j}px`,top:`${window.pageYOffset+C}px`,width:"10px"}},M=r.current;return p&&a&&M&&(y(p)?(N[p].left=`${window.pageXOffset+M.left}px`,N[p].top=`${window.pageYOffset+a.y}px`,N[p].height="3px",N[p].width=`${M.width}px`):(N[p].top=`${window.pageYOffset+M.top}px`,N[p].left=`${window.pageXOffset+a.x}px`,N[p].width="3px",N[p].height=`${M.height}px`),N[p].backgroundColor="#adf"),N}return{bottom:null,left:null,right:null,top:null}},[l,p,a])();return t.jsx("div",{ref:s,children:l!=null&&!d&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"TableCellResizer__resizer TableCellResizer__ui",style:$.right||void 0,onMouseDown:w("right")}),t.jsx("div",{className:"TableCellResizer__resizer TableCellResizer__ui",style:$.bottom||void 0,onMouseDown:w("bottom")})]})})}function El(){const[e]=ne.useLexicalComposerContext(),n=Qs();return h.useMemo(()=>n?Oe.createPortal(t.jsx(Tl,{editor:e}),document.body):null,[e,n])}const Gt=624,$r=9;function $l(e){if(e==="h2")return"heading2";if(e==="h3")return"heading3"}function Ml(e){const n=e==null?void 0:e.getClientRects()[0].y;return n>=Gt&&n<=Gt+$r}function Ft(e){return(e==null?void 0:e.getClientRects()[0].y)<Gt}function yn(e){return(e==null?void 0:e.getClientRects()[0].y)>=Gt+$r}function Il({tableOfContents:e}){const[n,s]=h.useState(""),r=h.useRef(0),[i]=ne.useLexicalComposerContext();function a(o,l){i.getEditorState().read(()=>{const c=i.getElementByKey(o);c!==null&&(c.scrollIntoView(),s(o),r.current=l)})}return h.useEffect(()=>{function o(){if(e.length!==0&&r.current<e.length-1){let u=i.getElementByKey(e[r.current][0]);if(u!==null){if(yn(u)){for(;u!==null&&yn(u)&&r.current>0;){const m=i.getElementByKey(e[r.current-1][0]);m!==null&&(Ft(m)||yn(m))&&r.current--,u=m}const p=e[r.current][0];s(p)}else if(Ft(u)){for(;u!==null&&Ft(u)&&r.current<e.length-1;){const m=i.getElementByKey(e[r.current+1][0]);m!==null&&(Ml(m)||Ft(m))&&r.current++,u=m}const p=e[r.current][0];s(p)}}}else r.current=0}let l;function c(u,p){clearTimeout(l),l=setTimeout(u,p)}function d(){c(o,10)}return document.addEventListener("scroll",d),()=>document.removeEventListener("scroll",d)},[e,i]),t.jsx("div",{className:"table-of-contents",children:t.jsx("ul",{className:"headings",children:e.map(([o,l,c],d)=>d===0?t.jsxs("div",{className:"normal-heading-wrapper",children:[t.jsx("div",{className:"first-heading",onClick:()=>a(o,d),role:"button",tabIndex:0,children:(""+l).length>20?l.substring(0,20)+"...":l}),t.jsx("br",{})]},o):t.jsx("div",{className:`normal-heading-wrapper ${n===o?"selected-heading-wrapper":""}`,children:t.jsx("div",{onClick:()=>a(o,d),role:"button",className:$l(c),tabIndex:0,children:t.jsx("li",{className:`normal-heading ${n===o?"selected-heading":""}
                    `,children:(""+l).length>27?l.substring(0,27)+"...":l})})},o))})})}function Al(){return t.jsx(bi,{children:e=>t.jsx(Il,{tableOfContents:e})})}const Ol=Mt&&"documentMode"in document?document.documentMode:null,Ds=Mt&&/Mac|iPod|iPhone|iPad/.test(navigator.platform);Mt&&"InputEvent"in window&&!Ol&&"getTargetRanges"in new window.InputEvent("input");const Mr=h.createContext(null),Ls=4;function X({children:e,className:n,onClick:s,title:r}){const i=h.useRef(null),a=h.useContext(Mr);if(a===null)throw new Error("DropDownItem must be used within a DropDown");const{registerItem:o}=a;return h.useEffect(()=>{i&&i.current&&o(i)},[i,o]),t.jsx("button",{className:n,onClick:s,ref:i,title:r,type:"button",children:e})}function Rl({children:e,dropDownRef:n,onClose:s}){const[r,i]=h.useState(),[a,o]=h.useState(),l=h.useCallback(u=>{i(p=>p?[...p,u]:[u])},[i]),c=u=>{if(!r)return;const p=u.key;["Escape","ArrowUp","ArrowDown","Tab"].includes(p)&&u.preventDefault(),p==="Escape"||p==="Tab"?s():p==="ArrowUp"?o(m=>{if(!m)return r[0];const f=r.indexOf(m)-1;return r[f===-1?r.length-1:f]}):p==="ArrowDown"&&o(m=>m?r[r.indexOf(m)+1]:r[0])},d=h.useMemo(()=>({registerItem:l}),[l]);return h.useEffect(()=>{r&&!a&&o(r[0]),a&&a.current&&a.current.focus()},[r,a]),t.jsx(Mr.Provider,{value:d,children:t.jsx("div",{className:"dropdown",ref:n,onKeyDown:c,children:e})})}function Je({disabled:e=!1,buttonLabel:n,buttonAriaLabel:s,buttonClassName:r,buttonIconClassName:i,children:a,stopCloseOnClickSelf:o}){const l=h.useRef(null),c=h.useRef(null),[d,u]=h.useState(!1),p=()=>{u(!1),c&&c.current&&c.current.focus()};return h.useEffect(()=>{const m=c.current,f=l.current;if(d&&m!==null&&f!==null){const{top:y,left:v}=m.getBoundingClientRect();f.style.top=`${y+m.offsetHeight+Ls}px`,f.style.left=`${Math.min(v,window.innerWidth-f.offsetWidth-20)}px`}},[l,c,d]),h.useEffect(()=>{const m=c.current;if(m!==null&&d){const f=y=>{const v=y.target;o&&l.current&&l.current.contains(v)||m.contains(v)||u(!1)};return document.addEventListener("click",f),()=>{document.removeEventListener("click",f)}}},[l,c,d,o]),h.useEffect(()=>{const m=()=>{if(d){const f=c.current,y=l.current;if(f!==null&&y!==null){const{top:v}=f.getBoundingClientRect(),b=v+f.offsetHeight+Ls;b!==y.getBoundingClientRect().top&&(y.style.top=`${b}px`)}}};return document.addEventListener("scroll",m),()=>{document.removeEventListener("scroll",m)}},[c,l,d]),t.jsxs(t.Fragment,{children:[t.jsxs("button",{type:"button",disabled:e,"aria-label":s||n,className:r,onClick:()=>u(!d),ref:c,children:[i&&t.jsx("span",{className:i}),n&&t.jsx("span",{className:"text dropdown-button-text",children:n}),t.jsx("i",{className:"chevron-down"})]}),d&&Oe.createPortal(t.jsx(Rl,{dropDownRef:l,onClose:p,children:a}),document.body)]})}function Ps({disabled:e=!1,stopCloseOnClickSelf:n=!0,color:s,onChange:r,...i}){return t.jsx(Je,{...i,disabled:e,stopCloseOnClickSelf:n,children:t.jsx(Er,{color:s,onChange:r})})}const Tn={bullet:"Bulleted List",check:"Check List",code:"Code Block",h1:"Heading 1",h2:"Heading 2",h3:"Heading 3",h4:"Heading 4",h5:"Heading 5",h6:"Heading 6",number:"Numbered List",paragraph:"Normal",quote:"Quote"};function Dl(){const e=[];for(const[n,s]of Object.entries(ge.CODE_LANGUAGE_FRIENDLY_NAME_MAP))e.push([n,s]);return e}const Ll=Dl(),vt={center:{icon:"center-align",iconRTL:"right-align",name:"Center Align"},end:{icon:"right-align",iconRTL:"left-align",name:"End Align"},justify:{icon:"justify-align",iconRTL:"justify-align",name:"Justify Align"},left:{icon:"left-align",iconRTL:"left-align",name:"Left Align"},right:{icon:"right-align",iconRTL:"left-align",name:"Right Align"},start:{icon:"left-align",iconRTL:"right-align",name:"Start Align"}};function ve(e){return e?"active dropdown-item-active":""}function Pl({editor:e,blockType:n,rootType:s,disabled:r=!1}){const i=()=>{e.update(()=>{const p=x.$getSelection();x.$isRangeSelection(p)&&he.$setBlocksType(p,()=>x.$createParagraphNode())})},a=p=>{n!==p&&e.update(()=>{const m=x.$getSelection();he.$setBlocksType(m,()=>_e.$createHeadingNode(p))})},o=()=>{n!=="bullet"?e.dispatchCommand(xe.INSERT_UNORDERED_LIST_COMMAND,void 0):i()},l=()=>{n!=="check"?e.dispatchCommand(xe.INSERT_CHECK_LIST_COMMAND,void 0):i()},c=()=>{n!=="number"?e.dispatchCommand(xe.INSERT_ORDERED_LIST_COMMAND,void 0):i()},d=()=>{n!=="quote"&&e.update(()=>{const p=x.$getSelection();he.$setBlocksType(p,()=>_e.$createQuoteNode())})},u=()=>{n!=="code"&&e.update(()=>{let p=x.$getSelection();if(p!==null)if(p.isCollapsed())he.$setBlocksType(p,()=>ge.$createCodeNode());else{const m=p.getTextContent(),f=ge.$createCodeNode();p.insertNodes([f]),p=x.$getSelection(),x.$isRangeSelection(p)&&p.insertRawText(m)}})};return t.jsxs(Je,{disabled:r,buttonClassName:"toolbar-item block-controls",buttonIconClassName:"icon block-type "+n,buttonLabel:Tn[n],buttonAriaLabel:"Formatting options for text style",children:[t.jsxs(X,{className:"item "+ve(n==="paragraph"),onClick:i,children:[t.jsx("i",{className:"icon paragraph"}),t.jsx("span",{className:"text",children:"Normal"})]}),t.jsxs(X,{className:"item "+ve(n==="h1"),onClick:()=>a("h1"),children:[t.jsx("i",{className:"icon h1"}),t.jsx("span",{className:"text",children:"Heading 1"})]}),t.jsxs(X,{className:"item "+ve(n==="h2"),onClick:()=>a("h2"),children:[t.jsx("i",{className:"icon h2"}),t.jsx("span",{className:"text",children:"Heading 2"})]}),t.jsxs(X,{className:"item "+ve(n==="h3"),onClick:()=>a("h3"),children:[t.jsx("i",{className:"icon h3"}),t.jsx("span",{className:"text",children:"Heading 3"})]}),t.jsxs(X,{className:"item "+ve(n==="h4"),onClick:()=>a("h4"),children:[t.jsx("i",{className:"icon h4"}),t.jsx("span",{className:"text",children:"Heading 4"})]}),t.jsxs(X,{className:"item "+ve(n==="bullet"),onClick:o,children:[t.jsx("i",{className:"icon bullet-list"}),t.jsx("span",{className:"text",children:"Bullet List"})]}),t.jsxs(X,{className:"item "+ve(n==="number"),onClick:c,children:[t.jsx("i",{className:"icon numbered-list"}),t.jsx("span",{className:"text",children:"Numbered List"})]}),t.jsxs(X,{className:"item "+ve(n==="check"),onClick:l,children:[t.jsx("i",{className:"icon check-list"}),t.jsx("span",{className:"text",children:"Check List"})]}),t.jsxs(X,{className:"item "+ve(n==="quote"),onClick:d,children:[t.jsx("i",{className:"icon quote"}),t.jsx("span",{className:"text",children:"Quote"})]}),t.jsxs(X,{className:"item "+ve(n==="code"),onClick:u,children:[t.jsx("i",{className:"icon code"}),t.jsx("span",{className:"text",children:"Code Block"})]})]})}function at(){return t.jsx("div",{className:"divider"})}function Fl({editor:e,value:n,isRTL:s,disabled:r=!1}){const i=vt[n||"left"];return t.jsxs(Je,{disabled:r,buttonLabel:i.name,buttonIconClassName:`icon ${s?i.iconRTL:i.icon}`,buttonClassName:"toolbar-item spaced alignment",buttonAriaLabel:"Formatting options for text alignment",children:[t.jsxs(X,{onClick:()=>{e.dispatchCommand(x.FORMAT_ELEMENT_COMMAND,"left")},className:"item",children:[t.jsx("i",{className:"icon left-align"}),t.jsx("span",{className:"text",children:"Left Align"})]}),t.jsxs(X,{onClick:()=>{e.dispatchCommand(x.FORMAT_ELEMENT_COMMAND,"center")},className:"item",children:[t.jsx("i",{className:"icon center-align"}),t.jsx("span",{className:"text",children:"Center Align"})]}),t.jsxs(X,{onClick:()=>{e.dispatchCommand(x.FORMAT_ELEMENT_COMMAND,"right")},className:"item",children:[t.jsx("i",{className:"icon right-align"}),t.jsx("span",{className:"text",children:"Right Align"})]}),t.jsxs(X,{onClick:()=>{e.dispatchCommand(x.FORMAT_ELEMENT_COMMAND,"justify")},className:"item",children:[t.jsx("i",{className:"icon justify-align"}),t.jsx("span",{className:"text",children:"Justify Align"})]}),t.jsxs(X,{onClick:()=>{e.dispatchCommand(x.FORMAT_ELEMENT_COMMAND,"start")},className:"item",children:[t.jsx("i",{className:`icon ${s?vt.start.iconRTL:vt.start.icon}`}),t.jsx("span",{className:"text",children:"Start Align"})]}),t.jsxs(X,{onClick:()=>{e.dispatchCommand(x.FORMAT_ELEMENT_COMMAND,"end")},className:"item",children:[t.jsx("i",{className:`icon ${s?vt.end.iconRTL:vt.end.icon}`}),t.jsx("span",{className:"text",children:"End Align"})]}),t.jsx(at,{}),t.jsxs(X,{onClick:()=>{e.dispatchCommand(x.OUTDENT_CONTENT_COMMAND,void 0)},className:"item",children:[t.jsx("i",{className:"icon "+(s?"indent":"outdent")}),t.jsx("span",{className:"text",children:"Outdent"})]}),t.jsxs(X,{onClick:()=>{e.dispatchCommand(x.INDENT_CONTENT_COMMAND,void 0)},className:"item",children:[t.jsx("i",{className:"icon "+(s?"outdent":"indent")}),t.jsx("span",{className:"text",children:"Indent"})]})]})}function Bl({setIsLinkEditMode:e}){const[n]=ne.useLexicalComposerContext(),[s,r]=h.useState(n),[i,a]=h.useState("paragraph"),[o,l]=h.useState("root"),[c,d]=h.useState(null),[u,p]=h.useState("15px"),[m,f]=h.useState("#000"),[y,v]=h.useState("#dfe6ef"),[b,g]=h.useState("Arial"),[w,T]=h.useState("left"),[$,_]=h.useState(!1),[j,C]=h.useState(!1),[k,N]=h.useState(!1),[M,I]=h.useState(!1),[W,E]=h.useState(!1),[P,F]=h.useState(!1),[Y,V]=h.useState(!1),[H,J]=h.useState(!1),[L,G]=h.useState(!1),[U,ee]=h.useState(!1),[O,S]=It(),[R,q]=h.useState(!1),[Q,K]=h.useState(""),[Z,st]=h.useState(()=>n.isEditable()),Re=h.useCallback(()=>{const z=x.$getSelection();if(x.$isRangeSelection(z)){const re=z.anchor.getNode();let de=re.getKey()==="root"?re:te.$findMatchingParent(re,Ae=>{const ae=Ae.getParent();return ae!==null&&x.$isRootOrShadowRoot(ae)});de===null&&(de=re.getTopLevelElementOrThrow());const Ie=de.getKey(),ie=s.getElementByKey(Ie);C(z.hasFormat("bold")),N(z.hasFormat("italic")),I(z.hasFormat("underline")),E(z.hasFormat("strikethrough")),F(z.hasFormat("subscript")),V(z.hasFormat("superscript")),J(z.hasFormat("code")),q(he.$isParentElementRTL(z));const ke=Tt(z),Ve=ke.getParent();ce.$isLinkNode(Ve)||ce.$isLinkNode(ke)?_(!0):_(!1);const Lt=te.$findMatchingParent(ke,D.$isTableNode);if(D.$isTableNode(Lt)?l("table"):l("root"),ie!==null)if(d(Ie),xe.$isListNode(de)){const Ae=te.$getNearestNodeOfType(re,xe.ListNode),ae=Ae?Ae.getListType():de.getListType();a(ae)}else{const Ae=_e.$isHeadingNode(de)?de.getTag():de.getType();if(Ae in Tn&&a(Ae),ge.$isCodeNode(de)){const ae=de.getLanguage();K(ae?ge.CODE_LANGUAGE_MAP[ae]||ae:"");return}}p(he.$getSelectionStyleValueForProperty(z,"font-size","15px")),f(he.$getSelectionStyleValueForProperty(z,"color","#000")),v(he.$getSelectionStyleValueForProperty(z,"background-color","#dfe6ef")),g(he.$getSelectionStyleValueForProperty(z,"font-family","Arial")),T((x.$isElementNode(ke)?ke.getFormatType():Ve==null?void 0:Ve.getFormatType())||"left")}},[s]);h.useEffect(()=>n.registerCommand(x.SELECTION_CHANGE_COMMAND,(z,re)=>(Re(),r(re),!1),x.COMMAND_PRIORITY_CRITICAL),[n,Re]),h.useEffect(()=>(Z!==n.isEditable()&&st(n.isEditable()),te.mergeRegister(n.registerEditableListener(z=>{st(z)}),s.registerUpdateListener(({editorState:z})=>{z.read(()=>{Re()})}),s.registerCommand(x.CAN_UNDO_COMMAND,z=>(G(z),!1),x.COMMAND_PRIORITY_CRITICAL),s.registerCommand(x.CAN_REDO_COMMAND,z=>(ee(z),!1),x.COMMAND_PRIORITY_CRITICAL))),[Re,s,n]),h.useEffect(()=>s.registerCommand(x.KEY_MODIFIER_COMMAND,z=>{const re=z,{code:de,ctrlKey:Ie,metaKey:ie}=re;return de==="KeyK"&&(Ie||ie)?(re.preventDefault(),e(!$),s.dispatchCommand(ce.TOGGLE_LINK_COMMAND,Yt("https://"))):!1},x.COMMAND_PRIORITY_NORMAL),[s,$,e]);const se=h.useCallback((z,re)=>{s.update(()=>{const de=x.$getSelection();de!==null&&he.$patchStyleText(de,z)},re?{tag:"historic"}:{})},[s]),rt=h.useCallback(()=>{s.update(()=>{const z=x.$getSelection();if(x.$isRangeSelection(z)){const re=z.anchor,de=z.focus,Ie=z.getNodes();if(re.key===de.key&&re.offset===de.offset)return;Ie.forEach((ie,ke)=>{x.$isTextNode(ie)?(ke===0&&re.offset!==0&&(ie=ie.splitText(re.offset)[1]||ie),ke===Ie.length-1&&(ie=ie.splitText(de.offset)[0]||ie),ie.__style!==""&&ie.setStyle(""),ie.__format!==0&&(ie.setFormat(0),te.$getNearestBlockElementAncestorOrThrow(ie).setFormat(""))):_e.$isHeadingNode(ie)||_e.$isQuoteNode(ie)?ie.replace(x.$createParagraphNode(),!0):Rn.$isDecoratorBlockNode(ie)&&ie.setFormat("")})}})},[s]),dn=h.useCallback(z=>{se({color:z})},[se]),De=h.useCallback(z=>{se({"background-color":z}),se({padding:"4px 12px"}),se({border:"1px solid"}),se({"border-color":"#60a5fa"}),se({"border-radius":"8px"})},[se]);h.useCallback(()=>{$?n.dispatchCommand(ce.TOGGLE_LINK_COMMAND,null):n.dispatchCommand(ce.TOGGLE_LINK_COMMAND,Yt("https://"))},[n,$]);const un=h.useCallback(z=>{s.update(()=>{if(c!==null){const re=x.$getNodeByKey(c);ge.$isCodeNode(re)&&re.setLanguage(z)}})},[s,c]);return Z?t.jsxs("div",{className:"toolbar",children:[t.jsx("button",{disabled:!L||!Z,onClick:()=>{s.dispatchCommand(x.UNDO_COMMAND,void 0)},title:Ds?"Undo (⌘Z)":"Undo (Ctrl+Z)",type:"button",className:"toolbar-item spaced","aria-label":"Undo",children:t.jsx("i",{className:"format undo"})}),t.jsx("button",{disabled:!U||!Z,onClick:()=>{s.dispatchCommand(x.REDO_COMMAND,void 0)},title:Ds?"Redo (⌘Y)":"Redo (Ctrl+Y)",type:"button",className:"toolbar-item","aria-label":"Redo",children:t.jsx("i",{className:"format redo"})}),t.jsx(at,{}),i in Tn&&s===n&&t.jsxs(t.Fragment,{children:[t.jsx(Pl,{disabled:!Z,blockType:i,rootType:o,editor:n}),t.jsx(at,{})]}),i==="code"?t.jsx(Je,{disabled:!Z,buttonClassName:"toolbar-item code-language",buttonLabel:ge.getLanguageFriendlyName(Q),buttonAriaLabel:"Select language",children:Ll.map(([z,re])=>t.jsx(X,{className:`item ${ve(z===Q)}`,onClick:()=>un(z),children:t.jsx("span",{className:"text",children:re})},z))}):t.jsxs(t.Fragment,{children:[t.jsx(Ps,{disabled:!Z,buttonClassName:"toolbar-item color-picker",buttonAriaLabel:"Formatting text color",buttonIconClassName:"icon font-color",color:m,onChange:dn,title:"text color"}),t.jsx(Ps,{disabled:!Z,buttonClassName:"toolbar-item color-picker",buttonAriaLabel:"Formatting background color",buttonIconClassName:"icon bg-color",color:y,onChange:De,title:"bg color"}),t.jsxs(Je,{disabled:!Z,buttonClassName:"toolbar-item spaced",buttonLabel:"",buttonAriaLabel:"Formatting options for additional text styles",buttonIconClassName:"icon dropdown-more",children:[t.jsxs(X,{onClick:()=>{s.dispatchCommand(x.FORMAT_TEXT_COMMAND,"strikethrough")},className:"item "+ve(W),title:"Strikethrough","aria-label":"Format text with a strikethrough",children:[t.jsx("i",{className:"icon strikethrough"}),t.jsx("span",{className:"text",children:"Strikethrough"})]}),t.jsxs(X,{onClick:()=>{s.dispatchCommand(x.FORMAT_TEXT_COMMAND,"subscript")},className:"item "+ve(P),title:"Subscript","aria-label":"Format text with a subscript",children:[t.jsx("i",{className:"icon subscript"}),t.jsx("span",{className:"text",children:"Subscript"})]}),t.jsxs(X,{onClick:()=>{s.dispatchCommand(x.FORMAT_TEXT_COMMAND,"superscript")},className:"item "+ve(Y),title:"Superscript","aria-label":"Format text with a superscript",children:[t.jsx("i",{className:"icon superscript"}),t.jsx("span",{className:"text",children:"Superscript"})]}),t.jsxs(X,{onClick:rt,className:"item",title:"Clear text formatting","aria-label":"Clear all text formatting",children:[t.jsx("i",{className:"icon clear"}),t.jsx("span",{className:"text",children:"Clear Formatting"})]})]}),t.jsx(at,{}),o==="table"&&t.jsxs(t.Fragment,{children:[t.jsx(Je,{disabled:!Z,buttonClassName:"toolbar-item spaced",buttonLabel:"Table",buttonAriaLabel:"Open table toolkit",buttonIconClassName:"icon table secondary",children:t.jsx(X,{onClick:()=>{},className:"item",children:t.jsx("span",{className:"text",children:"TODO"})})}),t.jsx(at,{})]}),t.jsxs(Je,{disabled:!Z,buttonClassName:"toolbar-item spaced",buttonLabel:"Insert",buttonAriaLabel:"Insert specialized editor node",buttonIconClassName:"icon plus",children:[t.jsxs(X,{onClick:()=>{s.dispatchCommand(ct.INSERT_HORIZONTAL_RULE_COMMAND,void 0)},className:"item",children:[t.jsx("i",{className:"icon horizontal-rule"}),t.jsx("span",{className:"text",children:"Horizontal Rule"})]}),t.jsxs(X,{onClick:()=>{S("Insert Image",z=>t.jsx(xr,{activeEditor:s,onClose:z}))},className:"item",children:[t.jsx("i",{className:"icon image"}),t.jsx("span",{className:"text",children:"Image"})]}),t.jsxs(X,{onClick:()=>{S("Insert Table",z=>t.jsx(_r,{activeEditor:s,onClose:z}))},className:"item",children:[t.jsx("i",{className:"icon table"}),t.jsx("span",{className:"text",children:"Table"})]}),t.jsxs(X,{onClick:()=>{S("Insert Table",z=>t.jsx(Ta,{activeEditor:s,onClose:z}))},className:"item",children:[t.jsx("i",{className:"icon table"}),t.jsx("span",{className:"text",children:"Table (Experimental)"})]}),t.jsxs(X,{onClick:()=>{n.dispatchCommand(Un,void 0)},className:"item",children:[t.jsx("i",{className:"icon caret-right"}),t.jsx("span",{className:"text",children:"Collapsible container"})]})]})]}),t.jsx(at,{}),t.jsx(Fl,{disabled:!Z,value:w,editor:n,isRTL:R}),O]}):t.jsx("div",{className:"toolbar"})}function zl(){const[e]=ne.useLexicalComposerContext();return t.jsx(yi.TreeView,{viewClassName:"tree-view-output",treeTypeButtonClassName:"debug-treetype-button",timeTravelPanelClassName:"debug-timetravel-panel",timeTravelButtonClassName:"debug-timetravel-button",timeTravelPanelSliderClassName:"debug-timetravel-panel-slider",timeTravelPanelButtonClassName:"debug-timetravel-panel-button",editor:e})}const Ir={blockCursor:"block pointer-events-none absolute content-['']  after:absolute after:-top-[2px] after:w-[20px] after:border-t-[1px_solid_black]",characterLimit:"inline !bg-[#ffbbbb]",code:"bg-[rgb(240,_242,_245)] font-[Menlo,_Consolas,_Monaco,_monospace] block pl-[52px] pr-[8px] py-[8px] leading-[1.53] text-[13px] m-0 mt-[8px] mb-[8px] [tab-size:2] relative after:content-[attr(data-gutter)] after:absolute after:bg-[#eee] after:left-[0] after:top-[0] after:border-r-[1px_solid_#ccc] after:p-[8px] after:text-[#777] after:whitespace-pre-wrap after:text-right after:min-w-[25px]",codeHighlight:{atrule:"text-[#07a]",attr:"text-[#07a]",boolean:"text-[#905]",builtin:"text-[#690]",cdata:"text-[slategray]",char:"text-[#690]",class:"text-[#dd4a68]","class-name":"text-[#dd4a68]",comment:"text-[slategray]",constant:"text-[#905]",deleted:"text-[#905]",doctype:"text-[slategray]",entity:"text-[#9a6e3a]",function:"text-[#dd4a68]",important:"text-[#e90]",inserted:"text-[#690]",keyword:"text-[#07a]",namespace:"text-[#e90]",number:"text-[#905]",operator:"text-[#9a6e3a]",prolog:"text-[slategray]",property:"text-[#905]",punctuation:"text-[#999]",regex:"text-[#e90]",selector:"text-[#690]",string:"text-[#690]",symbol:"text-[#905]",tag:"text-[#905]",url:"text-[#9a6e3a]",variable:"text-[#e90]"},embedBlock:{base:"select-none",focus:"outline-[2px_solid_rgb(60,_132,_244)]"},hashtag:"bg-[rgba(88,_144,_255,_0.15)] border-b-[1px_solid_rgba(88,_144,_255,_0.3)]",heading:{h1:"font-semibold text-2xl scroll-mt-36 font-display",h2:"font-medium text-xl scroll-mt-36 font-display",h3:"font-medium text-lg scroll-mt-36 font-display",h4:"font-medium scroll-mt-36 font-display",h5:"scroll-mt-36 font-display",h6:"scroll-mt-36 font-display"},image:"editor-image",indent:"PlaygroundEditorTheme__indent",inlineImage:"inline-editor-image",link:"PlaygroundEditorTheme__link",list:{listitem:"PlaygroundEditorTheme__listItem",listitemChecked:"PlaygroundEditorTheme__listItemChecked",listitemUnchecked:"PlaygroundEditorTheme__listItemUnchecked",nested:{listitem:"PlaygroundEditorTheme__nestedListItem"},olDepth:["PlaygroundEditorTheme__ol1 list-decimal","PlaygroundEditorTheme__ol2","PlaygroundEditorTheme__ol3","PlaygroundEditorTheme__ol4","PlaygroundEditorTheme__ol5"],ul:"PlaygroundEditorTheme__ul"},ltr:"PlaygroundEditorTheme__ltr",mark:"PlaygroundEditorTheme__mark",markOverlap:"PlaygroundEditorTheme__markOverlap",paragraph:"PlaygroundEditorTheme__paragraph",quote:"PlaygroundEditorTheme__quote",rtl:"PlaygroundEditorTheme__rtl",table:"PlaygroundEditorTheme__table",tableAddColumns:"PlaygroundEditorTheme__tableAddColumns",tableAddRows:"PlaygroundEditorTheme__tableAddRows",tableCell:"PlaygroundEditorTheme__tableCell",tableCellActionButton:"PlaygroundEditorTheme__tableCellActionButton",tableCellActionButtonContainer:"PlaygroundEditorTheme__tableCellActionButtonContainer",tableCellEditing:"PlaygroundEditorTheme__tableCellEditing",tableCellHeader:"PlaygroundEditorTheme__tableCellHeader",tableCellPrimarySelected:"PlaygroundEditorTheme__tableCellPrimarySelected",tableCellResizer:"PlaygroundEditorTheme__tableCellResizer",tableCellSelected:"PlaygroundEditorTheme__tableCellSelected",tableCellSortedIndicator:"PlaygroundEditorTheme__tableCellSortedIndicator",tableResizeRuler:"PlaygroundEditorTheme__tableCellResizeRuler",tableSelected:"PlaygroundEditorTheme__tableSelected",text:{bold:"PlaygroundEditorTheme__textBold",code:"PlaygroundEditorTheme__textCode",italic:"PlaygroundEditorTheme__textItalic",strikethrough:"PlaygroundEditorTheme__textStrikethrough",subscript:"PlaygroundEditorTheme__textSubscript",superscript:"PlaygroundEditorTheme__textSuperscript",underline:"PlaygroundEditorTheme__textUnderline",underlineStrikethrough:"PlaygroundEditorTheme__textUnderlineStrikethrough"}};function wn({className:e}){return t.jsx(wi.ContentEditable,{className:e||"border-none relative [tab-size:1] outline-none pt-[8px] px-[8px] lg:px-[28px] pb-[14px]"})}function Wl({children:e,className:n}){return t.jsx("div",{className:n||"text-[15px] text-[#999] overflow-hidden absolute overflow-ellipsis top-[8px] left-[8px] lg:left-[28px] right-[28px] select-none whitespace-nowrap inline-block pointer-events-none",children:e})}function Hl(e){const{historyState:n}=uo(),{isAutocomplete:s,isMaxLength:r,isCharLimit:i,isCharLimitUtf8:a,isRichText:o=!0,showTreeView:l,showTableOfContents:c,showActionBar:d,placeholderText:u="",editable:p=!0,bgColor:m}=e,f=t.jsx(Wl,{children:u}),[y,v]=h.useState(null),[b,g]=h.useState(!1),[w,T]=h.useState(!1),$=j=>{j!==null&&v(j)},_={namespace:"Playground",nodes:[..._o],onError:j=>{throw j},theme:Ir};return h.useEffect(()=>{const j=()=>{const C=Mt&&window.matchMedia("(max-width: 1025px)").matches;C!==w&&T(C)};return window.addEventListener("resize",j),()=>{window.removeEventListener("resize",j)}},[w]),t.jsxs(t.Fragment,{children:[o&&p&&t.jsx(Bl,{}),t.jsxs("div",{className:`${p?"editor-container":"view-container"} ${l?"tree-view":""} ${o?"":"plain-text"}`,style:{backgroundColor:m},children:[r&&t.jsx(ml,{maxLength:30}),t.jsx(Oa,{}),t.jsx(vi.ClearEditorPlugin,{}),t.jsx(Aa,{}),t.jsx(ta,{}),t.jsx(cl,{}),t.jsx(Wo,{}),t.jsx(ia,{}),o?t.jsxs(t.Fragment,{children:[t.jsx(pn.HistoryPlugin,{externalHistoryState:n}),t.jsx(ds.RichTextPlugin,{contentEditable:t.jsx("div",{className:p?"editor-scroller":"view-scroller",children:t.jsx("div",{className:"editor",ref:$,children:t.jsx(wn,{})})}),placeholder:f,ErrorBoundary:mn}),t.jsx(aa,{}),t.jsx(Ni.ListPlugin,{}),t.jsx(ji.CheckListPlugin,{}),t.jsx(pl,{maxDepth:7}),t.jsx(Ci.TablePlugin,{}),t.jsx(El,{}),t.jsxs(Ea,{cellEditorConfig:_,children:[t.jsx(_i.AutoFocusPlugin,{}),t.jsx(ds.RichTextPlugin,{contentEditable:t.jsx(wn,{className:"min-h-[20px] border-[0px] resize-none cursor-text block relative [tab-size:1] outline-[0px] p-[10px] select-text text-[14px] leading-[1.4em] w-[calc(100%_-_20px)] whitespace-pre-wrap"}),placeholder:null,ErrorBoundary:mn}),t.jsx(pn.HistoryPlugin,{}),t.jsx(ks,{}),t.jsx(gs,{}),t.jsx(_s,{})]}),t.jsx(fa,{}),t.jsx(ks,{}),t.jsx(Jo,{}),t.jsx(gs,{}),t.jsx(ki.HorizontalRulePlugin,{}),t.jsx(gl,{}),t.jsx(Si.TabIndentationPlugin,{}),t.jsx(ua,{}),y&&!w&&t.jsxs(t.Fragment,{children:[t.jsx(Ga,{anchorElem:y}),t.jsx(tl,{anchorElem:y,isLinkEditMode:b,setIsLinkEditMode:g}),t.jsx(_l,{anchorElem:y,cellMerge:!0}),t.jsx(_s,{anchorElem:y,showComments:!0})]})]}):t.jsxs(t.Fragment,{children:[t.jsx(Ti.PlainTextPlugin,{contentEditable:t.jsx(wn,{}),placeholder:f,ErrorBoundary:mn}),t.jsx(pn.HistoryPlugin,{externalHistoryState:n})]}),(i||a)&&t.jsx(Ei.CharacterLimitPlugin,{charset:i?"UTF-16":"UTF-8",maxLength:5}),s&&t.jsx(go,{}),t.jsx("div",{children:c&&t.jsx(Al,{})}),d&&t.jsx(qo,{isRichText:o})]}),l&&t.jsx(zl,{})]})}const Ul=[_e.HeadingNode,xe.ListNode,xe.ListItemNode,ge.CodeNode,nt,D.TableNode,D.TableCellNode,D.TableRowNode,ge.CodeHighlightNode,ce.AutoLinkNode,ce.LinkNode,$i.OverflowNode,qe,mt,Xe,ct.HorizontalRuleNode,Ot,Mi.MarkNode,Ze,Qe,et];function Ar({value:e,onChange:n,bgColor:s,editable:r=!1,id:i}){var o,l,c,d;const a={editorState:(o=JSON.parse(e||"{}"))!=null&&o.root&&((d=(c=(l=JSON.parse(e||"{}"))==null?void 0:l.root)==null?void 0:c.children)!=null&&d.length)?e:null,namespace:"dms-lexical",nodes:[...Ul],editable:r,readOnly:r,onError:u=>{throw u},theme:Ir};return t.jsx(Ii.LexicalComposer,{initialConfig:a,children:t.jsxs("div",{className:"editor-shell",children:[t.jsx(Hl,{editable:r,bgColor:s}),t.jsx(Ai.OnChangePlugin,{onChange:n})]})},i)}function ql(e){try{JSON.parse(e)}catch{return!1}return!0}function Or(e){return e&&typeof e=="object"?JSON.stringify(e):ql(e)?e:null}const Vl=({value:e,onChange:n,...s})=>t.jsx("div",{className:"editor-shell",children:t.jsx(Ar,{value:Or(e),onChange:r=>{n(r)},editable:!0,...s})}),Yl=({value:e,...n})=>t.jsx("div",{className:"editor-shell tracking-wide leading-7",children:t.jsx(Ar,{value:Or(e),editable:!1,...n})}),Gl={EditComp:Vl,ViewComp:Yl},Jl=({value:e="",onChange:n,className:s,placeholder:r,options:i=[]})=>{var l,c;const a=be(),o=e&&!i.find(d=>(d.value||d)===e);return t.jsxs(t.Fragment,{children:[o?t.jsxs("div",{className:(l=a==null?void 0:a.select)==null?void 0:l.error,children:["Invalid Value: ",JSON.stringify(e)," "]}):null,t.jsxs("select",{className:s||((c=a==null?void 0:a.select)==null?void 0:c.input)||"w-full border p-2",value:e,onChange:d=>n(d.target.value),children:[t.jsx("option",{value:"",children:r}),i.map((d,u)=>t.jsx("option",{value:d.value||d,children:d.label||d},u))]})]})},Kl=({className:e,value:n,options:s=[]})=>{var a;if(!n)return!1;const r=be(),i=s.find(o=>(o.value||o)===n)||n;return t.jsx("div",{className:e||((a=r==null?void 0:r.text)==null?void 0:a.view),children:(i==null?void 0:i.label)||i})},Xl={EditComp:Jl,ViewComp:Kl},Zl="flex px-2 py-1 w-full text-sm font-light border focus:border-blue-300 bg-white hover:bg-gray-100 transition ease-in",Ql="focus:outline-none w-full",ec="flex px-2 py-1 mx-1 bg-gray-100 hover:bg-gray-300 rounded-md transition ease-in",tc="fa fa-x px-1 text-xs text-red-300 hover:text-red-500 self-center transition ease-in",nc="p-2 shadow-lg z-10",sc="px-2 py-1 hover:bg-gray-300 hover:cursor-pointer transition ease-in",rc=({token:e,value:n,onChange:s,theme:r})=>{var i,a;return t.jsxs("div",{className:((i=r==null?void 0:r.multiselect)==null?void 0:i.tokenWrapper)||ec,children:[t.jsx("div",{children:e.label||e}),t.jsx("i",{className:((a=r==null?void 0:r.multiselect)==null?void 0:a.removeIcon)||tc,onClick:o=>s(n.filter(l=>(l.value||l)!==(e.value||e)))})]})},ic=({options:e,isSearching:n,setIsSearching:s,searchKeyword:r,value:i,onChange:a,theme:o})=>{var c;const l=i.map(d=>d.value||d);return t.jsx("div",{className:`${n?"block":"hidden"} ${((c=o==null?void 0:o.multiselect)==null?void 0:c.menuWrapper)||nc}`,children:e.filter(d=>!l.includes(d.value||d)&&(d.label||d).includes(r)).map((d,u)=>{var p;return t.jsx("div",{className:((p=o==null?void 0:o.multiselect)==null?void 0:p.menuItem)||sc,onClick:m=>{a([...i,d]),s(!1)},children:d.label||d},`option-${u}`)})})};function oc(e){const[n,s]=h.useState(e),r=h.useRef(null),i=o=>{(o.key==="Escape"||o.key==="Tab")&&s(!1)},a=o=>{r.current&&!r.current.contains(o.target)&&s(!1)};return h.useEffect(()=>(document.addEventListener("keydown",i,!0),document.addEventListener("click",a,!0),()=>{document.removeEventListener("keydown",i,!0),document.removeEventListener("click",a,!0)})),{ref:r,isSearching:n,setIsSearching:s}}const ac=({value:e=[],onChange:n,className:s,placeholder:r,options:i=[]})=>{var f,y,v;const[a,o]=h.useState(""),l=Array.isArray(e)?e:[e],c=be(),{ref:d,isSearching:u,setIsSearching:p}=oc(!1),m=l.filter(b=>{var g;return(b.value||b)&&!((g=i.filter(w=>(w.value||w)===(b.value||b)))!=null&&g.length)});return t.jsxs("div",{ref:d,children:[m.length?t.jsxs("div",{className:(f=c==null?void 0:c.multiselect)==null?void 0:f.error,children:["Invalid Values: ",JSON.stringify(m)]}):null,t.jsxs("div",{className:s||((y=c==null?void 0:c.multiselect)==null?void 0:y.inputWrapper)||Zl,children:[l.map((b,g)=>t.jsx(rc,{token:b,value:l,onChange:n,theme:c},g)),t.jsx("input",{placeholder:r,className:((v=c==null?void 0:c.multiselect)==null?void 0:v.input)||Ql,onChange:b=>o(b.target.value),onFocus:()=>p(!0)},"input")]}),t.jsx(ic,{isSearching:u,setIsSearching:p,searchKeyword:a,value:l,onChange:n,options:i,theme:c})]})},lc=({className:e,value:n,options:s=[]})=>{var o;if(!n)return!1;const r=be(),i=(Array.isArray(n)?n:[n]).map(l=>l.value||l),a=s.filter(l=>i.includes(l.value||l)).map(l=>l.label||l).join(", ");return t.jsx("div",{className:e||((o=r==null?void 0:r.text)==null?void 0:o.view),children:a||JSON.stringify(i)})},cc={EditComp:ac,ViewComp:lc},dc=({value:e="",onChange:n,options:s=[],inline:r})=>{var o;const i=be(),a=e&&!s.find(l=>l===e);return t.jsxs(t.Fragment,{children:[a?t.jsxs("div",{className:(o=i==null?void 0:i.radio)==null?void 0:o.error,children:["Invalid Value: ",JSON.stringify(e)]}):null,t.jsx("div",{className:`flex ${r?"flex-row":"flex-col"}`,children:s.map((l,c)=>{var d,u,p;return t.jsxs("div",{className:((d=i==null?void 0:i.radio)==null?void 0:d.wrapper)||"p-1 flex",children:[t.jsx("input",{id:l,className:((u=i==null?void 0:i.radio)==null?void 0:u.input)||"self-center p-1",type:"radio",value:l,checked:e===l,onChange:m=>n(m.target.value)}),t.jsxs("label",{htmlFor:l,className:((p=i==null?void 0:i.radio)==null?void 0:p.label)||"text-sm font-light p-1 self-center",children:[" ",l," "]})]},c)})})]})},uc=({className:e,value:n})=>{var r;if(!n)return!1;const s=be();return t.jsx("div",{className:e||((r=s==null?void 0:s.text)==null?void 0:r.view),children:n})},pc={EditComp:dc,ViewComp:uc},Ue={text:hn,datetime:hn,textarea:eo,boolean:so,"dms-format":oo,lexical:Gl,select:Xl,multiselect:cc,radio:pc,default:hn};function Rr(e,n){Ue[e]=n}function mc(e){const{type:n="default",isArray:s=!1,attributes:r}=e;let i=B(Ue,`[${n}]`,Ue.default),a=i.ViewComp;if(s){let o=e.DisplayComp?e.DisplayComp.ViewComp:sr.ViewComp;a=l=>t.jsx(o,{Component:i,...l,attr:e})}return a}function hc(e){const{type:n="default",isArray:s=!1,attributes:r}=e;let i=B(Ue,`[${n}]`,Ue.default),a=i.EditComp;if(s){let o=e.DisplayComp?e.DisplayComp.EditComp:sr.EditComp;a=l=>t.jsx(o,{Component:i,...l,attr:e})}return a}function Rt(e,n={},s=""){const r=Dr(e),i=(n==null?void 0:n.accessor)||"key",a=e.attributes.filter(l=>s!=="edit"||typeof l.editable>"u"||!!l.editable).reduce((l,c)=>(c.format&&r[c.format]?l[c[i]]={...c,attributes:Rt(r[c.format])}:l[c[i]]=c,l),{}),o=Object.keys(a);return Object.keys(a).filter(l=>o.includes(l)).forEach(l=>{a[l].ViewComp=mc(B(a,`${l}`,{})),a[l].EditComp=hc(B(a,`${l}`,{}))}),a}function Dr(e,n={}){if(!e)return n;const s=pe(e);return s.registerFormats&&s.registerFormats.forEach(r=>Dr(r,n)),n[`${s.app}+${s.type}`]=s,n}const fc=(e,n="update")=>{let s=new FormData;return s.append("data",JSON.stringify(e)),s.append("requestType",n),s};function xc({Component:e,format:n,options:s,params:r,user:i,...a}){const o=Rt(n,s,"edit"),l=$e(),{pathname:c}=Me(),{data:d}=Dn();let u=Oi();const{defaultSort:p=g=>g}=n,[m,f]=A.useState(p(d).filter(g=>En(g,r,n))[0]||{});h.useEffect(()=>{f(d.filter(g=>En(g,r,n))[0]||{})},[r]);const y=(g,w,T)=>{f(T?{...m,...T}:{...m,[g]:w})},v=()=>{l(fc(m),{method:"post",action:c})},b=A.useMemo(()=>e,[]);return t.jsx(b,{...a,format:n,attributes:o,item:m,dataItems:d,params:r,updateAttribute:y,setItem:f,options:s,status:u,user:i,submit:v})}function gc({Component:e,format:n,options:s,user:r,...i}){const a=Rt(n,s),{data:o}=Dn(),l=A.useMemo(()=>e,[]);return t.jsx(l,{...i,format:n,attributes:a,dataItems:o,options:s,user:r},s==null?void 0:s.path)}function bc({Component:e,format:n,options:s,params:r,user:i,...a}){let o=Rt(n,s);const{data:l}=Dn(),{defaultSort:c=p=>p}=n,d=c(l).filter(p=>En(p,r,n))[0]||l[0],u=A.useMemo(()=>e,[]);return t.jsx(u,{...a,format:n,attributes:o,item:d,dataItems:l,options:s,user:i})}function yc({Component:e,format:n,options:s,user:r,...i}){let a=Rt(n,s);return t.jsx(e,{...i,format:n,attributes:a,dataItems:[],options:s,user:r})}const Lr={edit:xc,error:yc,list:gc,view:bc};function wc(e){return t.jsx("div",{children:"404 - Config not found"})}function Vn({item:e,attributes:n,next:s,nextDisabled:r,prev:i,prevDisabled:a,sectionId:o,preferredTheme:l}){var d,u,p;const c=l||be();return e?t.jsxs("div",{className:B(c,"card.wrapper",""),children:[Object.keys(n).filter(m=>!o||n[m].section===o).map((m,f)=>{var v,b;let y=n[m].ViewComp;return t.jsxs("div",{className:B(c,"card.row",""),children:[t.jsx("div",{className:B(c,"card.rowLabel",""),children:((v=n[m])==null?void 0:v.display_name)||((b=n[m])==null?void 0:b.label)||m}),t.jsx("div",{className:B(c,"card.rowContent",""),children:t.jsx(y,{value:e[m],...n[m]})})]},f)}),(i||s)&&o&&t.jsxs("div",{className:(d=c==null?void 0:c.card)==null?void 0:d.btnWrapper,children:[i&&o&&t.jsx("button",{className:(u=c==null?void 0:c.card)==null?void 0:u.backBtn,disabled:a,onClick:()=>i(),children:" Back "}),s&&o&&t.jsx("button",{className:(p=c==null?void 0:c.card)==null?void 0:p.continueBtn,disabled:r,onClick:()=>s(),children:" Continue "})]})]},e.id):t.jsx("div",{})}function vc({dataItems:e=[],attributes:n}){return be(),t.jsxs("div",{className:"border border-pink-300",children:["Landing",e.map((s,r)=>t.jsx(Vn,{item:s,attributes:n},r))]})}function Fs(e,n){var s=/:(\w+)/g;return e.replace(s,function(r,i){return n[i]||":"+i})}const Bs={data:function({data:n,column:s,className:r,key:i}){return t.jsxs("td",{className:r,children:[" ",B(n,[s.path],"").toString()," "]},i)},date:function({data:n,column:s,className:r,key:i}){return t.jsxs("td",{className:r,children:[" ",new Date(n[s.path]).toLocaleString()," "]},i)},link:function({data:n,column:s,className:r,key:i}){return t.jsx("td",{className:r,children:t.jsx(Se,{to:Fs(s.to,n),children:Fs(s.text,n)})},i)}};function Nc({data:e,column:n,className:s}){let r=B(Bs,[n.type],Bs.data);return t.jsx(r,{data:e,column:n,className:s})}function jc({dataItems:e=[],attributes:n={},options:s={}}){const r=be();let{columns:i=[]}=s;return i.length===0?t.jsx("div",{children:" No columns specified. "}):t.jsx("div",{className:"",children:t.jsxs("table",{className:`${r.table.table}`,children:[t.jsx("thead",{className:`${r.table.thead}`,children:t.jsx("tr",{children:i.map((a,o)=>t.jsx("th",{className:`${r.table.th}`,children:a.name},o))})}),t.jsx("tbody",{className:`${r.table.tbody}`,children:e.map(a=>t.jsx("tr",{children:i.map((o,l)=>t.jsx(Nc,{className:`${r.table.td}`,data:a,column:o},`${o.name}-${l}`))},a.id))})]})})}function Pr({item:e={},attributes:n,updateAttribute:s,status:r,submit:i,next:a,nextDisabled:o,prev:l,prevDisabled:c,sectionId:d,...u}){var m,f,y,v;const p=be();return t.jsxs("div",{className:B(p,"card.wrapper",""),children:[r?t.jsx("div",{children:JSON.stringify(r)}):"",Object.keys(n).filter(b=>!d||n[b].section===d).map((b,g)=>{var T,$,_,j;let w=n[b].EditComp;return t.jsxs("div",{className:B(p,"card.row",""),children:[t.jsxs("div",{className:B(p,"card.rowHeader",""),children:[t.jsx("div",{className:B(p,"card.rowLabel",""),children:((T=n[b])==null?void 0:T.display_name)||(($=n[b])==null?void 0:$.label)||b}),((_=n[b])==null?void 0:_.prompt)&&t.jsx("i",{title:(j=n[b])==null?void 0:j.prompt,className:B(p,"card.infoIcon","fad fa-info")})]}),t.jsx("div",{className:B(p,"card.rowContent",""),children:t.jsx(w,{value:e==null?void 0:e[b],onChange:C=>s(b,C),...n[b]},`${b}-${g}`)})]},`${b}-${g}`)}),t.jsxs("div",{className:(m=p==null?void 0:p.card)==null?void 0:m.btnWrapper,children:[l&&d&&t.jsx("button",{className:(f=p==null?void 0:p.card)==null?void 0:f.backBtn,disabled:c,onClick:()=>l(),children:" Back "}),a&&d&&t.jsx("button",{className:(y=p==null?void 0:p.card)==null?void 0:y.continueBtn,disabled:o,onClick:()=>a(),children:" Continue "}),t.jsx("button",{className:(v=p==null?void 0:p.card)==null?void 0:v.submitBtn,onClick:()=>i(),children:" Save"})]})]},e.id)}const Cc=({theme:e,tabs:n=[],activeIndex:s=0,setActiveIndex:r=null})=>{if(!n)return null;const[i,a]=A.useState(s);return A.useEffect(()=>{a(s)},[s]),t.jsx("div",{className:`${e.tabpanelWrapper}`,children:t.jsx("div",{className:`${e.tabWrapper}`,children:n.map(({icon:o,title:l,subtitle:c},d)=>t.jsxs("div",{onClick:u=>r?r(d):a(d),className:`${d===i?e.tabActive:e.tab}`,children:[t.jsx("span",{className:`${o} ${e.icon}`}),t.jsxs("span",{className:`${e.tabTitle}`,children:[" ",l," "]}),t.jsxs("span",{className:`${e.tabSubtitle}`,children:[" ",c," "]})]},d))})})};function _c({item:e,updateAttribute:n,attributes:s,status:r,submit:i,format:a,...o}){var u,p,m;const[l,c]=h.useState(a!=null&&a.sections?0:void 0),d=be();return t.jsxs(t.Fragment,{children:[t.jsx(Cc,{tabs:a==null?void 0:a.sections,activeIndex:l,setActiveIndex:c,theme:d.form}),t.jsx(Pr,{item:e,status:r,attributes:s,sectionId:(p=(u=a==null?void 0:a.sections)==null?void 0:u[l])==null?void 0:p.id,updateAttribute:n,submit:i,next:()=>c(l+1),nextDisabled:l===((m=a==null?void 0:a.sections)==null?void 0:m.length)-1,prev:()=>c(l-1),prevDisabled:l===0})]})}function kc({item:e,updateAttribute:n,attributes:s,status:r,submit:i,format:a,...o}){var c;const l=be();return t.jsx("div",{className:(c=l==null?void 0:l.form)==null?void 0:c.sectionsWrapper,children:((a==null?void 0:a.sections)||[]).map(d=>{var u,p,m,f,y;return t.jsxs("div",{className:(u=l==null?void 0:l.form)==null?void 0:u.sections,children:[t.jsxs("div",{className:(p=l==null?void 0:l.form)==null?void 0:p.tab,children:[t.jsx("span",{className:`${d.icon} ${(m=l==null?void 0:l.form)==null?void 0:m.icon}`}),t.jsxs("span",{className:`${(f=l==null?void 0:l.form)==null?void 0:f.tabTitle}`,children:[" ",d.title," "]}),t.jsxs("span",{className:`${(y=l==null?void 0:l.form)==null?void 0:y.tabSubtitle}`,children:[" ",d.subtitle," "]})]}),t.jsx(Vn,{preferredTheme:l==null?void 0:l.form,item:e,status:r,attributes:s,sectionId:d==null?void 0:d.id})]},d==null?void 0:d.id)})})}function Sc({config:e}){return t.jsxs("div",{children:[" Invalid DMS Config :",t.jsx("pre",{style:{background:"#dedede"},children:JSON.stringify(e,null,3)})]})}function Tc({path:e}){return t.jsxs("div",{children:[" These aren't the droids you are looking for",t.jsx("div",{className:"text-5xl",children:"404"}),t.jsxs("div",{children:["/",e]})]})}const Yn={devinfo:wc,"dms-landing":vc,"dms-table":jc,"dms-card":Vn,"dms-edit":Pr,"dms-form-edit":_c,"dms-form-view":kc,InvalidConfig:Sc,NoRouteMatch:Tc},Ec=Yn.devinfo,$c=Lr.error;let Mc=0;function Fr(e,n){let r=(Ri(e.map(i=>({path:i.path})),{pathname:n})||[]).reduce((i,a)=>(i[a.route.path]=a,i),{});return e.filter((i,a)=>{let o=(r==null?void 0:r[i.path])||!1;return o&&(i.params=o.params),o})}function Br(e,n,s,r,i=0){return Fr(e,n).map(o=>{const l=typeof o.type=="function"?o.type:Yn[o.type]||Ec,c=Lr[o.action]||$c;let d=[];return o.children&&(d=Br(o.children,n,s,r,i+1)),t.jsx(c,{Component:l,format:s,...o,children:d,user:r},Mc++)})}function Gn(e=[],n="/",s=0){let r=pe(Fr(e,n)),i=r.reduce((a,o)=>{let l=Gn(o.children,n,s+1);return l.length?[...a,...l]:a},[]);return[...r,...i]}function Ic(e){return e&&e.attributes&&e.attributes.length>0}function En(e,n,s){var a;let r=((a=s==null?void 0:s.attributes)==null?void 0:a.reduce((o,l)=>(l.matchWildcard&&(o=l.key),o),""))||"",i=!1;return Object.keys(n).forEach(o=>{e[o]==n[o]||e[r]&&e[r]===n["*"]?i=!0:i=!1}),i}const zr=(e,n="update")=>{let s=new FormData;return s.append("data",JSON.stringify(e)),s.append("requestType",n),s},Ac=(e,n,s,r)=>{var m,f,y,v,b,g,w,T,$,_,j,C;const{app:i,type:a}=n;let o=((m=e==null?void 0:e.filter)==null?void 0:m.attributes)||[],l=o.length>0?o.map(k=>`data ->> '${k}'`):["data"],c=typeof((f=e==null?void 0:e.filter)==null?void 0:f.fromIndex)=="function"?(y=e==null?void 0:e.filter)==null?void 0:y.fromIndex(s):+((b=e.params)==null?void 0:b[(v=e==null?void 0:e.filter)==null?void 0:v.fromIndex])||0,d=typeof((g=e==null?void 0:e.filter)==null?void 0:g.toIndex)=="function"?(w=e==null?void 0:e.filter)==null?void 0:w.toIndex(s):+(($=e.params)==null?void 0:$[(T=e==null?void 0:e.filter)==null?void 0:T.toIndex])||r-1,u=((_=e==null?void 0:e.filter)==null?void 0:_.options)||"{}",p=((j=e==null?void 0:e.filter)==null?void 0:j.tags)||[];if(((C=e==null?void 0:e.filter)==null?void 0:C.type)==="new")return[];switch(e.action){case"list":return["dms","data",`${i}+${a}`,u!=="{}"?"opts":!1,u!=="{}"?u:!1,"byIndex",{from:c,to:d},["id","app","type",...l]].filter(k=>k);case"view":case"edit":{const k=Wr(e,n);return k||["dms","data",`${i}+${a}`,"byIndex",{from:c,to:d},["id","updated_at","created_at","app","type",...l]]}case"load":return["dms","data",`${i}+${a}`,"options",u,"byIndex",{from:c,to:d},[...o.length>0?o:["data"]]];case"search":return["dms","search",`${i}+${a}`,"byTag",p];default:return[]}};function Wr(e,n){var u,p;const{app:s,type:r,defaultSearch:i,attributes:a=[]}=n;let o=((u=e==null?void 0:e.filter)==null?void 0:u.attributes)||[],l=o.length>0?o.map(m=>`data ->> '${m}'`):["data"];const c=(a==null?void 0:a.reduce((m,f)=>(f.matchWildcard&&(m=f.key),m),""))||"";let d=(p=e.params)==null?void 0:p.id;return d?["dms","data","byId",d,["id","updated_at","created_at","app","type",...l]]:c?["dms","data",`${s}+${r}`,"searchOne",[JSON.stringify({wildKey:`data ->> '${c}'`,params:e.params["*"]||"",defaultSearch:i})],["id","updated_at","created_at","app","type",...l]]:null}async function Oc(e,n,s,r,i,a,o,l){var m;const c=Array.isArray(n)?n.map(f=>+f):n;let d=[],u=Object.values(B(e,["dms","data","byId"],{})).filter(f=>f.id&&f.app===r&&f.type===i);for(const f in u){let y=u[f],v=((m=y==null?void 0:y.data)==null?void 0:m.value)||{};Object.keys(y).filter(b=>b!=="data").forEach(b=>{if(b.includes("data ->> ")){let g=b.split("->>")[1].trim().replace(/[']/g,"");v[g]=y[b]}else v[b]=y[b]}),d.push(v)}o!=null&&o.defaultSort&&(d=o.defaultSort(d));let p=0;for(const f in d)(c==="loadAll"||c.includes(+d[f].id)||p===0)&&(console.log("load dms data",c,d[f].id),await Rc(d[f],a,l)),p++;return d}async function Rc(e,n,s){var i,a,o,l;let r=Object.keys(e).filter(c=>Object.keys(n).includes(c));console.log("loadDmsFormats item:",e,"dmsKeys",r);for(const c of r){const d=[];if(typeof(e==null?void 0:e[c])=="string"&&(e[c]=JSON.parse(e[c])),typeof((i=e==null?void 0:e[c])==null?void 0:i[Symbol.iterator])=="function")for(let u of e[c])u.id&&d.push(["dms","data","byId",u.id,"data"]);else(a=e[c])!=null&&a.id&&d.push(["dms","data","byId",(o=e[c])==null?void 0:o.id,"data"]);if(d.length>0){let u=await s.get(...d);if(typeof((l=e==null?void 0:e[c])==null?void 0:l[Symbol.iterator])=="function"){let p=0;for(let m of e[c])if(m.id){let f=B(u,["json","dms","data","byId",m.id,"data"]);e[c][p]={...m,...f},p+=1}}else{let p=B(u,["json","dms","data","byId",e[c].id,"data"]);e[c]={...e[c],...p}}}}}async function Dc(e,n,s){var i,a,o,l,c;let r={};for(const d of Object.keys(e)){r[d]=[];let[u,p]=n[d].format.split("+");const m=Array.isArray(e[d])?e[d]:[e[d]];for(const f of m){let y=(f==null?void 0:f.id)||!1;if(y){let v=B(s.getCache(["dms","data","byId",y,"data"]),["dms","data","byId",y,"data","value"],{});delete f.ref,delete f.id,delete v.ref,delete v.id,tt(v,f)||(console.log("update",y),await s.call(["dms","data","edit"],[y,f]),await s.invalidate(["dms","data","byId",y])),r[d].push({ref:`${u}+${p}`,id:y})}else{console.log("create dms-format",`${u}+${p}`);const v=await s.call(["dms","data","create"],[u,p,f]);let b=((l=Object.keys(((o=(a=(i=v==null?void 0:v.json)==null?void 0:i.dms)==null?void 0:a.data)==null?void 0:o.byId)||{}).filter(g=>g!=="$__path"))==null?void 0:l[0])||-1;console.log(b),b!==-1&&r[d].push({ref:`${u}+${p}`,id:b})}}r[d]=Array.isArray(e[d])?r[d]:((c=r[d])==null?void 0:c[0])||""}return r}let Lc={};async function Et(e,n,s="/"){var $,_,j,C,k,N,M,I,W,E,P,F,Y,V,H,J,L,G,U,ee,O;n.formatFn&&(n.format=await n.formatFn());const{format:r}=n,{app:i,type:a,attributes:o={}}=r,l=Gn(n.children,s),c=Object.values(o).filter(S=>S.type==="dms-format").reduce((S,R)=>(S[R.key]=R,S),{});let d=["dms","data",`${i}+${a}`,"length"];if(l.find(S=>["list","load"].includes(S.action))){const S=(_=($=l.find(R=>["list","load"].includes(R.action)))==null?void 0:$.filter)==null?void 0:_.options;S&&(d=["dms","data",`${i}+${a}`,"options",S,"length"])}const u=B(await e.get(d),["json",...d],0),p=["dms","data",`${i}+${a}`,"byIndex"],m=l.map(S=>Ac(S,r,s,u)).filter(S=>S==null?void 0:S.length);m.length>0&&await e.get(...m);let f=e.getCache();if(l.find(S=>S.action==="search")){const S=m[0].filter((R,q)=>q<=m[0].indexOf("byTag"));return B(f,S,{})}if(l.find(S=>S.action==="load")){const S=m[0].filter((R,q)=>q<=m[0].indexOf("byIndex"));return Object.values(B(f,S,{}))}const y=l.filter(S=>S.action!=="load").map(S=>Wr(S,r)).filter(S=>S==null?void 0:S.length).map(S=>{let R=B(f,S.slice(0,-1),!1);return(R==null?void 0:R.$type)==="ref"?+R.value[3]:+(R==null?void 0:R.id)}).filter(S=>S);let v=(C=(j=l[0])==null?void 0:j.params)==null?void 0:C.id,b=typeof((N=(k=l==null?void 0:l[0])==null?void 0:k.filter)==null?void 0:N.fromIndex)=="function"?(I=(M=l==null?void 0:l[0])==null?void 0:M.filter)==null?void 0:I.fromIndex(s):+((F=(W=l==null?void 0:l[0])==null?void 0:W.params)==null?void 0:F[(P=(E=l==null?void 0:l[0])==null?void 0:E.filter)==null?void 0:P.fromIndex]),g=typeof((V=(Y=l==null?void 0:l[0])==null?void 0:Y.filter)==null?void 0:V.toIndex)=="function"?(J=(H=l==null?void 0:l[0])==null?void 0:H.filter)==null?void 0:J.toIndex(s):+((ee=(L=l==null?void 0:l[0])==null?void 0:L.params)==null?void 0:ee[(U=(G=l==null?void 0:l[0])==null?void 0:G.filter)==null?void 0:U.toIndex]);const w=!v&&b&&g&&Object.keys(B(f,[...p],{})).filter(S=>+S>=+b&&+S<=+g-1).map(S=>B(f,[...p,S,"value",3])).filter(S=>S);y.push(...w||[]);const T=await Oc(f,y,w==null?void 0:w.length,i,a,c,r,e);return(O=l==null?void 0:l[0])!=null&&O.lazyLoad&&Lc[`${i}+${a}`],T}async function Jt(e,n,s={},r){var m,f,y,v;const{app:i,type:a}=n.format,{id:o}=s,l=Object.keys(s).filter(b=>!["id","updated_at","created_at"].includes(b)),c=Object.values(((m=n==null?void 0:n.format)==null?void 0:m.attributes)||{}).filter(b=>b.type==="dms-format").reduce((b,g)=>(b[g.key]=g,b),{}),u=l.filter(b=>Object.keys(c).includes(b)).reduce((b,g)=>(b[g]=s[g],delete s[g],b),{});console.log("gonna updateDMSAttrs",u,c,e);let p=await Dc(u,c,e);if(s={...s,...p},r==="delete"&&o)return await e.call(["dms","data","delete"],[i,a,o]),await e.invalidate(["dms","data",`${i}+${a}`,"length"]),{response:`Deleted item ${o}`};if(r==="updateType"&&o)return s.type?(await e.call(["dms","type","edit"],[o,s.type]),await e.invalidate(["dms","data","byId",o]),{message:"Update successful."}):{message:"No type found."};if(o&&l.length>0)return console.time(`falcor update data ${o}`),await e.call(["dms","data","edit"],[o,s]),await e.invalidate(["dms","data","byId",o]),console.timeEnd(`falcor update data ${o}`),{message:"Update successful."};if(l.length>0){const b=await e.call(["dms","data","create"],[i,a,s]);return await e.invalidate(["dms","data",`${i}+${a}`,"length"]),{response:"Item created.",id:Object.keys(((v=(y=(f=b==null?void 0:b.json)==null?void 0:f.dms)==null?void 0:y.data)==null?void 0:v.byId)||{})[0]}}return{message:"Not sure how I got here."}}const{InvalidConfig:Pc,NoRouteMatch:Fc}=Yn,Bc=e=>{const{config:n,path:s="",theme:r=Pn,user:i}=e,a=$t();if(A.useEffect(()=>{if(n.check){let l=Gn(n.children,s,n.format);n.check(e,l,a)}},[s]),!n.children||!Ic(n.format))return t.jsx(Pc,{config:n});const o=A.useMemo(()=>Br(n.children,s,n.format,i),[s]);return o?A.useMemo(()=>t.jsx(t.Fragment,{children:o}),[o]):t.jsx(Fc,{path:s})};function Jn(e,n=r=>r,s=Pn){const{API_HOST:r="https://graph.availabs.org",baseUrl:i=""}=e,a=`${i}/`,o=Ut.falcorGraph(r);async function l({request:u,params:p}){return{data:await Et(o,e,`/${p["*"]||""}`)}}async function c({request:u,params:p}){const m=await u.formData();return Jt(o,e,JSON.parse(m.get("data")),m.get("requestType"),p["*"])}function d(){const u=Di(),p=n(Bc);return A.useMemo(()=>t.jsx(Ut.FalcorProvider,{falcor:o,children:t.jsx(p,{path:`/${u["*"]||""}`,config:e,theme:s})}),[u["*"]])}return{path:`${a}*`,element:t.jsx(d,{}),loader:l,action:c}}const zc={email:"user",authLevel:5};function zs({children:e,theme:n,baseUrl:s="",user:r=zc,pgEnv:i,...a}){const{falcor:o,falcorCache:l}=Ut.useFalcor();return t.jsx(oe.Provider,{value:{baseUrl:s,user:r,theme:n,falcor:o,falcorCache:l,pgEnv:i},children:e})}function Ws({icon:e,className:n}){return t.jsx("div",{className:`${n} flex justify-center items-center`,children:t.jsx("span",{className:e})})}const rn=({i:e=0,children:n,icon:s,to:r,onClick:i,className:a=null,type:o="side",active:l=!1,subMenus:c=[],themeOptions:d,subMenuActivate:u="onClick",subMenuOpen:p=!1})=>{const{theme:m}=A.useContext(oe),f=m[o==="side"?"sidenav":"topnav"](d),y=$t(),v=A.useMemo(()=>Array.isArray(r)?r:[r],[r]),b=A.useMemo(()=>{const M=c.reduce((I,W)=>(Array.isArray(W.path)?I.push(...W.path):W.path&&I.push(W.path),I),[]);return[...v,...M]},[v,c]),g=!!er({path:`${b[0]}/*`||"",end:!0}),w=o==="side"?f.navitemSide:f.navitemTop,T=o==="side"?f.navitemSideActive:f.navitemTopActive,$=g||l,_=$?T:w,[j,C]=A.useState(p||g),[k,N]=A.useState(!1);return h.useEffect(()=>{C(g)},[g,j,r]),t.jsx("div",{className:o==="side"?f.subMenuParentWrapper:null,onMouseOutCapture:()=>u==="onHover"&&C(!1)||u!=="onHover"&&N(!1)&&C(!1),onMouseMove:()=>u==="onHover"&&C(!0)||u!=="onHover"&&N(!0)&&C(!0),children:t.jsx("div",{className:`${a||_}`,onClick:M=>{if(M.stopPropagation(),i)return i(v[0]);v[0]&&y(v[0])},children:t.jsxs("div",{className:"flex",children:[t.jsxs("div",{className:"flex-1 flex",children:[s?t.jsx(Ws,{icon:s,className:o==="side"?$?f.menuIconSideActive:f.menuIconSide:$?f.menuIconTopActive:f.menuIconTop}):null,t.jsx("div",{className:f.navItemContent,children:n})]}),t.jsx("div",{onClick:()=>{u==="onClick"&&C(!j)},children:c.length?t.jsx(Ws,{icon:j?f.indicatorIconOpen:f.indicatorIcon}):null}),c.length?t.jsx(Wc,{i:e,showSubMenu:j,subMenuActivate:u,active:g,hovering:k,subMenus:c,type:o,themeOptions:d,className:a}):""]})})})},Wc=({i:e,showSubMenu:n,subMenus:s,type:r,hovering:i,subMenuActivate:a,active:o,themeOptions:l})=>{const{theme:c}=A.useContext(oe),d=c[r==="side"?"sidenav":"topnav"](l),u=!o&&a!=="onHover"&&i;return(!n||!s.length)&&!u?null:t.jsx("div",{className:r==="side"?d.subMenuWrapper:u&&e===0?d.subMenuWrapperInactiveFlyout:u&&e>0?d.subMenuWrapperInactiveFlyoutBelow:d.subMenuWrapperTop,children:t.jsx("div",{className:`
							${u&&d.subMenuWrapperInactiveFlyoutDirection}
							${!u&&d.subMenuWrapperChild}
					flex ${r==="side"||u?"flex-col":"flex-row"}
				`,children:s.map((p,m)=>t.jsx(rn,{i:m+1,to:p.path,icon:p.icon,type:r,className:p.className,onClick:p.onClick,themeOptions:l,subMenus:p.subMenus,children:p.name},m))})})},Hr=({open:e,toggle:n,menuItems:s=[],rightMenu:r=null,themeOptions:i={}})=>{const{theme:a}=A.useContext(oe),o=a.topnav(i);return t.jsxs("div",{className:`${e?"md:hidden":"hidden"} ${o.topnavMobileContainer}`,id:"mobile-menu",children:[t.jsx("div",{className:"",children:s.map((l,c)=>t.jsx(rn,{type:"top",to:l.path,icon:l.icon,themeOptions:i,subMenus:B(l,"subMenus",[]),children:l.name},c))}),t.jsx("div",{className:"",children:r})]})},Hc=({open:e,toggle:n,menuItems:s=[],rightMenu:r=null,leftMenu:i=null,subMenuActivate:a,themeOptions:o={}})=>{const{theme:l}=A.useContext(oe);let c=l.topnav(o);return t.jsx("div",{className:`${c.topnavWrapper}`,children:t.jsxs("div",{className:`${c.topnavContent} justify-between`,children:[t.jsx("div",{children:i}),t.jsx("div",{className:`${c.topnavMenu}`,children:s.map((d,u)=>t.jsx(rn,{type:"top",to:d.path,icon:d.icon,subMenuActivate:a,themeOptions:o,subMenus:B(d,"subMenus",[]),children:d.name},u))}),t.jsxs("div",{className:"flex items-center justify-center h-full",children:[t.jsx("div",{className:`${c.topmenuRightNavContainer}`,children:r}),t.jsxs("button",{type:"button",className:`${c.mobileButton}`,onClick:()=>n(!e),children:[t.jsx("span",{className:"sr-only",children:"Open main menu"}),t.jsx("div",{className:"flex justify-center items-center text-2xl",children:t.jsx("span",{className:e?c.menuCloseIcon:c.menuOpenIcon})})]})]})]})})},Uc=({...e})=>{const[n,s]=h.useState(!1);return t.jsxs("nav",{children:[t.jsx(Hc,{open:n,toggle:s,...e}),t.jsx(Hr,{open:n,...e})]})},Ur=({i:e,item:n,themeOptions:s,subMenuActivate:r})=>t.jsx(rn,{to:n.path,icon:n.icon,className:n.className,onClick:n.onClick,themeOptions:s,subMenuActivate:r,subMenus:B(n,"subMenus",[]),children:n.name},e),qc=({open:e,toggle:n,logo:s=null,topMenu:r,menuItems:i=[],bottomMenu:a,themeOptions:o={},subMenuActivate:l,subMenuStyle:c,...d})=>{const{theme:u}=A.useContext(oe),p=u.sidenav(o);return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"md:hidden",onClick:()=>n(!e),children:t.jsx("span",{className:e?p.menuIconOpen:p.menuIconClosed})}),t.jsxs("div",{style:{display:e?"block":"none"},className:"md:hidden",children:[t.jsx("div",{className:"fixed inset-0 z-20 transition-opacity ease-linear duration-300",children:t.jsx("div",{className:"absolute inset-0 opacity-75"})}),t.jsx("div",{className:`fixed inset-0 flex z-40 ${p.contentBgAccent}`,children:t.jsxs("div",{className:`flex-1 flex flex-col max-w-xs w-full transform ease-in-out duration-300 ${p.contentBg}`,children:[t.jsx("div",{className:"absolute top-0 right-0 -mr-14 p-1",children:t.jsx("button",{onClick:()=>n(!e),className:"flex items-center justify-center h-12 w-12 rounded-full focus:outline-none focus:bg-gray-600 os-icon os-icon-x"})}),t.jsxs("div",{className:"flex-1 h-0 pt-2 pb-4 overflow-y-auto overflow-x-hidden",children:[t.jsx("div",{className:"px-6 pt-4 pb-8 logo-text gray-900",children:t.jsx(Se,{to:"/",className:`flex-shrink-0 flex items-center ${p.text}`,children:s})}),t.jsx("div",{children:r}),t.jsx("nav",{className:"flex-1",children:i.map((m,f)=>t.jsx("div",{className:m.sectionClass,children:Ur({i:f,page:m,themeOptions:o,subMenuActivate:l})},f))}),t.jsx("div",{children:a})]})]})})]})]})},Vc=({menuItems:e=[],logo:n=null,topMenu:s,bottomMenu:r,toggle:i,open:a,mobile:o,themeOptions:l={},subMenuActivate:c,subMenuStyle:d,...u})=>{const{theme:p}=A.useContext(oe),m=p.sidenav(l);return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:`${m.sidenavWrapper}`,children:[s,t.jsx("nav",{className:`${m.itemsWrapper}`,children:e.map((f,y)=>Ur({i:y,item:f,themeOptions:l,subMenuActivate:c}))}),r]}),o==="side"?"":t.jsx("div",{className:`${m.topnavWrapper} md:hidden`,children:t.jsxs("div",{className:`${m.topnavContent} justify-between`,children:[t.jsx("div",{children:s}),t.jsxs("div",{className:"flex items-center justify-center h-full",children:[t.jsx("div",{className:`${m.topmenuRightNavContainer}`,children:r}),t.jsxs("button",{type:"button",className:m.mobileButton,onClick:()=>i(!a),children:[t.jsx("span",{className:"sr-only",children:"Open main menu"}),t.jsx("div",{className:"flex justify-center items-center text-2xl",children:t.jsx("span",{className:a?m.menuCloseIcon:m.menuOpenIcon})})]})]})]})})]})},on=e=>{const[n,s]=h.useState(!1);return t.jsxs(t.Fragment,{children:[t.jsx(Vc,{...e,open:n,toggle:s}),e.mobile==="side"?t.jsx(qc,{open:n,toggle:s,...e}):t.jsx(Hr,{open:n,...e,themeOptions:{}})]})};let Yc={none:"",micro:"mr-14",mini:"mr-20",miniPad:"mr-0",compact:"mr-44",full:"mr-64"},Gc={none:"",micro:"w-14",mini:"w-20",miniPad:"w-0",compact:"w-44",full:"w-64"};const Jc=()=>t.jsx("div",{className:"h-12"}),Dt=({children:e,menus:n,sideNav:s={},topNav:r={},title:i})=>{A.useContext(oe);const a={size:s.size||"none",color:s.color||"dark",menuItems:s.menuItems||n,logo:(s==null?void 0:s.logo)||Jc},o={position:r.position||"block",size:r.size||"compact",menu:r.menu||"left",subMenuStyle:r.subMenuStyle||"row",menuItems:(r.menuItems||[]).filter(c=>!c.hideInNav),logo:r.logo||t.jsxs("div",{className:"flex items-center justify-center h-12",children:[t.jsx("div",{to:"/",className:`${["none"].includes(a.size)?"":"md:hidden"}`}),i]}),rightMenu:r.rightMenu||t.jsx("div",{})},l=a.logo;return t.jsxs("div",{className:"flex",children:[a.size==="none"?"":t.jsx("div",{className:`hidden md:block ${Yc[a.size]}`,children:t.jsx("div",{className:`fixed h-screen ${Gc[a.size]}`,children:t.jsx(on,{topMenu:t.jsx(l,{sideNav:a}),themeOptions:a,menuItems:a.menuItems})})}),t.jsxs("div",{className:"flex-1 flex items-start flex-col items-stretch w-full min-h-screen",children:[o.size==="none"?"":t.jsx(t.Fragment,{children:t.jsx("div",{className:`${o.position==="fixed"?"sticky top-0 z-20 w-full ":""}`,children:t.jsx(Uc,{themeOptions:o,leftMenu:o.logo,menuItems:o.menuItems,rightMenu:o.rightMenu})})}),t.jsx("div",{id:"content",className:"flex-1",children:e})]})]})};function Kt(e,n,s="",r){let i=n.filter(a=>e.id&&a.parent===e.id).sort((a,o)=>a.index-o.index);return i.length===0?!1:i.map((a,o)=>{let l={id:a.id,path:`${r?`${s}/edit`:s}/${a.url_slug||a.id}`,name:a.title};return Kt(l,n)&&(l.subMenus=Kt(a,n,s,r)),l})}function Kc(e,n){const s=window.location.pathname.replace(n,"").replace("/","").replace("edit/","");return s===""?e.find(r=>r.index===0&&r.parent===""):e.find((r,i)=>r.url_slug===s||r.id===s)}function qr(e,n){var a,o;const s=Kc(e,n),r=e.filter(l=>l.parent===(s==null?void 0:s.id)).length;return(s?(o=(a=s.url_slug)==null?void 0:a.split("/"))==null?void 0:o.length:1)+(r?1:0)}function Vr(e,n="",s=!1){return e.sort((r,i)=>r.index-i.index).filter(r=>!r.parent).filter(r=>s||r.published!=="draft").map((r,i)=>{let a={id:r.id,path:`${s?`${n}/edit`:n}/${r.url_slug||r.id}`,name:`${r.title} ${r.published==="draft"?"*":""}`,hideInNav:r.hide_in_nav};return Kt(a,e,n,s)&&(a.subMenus=Kt(r,e,n,s)),a})}const me=(e,n="update")=>{let s=new FormData;return s.append("data",JSON.stringify(e)),s.append("requestType",n),s},Xc=(e,n)=>e.parent?`${n.filter(r=>r.id===e.parent)[0].url_slug}/`:"",lt=(e,n)=>{let s=`${Xc(e,n)}${Yr(e.title)}`;return e.url_slug&&e.url_slug===s||!n.map(r=>r.url_slug).includes(s)?s:`${s}_${e.index}`},Yr=e=>e&&e.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g).map(n=>n.toLowerCase()).join("_"),Zc={1:" pt-2 pb-1 uppercase text-sm text-blue-400 hover:underline cursor-pointer border-r-2 mr-4",2:"pl-2 pt-2 pb-1 uppercase text-sm text-slate-400 hover:underline cursor-pointer border-r-2 mr-4",3:"pl-4 pt-2 pb-1 text-sm text-slate-400 hover:underline cursor-pointer border-r-2 mr-4",4:"pl-6 pt-2 pb-1 text-sm text-slate-400 hover:underline cursor-pointer border-r-2 mr-4"},Qc=e=>{var n;return e?typeof e=="object"?e:(n=JSON.parse(e))==null?void 0:n.text:{}};function Kn(e,n=!1){const s=e;return{menuItems:((s==null?void 0:s.sections)||[]).reduce((i,{title:a,element:o,level:l="1",...c})=>{var u,p,m;if(!o||!a||l==="0")return i;const d=o["element-type"]==="lexical"||!o["element-type"]?(m=(p=(u=Qc(o["element-data"]))==null?void 0:u.root)==null?void 0:p.children)==null?void 0:m.reduce((f,{type:y,tag:v,children:b,...g})=>{var T,$,_,j;const w=y==="heading"&&(($=(T=b[0])==null?void 0:T.text)!=null&&$.length)?[{name:(_=b[0])==null?void 0:_.text,onClick:C=>{const k=[...window.document.querySelectorAll(v)].find(N=>{var M,I;return((M=N==null?void 0:N.children[0])==null?void 0:M.innerHTML)===((I=b[0])==null?void 0:I.text)});k==null||k.scrollIntoView({behavior:"smooth"})},className:`pl-2 pr-4 pb-1 text-sm text-slate-400 hover:text-slate-700 cursor-pointer border-r-2 mr-4
                            ${((j=[...window.document.querySelectorAll(v)].find(C=>{var k,N;return((k=C==null?void 0:C.children[0])==null?void 0:k.innerHTML)===((N=b[0])==null?void 0:N.text)}))==null?void 0:j.offsetParent)===null?"text-blue-200":""}`}]:[];return[...f,...w]},[]):[];return[...i,{name:a,onClick:f=>{const y=window.document.getElementById(`#${a==null?void 0:a.replace(/ /g,"_")}`);y==null||y.scrollIntoView({behavior:"smooth"})},className:Zc[l]},...d||[]]},[]),themeOptions:{size:"full",color:"transparent"}}}function ed({item:e,dataItems:n,attributes:s,logo:r,rightMenu:i}){var y,v,b;if(console.log("page_view"),!e)return t.jsx("div",{children:" No Pages "});const{baseUrl:a,theme:o,user:l}=A.useContext(oe),c=A.useMemo(()=>s.sections.ViewComp,[]),d=A.useMemo(()=>Vr(n,a,!1),[n]),u=(e==null?void 0:e.index)==="999"?1:qr(n,a),p=Kn(e),m=(v=(y=e.sections)==null?void 0:y.filter(g=>g.is_header))==null?void 0:v[0],f=(b=e.sections)==null?void 0:b.filter(g=>!g.is_header&&!g.is_footer);return t.jsxs("div",{id:"page_view",children:[(e==null?void 0:e.header)==="above"&&t.jsx(c,{item:e,value:[m],...s.sections}),t.jsx(Dt,{topNav:{menuItems:d,position:"fixed",logo:r,rightMenu:i},sideNav:e.sideNav?e.sideNav:p,children:t.jsxs("div",{className:`${o.page.wrapper1} ${o.navPadding[u]}`,children:[(e==null?void 0:e.header)==="below"&&t.jsx(c,{item:e,value:[m],...s.sections}),t.jsxs("div",{className:`${o.page.wrapper2}`,children:[(e==null?void 0:e.sidebar)==="show"&&t.jsx(nd,{inPageNav:p}),t.jsxs("div",{className:o.page.wrapper3,children:[(e==null?void 0:e.header)==="inpage"&&t.jsx(c,{item:e,value:[m],...s.sections}),(l==null?void 0:l.authLevel)>=5&&t.jsx(td,{item:e,baseUrl:a}),t.jsx(c,{item:e,value:f,...s.sections})]})]})]})}),(e==null?void 0:e.footer)&&t.jsx("div",{className:"h-[300px] bg-slate-100"})]})}function td({baseUrl:e,item:n}){return t.jsx(Se,{className:"z-30 absolute right-[10px] top-[5px]",to:`${e}/edit/${n.url_slug}`,children:t.jsx("i",{className:"fad fa-edit fa-fw flex-shrink-0 text-lg text-slate-400 hover:text-blue-500"})})}function nd({inPageNav:e}){return t.jsx("div",{className:"w-64 hidden xl:block",children:t.jsx("div",{className:"w-64 sticky top-20 hidden xl:block h-screen",children:t.jsx("div",{className:"h-[calc(100%_-_5rem)] overflow-y-auto overflow-x-hidden font-display",children:t.jsx(on,{...e})})})})}const sd=({label:e,types:n,type:s,setType:r,multi:i=!1,size:a="small",disabled:o,disabledTitle:l,autoSelect:c=!0})=>(h.useEffect(()=>{var p,m;const d=((p=n[0])==null?void 0:p.value)||n[0];if(!d||!c||o)return;const u=i?[d]:d;(!s||Array.isArray(s)&&!((m=s.filter(f=>f))!=null&&m.length))&&r(u)},[n]),t.jsxs("div",{className:"my-1 flex flex-rows flex-wrap",title:o?l:null,children:[e&&t.jsx("div",{className:"p-2 pl-0 w-1/4",children:e}),t.jsx("span",{className:`
              
                space-x-1 rounded-lg bg-slate-100 py-0.5
                flex flex-row flex-wrap
                shadow-sm 
                ${a==="large"?"w-full":"w-fit"}`,children:n.map((d,u)=>{const p=(d==null?void 0:d.value)||d,m=i&&Array.isArray(s)?s:i&&!Array.isArray(s)?[s]:!i&&Array.isArray(s)?s[0]:s,f=i&&(m==null?void 0:m.includes(p))||!i&&m===p;return t.jsx("button",{type:"button",className:`
                            ${u!==0&&"-ml-px"} 
                            ${o&&"pointer-events-none"}
                            rounded-lg py-[0.4375rem] break-none
                            ${f?"text-gray-900 bg-white shadow":"text-gray-700"} hover:text-blue-500
                            min-w-[60px] min-h-[30px] uppercase
                            relative items-center px-2 text-xs items-center justify-center text-center 
                            focus:z-10`,onClick:()=>{const y=i&&(m!=null&&m.includes(p))?m.filter(v=>v!==p):i&&!(m!=null&&m.includes(p))?[...m,p]:p;r(y)},children:(d==null?void 0:d.label)||d},u)})})]}));function dt({options:e=[],onChange:n,value:s,nameAccessor:r=o=>(o==null?void 0:o.name)||o,valueAccessor:i,className:a}){const[o,l]=h.useState(""),c=o===""?e:e.filter(d=>(r(d)+"").toLowerCase().replace(/\s+/g,"").startsWith(o.toLowerCase().replace(/\s+/g,"")));return t.jsx("div",{className:"w-full",children:t.jsx(yt,{value:s,onChange:n,children:t.jsxs("div",{className:"relative mt-1",children:[t.jsxs("div",{className:a||"relative w-full cursor-default overflow-hidden rounded-lg bg-white text-left shadow-md focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75 focus-visible:ring-offset-2 focus-visible:ring-offset-blue-300 sm:text-sm",children:[t.jsx(yt.Input,{className:"w-full border-none py-2 pl-3 pr-10 text-sm leading-5 text-gray-900 focus:ring-0",displayValue:d=>r(d)||d,onChange:d=>l(d.target.value)}),t.jsx(yt.Button,{className:"absolute inset-y-0 right-0 flex items-center pr-2",children:t.jsx("div",{className:"h-5 w-5 text-gray-400 flex items-center justify-center","aria-hidden":"true",children:t.jsx("div",{class:"fa fa-chevron-down"})})})]}),t.jsx(Ce,{as:h.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",afterLeave:()=>l(""),children:t.jsx(yt.Options,{className:"z-50 absolute mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm",children:c.length===0&&o!==""?t.jsx("div",{className:"relative cursor-default select-none py-2 px-4 text-gray-700",children:"Nothing found."}):c.filter((d,u)=>u<60).map((d,u)=>t.jsx(yt.Option,{className:({active:p})=>`relative cursor-default select-none py-2 pl-10 pr-4 ${p?"bg-blue-600 text-white":"text-gray-900"}`,value:d,children:({selected:p,active:m})=>t.jsxs(t.Fragment,{children:[t.jsx("span",{className:`block truncate ${p?"font-medium":"font-normal"}`,children:r(d)||d}),p?t.jsx("span",{className:`absolute inset-y-0 left-0 flex items-center pl-3 ${m?"text-white":"text-blue-600"}`,children:t.jsx("div",{className:"h-5 w-5 flex items-center justify-center","aria-hidden":"true",children:t.jsx("div",{className:"fa fa-check"})})}):null]})},u))})})]})})})}const le="hazmit_dama",Gr=e=>Object.entries(e||{}).reduce((n,s)=>{const[r,i]=s;return typeof i.value<"u"?n[r]=i.value:n[r]=i,n},{}),rd=({source_id:e,value:n,onChange:s})=>{const{falcor:r,falcorCache:i}=A.useContext(oe);h.useEffect(()=>{async function o(){const l=["dama",le,"sources","byId",e,"views","length"],c=await r.get(l);await r.get(["dama",le,"sources","byId",e,"views","byIndex",{from:0,to:B(c.json,l,0)-1},"attributes",["view_id","version"]])}o()},[r,le]);const a=h.useMemo(()=>Object.values(B(i,["dama",le,"sources","byId",e,"views","byIndex"],{})).map(o=>Gr(B(i,o.value,{attributes:{}}).attributes)),[i,e,le]);return h.useEffect(()=>{var o;!n&&((o=a==null?void 0:a[0])!=null&&o.view_id)&&s(a==null?void 0:a[0])},[a]),t.jsx(dt,{options:["",...a],value:n,nameAccessor:o=>o==null?void 0:o.version,onChange:o=>s(o)})},id=({value:e,onChange:n})=>{const{falcor:s,falcorCache:r}=A.useContext(oe);h.useEffect(()=>{async function a(){const o=["dama",le,"sources","length"],l=await s.get(o);await s.get(["dama",le,"sources","byIndex",{from:0,to:B(l.json,o,0)-1},"attributes",["source_id","name","metadata"]])}a()},[s,le]);const i=h.useMemo(()=>Object.values(B(r,["dama",le,"sources","byIndex"],{})).map(a=>Gr(B(r,a.value,{attributes:{}}).attributes)),[r,le]);return t.jsx(dt,{options:["",...i],value:e,onChange:a=>n(a)})};function od({item:e={}}){const{baseUrl:n}=A.useContext(oe),[s,r]=h.useState(!1);return t.jsxs("div",{className:"grid grid-cols-4 px-2 py-3 border-b hover:bg-blue-50",children:[t.jsx("div",{children:t.jsxs(Se,{to:`${n}/templates/edit/${e.id}`,children:[t.jsx("div",{className:"px-2 font-medium text-lg text-slate-700",children:e.title}),t.jsx("div",{className:"px-2 text-xs text-slate-400",children:e.id})]})}),t.jsx("div",{}),t.jsx("div",{}),t.jsxs("div",{className:"text-right flex items-center flex-row justify-end px-2 ",children:[t.jsx(Se,{to:`${n}/templates/pages/${e.id}`,className:"fa-thin fa-memo px-2 py-1 mx-2 text-bold cursor-pointer",title:"pages"}),t.jsx("i",{className:"fa fa-trash text-red-300 hover:text-red-500 cursor-pointer",onClick:()=>r(!s)}),t.jsx(cd,{item:e,open:s,setOpen:r})]})]})}function ad({children:e,dataItems:n,edit:s,baseUrl:r="",logo:i,rightMenu:a,sideNav:o=[],...l}){const{path:c}=Me(),[d,u]=h.useState(!1),p=[{path:`${r}/templates`,name:"Templates"}];return t.jsx(Dt,{topNav:{menuItems:p,position:"fixed",logo:i,rightMenu:a},sideNav:o,children:t.jsx("div",{className:"py-6 h-full",children:t.jsxs("div",{className:"bg-white h-full shadow border max-w-6xl mx-auto px-6",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"text-2xl p-3 font-thin flex-1",children:"Templates"}),c===`${r}/templates`?t.jsx("div",{className:"px-1",children:t.jsx(Se,{to:`${r}`,className:"inline-flex w-36 justify-center rounded-lg cursor-pointer text-sm font-semibold py-1 px-4 bg-blue-600 text-white hover:bg-blue-500 shadow-lg border border-b-4 border-blue-800 hover:border-blue-700 active:border-b-2 active:mb-[2px] active:shadow-none",children:" Templates "})}):t.jsx("div",{className:"px-1",children:t.jsx("div",{onClick:()=>u(!d),className:"inline-flex w-36 justify-center rounded-lg cursor-pointer text-sm font-semibold py-1 px-4 bg-blue-600 text-white hover:bg-blue-500 shadow-lg border border-b-4 border-blue-800 hover:border-blue-700 active:border-b-2 active:mb-[2px] active:shadow-none",children:" New Template"})})]}),t.jsx("div",{className:"px-6 pt-8",children:t.jsx("div",{className:"shadow rounded border",children:n.filter(m=>m.template_id=="-99").map(m=>t.jsx(od,{item:m},m.id))})}),t.jsx(ld,{open:d,setOpen:u})]})})})}function ld({open:e,setOpen:n}){const s=h.useRef(null),r=$e(),{pathname:i="/edit"}=Me(),[a,o]=h.useState(!1),[l,c]=h.useState("");return t.jsxs(Qn,{open:e,setOpen:n,initialFocus:s,children:[t.jsxs("div",{className:"sm:flex sm:items-start",children:[t.jsx("div",{className:"mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-blue-100 sm:mx-0 sm:h-10 sm:w-10",children:t.jsx("i",{className:"fa fa-plus text-blue-400"})}),t.jsxs("div",{className:"mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left w-full px-2",children:[t.jsx(Ne.Title,{as:"h3",className:"text-base font-semibold leading-6 text-gray-900",children:"New Template"}),t.jsx("div",{className:"mt-2 w-full",children:t.jsx("input",{className:"w-full px-2 py-1 text font-medium text-slate-500 focus:outline-none border-slate-300 border-b-2 focus:border-blue-500",value:l,onChange:d=>c(d.target.value),placeholder:"Template Title"})})]})]}),t.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[t.jsxs("button",{type:"button",disabled:a||l.length<3,className:"inline-flex w-full justify-center rounded-md disabled:bg-slate-300 bg-blue-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-blue-500 sm:ml-3 sm:w-auto",onClick:async()=>{const d={title:l,url_slug:Yr(l),template_id:-99,hide_in_nav:!0,index:999};o(!0),await r(me(d),{method:"post",action:i}),o(!1),n(!1)},children:["Creat",a?"ing...":"e"]}),t.jsx("button",{type:"button",className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto",onClick:()=>n(!1),ref:s,children:"Cancel"})]})]})}function cd({item:e,open:n,setOpen:s}){const r=h.useRef(null),i=$e(),{pathname:a="/edit"}=Me(),[o,l]=h.useState(!1);return t.jsxs(Qn,{open:n,setOpen:s,initialFocus:r,children:[t.jsxs("div",{className:"sm:flex sm:items-start",children:[t.jsx("div",{className:"mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:t.jsx("i",{className:"fa fa-exlamation-triangle"})}),t.jsxs("div",{className:"mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left",children:[t.jsxs(Ne.Title,{as:"h3",className:"text-base font-semibold leading-6 text-gray-900",children:["Delete Page ",e.title," ",e.id]}),t.jsx("div",{className:"mt-2",children:t.jsx("p",{className:"text-sm text-gray-500",children:"Are you sure you want to delete this Template? All of the page data will be permanently removed from our servers forever. This action cannot be undone."})})]})]}),t.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[t.jsxs("button",{type:"button",disabled:o,className:"inline-flex w-full justify-center rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-red-500 sm:ml-3 sm:w-auto",onClick:async()=>{l(!0),await i(me(e,"delete"),{method:"post",action:a}),l(!1),s(!1)},children:["Delet",o?"ing...":"e"]}),t.jsx("button",{type:"button",className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto",onClick:()=>s(!1),ref:r,children:"Cancel"})]})]})}const Jr=e=>typeof(e==null?void 0:e.value)=="object"?Jr(e.value):(e==null?void 0:e.value)||e,dd={"docs-play":"Playground","docs-page":"Live","docs-draft":"Draft","docs-ctp":"CTP Live"},Hs={"docs-play":"/playground","docs-page":"","docs-ctp":"","docs-draft":"/drafts"},Xt=({app:e,type:n,filter:s,action:r="load",tags:i,attributes:a=[{key:"id",label:"id"},{key:"app",label:"app"},{key:"type",label:"type"},{key:"data",label:"data"},{key:"updated_at",label:"updated_at"}]})=>({format:{app:e,type:n,attributes:a},children:[{type:()=>{},action:r,filter:{options:JSON.stringify({filter:s}),tags:i,attributes:a.map(o=>o.key)},path:"/"}]}),ud=e=>Object.keys(e).find(n=>n.toLowerCase().includes("name")||n.toLowerCase().includes("title")),pd=(e,n,s)=>e==="geoid"?(s==null?void 0:s.county)||(s==null?void 0:s.name)||n:(s==null?void 0:s[ud(s)])||n,md=({item:e,params:n,logo:s,rightMenu:r,baseUrl:i=""})=>{var w,T,$,_;const[a,o]=h.useState(10),{falcor:l,falcorCache:c}=A.useContext(oe),{id:d}=n,u=(T=(w=e.data_controls)==null?void 0:w.view)==null?void 0:T.view_id,p=(_=($=e.data_controls)==null?void 0:$.id_column)==null?void 0:_.name,m=[e.type],f=[{path:`${i}/templates`,name:"Templates"}];if(!d)return null;const[y,v]=h.useState([]);h.useEffect(()=>{(async function(){const j=await m.reduce(async(C,k)=>{const N=await C,M=await Et(Xt({app:"dms-site",type:k,filter:{"data->>'template_id'":[d]}}),"/");return[...N,...M]},Promise.resolve([]));v(j)})()},[d]),h.useEffect(()=>{u&&async function(){l.get(["dama",le,"viewsbyId",u,"data","length"])}()},[d,u]);const b=A.useMemo(()=>B(c,["dama",le,"viewsbyId",u,"data","length"],0),[d,le,u,c]);h.useEffect(()=>{u&&async function(){l.get(["dama",le,"viewsbyId",u,"databyIndex",{from:0,to:b-1},Object.keys(e.data_controls.active_row||{})])}()},[d,le,u,c]);const g=A.useMemo(()=>Object.values(B(c,["dama",le,"viewsbyId",u,"databyIndex"],{})).map(j=>B(c,[...j.value],"")),[d,p,u,c]);return y.map(({type:j,data:C,updated_at:k})=>{var M,I,W;const N=g.find(E=>E[p]===C.value.id_column_value);return{title:pd(p,C.value.id_column_value,N)||C.value.title,location:dd[j],view:`${Hs[j]}/${(M=C==null?void 0:C.value)==null?void 0:M.url_slug}`,edit:`${Hs[j]}/edit/${(I=C==null?void 0:C.value)==null?void 0:I.url_slug}`,updated:Jr(k),status:((W=C==null?void 0:C.value)==null?void 0:W.num_errors)>0?"error":"success"}}),t.jsx(Dt,{topNav:{menuItems:f,position:"fixed",logo:s,rightMenu:r},sideNav:[],children:t.jsx("div",{className:"h-full flex-1 flex flex-col text-gray-900 bg-slate-100",children:t.jsx("div",{className:"py-6 h-full",children:t.jsxs("div",{className:"bg-white h-full shadow border max-w-6xl mx-auto px-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between",children:[t.jsxs("div",{className:"flex flex-col",children:[t.jsxs("label",{className:"text-2xl pt-3 font-thin flex-1",children:[t.jsx("span",{className:"font-semibold",children:e.title})," / Generated Pages"]}),t.jsxs("label",{className:"text-sm font-thin flex-1 italic",children:["Showing ",y==null?void 0:y.length," generated / ",b," available items"]})]}),t.jsxs("div",{className:"text-xs",children:[t.jsx("label",{children:"show"}),t.jsx("select",{className:"p-2 m-2 h-fit",value:a,onChange:j=>o(j.target.value),children:[10,25,50,75,100].map(j=>t.jsx("option",{value:j,children:j},j))}),t.jsx("label",{children:"rows"})]})]}),t.jsx("div",{className:"px-6 pt-8",children:t.jsx("div",{className:"shadow rounded border"})})]})})})})},Xn=(e,n={})=>{let s=n;try{s=JSON.parse(e)}catch{}return s},hd=(e,n,s)=>{n&&s([])},Kr=(e,n,s)=>{var i;let r=(i=e[0])==null?void 0:i.key;n(e),s&&s(r)},fd=({props:e,selected:n,setSelected:s,onChange:r})=>t.jsxs("div",{className:"w-fit inline-block ml-2",children:[e.label,t.jsx("button",{className:"hover:text-red-300 animate ml-1 p-1 rounded-md rbt-token-remove-button",onClick:i=>{const a=n.filter(o=>o.key!==e.key);Kr(a,s,r)},children:t.jsx("i",{className:"fa fa-close"})})]}),xd=({results:e,menuProps:n,labelKey:s,filter:r,filters:i,setFilter:a,onChange:o,...l})=>t.jsxs(Pi,{className:"bg-slate-100 overflow-hidden z-10 rounded-md",...n,children:[t.jsx("div",{className:"flex flex-row flex-wrap items-center justify-start gap-1 p-1 bg-slate-200 text-xs font-bold",children:i.map(({icon:c,label:d,value:u,filterText:p})=>{const m=r===p,f=y=>u?o(u):a(m?null:p);return t.jsxs("button",{title:`Filter by: ${p}`,className:`py-1 px-2 my-0.5 
                                    ${m?"bg-slate-300 hover:bg-blue-300":"bg-slate-100 hover:bg-blue-100"} 
                                     rounded-md`,onClick:f,children:[t.jsx("i",{className:`${c} pr-2 pl-1`}),d]},p)})}),e.map((c,d)=>t.jsx(Fi,{className:"block hover:bg-slate-200 text-xl tracking-wide pl-1",option:c,position:d,children:c.label}))]}),gd=({className:e,value:n,onChange:s,options:r=[],filters:i=[],showAll:a=!1,placeholder:o="Search..."})=>{const[l,c]=h.useState([]),[d,u]=h.useState(""),[p,m]=h.useState(r);return h.useEffect(()=>{if(!n)return;const f=r.filter(y=>y.key===n);c(f)},[n]),h.useEffect(()=>{m(r.filter(f=>{var y;return!d||((y=f==null?void 0:f.label)==null?void 0:y.toLowerCase().includes(d.toLowerCase()))}))},[r,d]),t.jsx("div",{className:"flex justify-between",children:t.jsxs("div",{className:`flex flex row ${e} w-full shrink my-1 bg-white p-1 pl-3 rounded-l-md`,children:[t.jsx("i",{className:"fa fa-search font-light text-xl bg-white rounded-r-md"}),t.jsx(Li,{className:"w-full",onSearch:hd,minLength:0,id:"search",placeholder:o,options:p,labelKey:f=>`${f==null?void 0:f.label}`,defaultSelected:l,onChange:f=>Kr(f,c,s),selected:l,inputProps:{className:"w-full flex flex-row flex-wrap p-2"},renderMenu:(f,y,v)=>xd({results:f,menuProps:y,labelKey:v,filters:i,filter:d,setFilter:u,onChange:s}),renderToken:f=>t.jsx(fd,{props:f,selected:l,setSelected:c,onChange:s})},"search")]})})};function Xr({position:e="above",bgImg:n="",logo:s="",title:r="Title",bgClass:i="",subTitle:a="subTitle",note:o="note"}){return t.jsxs("div",{className:`h-[300px] bg-cover bg-center w-full flex ${i}`,style:{backgroundImage:`url("${n}")`},children:[t.jsx("div",{className:"p-2",children:s&&t.jsx("img",{src:s,alt:"NYS Logo"})}),t.jsxs("div",{className:"flex-1 flex flex-col  items-center p-4",children:[t.jsx("div",{className:"flex-1"}),t.jsx("div",{className:"text-3xl sm:text-7xl font-bold text-[#f2a91a] text-right w-full text-display",children:r&&t.jsx("div",{children:r})}),t.jsx("div",{className:"text-lg tracking-wider pt-2 sm:text-3xl font-bold text-slate-200 text-right w-full uppercase",children:a&&t.jsx("div",{children:a})}),t.jsx("div",{className:"text-lg tracking-wider sm:text-xl font-bold text-slate-200 text-right w-full uppercase",children:o&&t.jsx("div",{children:o})}),t.jsx("div",{className:"flex-1"})]})]})}const bd=({position:e="above",bgImg:n="/img/header.png",logo:s="/img/nygov-logo.png",bgClass:r="",title:i="MitigateNY",subTitle:a="New York State Hazard Mitigation Plan",note:o="2023 Update"})=>new Promise((l,c)=>{l({position:e,bgImg:n,bgClass:r,logo:s,title:i,subTitle:a,note:o})}),Zr=({value:e,onChange:n,size:s})=>{let r=h.useMemo(()=>e&&ei(e)?JSON.parse(e):{},[e]);h.useState(!0),h.useState("");const[i,a]=h.useState({bgImg:r.bgImg||"",logo:r.logo||"",title:r.title||"Title",subTitle:r.subTitle||"subTitle",note:r.note||"note",bgClass:r.bgClass||""});return h.useEffect(()=>{e!==JSON.stringify(i)&&n(JSON.stringify(i))},[i]),t.jsx("div",{className:"w-full",children:t.jsxs("div",{className:"relative",children:[t.jsxs("div",{className:"border rounded-md border-blue-500 bg-blue-50 p-2 m-1",children:[t.jsxs("div",{className:"flex flex-row flex-wrap justify-between",children:[t.jsx("label",{className:"shrink-0 pr-2 py-1 my-1 w-1/4",children:"Title:"}),t.jsx("div",{className:"flex flex row w-3/4 shrink my-1",children:t.jsx("input",{type:"text",value:i.title,onChange:o=>a({...i,title:o.target.value})})})]}),t.jsxs("div",{className:"flex flex-row flex-wrap justify-between",children:[t.jsx("label",{className:"shrink-0 pr-2 py-1 my-1 w-1/4",children:"subTitle:"}),t.jsx("div",{className:"flex flex row w-3/4 shrink my-1",children:t.jsx("input",{type:"text",value:i.subTitle,onChange:o=>a({...i,subTitle:o.target.value})})})]}),t.jsxs("div",{className:"flex flex-row flex-wrap justify-between",children:[t.jsx("label",{className:"shrink-0 pr-2 py-1 my-1 w-1/4",children:"Note:"}),t.jsx("div",{className:"flex flex row w-3/4 shrink my-1",children:t.jsx("input",{type:"text",value:i.note,onChange:o=>a({...i,note:o.target.value})})})]}),t.jsxs("div",{className:"flex flex-row flex-wrap justify-between",children:[t.jsx("label",{className:"shrink-0 pr-2 py-1 my-1 w-1/4",children:"Bg Class:"}),t.jsx("div",{className:"flex flex row w-3/4 shrink my-1",children:t.jsx("input",{type:"text",value:i.bgClass,onChange:o=>a({...i,bgClass:o.target.value})})})]}),t.jsxs("div",{className:"flex flex-row flex-wrap justify-between",children:[t.jsx("label",{className:"shrink-0 pr-2 py-1 my-1 w-1/4",children:"bgImg:"}),t.jsx("div",{className:"flex flex row w-3/4 shrink my-1",children:t.jsx("input",{type:"text",value:i.bgImg,onChange:o=>a({...i,bgImg:o.target.value})})})]}),t.jsxs("div",{className:"flex flex-row flex-wrap justify-between",children:[t.jsx("label",{className:"shrink-0 pr-2 py-1 my-1 w-1/4",children:"logo:"}),t.jsx("div",{className:"flex flex row w-3/4 shrink my-1",children:t.jsx("input",{type:"text",value:i.logo,onChange:o=>a({...i,logo:o.target.value})})})]})]}),t.jsx(Xr,{...i})]})})},yd=({value:e})=>{if(!e)return"";let n=typeof e=="object"?e["element-data"]:JSON.parse(e);return t.jsx(Xr,{...n})};Zr.settings={hasControls:!0,name:"ElementEdit"};const wd={name:"Header: Default",type:"Header",variables:[{name:"bgImg",default:"/img/header.png"},{name:"logo",default:"/img/nygov-logo.png"},{name:"title",default:"MitigateNY"},{name:"subTitle",default:"New York State Hazard Mitigation Plan"},{name:"bgClass",default:""},{name:"note",default:"2023 Update"}],getData:bd,EditComp:Zr,ViewComp:yd},vd=e=>{try{return JSON.parse(e)}catch{return{}}},Nd=({title:e,className:n,color:s,setColor:r})=>t.jsxs("div",{className:n,children:[t.jsx("label",{className:"shrink-0 pr-2 w-1/4",children:e}),t.jsx("input",{id:"background",list:"colors",className:"rounded-md shrink",type:"color",value:s,onChange:i=>r(i.target.value)}),t.jsx("datalist",{id:"colors",children:["#1e3a8a","#1e40af","#1d4ed8","#2563eb","#3b82f6","#60a5fa","#93c5fd","#bfdbfe","#dbeafe","#eff6ff","#713f12","#854d0e","#a16207","#ca8a04","#eab308","#facc15","#fde047","#fef08a","#fef9c3","#fefce8"].map(i=>t.jsx("option",{children:i},i))})]}),Qr=({value:e,onChange:n})=>{const s=vd(e),r={text:"",size:"4xl",color:"000000"},[i,a]=h.useState((s==null?void 0:s.bgColor)||"#fff"),[o,l]=h.useState((s==null?void 0:s.text)||e||r);h.useEffect(()=>{n(JSON.stringify({bgColor:i,text:o}))},[i,o]);const c=Ue.lexical.EditComp;return t.jsx("div",{className:"w-full",children:t.jsxs("div",{className:"relative",children:[t.jsx(Nd,{title:"Background: ",className:"w-full px-2 py-1 flex flex-row text-sm items-center border border-dashed",color:i,setColor:a}),t.jsx(c,{value:o,onChange:l,bgColor:i})]})})};Qr.settings={hasControls:!0,name:"ElementEdit"};const jd=({value:e})=>{var i,a,o,l,c,d,u,p;if(!e)return"";let n=typeof e=="object"?e["element-data"]:JSON.parse(e);const s=(n==null?void 0:n.text)||e;if(!s||((a=(i=s==null?void 0:s.root)==null?void 0:i.children)==null?void 0:a.length)===1&&((d=(c=(l=(o=s==null?void 0:s.root)==null?void 0:o.children)==null?void 0:l[0])==null?void 0:c.children)==null?void 0:d.length)===0||((p=(u=s==null?void 0:s.root)==null?void 0:u.children)==null?void 0:p.length)===0)return null;const r=Ue.lexical.ViewComp;return t.jsx("div",{children:t.jsx(r,{value:s,bgColor:n==null?void 0:n.bgColor})})},Cd={name:"Rich Text",EditComp:Qr,ViewComp:jd},_d={lexical:Cd,"Header: Default Header":wd};let je=_d;const ei=e=>{try{JSON.parse(e)}catch{return!1}return!0},kd={card:"fa-thin fa-credit-card",table:"fa-thin fa-table",graph:"fa-thin fa-chart-column",map:"fa-thin fa-map",lexical:"fa-thin fa-text"};function Sd(e){const{value:n,onChange:s,size:r}=e,i=(o,l)=>{tt(n,{...n,[o]:l})||s({...n,[o]:l})};h.useEffect(()=>{n!=null&&n["element-type"]||s({...n,"element-type":"lexical"})},[]);let a=(je[B(n,"element-type","lexical")]||je.lexical).EditComp;return t.jsxs("div",{className:"w-full",children:[t.jsx("div",{className:"relative my-1",children:t.jsx(gd,{className:"flex-row-reverse",placeholder:"Search for a Component...",options:Object.keys(je).filter(o=>!je[o].hideInSelector).map(o=>({key:o,label:je[o].name||o})),value:n==null?void 0:n["element-type"],onChange:async o=>{if(o==="paste")return navigator.clipboard.readText().then(l=>{const c=ei(l)&&JSON.parse(l||"{}");return(c==null?void 0:c["element-type"])&&s({...n,...c})});i("element-type",o)},filters:[{icon:"fa-thin fa-paste",label:"Paste",value:"paste"},...[...new Set(Object.keys(je).filter(o=>!je[o].hideInSelector).map(o=>(je[o].name||o).split(":")[0]))].map(o=>({icon:`${kd[o.toLowerCase()]||o.toLowerCase()}`,label:o,filterText:o}))]})}),t.jsx("div",{children:t.jsx(a,{value:(n==null?void 0:n["element-data"])||"",onChange:o=>i("element-data",o),size:r})})]})}function Td({value:e}){let n=je[B(e,"element-type","lexical")]?je[B(e,"element-type","lexical")].ViewComp:()=>t.jsxs("div",{children:[" Component ",e["element-type"]," Not Registered "]});return t.jsx(n,{value:(e==null?void 0:e["element-data"])||""})}const ti={EditComp:Sd,ViewComp:Td},vn=async({item:e,url:n,destination:s,id_column:r,dataRows:i,falcor:a,setLoadingStatus:o,locationNameMap:l,setGeneratedPages:c,urlSuffixCol:d="geoid"})=>{o("Generating Pages...",i);const u=i.sort((f,y)=>f!=null&&f.state_fips?+y[r.name]-+f[r.name]:!0).map(f=>f[r.name]);let p=0;const m=[];await Nn(u,async(f,y)=>{var _,j,C,k;const v=await l.reduce(async(N,M)=>(await N,(await Et(Xt({app:"dms-site",type:M,filter:{"data->>'template_id'":[e.id],"data->>'id_column_value'":[f]}}),"/"))[0]),Promise.resolve([]));console.log("existing page",f,v);const b=((C=(j=(_=v==null?void 0:v.data)==null?void 0:_.value)==null?void 0:j.sections)==null?void 0:C.map(N=>N.id))||[];o(`${v?"Updating":"Generating"} page ${++p}/${u==null?void 0:u.length}`);const g=await b.reduce(async(N,M)=>{const I=await N,W=await Et(Xt({app:"dms-site",type:"cms-section",filter:{id:[M]}}),"/");return[...I,...W]},Promise.resolve([])),w=e.data_controls,T=i.find(N=>N[r.name]===f)||{};let $=await Nn(e.sections.map(N=>N.id),async N=>{var H,J,L,G;let M=e.sections.find(U=>U.id===N)||{},I=Xn((H=M==null?void 0:M.element)==null?void 0:H["element-data"])||{},W=((J=M==null?void 0:M.element)==null?void 0:J["element-type"])||"",E=je[W]||{},P=((E==null?void 0:E.variables)||[]).reduce((U,ee)=>(U[ee.name]=ee.name===r.name?f:I[ee.name],U),{}),F=Object.keys(((L=w==null?void 0:w.sectionControls)==null?void 0:L[N])||{}).reduce((U,ee)=>{var S,R,q,Q,K,Z;const O=((q=(R=(S=w==null?void 0:w.sectionControls)==null?void 0:S[N])==null?void 0:R[ee])==null?void 0:q.name)||((K=(Q=w==null?void 0:w.sectionControls)==null?void 0:Q[N])==null?void 0:K[ee]);return U[ee]=O===r.name?f:T[O]||((Z=w==null?void 0:w.active_row)==null?void 0:Z[O])||null,U},{}),Y=(G=I.additionalVariables)==null?void 0:G.map(U=>{var S,R;const ee=U.name,O=(R=(S=w==null?void 0:w.sectionControls)==null?void 0:S[N])==null?void 0:R[ee];return U.defaultValue=T==null?void 0:T[O],U}),V={...P,...F,additionalVariables:Y};try{return E!=null&&E.getData?E.getData(V,a).then(U=>({section_id:N,data:U,type:W})):{section_id:N,data:I,type:W}}catch(U){return{section_id:N,data:I,err:U,type:W}}},{concurrency:5});if($.length>0){const N=e.sections.map(L=>$.find(G=>G.section_id===L.id)||L).filter(L=>L).map(({section_id:L,data:G,err:U,type:ee})=>{var q;let O=e.sections.find(Q=>Q.id===L)||{},S=g.find(Q=>Q.data.value.element["template-section-id"]===L)||{},R=((q=S==null?void 0:S.data)==null?void 0:q.value)||{element:{}};return S!=null&&S.id&&(R.id=S==null?void 0:S.id),R.title=O.title,R.level=O.level,R.size=O.size,R.tags=O.tags,R.status=U?JSON.stringify(U,Object.getOwnPropertyNames(U)):"success",R.element["element-data"]=JSON.stringify(G),R.element["element-type"]=ee,R.element["template-section-id"]=L,R}),M="dms-site",I=s||e.type,E={format:{app:M,type:"cms-section"}},P={format:{app:M,type:I}},F=await Nn(N.map(L=>Jt(E,L)),L=>L,{concurrency:5}),V=d==="county"&&(L=>L.toLowerCase().replace(" county","").replace(".","").replace(/ /g,"_"))((T==null?void 0:T.county)||(T==null?void 0:T.name))||f,H={...v&&{id:v.id},...((k=v==null?void 0:v.data)==null?void 0:k.value)||{},id_column_value:f,template_id:e.id,sidebar:e.sidebar,header:e.header,footer:e.footer,full_width:e.full_width,hide_in_nav:"true",index:999,url_slug:`${n||r.name}/${V}`,title:`${r.name} ${f} Template`,num_errors:N.filter(L=>L.status!=="success").length,sections:[...N.map((L,G)=>{var U;return{id:L.id||((U=F[G])==null?void 0:U.id),ref:"dms-site+cms-section"}}),...g.filter(L=>!L.data.value.element["template-section-id"]).map((L,G)=>({id:L.id,ref:"dms-site+cms-section"}))],draft_sections:[...N.map((L,G)=>{var U;return{id:L.id||((U=F[G])==null?void 0:U.id),ref:"dms-site+cms-section"}}),...g.filter(L=>!L.data.value.element["template-section-id"]).map((L,G)=>({id:L.id,ref:"dms-site+cms-section"}))]},J=await Jt(P,H);m.push({id:J==null?void 0:J.id,num_errors:H.num_errors,id_column_value:H.id_column_value})}},{concurrency:5}),c(m),o(void 0)};function Nn(e,n,s={}){let r=s.concurrency||1/0,i=0;const a=[],o=[],l=e[Symbol.iterator]();for(;r-- >0;){const d=c();if(d)o.push(d);else break}return Promise.all(o).then(()=>a);function c(){const d=l.next();if(d.done)return null;const u=i++,p=n(d.value,u);return Promise.resolve(p).then(m=>(a[u]=m,c()))}}const ni=({submit:e,item:n,onChange:s,loadingStatus:r,setLoadingStatus:i=()=>{}})=>{var W;const{falcor:a,falcorCache:o}=A.useContext(oe),[l,c]=h.useState([]),[d,u]=h.useState(!1),[p,m]=h.useState("geoid"),{url:f,destination:y=n.type,source:v,view:b,view_id:g,id_column:w,active_row:T}=n==null?void 0:n.data_controls,$=[y];A.useEffect(()=>{b.view_id&&a.get(["dama",le,"viewsbyId",b.view_id,"data","length"])},[le,b.view_id]);const _=A.useMemo(()=>B(o,["dama",le,"viewsbyId",b.view_id,"data","length"],0),[le,b.view_id,o]),j=A.useMemo(()=>{let E=B(v,["metadata","columns"],B(v,"metadata",[]));return Array.isArray(E)||(E=[]),E.filter(P=>!["geom","wkb_geometry","ogc_fid"].includes(P==null?void 0:P.name))},[v]);A.useEffect(()=>{b!=null&&b.view_id&&(w!=null&&w.name)&&_&&a.get(["dama",le,"viewsbyId",b.view_id,"databyIndex",{from:0,to:_-1},j.map(E=>E.name)])},[w,b.view_id,_]);const C=A.useMemo(()=>Object.values(B(o,["dama",le,"viewsbyId",b.view_id,"databyIndex"],{})).map(E=>B(o,[...E.value],"")),[w,b.view_id,o]);A.useEffect(()=>{(async function(){i("Loading Pages...");const E=await $.reduce(async(P,F)=>{const Y=await P,V=[{key:"id",label:"id"},{key:"data->>'id_column_value' as id_column_value",label:"id_column_value"},{key:"data->>'num_errors' as num_errors",label:"num_errors"}];let H=await Et(Xt({app:"dms-site",type:F,filter:{"data->>'template_id'":[n.id]},attributes:V}),"/");return H=H.map(J=>V.reduce((L,G)=>(L[G.label]=J[G.key],L),{})),[...Y,...H]},Promise.resolve([]));c(E),i(void 0)})()},[n.id,(W=n.data_controls)==null?void 0:W.sectionControls]);const k=h.useMemo(()=>l.filter(E=>typeof+E.num_errors=="number"&&+E.num_errors>0).map(E=>E.id_column_value.toString()),[l]),N=h.useMemo(()=>l.filter(E=>E.id_column_value&&typeof E.id_column_value!="object").map(E=>E.id_column_value.toString()),[l]),M=h.useMemo(()=>C.filter(E=>!N.includes(E[w.name])),[N,C,w.name]),I=h.useMemo(()=>C.filter(E=>k.includes(E[w.name])),[k,C,w.name]);return t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-xs uppercase font-bold text-slate-400 ml-4",children:" url suffix "}),t.jsx(dt,{className:"ml-2.5 relative w-full cursor-default overflow-hidden bg-transparent border-b-2 border-slate-300 text-slate-500 text-left sm:text-sm",options:j.map(E=>E.name),value:p,nameAccessor:E=>E==null?void 0:E.name,valueAccessor:E=>E==null?void 0:E.name,onChange:E=>m(E)}),t.jsx(dt,{options:["",...j],value:w,nameAccessor:E=>E==null?void 0:E.name,valueAccessor:E=>E==null?void 0:E.name,onChange:E=>s("id_column",E)}),w!=null&&w.name?t.jsx(dt,{options:C,value:T,nameAccessor:E=>(w==null?void 0:w.name)==="geoid"&&((E==null?void 0:E.county)||(E==null?void 0:E.name))||(E==null?void 0:E[w==null?void 0:w.name]),onChange:E=>s("active_row",{active_row:E})}):"",t.jsx("div",{className:"flex items-center pt-2",children:l!=null&&l.length||C!=null&&C.length?t.jsxs("div",{className:"flex flex-col",children:[t.jsxs("div",{className:"flex flex-row",children:[t.jsx("button",{className:`inline-flex w-36 justify-center rounded-lg cursor-pointer text-sm font-semibold 
                                            py-2 px-2 text-white shadow-lg border active:border-b-2 active:mb-[2px] active:shadow-none 
                                            ${r?"bg-gray-500 border-b-2 border-gray-800 cursor-not-allowed":"bg-blue-500 hover:bg-blue-400 border-b-4 border-blue-800 hover:border-blue-700"}`,disabled:r,onClick:E=>vn({item:n,url:f,destination:y,id_column:w,dataRows:C,falcor:a,setLoadingStatus:i,locationNameMap:$,setGeneratedPages:c,urlSuffixCol:p}),children:r||(l!=null&&l.length?"Update Pages":"Generate Pages")}),t.jsx("button",{disabled:r,className:`inline-flex rounded-lg cursor-pointer text-white text-bold px-2 py-2.5 shadow-lg
                                border active:border-b-2 active:mb-[2px] active:shadow-none 
                                ${r?"bg-gray-500 border-b-2 border-gray-800 cursor-not-allowed":"bg-blue-500 hover:bg-blue-400 border-b-4 border-blue-800 hover:border-blue-700"}`,onClick:()=>u(!d),children:t.jsx("i",{className:d?"fa fa-caret-up":"fa fa-caret-down"})})]}),t.jsxs("div",{className:d?"flex flex-col":"hidden",children:[t.jsx("button",{className:`inline-flex w-36 justify-center rounded-lg text-sm font-semibold 
                                            py-2 px-2 text-white shadow-lg border active:border-b-2 active:mb-[2px] active:shadow-none' 
                                            ${r||!(M!=null&&M.length)?"bg-gray-500 border-b-2 border-gray-800 cursor-not-allowed":"bg-blue-500 hover:bg-blue-400 border-b-4 border-blue-800 hover:border-blue-700 cursor-pointer"}`,disabled:r||!(M!=null&&M.length),onClick:E=>(u(!1),vn({item:n,url:f,destination:y,id_column:w,dataRows:M,falcor:a,setLoadingStatus:i,locationNameMap:$,setGeneratedPages:c,urlSuffixCol:p})),children:r||`Generate missing pages (${M==null?void 0:M.length})`}),t.jsx("button",{className:`inline-flex w-36 justify-center rounded-lg text-sm font-semibold 
                                            py-2 px-2 text-white shadow-lg border active:border-b-2 active:mb-[2px] active:shadow-none' 
                                            ${r||!(I!=null&&I.length)?"bg-gray-500 border-b-2 border-gray-800 cursor-not-allowed":"bg-blue-500 hover:bg-blue-400 border-b-4 border-blue-800 hover:border-blue-700 cursor-pointer"}`,disabled:r||!(I!=null&&I.length),onClick:E=>(u(!1),vn({item:n,url:f,destination:y,id_column:w,dataRows:I,falcor:a,setLoadingStatus:i,locationNameMap:$,setGeneratedPages:c,urlSuffixCol:p})),children:r||`Update errored pages (${I==null?void 0:I.length})`})]})]}):t.jsx("button",{className:"mt-4 p-2 rounded-lg text-white bg-gray-500 border border-b-2 border-gray-800 cursor-not-allowed",disabled:!0,children:"No template data available."})})]})},Ed=()=>t.jsx("div",{children:"Path..."}),$d=({section:e,source:n,sectionControl:s={},updateSectionControl:r})=>{var d,u;let i=Xn((d=e==null?void 0:e.element)==null?void 0:d["element-data"])||{},a=((u=e==null?void 0:e.element)==null?void 0:u["element-type"])||"",o=je[a]||{},l=[...(o==null?void 0:o.variables)||[],...(i==null?void 0:i.additionalVariables)||[]];const c=A.useMemo(()=>{let p=B(n,["metadata","columns"],B(n,"metadata",[]));return Array.isArray(p)||(p=[]),p.map(m=>m.name)},[n]);return t.jsxs("div",{className:"p-4 border rounded mb-1",children:[t.jsxs("div",{children:["Title: ",e==null?void 0:e.title," ",e==null?void 0:e.id]}),t.jsx("div",{children:a}),t.jsx("div",{children:l.filter(p=>!p.hidden).map(p=>t.jsxs("div",{className:"flex",children:[t.jsxs("div",{className:"flex-1 items-center",children:[t.jsx("div",{children:p.name}),t.jsx("div",{className:"text-xs",children:typeof i[p.name]=="object"?JSON.stringify(i[p.name]):i[p.name]})]}),t.jsx("div",{className:"flex-1 flex items-center",children:t.jsx(dt,{options:["",...c],value:s[p.name]||"",onChange:m=>{r({...s,[p.name]:m})}})})]},p.name))})]})},Md=({sections:e=[],sectionControls:n,source:s,onChange:r})=>t.jsx("div",{children:e.map(i=>t.jsx($d,{section:i,source:s,sectionControl:(n==null?void 0:n[i.id])||{},updateSectionControl:a=>{r({...n,[i.id]:a})}},i.id))}),Id=({item:e,dataControls:n={},setDataControls:s,baseUrl:r,loadingStatus:i,setLoadingStatus:a})=>{var l,c,d,u,p;const o=(m,f)=>{s({...n,[m]:f})};return t.jsxs("div",{className:"relative mt-6 flex-1 px-4 sm:px-6",children:[t.jsx("span",{className:"text-sm text-gray-500 p-1",children:"Select Template Source:"}),t.jsx(id,{value:n==null?void 0:n.source,onChange:m=>{o("source",m)}}),(l=n==null?void 0:n.source)!=null&&l.source_id?t.jsx(rd,{source_id:(c=n==null?void 0:n.source)==null?void 0:c.source_id,value:(d=n.view)==null?void 0:d.view_id,onChange:m=>{o("view",m)}}):"",(u=n==null?void 0:n.source)!=null&&u.source_id&&((p=n==null?void 0:n.view)!=null&&p.view_id)?t.jsxs("div",{children:[t.jsx(ni,{item:e,source:n==null?void 0:n.source,view:n==null?void 0:n.view,id_column:n==null?void 0:n.id_column,active_row:n==null?void 0:n.active_row,onChange:(m,f)=>{m==="id_column"&&(o("id_column",f),s({...n,id_column:f,active_row:{}})),m==="active_row"&&s({...n,...f})},loadingStatus:i,setLoadingStatus:a,baseUrl:r}),t.jsx(Ed,{}),t.jsx(Md,{sections:e.sections,sectionControls:n.sectionControls,source:n==null?void 0:n.source,onChange:m=>{o("sectionControls",{...n.sectionControls,...m})}})]}):"",t.jsx("div",{children:t.jsx("pre",{children:JSON.stringify(n,null,3)})})]})};function Ad(e){const{open:n,setOpen:s}=e;return t.jsx(Ce.Root,{show:n,as:h.Fragment,children:t.jsx(Ne,{as:"div",className:"relative z-20 ",onClose:()=>{s(!1),console.log("onclose")},children:t.jsx("div",{className:"fixed inset-x-0 bottom-0 top-12  overflow-hidden",children:t.jsx("div",{className:"absolute inset-0 overflow-hidden",children:t.jsx("div",{className:"pointer-events-none fixed inset-y-0 top-12 right-0 flex max-w-full pl-10",children:t.jsx(Ce.Child,{as:h.Fragment,enter:"transform transition ease-in-out duration-500 sm:duration-700",enterFrom:"translate-x-full",enterTo:"translate-x-0",leave:"transform transition ease-in-out duration-500 sm:duration-700",leaveFrom:"translate-x-0",leaveTo:"translate-x-full",children:t.jsx(Ne.Panel,{className:"pointer-events-auto w-screen max-w-md",children:t.jsxs("div",{className:"flex h-full flex-col overflow-y-scroll bg-white py-6 shadow-xl",children:[t.jsx("div",{className:"px-4 sm:px-6",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsx(Ne.Title,{className:"text-base font-semibold leading-6 text-gray-900",children:"Data Controls"}),t.jsx("div",{className:"ml-3 flex h-7 items-center",children:t.jsxs("button",{type:"button",className:"relative rounded-md bg-white text-gray-400 hover:text-gray-500 focus:outline-none",onClick:()=>s(!1),children:[t.jsx("span",{className:"absolute -inset-2.5"}),t.jsx("span",{className:"sr-only",children:"Close panel"}),t.jsx("i",{className:"h-6 w-6 text-lg fa fa-close","aria-hidden":"true"})]})})]})}),t.jsx(Id,{...e})]})})})})})})})})}function Te(e){return typeof e=="object"&&!("toString"in e)?Object.prototype.toString.call(e).slice(8,-1):e}function Ee(e,n){if(!e)throw new Error(n())}var $n=Object.prototype.hasOwnProperty,Od=Array.prototype.splice,Rd=Object.prototype.toString;function Ke(e){return Rd.call(e).slice(8,-1)}var Mn=Object.assign||function(e,n){return Zn(n).forEach(function(s){$n.call(n,s)&&(e[s]=n[s])}),e},Zn=typeof Object.getOwnPropertySymbols=="function"?function(e){return Object.keys(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.keys(e)};function ze(e){return Array.isArray(e)?Mn(e.constructor(e.length),e):Ke(e)==="Map"?new Map(e):Ke(e)==="Set"?new Set(e):e&&typeof e=="object"?Mn(Object.create(Object.getPrototypeOf(e)),e):e}var Dd=function(){function e(){this.commands=Mn({},Ld),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function(n,s){return n===s},this.update.newContext=function(){return new e().update}}return Object.defineProperty(e.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function(n){this.update.isEquals=n},enumerable:!1,configurable:!0}),e.prototype.extend=function(n,s){this.commands[n]=s},e.prototype.update=function(n,s){var r=this,i=typeof s=="function"?{$apply:s}:s;Array.isArray(n)&&Array.isArray(i)||Ee(!Array.isArray(i),function(){return"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."}),Ee(typeof i=="object"&&i!==null,function(){return"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the "+"following commands: ".concat(Object.keys(r.commands).join(", "),".")});var a=n;return Zn(i).forEach(function(o){if($n.call(r.commands,o)){var l=n===a;a=r.commands[o](i[o],a,i,n),l&&r.isEquals(a,n)&&(a=n)}else{var c=Ke(n)==="Map"?r.update(n.get(o),i[o]):r.update(n[o],i[o]),d=Ke(a)==="Map"?a.get(o):a[o];(!r.isEquals(c,d)||typeof c>"u"&&!$n.call(n,o))&&(a===n&&(a=ze(n)),Ke(a)==="Map"?a.set(o,c):a[o]=c)}}),a},e}(),Ld={$push:function(e,n,s){return Us(n,s,"$push"),e.length?n.concat(e):n},$unshift:function(e,n,s){return Us(n,s,"$unshift"),e.length?e.concat(n):n},$splice:function(e,n,s,r){return Fd(n,s),e.forEach(function(i){si(i),n===r&&i.length&&(n=ze(r)),Od.apply(n,i)}),n},$set:function(e,n,s){return zd(s),e},$toggle:function(e,n){jt(e,"$toggle");var s=e.length?ze(n):n;return e.forEach(function(r){s[r]=!n[r]}),s},$unset:function(e,n,s,r){return jt(e,"$unset"),e.forEach(function(i){Object.hasOwnProperty.call(n,i)&&(n===r&&(n=ze(r)),delete n[i])}),n},$add:function(e,n,s,r){return qs(n,"$add"),jt(e,"$add"),Ke(n)==="Map"?e.forEach(function(i){var a=i[0],o=i[1];n===r&&n.get(a)!==o&&(n=ze(r)),n.set(a,o)}):e.forEach(function(i){n===r&&!n.has(i)&&(n=ze(r)),n.add(i)}),n},$remove:function(e,n,s,r){return qs(n,"$remove"),jt(e,"$remove"),e.forEach(function(i){n===r&&n.has(i)&&(n=ze(r)),n.delete(i)}),n},$merge:function(e,n,s,r){return Wd(n,e),Zn(e).forEach(function(i){e[i]!==n[i]&&(n===r&&(n=ze(r)),n[i]=e[i])}),n},$apply:function(e,n){return Bd(e),e(n)}},Pd=new Dd;function Us(e,n,s){Ee(Array.isArray(e),function(){return"update(): expected target of ".concat(Te(s)," to be an array; got ").concat(Te(e),".")}),jt(n[s],s)}function jt(e,n){Ee(Array.isArray(e),function(){return"update(): expected spec of ".concat(Te(n)," to be an array; got ").concat(Te(e),". ")+"Did you forget to wrap your parameter in an array?"})}function Fd(e,n){Ee(Array.isArray(e),function(){return"Expected $splice target to be an array; got ".concat(Te(e))}),si(n.$splice)}function si(e){Ee(Array.isArray(e),function(){return"update(): expected spec of $splice to be an array of arrays; got ".concat(Te(e),". ")+"Did you forget to wrap your parameters in an array?"})}function Bd(e){Ee(typeof e=="function",function(){return"update(): expected spec of $apply to be a function; got ".concat(Te(e),".")})}function zd(e){Ee(Object.keys(e).length===1,function(){return"Cannot have more than one key in an object with $set"})}function Wd(e,n){Ee(n&&typeof n=="object",function(){return"update(): $merge expects a spec of type 'object'; got ".concat(Te(n))}),Ee(e&&typeof e=="object",function(){return"update(): $merge expects a target of type 'object'; got ".concat(Te(e))})}function qs(e,n){var s=Ke(e);Ee(s==="Map"||s==="Set",function(){return"update(): ".concat(Te(n)," expects a target of type Set or Map; got ").concat(Te(s))})}const Vs=Pd.update,Hd=e=>Object.prototype.toString.call(e).slice(8,-1),Ud=e=>Hd(e)==="Array",qd=(e,n)=>{for(;e;){if(e.matches&&e.matches(n))return e;e=e.parentNode}return null},Vd=e=>{var n=e.getBoundingClientRect(),s=document.body,r=document.documentElement,i=window.pageYOffset||r.scrollTop||s.scrollTop,a=window.pageXOffset||r.scrollLeft||s.scrollLeft,o=r.clientTop||s.clientTop||0,l=r.clientLeft||s.clientLeft||0,c=n.top+i-o,d=n.left+a-l;return{top:Math.round(c),left:Math.round(d)}},Yd=e=>{let n=0,s=0;for(;e=e.parentNode;)n+=e.scrollTop||0,s+=e.scrollLeft||0;return{top:n,left:s}},Gd=(e,n)=>({transform:"translate("+e+"px, "+n+"px)"}),In=(e,n)=>e.map(s=>({...s,[n]:s[n]?In(s[n],n):[]})),Ht=(e,{idProp:n,childrenProp:s})=>{let r=[];return e.filter(a=>a[s].length).map(a=>(r=r.concat(Ht(a[s],{idProp:n,childrenProp:s})),a[n])).concat(r)};function Zt(){for(var e={}.hasOwnProperty,n=[],s=0;s<arguments.length;s++){var r=arguments[s];if(r){var i=typeof r;if(i==="string"||i==="number")n.push(r);else if(Array.isArray(r)){if(r.length){var a=Zt.apply(null,r);a&&n.push(a)}}else if(i==="object"){if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]")){n.push(r.toString());continue}for(var o in r)e.call(r,o)&&r[o]&&n.push(o)}}}return n.join(" ")}function Jd({children:e,className:n,...s}){return t.jsx("i",{className:`${nestable-icon}  ${n}`,...s})}const kt=class kt extends h.Component{constructor(){super(...arguments);fe(this,"renderCollapseIcon",({isCollapsed:s})=>t.jsx(Jd,{className:Zt("nestable-item-icon",{"icon-plus-gray":s,"icon-minus-gray":!s})}))}render(){const{item:s,isCopy:r,options:i,index:a,depth:o}=this.props,{dragItem:l,renderItem:c,handler:d,idProp:u,childrenProp:p,renderCollapseIcon:m=this.renderCollapseIcon}=i,f=i.isCollapsed(s),y=!r&&l&&l[u]===s[u],v=s[p]&&s[p].length>0;let b={},g={},w;r||(l?b={...b,onMouseEnter:C=>i.onMouseEnter(C,s)}:g={...g,draggable:!0,onDragStart:C=>i.onDragStart(C,s)}),d?w=t.jsx("span",{className:"nestable-item-handler",...g,children:d}):b={...b,...g};const T=v?t.jsx("span",{onClick:()=>i.onToggleCollapse(s),children:m({isCollapsed:f})}):null,$="nestable-item ml-2"+(r?"-copy":""),_={className:Zt($,$+"-"+s[u],{"is-dragging bg-slate-200 border pl-4":y,[$+"--with-children"]:v,[$+"--children-open"]:v&&!f,[$+"--children-collapsed"]:v&&f})},j=c({collapseIcon:T,depth:o,handler:w,index:a,item:s});return j?t.jsxs("li",{..._,children:[t.jsx("div",{className:"nestable-item-name",...b,children:j}),v&&!f&&t.jsx("ol",{className:"nestable-list border-l ml-4",children:s[p].map((C,k)=>t.jsx(kt,{index:k,depth:o+1,item:C,options:i,isCopy:r},k))})]}):null}};fe(kt,"propTypes",{item:ue.object,isCopy:ue.bool,options:ue.object,index:ue.number,depth:ue.number}),fe(kt,"defaultProps",{depth:0});let Qt=kt;class An extends h.Component{constructor(s){super(s);fe(this,"collapse",s=>{const{idProp:r,childrenProp:i,collapsed:a}=this.props,{items:o}=this.state;s==="NONE"?this.setState({collapsedGroups:a?Ht(o,{idProp:r,childrenProp:i}):[]}):s==="ALL"?this.setState({collapsedGroups:a?[]:Ht(o,{idProp:r,childrenProp:i})}):Ud(s)&&this.setState({collapsedGroups:Ht(o,{idProp:r,childrenProp:i}).filter(l=>s.indexOf(l)>-1^a)})});fe(this,"startTrackMouse",()=>{document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onDragEnd),document.addEventListener("keydown",this.onKeyDown)});fe(this,"stopTrackMouse",()=>{document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onDragEnd),document.removeEventListener("keydown",this.onKeyDown),this.elCopyStyles=null});fe(this,"getItemDepth",s=>{const{childrenProp:r}=this.props;let i=1;if(s[r].length>0){const a=s[r].map(this.getItemDepth);i+=Math.max(...a)}return i});fe(this,"isCollapsed",s=>{const{collapsed:r,idProp:i}=this.props,{collapsedGroups:a}=this.state;return!!(a.indexOf(s[i])>-1^r)});fe(this,"onDragStart",(s,r)=>{s&&(s.preventDefault(),s.stopPropagation()),this.el=qd(s.target,".nestable-item"),this.startTrackMouse(),this.onMouseMove(s),this.setState({dragItem:r,itemsOld:this.state.items})});fe(this,"onDragEnd",(s,r)=>{s&&s.preventDefault(),this.stopTrackMouse(),this.el=null,r?this.dragRevert():this.dragApply()});fe(this,"onMouseMove",s=>{const{group:r,threshold:i}=this.props,{dragItem:a}=this.state,{clientX:o,clientY:l}=s,c=Gd(o,l),d=document.querySelector(".nestable-"+r+" .nestable-drag-layer > .nestable-list");if(this.elCopyStyles){this.elCopyStyles={...this.elCopyStyles,...c};for(let p in c)c.hasOwnProperty(p)&&(d.style[p]=c[p]);const u=o-this.mouse.last.x;u>=0&&this.mouse.shift.x>=0||u<=0&&this.mouse.shift.x<=0?this.mouse.shift.x+=u:this.mouse.shift.x=0,this.mouse.last.x=o,Math.abs(this.mouse.shift.x)>i&&(this.mouse.shift.x>0?this.tryIncreaseDepth(a):this.tryDecreaseDepth(a),this.mouse.shift.x=0)}else{const u=Vd(this.el),p=Yd(this.el);this.elCopyStyles={marginTop:u.top-l-p.top,marginLeft:u.left-o-p.left,...c}}});fe(this,"onMouseEnter",(s,r)=>{s&&(s.preventDefault(),s.stopPropagation());const{collapsed:i,idProp:a,childrenProp:o}=this.props,{dragItem:l}=this.state;if(l[a]===r[a])return;const c=this.getPathById(l[a]),d=this.getPathById(r[a]);let u={};if(i&&c.length>1){const p=this.getItemByPath(c.slice(0,-1));p[o].length===1&&(u=this.onToggleCollapse(p,!0))}this.moveItem({dragItem:l,pathFrom:c,pathTo:d},u)});fe(this,"onToggleCollapse",(s,r)=>{const{collapsed:i,idProp:a}=this.props,{collapsedGroups:o}=this.state,c={collapsedGroups:this.isCollapsed(s)^i?o.filter(d=>d!==s[a]):o.concat(s[a])};if(r)return c;this.setState(c)});fe(this,"onKeyDown",s=>{s.which===27&&this.onDragEnd(null,!0)});this.state={items:[],itemsOld:null,dragItem:null,isDirty:!1,collapsedGroups:[]},this.el=null,this.elCopyStyles=null,this.mouse={last:{x:0},shift:{x:0}}}componentDidMount(){let{items:s,childrenProp:r}=this.props;s=In(s,r),this.setState({items:s})}componentDidUpdate(s){const{items:r,childrenProp:i}=this.props;if(tt({props:s,state:{}},this.props)){this.stopTrackMouse();let o={};s.collapsed!==this.props.collapsed&&(o.collapsedGroups=[]),this.setState({items:In(r,i),dragItem:null,isDirty:!1,...o})}}componentWillUnmount(){this.stopTrackMouse()}moveItem({dragItem:s,pathFrom:r,pathTo:i},a={}){const{childrenProp:o,confirmChange:l}=this.props,c=this.getItemDepth(s);let{items:d}=this.state;const u=this.getRealNextPath(r,i,c);if(u.length===0)return;const p=u.length>i.length?i:i.slice(0,-1),m=this.getItemByPath(p);if(!l({dragItem:s,destinationParent:m}))return;const f=this.getSplicePath(r,{numToRemove:1,childrenProp:o}),y=this.getSplicePath(u,{numToRemove:0,itemsToInsert:[s],childrenProp:o});d=Vs(d,f),d=Vs(d,y),this.setState({items:d,isDirty:!0,...a})}tryIncreaseDepth(s){const{maxDepth:r,idProp:i,childrenProp:a,collapsed:o}=this.props,l=this.getPathById(s[i]),c=l[l.length-1],d=l.length+this.getItemDepth(s);if(c>0&&d<=r){const u=this.getItemByPath(l.slice(0,-1).concat(c-1));if(!u[a].length||!this.isCollapsed(u)){const p=l.slice(0,-1).concat(c-1).concat(u[a].length);let m={};o&&!u[a].length&&(m=this.onToggleCollapse(u,!0)),this.moveItem({dragItem:s,pathFrom:l,pathTo:p},m)}}}tryDecreaseDepth(s){const{idProp:r,childrenProp:i,collapsed:a}=this.props,o=this.getPathById(s[r]),l=o[o.length-1];if(o.length>1){const c=this.getItemByPath(o.slice(0,-1));if(l+1===c[i].length){let d=o.slice(0,-1);d[d.length-1]+=1;let u={};a&&c[i].length===1&&(u=this.onToggleCollapse(c,!0)),this.moveItem({dragItem:s,pathFrom:o,pathTo:d},u)}}}dragApply(){const{onChange:s,idProp:r}=this.props,{items:i,isDirty:a,dragItem:o}=this.state;if(this.setState({itemsOld:null,dragItem:null,isDirty:!1}),s&&a){const l=this.getPathById(o[r],i);s({items:i,dragItem:o,targetPath:l})}}dragRevert(){const{itemsOld:s}=this.state;this.setState({items:s,itemsOld:null,dragItem:null,isDirty:!1})}getPathById(s,r=this.state.items){const{idProp:i,childrenProp:a}=this.props;let o=[];return r.every((l,c)=>{if(l[i]===s)o.push(c);else if(l[a]){const d=this.getPathById(s,l[a]);d.length&&(o=o.concat(c).concat(d))}return o.length===0}),o}getItemByPath(s,r=this.state.items){const{childrenProp:i}=this.props;let a=null;return s.forEach(o=>{a=(a?a[i]:r)[o]}),a}getSplicePath(s,r={}){const i={},a=r.numToRemove||0,o=r.itemsToInsert||[],l=s.length-1;let c=i;return s.forEach((d,u)=>{if(u===l)c.$splice=[[d,a,...o]];else{const p={};c[d]={[r.childrenProp]:p},c=p}}),i}getRealNextPath(s,r,i){const{childrenProp:a,maxDepth:o}=this.props,l=s.length-1,c=r.length-1,d=r.length+i-1;if(s.length<r.length){let u=!1;return d>o&&r.length?this.getRealNextPath(s,r.slice(0,-1),i):r.map((p,m)=>u?m===c?p+1:p:typeof s[m]!="number"?p:r[m]>s[m]&&m===l?(u=!0,p-1):p)}else if(s.length===r.length&&r[c]>s[c]){const u=this.getItemByPath(r);if(d<o&&u[a]&&u[a].length&&!this.isCollapsed(u))return r.slice(0,-1).concat(r[c]-1).concat(0)}return r}getItemOptions(){const{renderItem:s,renderCollapseIcon:r,handler:i,idProp:a,childrenProp:o}=this.props,{dragItem:l}=this.state;return{dragItem:l,idProp:a,childrenProp:o,renderItem:s,renderCollapseIcon:r,handler:i,onDragStart:this.onDragStart,onMouseEnter:this.onMouseEnter,isCollapsed:this.isCollapsed,onToggleCollapse:this.onToggleCollapse}}renderDragLayer(){const{group:s,idProp:r}=this.props,{dragItem:i}=this.state,a=document.querySelector(".nestable-"+s+" .nestable-item-"+i[r]);let o={};a&&(o.width=a.clientWidth),this.elCopyStyles&&(o={...o,...this.elCopyStyles});const l=this.getItemOptions();return t.jsx("div",{className:"nestable-drag-layer",children:t.jsx("ol",{className:"nestable-list",style:o,children:t.jsx(Qt,{item:i,options:l,isCopy:!0})})})}render(){const{group:s,className:r}=this.props,{items:i,dragItem:a}=this.state,o=this.getItemOptions();return t.jsxs("div",{className:Zt(r,"nestable","nestable-"+s,{"is-drag-active":a}),children:[t.jsx("ol",{className:"nestable-list nestable-group",children:i.map((l,c)=>t.jsx(Qt,{index:c,item:l,options:o},c))}),a&&this.renderDragLayer()]})}}fe(An,"propTypes",{childrenProp:ue.string,className:ue.string,collapsed:ue.bool,confirmChange:ue.func,group:ue.oneOfType([ue.number,ue.string]),handler:ue.node,idProp:ue.string,items:ue.array,maxDepth:ue.number,onChange:ue.func,renderCollapseIcon:ue.func,renderItem:ue.func,threshold:ue.number}),fe(An,"defaultProps",{childrenProp:"children",collapsed:!1,confirmChange:()=>!0,group:Math.random().toString(36).slice(2),idProp:"id",items:[],maxDepth:10,onChange:()=>{},renderItem:({item:s})=>String(s),threshold:30});function Kd({item:e,dataItems:n,edit:s,open:r,setOpen:i}){return A.useContext(oe),t.jsx(Ce.Root,{show:r,as:h.Fragment,children:t.jsxs(Ne,{as:"div",className:"relative z-20",onClose:i,children:[t.jsx("div",{className:"fixed inset-0"}),t.jsx("div",{className:"fixed inset-0 overflow-hidden",children:t.jsx("div",{className:"absolute inset-0 overflow-hidden",children:t.jsx("div",{className:"pointer-events-none fixed inset-y-0 right-0 flex max-w-full pl-10",children:t.jsx(Ce.Child,{as:h.Fragment,enter:"transform transition ease-in-out duration-500 sm:duration-700",enterFrom:"translate-x-full",enterTo:"translate-x-0",leave:"transform transition ease-in-out duration-500 sm:duration-700",leaveFrom:"translate-x-0",leaveTo:"translate-x-full",children:t.jsx(Ne.Panel,{className:"pointer-events-auto w-screen max-w-md",children:t.jsxs("div",{className:"flex h-full flex-col overflow-y-scroll bg-white py-6 shadow-xl",children:[t.jsx("div",{className:"px-4 sm:px-6",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsx(Ne.Title,{className:"text-base font-semibold leading-6 text-gray-900",children:"Edit Pages"}),t.jsx("div",{className:"ml-3 flex h-7 items-center",children:t.jsxs("button",{type:"button",className:"relative rounded-md bg-white text-gray-400 hover:text-gray-500 focus:outline-none ",onClick:()=>i(!1),children:[t.jsx("span",{className:"absolute -inset-2.5"}),t.jsx("span",{className:"sr-only",children:"Close panel"}),t.jsx("i",{className:"h-6 w-6 fa fa-close","aria-hidden":"true"})]})})]})}),t.jsx("div",{className:"relative mt-6 flex-1 px-4 sm:px-6",children:t.jsx(Xd,{item:e,dataItems:n,edit:s,open:r,setOpen:i})})]})})})})})})]})})}const _t={nav:{container:e=>"w-full ",navItemContainer:"h-full border-l overflow-y-auto overflow-x-hidden pt-3 scrollbar-xs",navItem:({isActive:e,isPending:n})=>`block px-4 py-2 font-light ${e?"w-[256px] bg-white text-blue-500 border-l border-y":"w-[248px] hover:bg-blue-100 text-slate-600"}`,navItemChild:({isActive:e,isPending:n})=>`block px-4 py-2 font-light ${e?"w-[238px] bg-white text-blue-500 border-l border-y":"w-[230px] hover:bg-blue-100 text-slate-600"}`,addItemButton:"cursor-pointer px-4 py-2 mt-3 hover:bg-blue-100 w-full text-slate-400 border-t border-slate-200"}};function en(e,n,s,r){let i=n.filter(a=>a.parent===e.id).sort((a,o)=>a.index-o.index);return i.length===0?!1:i.map((a,o)=>{let l={id:a.id,Comp:()=>t.jsx(tr,{to:`${r?`${s}/edit`:s}/${a.url_slug||a.id}`,className:_t.nav.navItem,children:a.title},o)};return en(l,n,s,r)&&(l.children=en(a,n,s,r)),l})}function Xd({item:e,dataItems:n,edit:s,open:r,setOpen:i}){const a=$e(),{pathname:o="/edit"}=Me(),{baseUrl:l}=A.useContext(oe),c=A.useCallback(p=>{let m=n.reduce((b,g)=>(b[g.id]=g,b),{});function f(b,g="",w){let T=[];return b.forEach(($,_)=>{let j=w[$.id];const C={id:j.id,index:j.index,title:j.title,url_slug:j.url_slug};(j.index!==_||j.parent!==g)&&(C.index=_,C.parent=g,T.push(C)),$.children&&(T=[...T,...f($.children,$.id,w)])}),T}let y=f(p.items,"",m),v=[...y,...n.filter(b=>!y.map(g=>g.id).includes(b.id))];y.forEach(b=>b.url_slug=lt(b,v)),Promise.all(y.map(b=>{a(me(b),{method:"post",action:o})})).then(b=>{})},[]),d=n.sort((p,m)=>p.index-m.index).filter(p=>!p.parent).map((p,m)=>{let f={id:p.id,index:p.index,Comp:()=>t.jsx(tr,{to:`${s?`${l}/edit`:l}/${p.url_slug||p.id}`,className:_t.nav.navItem,children:p.title})};return en(f,n,l)&&(f.children=en(p,n,l,s)),f}),u=p=>p.map(m=>{let f=m.Comp;return t.jsxs(A.Fragment,{children:[t.jsx(f,{}),m.children?t.jsx("div",{className:"border-l ml-4 pl-2",children:u(m.children)}):""]},m.id)});return t.jsx(t.Fragment,{children:t.jsx("div",{className:_t.nav.container(r),children:t.jsxs("div",{className:_t.nav.navItemContainer,children:[s?t.jsx(An,{items:d,onChange:c,maxDepth:4,renderItem:({item:p})=>{let m=p.Comp;return t.jsx(m,{})}}):u(d),s&&t.jsx(Zd,{dataItems:n})]})})})}function Zd({dataItems:e}){const n=$e(),{pathname:s="/edit"}=Me(),{baseUrl:r,user:i}=A.useContext(oe),o={title:"New Page",index:e.filter(c=>!c.parent).reduce((c,d)=>Math.max(isNaN(d.index)?-1:d.index,c),-1)+1,published:"draft",history:[{type:" created Page.",user:i.email,time:new Date().toString()}]};o.url_slug=lt(o,e);const l=()=>{n(me(o),{method:"post",action:s})};return t.jsx("div",{className:"pr-2",children:t.jsx("div",{onClick:l,className:_t.nav.addItemButton,children:"+ Add Page"})})}function Qd({item:e,dataItems:n,historyOpen:s,setHistoryOpen:r}){return A.useContext(oe),t.jsx(Ce.Root,{show:s,as:h.Fragment,children:t.jsxs(Ne,{as:"div",className:"relative z-20",onClose:r,children:[t.jsx("div",{className:"fixed inset-0"}),t.jsx("div",{className:"fixed inset-0 overflow-hidden",children:t.jsx("div",{className:"absolute inset-0 overflow-hidden",children:t.jsx("div",{className:"pointer-events-none fixed inset-y-0 right-0 flex max-w-full pl-10",children:t.jsx(Ce.Child,{as:h.Fragment,enter:"transform transition ease-in-out duration-500 sm:duration-700",enterFrom:"translate-x-full",enterTo:"translate-x-0",leave:"transform transition ease-in-out duration-500 sm:duration-700",leaveFrom:"translate-x-0",leaveTo:"translate-x-full",children:t.jsx(Ne.Panel,{className:"pointer-events-auto w-screen max-w-md",children:t.jsxs("div",{className:"flex h-full flex-col overflow-y-scroll bg-white py-6 shadow-xl",children:[t.jsx("div",{className:"px-4 sm:px-6",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsx(Ne.Title,{className:"text-base font-semibold leading-6 text-gray-900",children:"Edit History"}),t.jsx("div",{className:"ml-3 flex h-7 items-center",children:t.jsxs("button",{type:"button",className:"relative rounded-md bg-white text-gray-400 hover:text-gray-500 focus:outline-none",onClick:()=>r(!1),children:[t.jsx("span",{className:"absolute -inset-2.5"}),t.jsx("span",{className:"sr-only",children:"Close panel"}),t.jsx("i",{className:"h-6 w-6 text-lg fa fa-close","aria-hidden":"true"})]})})]})}),t.jsx("div",{className:"relative mt-6 flex-1 px-4 sm:px-6",children:t.jsx(tu,{history:(e==null?void 0:e.history)||[]})})]})})})})})})]})})}function eu(...e){return e.filter(Boolean).join(" ")}function tu({history:e}){return t.jsx(t.Fragment,{children:t.jsx("ul",{role:"list",className:"space-y-6",children:e.sort((n,s)=>new Date(s.time)-new Date(n.time)).map((n,s)=>t.jsxs("li",{className:"relative flex gap-x-4",children:[t.jsx("div",{className:eu(s===e.length-1?"h-6":"-bottom-6","absolute left-0 top-0 flex w-6 justify-center"),children:t.jsx("div",{className:"w-px bg-gray-200"})}),t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"relative flex h-6 w-6 flex-none items-center justify-center bg-white",children:t.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-gray-100 ring-1 ring-gray-300"})}),t.jsxs("p",{className:"flex-auto py-0.5 text-xs leading-5 text-gray-500",children:[t.jsx("span",{className:"font-medium text-gray-900",children:n.user})," ",n.type]}),t.jsx("time",{dateTime:n.time,className:"flex-none py-0.5 text-xs leading-5 text-gray-500",children:nu(n.time)})]})]},n.id))})})}function nu(e){const n=e instanceof Date?e:new Date(e),s=new Intl.RelativeTimeFormat("en"),r={years:3600*24*365,months:3600*24*30,weeks:3600*24*7,days:3600*24,hours:3600,minutes:60,seconds:1},i=(n.getTime()-Date.now())/1e3;for(let a in r)if(r[a]<Math.abs(i)){const o=i/r[a];return s.format(Math.round(o),a)}}const ye={pageControls:{controlItem:"pl-6 py-0.5 text-md cursor-pointer hover:text-blue-500 text-slate-400 flex items-center",select:"bg-transparent border-none rounded-sm focus:ring-0 focus:border-0 pl-1",selectOption:"p-4 text-md cursor-pointer hover:text-blue-500 text-slate-400 hover:bg-blue-600",content:""}};function ri({item:e,dataItems:n,updateAttribute:s,attributes:r,edit:i,status:a,setItem:o,pageType:l="page"}){var U,ee;const c=$e(),{pathname:d="/edit"}=Me(),[u,p]=A.useState(!1),[m,f]=A.useState(!1),[y,v]=h.useState(!1),[b,g]=h.useState(!1);h.useState(a==null?void 0:a.message);const[w,T]=h.useState(!1),[$,_]=h.useState(e.type),[j,C]=h.useState(),{baseUrl:k,user:N,falcor:M,falcorCache:I}=A.useContext(oe),W=async O=>{let S={id:e.id,url_slug:lt(e,n)};O&&(S.sections=O),c(me(S),{method:"post",action:l==="template"?d:`${k}/edit/${S.url_slug}`})};async function E(O){var q,Q;const S=(Q=(q=Object.keys(O.sectionControls))==null?void 0:q.filter((K,Z)=>K&&K!=="undefined"))==null?void 0:Q.length;C("Loading sections...");const R=await Object.keys(O.sectionControls).filter((K,Z)=>K&&K!=="undefined").reduce(async(K,Z,st)=>{var ie,ke,Ve,Lt,Ae;const Re=await K;let se=((ie=e.sections.filter(ae=>ae.id===Z))==null?void 0:ie[0])||{};C(`Updating section ${se==null?void 0:se.title}  ${(ke=se==null?void 0:se.element)==null?void 0:ke["element-type"]}  ${st+1}/${S}`);let rt=Xn((Ve=se==null?void 0:se.element)==null?void 0:Ve["element-data"])||{},dn=((Lt=se==null?void 0:se.element)==null?void 0:Lt["element-type"])||"",De=je[dn]||{},un=((De==null?void 0:De.variables)||[]).reduce((ae,Be)=>(ae[Be.name]=rt[Be.name],ae),{}),z=Object.keys(O.sectionControls[Z]).reduce((ae,Be)=>{var Pt,xt,gt,bt,os,as,ls;return ae[Be]=((bt=O==null?void 0:O.active_row)==null?void 0:bt[(gt=(xt=(Pt=O==null?void 0:O.sectionControls)==null?void 0:Pt[Z])==null?void 0:xt[Be])==null?void 0:gt.name])||((ls=O==null?void 0:O.active_row)==null?void 0:ls[(as=(os=O==null?void 0:O.sectionControls)==null?void 0:os[Z])==null?void 0:as[Be]])||null,ae},{}),re=(Ae=rt.additionalVariables)==null?void 0:Ae.map(ae=>{var xt,gt,bt;const Be=ae.name,Pt=(gt=(xt=O==null?void 0:O.sectionControls)==null?void 0:xt[Z])==null?void 0:gt[Be];return ae.defaultValue=(bt=O==null?void 0:O.active_row)==null?void 0:bt[Pt],ae}),de={...un,...z,additionalVariables:re};const Ie=De!=null&&De.getData?await De.getData(de,M).then(ae=>({section_id:Z,data:ae})):null;return Ie?[...Re,Ie]:Re},Promise.resolve([]));if(R.length>0){let K=pe(e.sections);R.forEach(({section_id:Z,data:st})=>{var se;let Re=((se=K.filter(rt=>rt.id===Z))==null?void 0:se[0])||{};Re.element["element-data"]=JSON.stringify(st)}),s("sections",K),W(K)}C(void 0)}const P=()=>{const O=n.filter(R=>!R.parent).reduce((R,q)=>Math.max(isNaN(q.index)?-1:q.index,R),-1),S=pe(e);delete S.id,S.title+=" Dup",S.index=O+1,S.url_slug=lt(S,n),S.sections.forEach(R=>{delete R.ref,delete R.id}),c(me(S),{method:"post",action:d})},F=async()=>{const O=n.filter(R=>R.parent===e.id).reduce((R,q)=>Math.max(isNaN(q.index)?0:q.index,R),0),S={title:"New Page",parent:e.id,index:O+1,published:"draft",history:[{type:" created Page.",user:N.email,time:new Date().toString()}]};S.url_slug=`${lt(S,n)}`,c(me(S),{method:"post",action:`${k}/edit/${S.url_slug}`})},Y=({item:O,dataItems:S,children:R})=>{const q=S.filter(Q=>Q.parent===O.id);q.length&&(R.push(...q),q.forEach(Q=>Y({item:Q,dataItems:S,children:R})))},V=async O=>{const S=[];Y({item:e,dataItems:n,children:S}),[...S,e].reduce(async(R,q)=>{await R;const Q={id:q.id,type:O};c(me(Q,"updateType"),{method:"post",action:`${k}/edit/`})},Promise.resolve()),T(!1),_(e.type)},H=async(O,S="")=>{var Q,K;const R=pe(e);R[O]=S;let q=l==="template"?"sections":"draft_sections";O==="header"&&!((K=(Q=R==null?void 0:R[q])==null?void 0:Q.filter(Z=>Z.is_header))!=null&&K[0])?(R[q].unshift({is_header:!0,element:{"element-type":"Header: Default Header","element-data":{}}}),s("","",{header:S,[q]:R[q]})):s(O,S),c(me(R),{method:"post",action:d})},J=async(O="")=>{if(O!==e.title){let S=e.history?pe(e.history):[],R={type:`changed page title to ${O}`,user:N.email,time:new Date().toString()};S.push(R);const q={id:e.id,title:O,history:S};q.url_slug=lt(q,n),s("title",O),c(me(q),{method:"post",action:`${k}/edit/${q.url_slug}`})}},L=async()=>{let O={type:"published changes.",user:N.email,time:new Date().toString()},S=e.history?pe(e.history):[];S.push(O);const R={id:e.id,has_changes:!1,published:"",history:S};let q=pe(e.sections||[]).reduce((Q,K)=>(K.draft_id&&(Q[K.draft_id]=K),Q),{});R.sections=pe(e.draft_sections).reduce((Q,K)=>(q[K.id]?K.id=q[K.id].id:delete K.id,Q.push(K),Q),[]),s("","",{has_changes:!1,published:"",history:S}),c(me(R),{method:"post",action:d})},G=O=>{if(!tt(e.data_controls,O)){console.log("------setting data controls-------------");const S=pe(e);e.id,S.data_controls=O,s("data_controls",O),c(me(S),{method:"post",action:d})}};return t.jsxs(t.Fragment,{children:[t.jsx(Kd,{item:e,dataItems:n,edit:!0,open:u,setOpen:p}),t.jsx(Qd,{item:e,historyOpen:m,setHistoryOpen:f}),t.jsx(Ad,{item:e,open:y,setOpen:v,dataControls:e==null?void 0:e.data_controls,setDataControls:G,loadingStatus:j,setLoadingStatus:C,baseUrl:k}),i&&t.jsxs("div",{className:"p-4",children:[l==="page"&&t.jsx("div",{className:"w-full flex justify-center pb-6",children:t.jsx(su,{item:e,onClick:L})}),t.jsxs("div",{className:"pl-4 pb-2",children:[t.jsx("span",{className:"text-xs uppercase font-bold text-slate-400",children:" page name "}),t.jsx(Ys,{value:e==null?void 0:e.title,onChange:J})]}),t.jsxs("div",{className:"flex w-full h-12 px-4",children:[l==="page"&&t.jsx(Gs,{icon:"fad fa-wrench p-2 text-blue-300 hover:text-blue-500 cursor-pointer text-lg",children:t.jsxs("div",{className:"py-2",children:[t.jsx("div",{className:"px-6 font-medium text-sm",children:" Page Controls "}),(!(e!=null&&e.parent)||(e==null?void 0:e.parent)==="")&&t.jsxs("div",{className:ye.pageControls.controlItem,children:[t.jsx("i",{className:"fa-solid fa-up-down-left-right text-sm"}),t.jsxs("select",{title:"Move Page",className:ye.pageControls.select,value:$,onChange:O=>(T(!0),V(O.target.value)),children:[t.jsx("option",{value:"docs-page",className:ye.pageControls.selectOption,children:"Live"},"cms"),t.jsx("option",{value:"docs-draft",className:ye.pageControls.selectOption,children:"Draft"},"draft"),t.jsx("option",{value:"docs-play",className:ye.pageControls.selectOption,children:"Playground"},"playground")]})]}),t.jsx("div",{onClick:F,className:ye.pageControls.controlItem,children:"☲ New Page"}),t.jsx("div",{onClick:F,className:ye.pageControls.controlItem,children:"☲ Insert Subpage"}),t.jsx("div",{onClick:P,className:ye.pageControls.controlItem,children:"☳ Duplicate"}),t.jsx("div",{onClick:()=>g(!0),className:ye.pageControls.controlItem,children:"☵ Delete"})]})}),t.jsx(Gs,{icon:"fad fa-sliders-h p-2 text-blue-300 hover:text-blue-500 cursor-pointer text-lg",children:t.jsxs("div",{className:"py-2",children:[t.jsx("div",{className:"px-6 font-medium text-sm",children:" Page Settings "}),t.jsxs("div",{className:ye.pageControls.controlItem,children:[t.jsx(Bt,{item:e,type:"sidebar",toggleSidebar:H}),"Show Sidebar"]}),t.jsxs("div",{className:ye.pageControls.controlItem,children:[t.jsx(Bt,{type:"full_width",item:e,toggleSidebar:H}),"Full Width"]}),t.jsxs("div",{className:ye.pageControls.controlItem,children:[t.jsx(Bt,{type:"hide_in_nav",item:e,toggleSidebar:H}),"Hide In Nav"]}),t.jsx("div",{className:ye.pageControls.controlItem+" pr-4",children:t.jsx(sd,{label:"Header:",types:[{label:"None",value:"none"},{label:"Above",value:"above"},{label:"Below",value:"below"},{label:"In page",value:"inpage"}],type:e.header,setType:O=>H("header",O)})}),t.jsxs("div",{className:ye.pageControls.controlItem,children:[t.jsx(Bt,{type:"footer",item:e,toggleSidebar:H}),"Show Footer"]})]})}),l==="page"&&t.jsx("div",{className:"fad fa-file-alt p-2 text-blue-300 hover:text-blue-500 cursor-pointer text-lg",onClick:()=>p(!0)}),l==="template"&&t.jsx("div",{className:"fad fa-sliders-h-square p-2 text-blue-300 hover:text-blue-500 cursor-pointer text-lg",onClick:()=>v(!0)}),t.jsx("div",{className:"fad fa-history p-2 text-blue-300 hover:text-blue-500 cursor-pointer text-lg",onClick:()=>f(!0)})]}),l==="template"&&t.jsxs("div",{className:"pl-4 pb-2",children:[t.jsx("span",{className:"text-xs uppercase font-bold text-slate-400",children:" url prefix "}),t.jsx(Ys,{value:(U=e==null?void 0:e.data_controls)==null?void 0:U.url,onChange:O=>G({...e.data_controls,url:O})})]}),l==="template"&&((ee=e==null?void 0:e.data_controls)==null?void 0:ee.id_column)&&t.jsx("div",{children:t.jsx(ni,{item:e,submit:c,onChange:(O,S)=>{let R;console.log("test123",O,S),O==="id_column"&&(R={...e==null?void 0:e.data_controls,id_column:S,active_row:{}}),O==="active_row"&&(R={...e==null?void 0:e.data_controls,...S}),G(R),E(R)},loadingStatus:j,setLoadingStatus:C,baseUrl:k})}),t.jsx(ru,{item:e,open:b,setOpen:g})]})]})}function Ys({value:e,onChange:n}){const[s,r]=A.useState(!1),[i,a]=A.useState(e||"");return t.jsx("div",{className:"flex justify-between group",children:t.jsx("div",{className:"flex-1",children:t.jsx("dd",{className:" text-sm text-gray-900 ",children:s?t.jsxs("div",{className:"flex group focus:outline-none border-slate-300 border-b-2 group-focus:border-blue-500",children:[t.jsx("input",{className:"w-full px-2 py-1 text font-medium text-slate-500 focus:outline-none focus:border-blue-500",value:i,onChange:o=>a(o.target.value)}),t.jsxs("div",{className:"flex cursor-pointer",children:[t.jsx("span",{className:" pt-0.5 text-green-500 rounded hover:bg-green-500 hover:text-white ",onClick:o=>{n(i),r(!1)},children:t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-6 h-6",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})})}),t.jsx("span",{className:"pt-0.5 text-slate-300  rounded  hover:text-red-300 ",onClick:o=>r(!1),children:t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-6 h-6",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})})})]})]}):t.jsxs("div",{className:"w-full min-h-[30px] flex flex-row px-2 py-1 text font-medium text-slate-500 focus:outline-none border-slate-300 border-b-2 focus:border-blue-500",children:[t.jsx("div",{className:"w-full",children:e}),t.jsx("span",{className:"hidden group-hover:block text-blue-300 hover:text-blue-500 cursor-pointer ",onClick:o=>r(!s),children:t.jsx("i",{className:"fad fa-pencil absolute -ml-4 -mt-0.5 p-1.5 rounded hover:bg-blue-500 hover:text-white"})})]})})})})}function su({item:e,onClick:n}){const s=e.published==="draft"||e.has_changes;return t.jsx("div",{onClick:()=>s?n():null,className:`${s?"inline-flex w-36 justify-center rounded-lg cursor-pointer text-sm font-semibold py-2 px-2 bg-blue-600 text-white hover:bg-blue-500 shadow-lg border border-b-4 border-blue-800 hover:border-blue-700 active:border-b-2 active:mb-[2px] active:shadow-none":"inline-flex w-36 justify-center rounded-lg cursor-not-allowed text-sm font-semibold py-2 px-2 bg-slate-300 text-white shadow border border-slate-400 border-b-4"}`,children:t.jsxs("span",{className:"flex items-center",children:[t.jsx("span",{className:"pr-2",children:s?"Publish":"No Changes"}),s?t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})}):""]})})}function Gs({icon:e,children:n}){let[s,r]=h.useState(),[i,a]=h.useState(),{styles:o,attributes:l}=Ln(s,i);return t.jsxs(Fe,{className:"relative",children:[t.jsx(Fe.Button,{ref:r,className:"text-md cursor-pointer hover:text-blue-800 text-blue-500",children:t.jsx("i",{className:e,title:"Help"})}),t.jsx(Ce,{as:h.Fragment,enter:"transition ease-out duration-200",enterFrom:"opacity-0 translate-y-1",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in duration-150",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-1",children:t.jsx(Fe.Panel,{ref:a,style:o.popper,...l.popper,className:"shadow-lg bg-white rounded z-10 transform  border border-blue-200 w-[180px] ",children:n})})]})}function Bt({type:e,item:n,toggleSidebar:s}){let r=n[e]==="show";return t.jsxs(Bi,{checked:r,onChange:i=>s(e,r?"":"show"),className:"group relative inline-flex h-5 w-10 flex-shrink-0 cursor-pointer items-center justify-center rounded-full focus:outline-none focus:ring-2 focus:ring-indigo-600 focus:ring-offset-2",children:[t.jsx("span",{className:"sr-only",children:"Use setting"}),t.jsx("span",{"aria-hidden":"true",className:"pointer-events-none absolute h-full w-full rounded-md bg-white"}),t.jsx("span",{"aria-hidden":"true",className:`
          ${r?"bg-blue-500":"bg-gray-200"}
          pointer-events-none absolute mx-auto h-4 w-9 rounded-full transition-colors duration-200 ease-in-out
        `}),t.jsx("span",{"aria-hidden":"true",className:`
          ${r?"translate-x-5":"translate-x-0"}
          pointer-events-none absolute left-0 inline-block h-5 w-5 transform rounded-full border border-gray-200 bg-white shadow ring-0 transition-transform duration-200 ease-in-out
        `})]})}function ru({item:e,open:n,setOpen:s}){const r=h.useRef(null),i=$e(),{baseUrl:a}=A.useContext(oe),[o,l]=h.useState(!1);return t.jsxs(Qn,{open:n,setOpen:s,initialFocus:r,children:[t.jsxs("div",{className:"sm:flex sm:items-start",children:[t.jsx("div",{className:"mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:t.jsx("i",{className:"fa fa-danger h-6 w-6 text-red-600","aria-hidden":"true"})}),t.jsxs("div",{className:"mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left",children:[t.jsxs(Ne.Title,{as:"h3",className:"text-base font-semibold leading-6 text-gray-900",children:["Delete Page ",e.title," ",e.id]}),t.jsx("div",{className:"mt-2",children:t.jsx("p",{className:"text-sm text-gray-500",children:"Are you sure you want to delete this page? All of the page data will be permanently removed from our servers forever. This action cannot be undone."})})]})]}),t.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[t.jsxs("button",{type:"button",disabled:o,className:"inline-flex w-full justify-center rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-red-500 sm:ml-3 sm:w-auto",onClick:async()=>{l(!0),await i(me(e,"delete"),{method:"post",action:`${a}/edit/`}),l(!1),s(!1)},children:["Delet",o?"ing...":"e"]}),t.jsx("button",{type:"button",className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto",onClick:()=>s(!1),ref:r,children:"Cancel"})]})]})}function Qn({open:e,setOpen:n,initialFocus:s,children:r}){return t.jsx(Ce.Root,{show:e,as:h.Fragment,children:t.jsxs(Ne,{as:"div",className:"relative z-30",initialFocus:s,onClose:n,children:[t.jsx(Ce.Child,{as:h.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:t.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"})}),t.jsx("div",{className:"fixed inset-0 z-10 overflow-y-auto",children:t.jsx("div",{onClick:()=>{n(!1)},className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:t.jsx(Ce.Child,{as:h.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:t.jsx(Ne.Panel,{className:"relative transform overflow-hidden rounded-lg bg-white px-4 pb-4 pt-5 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg sm:p-6",children:r})})})})]})})}function iu({item:e,dataItems:n,updateAttribute:s,attributes:r,setItem:i,status:a,logo:o,rightMenu:l}){var _,j,C;const c=$t(),d=$e();Me();const{baseUrl:u,user:p,theme:m}=A.useContext(oe),f=A.useMemo(()=>Vr(n,u,!0),[n]),y=(e==null?void 0:e.index)=="999"?1:qr(n,u),v=Kn(e);A.useEffect(()=>{if(!(e!=null&&e.url_slug)){let k=n.sort((N,M)=>N.index-M.index).filter(N=>!N.parent&&N.url_slug)[0];k&&k.url_slug&&c(`edit/${k.url_slug}`)}},[]),A.useEffect(()=>{var k;if(e.sections&&((k=e==null?void 0:e.sections)==null?void 0:k.length)>0&&!e.draft_sections){const N=pe(e.sections);N.forEach(I=>delete I.id);const M=pe(e);M.draft_sections=N,e.draft_sections=N,s("draft_sections",N),d(me(M),{method:"post",action:`${u}/edit/${M.url_slug}`})}},[]);const b=(j=(_=e.draft_sections)==null?void 0:_.filter(k=>k.is_header))==null?void 0:j[0],g=(C=e.draft_sections)==null?void 0:C.filter(k=>!k.is_header&&!k.is_footer),w=k=>{let N=e.history?pe(e.history):[];N.push({type:"Header updated.",user:(p==null?void 0:p.email)||"user",time:new Date().toString()}),s("","",{has_changes:!0,history:N,draft_sections:[...k,...g].filter(I=>I)});const M={id:e.id,draft_sections:[...k,...g].filter(I=>I),has_changes:!0,history:N};console.log("save header",M),d(me(M),{method:"post",action:`${u}/edit/${e.url_slug}`})},T=(k,N)=>{let M={type:N,user:(p==null?void 0:p.email)||"user",time:new Date().toString()},I=e.history?pe(e.history):[];N&&I.push(M),s("","",{has_changes:!0,history:I,draft_sections:[b,...k].filter(E=>E)});const W={id:e==null?void 0:e.id,draft_sections:[b,...k].filter(E=>E),has_changes:!0,history:I};d(me(W),{method:"post",action:`${u}/edit/${e.url_slug}`})},$=A.useMemo(()=>r.sections.EditComp,[]);return t.jsxs("div",{children:[(e==null?void 0:e.header)==="above"&&t.jsx("div",{className:"w-full",children:t.jsx($,{item:e,value:[b],onChange:w,...r.draft_sections})}),t.jsx(Dt,{topNav:{menuItems:f,position:"fixed",logo:o,rightMenu:l},sideNav:v,children:t.jsxs("div",{className:`${m.page.wrapper1} ${m.navPadding[y]}`,children:[(e==null?void 0:e.header)==="below"&&t.jsx("div",{className:"w-full",children:t.jsx($,{item:e,value:[b],onChange:w,...r.draft_sections})}),t.jsxs("div",{className:`${m.page.wrapper2}`,children:[(e==null?void 0:e.sidebar)==="show"&&t.jsx(au,{inPageNav:v}),t.jsxs("div",{className:m.page.wrapper3+" border-r",children:[(e==null?void 0:e.header)==="inpage"&&t.jsx("div",{className:"w-full",children:t.jsx($,{item:e,value:[b],onChange:w,...r.draft_sections})}),(p==null?void 0:p.authLevel)>=5&&t.jsx(ou,{item:e,baseUrl:u}),t.jsx($,{full_width:e.full_width,value:g,onChange:T,...r.draft_sections})]}),t.jsx("div",{className:"w-52 hidden xl:block",children:t.jsx("div",{className:"w-52 sticky top-24 hidden xl:block",children:t.jsx(ri,{item:e,dataItems:n,setItem:i,edit:!0,status:a,attributes:r,updateAttribute:s,pageType:"page"})})})]})]})}),(e==null?void 0:e.footer)&&t.jsx("div",{className:"h-[300px] bg-slate-100"})]})}function ou({baseUrl:e,item:n}){return t.jsx(Se,{className:"z-30 absolute right-[10px] top-[5px]",to:`${e}/${n.url_slug}`,children:t.jsx("i",{className:"fad fa-eye fa-fw flex-shrink-0 text-lg text-slate-400 hover:text-blue-500"})})}function au({inPageNav:e}){return t.jsx("div",{className:"w-64 hidden xl:block",children:t.jsx("div",{className:"w-64 sticky top-20 hidden xl:block h-screen",children:t.jsx("div",{className:"h-[calc(100%_-_5rem)] overflow-y-auto overflow-x-hidden font-display",children:t.jsx(on,{...e})})})})}function lu({item:e,dataItems:n,updateAttribute:s,attributes:r,setItem:i,status:a,params:o,logo:l,rightMenu:c,sideNav:d=[]}){var k,N,M;$t();const u=$e(),{baseUrl:p,user:m,theme:f}=A.useContext(oe),{pathname:y="/edit"}=Me(),{id:v}=o,b=1,g=Kn(e),w=(N=(k=e.sections)==null?void 0:k.filter(I=>I.is_header))==null?void 0:N[0],T=(M=e.sections)==null?void 0:M.filter(I=>!I.is_header&&!I.is_footer),$=[{path:`${p}/templates`,name:"Templates"}],_=I=>{let W=e.history?pe(e.history):[];W.push({type:"Header updated.",user:m.email,time:new Date().toString()}),s("","",{has_changes:!0,history:W,sections:[...I,...T].filter(P=>P)});const E={id:e.id,sections:[...I,...T].filter(P=>P),has_changes:!0,history:W};console.log("save header",E),u(me(E),{method:"post",action:y})},j=(I,W)=>{let E={type:W,user:m.email,time:new Date().toString()},P=e.history?pe(e.history):[];W&&P.push(E),s("","",{has_changes:!0,history:P,sections:[w,...I].filter(Y=>Y)});const F={id:e.id,sections:[w,...I].filter(Y=>Y),has_changes:!0,history:P};u(me(F),{method:"post",action:y})},C=A.useMemo(()=>r.sections.EditComp,[]);return t.jsxs("div",{children:[(e==null?void 0:e.header)==="above"&&t.jsx("div",{className:"w-full",children:t.jsx(C,{full_width:e.full_width,value:[w],onChange:_,...r.sections})}),t.jsx(Dt,{topNav:{menuItems:$,position:"fixed",logo:l,rightMenu:c},sideNav:d,children:t.jsxs("div",{className:`${f.page.wrapper1} ${f.navPadding[b]}`,children:[(e==null?void 0:e.header)==="below"&&t.jsx("div",{className:"w-full",children:t.jsx(C,{item:e,value:[w],onChange:_,...r.sections})}),t.jsxs("div",{className:`${f.page.wrapper2}`,children:[(e==null?void 0:e.sidebar)==="show"&&t.jsx(cu,{inPageNav:g}),t.jsxs("div",{className:f.page.wrapper3+" border-r",children:[(e==null?void 0:e.header)==="inpage"&&t.jsx("div",{className:"w-full",children:t.jsx(C,{item:e,value:[w],onChange:_,...r.sections})}),t.jsx(C,{full_width:e.full_width,value:T,onChange:j,...r.sections})]}),t.jsx("div",{className:"w-52 hidden xl:block",children:t.jsx("div",{className:"w-52 sticky top-12 hidden xl:block h-screen",children:t.jsx(ri,{item:e,dataItems:n,setItem:i,edit:!0,status:a,attributes:r,updateAttribute:s,pageType:"template"})})})]})]})}),(e==null?void 0:e.footer)&&t.jsx("div",{className:"h-[300px] bg-slate-100"})]},v)}function cu({inPageNav:e}){return t.jsx("div",{className:"w-64 hidden xl:block",children:t.jsx("div",{className:"w-64 sticky top-20 hidden xl:block h-screen",children:t.jsx("div",{className:"h-[calc(100%_-_5rem)] overflow-y-auto overflow-x-hidden font-display",children:t.jsx(on,{...e})})})})}const Nt=(e=50,n=50,s=20,r=30,i=!1)=>t.jsxs("svg",{width:r,height:s,children:[t.jsx("line",{x1:"0",y1:"0",x2:"0",y2:s,stroke:"black",strokeDasharray:"4 1.5 4 1.5"}),t.jsx("rect",{x:e===100?0:5,y:"0",width:Math.max(Math.floor(r*e/100)-(e===100?0:6),0),height:s,rx:"1",ry:"1",style:{fill:"white",stroke:"black",strokeWidth:1,opacity:.5}}),t.jsx("rect",{x:r*e/100-1,y:"0",width:Math.max(Math.floor(r*n/100)-(e===100?0:6),0),height:s,rx:"1",ry:"1",style:{fill:"white",stroke:"black",strokeWidth:1,opacity:.5}}),t.jsx("line",{x1:r,y1:"0",x2:r,y2:s,stroke:"black",strokeDasharray:"4 1.5 4 1.5"})]}),jn={"1/3":"col-span-6 md:col-span-2","1/2":"col-span-6 md:col-span-3","2/3":"col-span-6 md:col-span-4",1:"col-span-6 md:col-span-6",2:"col-span-6 lg:col-span-8"},es=[{name:"1/3",value:2,icon:Nt(40,60)},{name:"1/2",value:3,icon:Nt(50,50)},{name:"2/3",value:4,icon:Nt(60,40)},{name:"1",value:6,icon:Nt(90,0)},{name:"2",value:8,icon:Nt(100,0)}],ii=(e,n,s,r)=>["2"].includes(e)?jn[e]:s<n?`${jn[e]} md:col-start-2`:`${jn[e]} md:col-start-${r}`,du=e=>{try{JSON.parse(e)}catch{return!1}return!0};function uu({size:e="1",setSize:n,onChange:s}){return t.jsx("div",{className:"flex space-x-1 rounded-lg bg-blue-50 p-0.5",role:"tablist","aria-orientation":"horizontal",children:es.map((r,i)=>t.jsx("button",{className:r.name===e?"flex items-center rounded-md py-[0.4375rem] pl-2 pr-2 text-sm font-semibold lg:pr-3 bg-white shadow":"flex items-center rounded-md py-[0.4375rem] pl-2 pr-2 text-sm font-semibold lg:pr-3 hover:text-blue-500",id:"headlessui-tabs-tab-3",role:"tab",type:"button",tabIndex:-1,onClick:()=>{s(r.name)},children:r.icon},i))})}const pu=({data:e})=>t.jsxs("div",{className:"p-2 rounded-md bg-red-300 border-red-500 text-white min-h-[50px]",children:["Error: ",e==null?void 0:e.status]});function mu({value:e,i:n,onChange:s,attributes:r,size:i,onCancel:a,onSave:o,onRemove:l}){var $,_,j,C,k;let[c,d]=h.useState(),[u,p]=h.useState(),{styles:m,attributes:f}=Ln(c,u);const y=(N,M)=>{tt(e,{...e,[N]:M})||s({...e,[N]:M})};let v=($=r==null?void 0:r.title)==null?void 0:$.EditComp,b=(_=r==null?void 0:r.level)==null?void 0:_.EditComp,g=(j=r==null?void 0:r.tags)==null?void 0:j.EditComp,w=(C=r==null?void 0:r.element)==null?void 0:C.EditComp,T=(k=r==null?void 0:r.helpText)==null?void 0:k.EditComp;return t.jsxs("div",{className:`${n===0?"":"pt-4"}`,children:[t.jsxs("div",{className:"flex flex-col",children:[t.jsxs("div",{className:"flex flex-wrap border-y justify-end items-center",children:[t.jsx("div",{className:"flex-0 grow",children:t.jsx(v,{className:`p-2 w-full font-sans font-medium text-md  ${(e==null?void 0:e.level)==="1"?"text-blue-500 font-bold text-xl tracking-wider py-1 pl-1":(e==null?void 0:e.level)==="2"?"text-lg tracking-wider":(e==null?void 0:e.level)==="3"?"text-md tracking-wide":""}`,placeholder:"Section Title",value:e==null?void 0:e.title,onChange:N=>y("title",N)})}),t.jsx("div",{children:t.jsx(b,{className:"p-2 w-20 bg-white",value:e==null?void 0:e.level,placeholder:"level",options:r.level.options,onChange:N=>y("level",N)})}),t.jsx("div",{children:t.jsx(g,{className:"p-2 flex-0",value:e==null?void 0:e.tags,placeholder:"Add Tag...",onChange:N=>y("tags",N)})})]}),t.jsxs("div",{className:"flex flex-wrap border-y justify-end items-center",children:[t.jsx("div",{className:"self-center pl-2",children:t.jsx(uu,{size:e==null?void 0:e.size,onChange:N=>y("size",N)})}),t.jsx("div",{className:"flex-1"}),t.jsxs("div",{className:"flex flex-row flex-wrap",children:[t.jsx("div",{className:"py-2",children:t.jsxs(Fe,{className:"relative",children:[t.jsx(Fe.Button,{ref:d,className:"pl-3  text-md cursor-pointer hover:text-blue-800 text-blue-500",children:t.jsx("i",{className:"fa fa-circle-info text-2xl fa-fw",title:"Help"})}),t.jsx(Ce,{as:h.Fragment,enter:"transition ease-out duration-200",enterFrom:"opacity-0 translate-y-1",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in duration-150",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-1",children:t.jsx(Fe.Panel,{ref:p,style:m.popper,...f.popper,className:"shadow-lg bg-white z-10 w-screen max-w-sm transform px-4 border border-blue-200 lg:max-w-3xl",children:t.jsx(T,{value:e==null?void 0:e.helpText,onChange:N=>y("helpText",N)})})})]})}),t.jsx("div",{className:"py-2",children:t.jsx("button",{className:"pl-6 py-0.5 text-md cursor-pointer hover:text-red-500 text-slate-400",onClick:l,children:t.jsx("i",{className:"fa-light fa-trash text-2xl fa-fw",title:"Delete"})})}),t.jsx("div",{className:"py-2",children:t.jsx("button",{className:"pl-6 py-0.5 text-md cursor-pointer hover:text-red-500 text-slate-400",onClick:a,children:t.jsx("i",{className:"fa-light fa-xmark text-2xl fa-fw",title:"Cancel"})})}),t.jsx("div",{className:"py-2",children:t.jsxs("button",{className:"pl-6 py-0.5 text-md cursor-pointer flex items-center hover:text-blue-500 text-slate-400",onClick:o,children:[t.jsx("i",{className:"fa-light fa-floppy-disk text-2xl fa-fw",title:"Save"}),"  "]})})]})]})]}),t.jsx("div",{children:t.jsx(w,{value:e==null?void 0:e.element,onChange:N=>y("element",N),size:i})})]})}function ts({value:e,i:n,attributes:s,edit:r,onEdit:i,moveItem:a,addAbove:o}){var j,C,k,N,M,I,W,E;let[l,c]=h.useState(),[d,u]=h.useState(),{styles:p,attributes:m}=Ln(l,d);A.useContext(oe);let f=(j=s==null?void 0:s.title)==null?void 0:j.ViewComp,y=(C=s==null?void 0:s.tags)==null?void 0:C.ViewComp,v=(k=s==null?void 0:s.element)==null?void 0:k.ViewComp,b=(N=s==null?void 0:s.helpText)==null?void 0:N.ViewComp,g=(e==null?void 0:e.title)||(e==null?void 0:e.tags),w=e==null?void 0:e.helpText,T=!1,$=(M=e==null?void 0:e.element)==null?void 0:M["template-section-id"];const _=A.useMemo(()=>t.jsx(v,{value:e==null?void 0:e.element}),[e==null?void 0:e.element,e==null?void 0:e.id]);return t.jsxs("div",{className:"h-full ",children:[t.jsxs("div",{className:"flex w-full ",children:[t.jsx("div",{className:"flex-1"}),e!=null&&e.is_header&&r?t.jsx("div",{className:"z-10 relative",children:t.jsx("div",{className:"absolute mr-16 right-[-60px] flex",children:t.jsx("button",{className:" flex items-center text-md cursor-pointer hover:text-blue-500 text-slate-400",onClick:i,children:t.jsx("i",{className:"fa-light fa-pencil text-xl fa-fw",title:"Edit"})})})}):t.jsx("div",{className:"z-10 relative",children:t.jsx("div",{className:`absolute mr-16 ${r?"top-[-14px]":"}top-[-6px]"} right-[-60px] flex`,children:r&&typeof i=="function"&&!$?t.jsxs(t.Fragment,{children:[t.jsx("button",{className:"flex items-center text-md cursor-pointer hover:text-blue-500 text-slate-400",onClick:()=>a(n,-1),children:t.jsx("i",{className:"fa-light fa-angle-up text-xl fa-fw",title:"Move Up"})}),t.jsx("button",{className:"flex items-center text-md cursor-pointer hover:text-blue-500 text-slate-400",onClick:()=>a(n,1),children:t.jsx("i",{className:"fa-light fa-angle-down text-xl fa-fw",title:"Move Down"})}),t.jsx("button",{className:" flex items-center text-md cursor-pointer hover:text-blue-500 text-slate-400",onClick:i,children:t.jsx("i",{className:"fa-light fa-pencil text-xl fa-fw",title:"Edit"})}),t.jsx("button",{className:"text-lg cursor-pointer hover:text-blue-500 text-slate-400 pr-1",onClick:o,children:t.jsx("i",{className:"fal fa-circle-plus text-lg fa-fw",title:"Add Section"})})]}):""})})]}),(g||w||T)&&t.jsxs("div",{className:`flex w-full h-[50px] items-center ${(e==null?void 0:e.level)==="1"?"border-b":""} `,children:[t.jsx("div",{id:`#${(I=e==null?void 0:e.title)==null?void 0:I.replace(/ /g,"_")}`,className:`flex-1 flex-row py-2  font-display font-medium uppercase scroll-mt-36 ${g?"":"invisible"}`,children:t.jsx(f,{className:`w-full ${(e==null?void 0:e.level)==="1"?"text-blue-500 font-bold text-xl tracking-wider py-1 pl-1":(e==null?void 0:e.level)==="2"?"text-lg tracking-wider":(e==null?void 0:e.level)==="3"?"text-md tracking-wide":""}`,value:e==null?void 0:e.title})}),t.jsx("div",{className:`${g?"p2":"invisible"}`,children:t.jsx(y,{className:"",value:e==null?void 0:e.tags})}),((E=(W=e==null?void 0:e.element)==null?void 0:W["element-type"])==null?void 0:E.includes("Map:"))&&t.jsx(Se,{className:"hidden",to:`/interact/${e==null?void 0:e.id}`,title:"interact",children:t.jsx("i",{className:"fa-light fa-window-restore"})}),t.jsx("div",{className:`${w?"p-0.5":"hidden"}`,children:t.jsxs(Fe,{className:"relative",children:[t.jsx(Fe.Button,{ref:c,className:"pl-3  text-md cursor-pointer hover:text-blue-200 text-blue-500",children:t.jsx("i",{className:"fa fa-circle-info text-2xl fa-fw",title:"Help"})}),t.jsx(Ce,{as:h.Fragment,enter:"transition ease-out duration-200",enterFrom:"opacity-0 translate-y-1",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in duration-150",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-1",children:t.jsx(Fe.Panel,{ref:u,style:p.popper,...m.popper,className:"shadow-lg bg-white z-10 w-screen max-w-sm transform px-4 border border-blue-200 lg:max-w-3xl",children:t.jsx(b,{value:e==null?void 0:e.helpText})})})]})}),g&&typeof i=="function"&&!$?t.jsx(t.Fragment,{}):$&&typeof i=="function"?t.jsx("i",{className:"pl-5 py-0.5 fa-light fa-lock p-2 text-slate-400",title:"Template generated section"}):t.jsx(t.Fragment,{})]}),t.jsx("div",{className:"h-full",children:_})]})}A.memo(ts,(e,n)=>tt(e.value,n.value));const hu=({onClick:e,showpageToggle:n})=>t.jsxs("div",{className:"flex w-full",children:[t.jsx("div",{className:"flex-1"}),t.jsx("div",{className:`z-10 relative ${n?"w-12":"w-8"}`,children:t.jsx("div",{className:"absolute mr-8 top-[-14px] flex",children:t.jsx("button",{className:"text-lg cursor-pointer hover:text-blue-500 text-slate-400",onClick:e,children:t.jsx("i",{className:"fal fa-circle-plus text-lg fa-fw",title:"Add Section"})})})})]}),fu=({Component:e,value:n,onChange:s,attr:r,full_width:i=!1})=>{(!n||!n.map)&&(n=[]);const a=[...n,""],[o,l]=A.useState({index:-1,value:"",type:"new"}),c=g=>l({...o,value:g}),d=g=>l({...o,index:g}),u=()=>{l({index:-1,value:"",type:"new"})},p=()=>{var T,$,_,j;let g=pe(n),w="";o.type==="update"?(g[o.index]=o.value,w=`edited section ${(T=o==null?void 0:o.value)!=null&&T.title?`${($=o==null?void 0:o.value)==null?void 0:$.title} ${o.index+1}`:o.index+1}`):(g.splice(o.index,0,o.value),w=`added section ${(_=o==null?void 0:o.value)!=null&&_.title?`${(j=o==null?void 0:o.value)==null?void 0:j.title} ${o.index+1}`:o.index+1}`),u(),s(g,w)},m=()=>{var w,T;let g=pe(n);o.type==="update"&&g.splice(o.index,1),u(),s(g,`removed section ${(w=o==null?void 0:o.value)!=null&&w.title?`${(T=o==null?void 0:o.value)==null?void 0:T.title} ${o.index+1}`:o.index+1}`)},f=g=>{l({index:g,value:n[g],type:"update"})};function y(g,w){let T=pe(n),$=g+w;if(!($<0||$>=T.length)){var _=T.splice(g,1)[0];T.splice($,0,_),s(T)}}let v=8;const b={centered:"md:grid-cols-[1fr_repeat(6,_minmax(_100px,_170px))_1fr]",fullwidth:"md:grid-cols-[_minmax(_0px,0px)_repeat(6,_1fr)_minmax(_0px,0px)]"};return t.jsx("div",{className:`w-full grid grid-cols-6 ${b[i==="show"?"fullwidth":"centered"]} gap-1`,children:a.map((g,w)=>{var C,k,N,M;const T=(o.index===w?(C=o==null?void 0:o.value)==null?void 0:C.size:g==null?void 0:g.size)||"1",$=(k=es.find(I=>I.name===T))==null?void 0:k.value,_=6-v;v===0?v=$:$<=_?v+=$:v=$;const j=ii(T,$,_,v);return t.jsxs("div",{className:`${g!=null&&g.size?"h-full":""} ${j} `,children:[o.index===w?t.jsx(mu,{value:o.value,onChange:c,onSave:p,onCancel:u,onRemove:m,attributes:r.attributes,size:T,i:w}):"",g!==""&&!(o.index===w&&o.type==="update")&&(!(g!=null&&g.status)||(g==null?void 0:g.status)==="success")?t.jsx(ts,{value:g,i:w,moveItem:y,attributes:r.attributes,edit:!0,onEdit:o.index===-1?I=>f(w):null,addAbove:()=>d(w)}):((N=g==null?void 0:g.status)==null?void 0:N.length)>1?t.jsx(pu,{data:g}):"",!((M=a[0])!=null&&M.is_header)&&o.index==-1&&w===a.length-1?t.jsx("div",{className:"",children:t.jsx(hu,{onClick:()=>d(w)})}):t.jsx("div",{className:""})]},w)})})},xu=({Component:e,value:n,attr:s,full_width:r})=>{if(!n||!n.map)return"";let i=8,a={centered:"md:grid-cols-[1fr_repeat(6,_minmax(_100px,_170px))_1fr]",fullwidth:"md:grid-cols-[_minmax(_0px,0px)_repeat(6,_1fr)_minmax(_0px,0px)]"};const o=l=>{var u;let c=(u=l==null?void 0:l.element)==null?void 0:u["element-data"],d=typeof c=="object"?c:c&&du(c)?JSON.parse(c):{};return!(d!=null&&d.hideSection)};return t.jsx("div",{className:`w-full grid grid-cols-6 ${a[r==="show"?"fullwidth":"centered"]} gap-1`,children:n.filter(l=>o(l)).map((l,c)=>{var f;const d=(l==null?void 0:l.size)||"1",u=(f=es.find(y=>y.name===d))==null?void 0:f.value,p=6-i;i===0?i=u:u<=p?i+=u:i=u;const m=ii(d,u,p,i);return t.jsx("div",{className:`${m}`,children:t.jsx(ts,{attributes:s.attributes,i:c,value:l},c)},c)})})},Js={EditComp:fu,ViewComp:xu},gu={app:"dms-site",type:"cms-section",attributes:[{key:"title",type:"text",required:!1,default:"Untitled Section"},{key:"is_header",type:"boolean",hidden:"true",required:!1},{key:"helpText",type:"lexical"},{key:"level",type:"select",options:[{value:"0",label:"Hidden"},{value:"1",label:"H1"},{value:"2",label:"H2"},{value:"3",label:"H3"},{value:"4",label:"H4"}],required:!1,default:"1"},{key:"tags",type:"text",required:!1},{key:"requirements",type:"text",required:!1},{key:"size",type:"text"},{key:"element",type:"selector",required:!1}]},bu={app:"dms-site",type:"page-edit",attributes:[{key:"action",type:"text"},{key:"user",type:"text"},{key:"time",type:"text"},{key:"parent_type",type:"text"}]},yu={app:"dms-site",type:"docs-page",registerFormats:[gu,bu],defaultSearch:"data ->> 'index' = '0' and (data ->> 'parent' = '' or data ->> 'parent' is null) and (data ->> 'template_id' is null)",defaultSort:e=>e.sort((n,s)=>(s.parent===null)-(n.parent===null)||n.index-s.index||+n.parent-+s.parent),attributes:[{key:"title",type:"text",required:!0,default:"New Page"},{key:"template_id",type:"number"},{key:"data_controls",type:"text",hidden:!0},{key:"generated-pages",type:"text",isArray:!0},{key:"hide_in_nav",type:"text",default:!1},{key:"index",type:"number",default:"props:index",editable:!1,hidden:!0},{key:"parent",type:"text",default:"",editable:!1,hidden:!0},{key:"url_slug",type:"text",matchWildcard:!0,hidden:!0},{key:"sidebar",type:"text",hidden:!0},{key:"header",type:"text",hidden:!0},{key:"footer",type:"text",hidden:!0},{key:"full_width",type:"text",hidden:!0},{key:"sections",type:"dms-format",isArray:!0,format:"dms-site+cms-section",DisplayComp:Js},{key:"draft_sections",type:"dms-format",isArray:!0,format:"dms-site+cms-section",DisplayComp:Js},{key:"published",type:"text",default:"draft"},{key:"has_changes",type:"boolean",default:!1},{key:"history",type:"dms-format",isArray:!0,format:"dms-site+page-edit"}]},wu=(e={})=>{let{color:n="white",size:s="compact",subMenuStyle:r="inline",responsive:i="top"}=e,a={top:"hidden md:block",side:"hidden md:block",none:""},o={white:{contentBg:"bg-white border-r",sideItemActive:"",contentBgAccent:"bg-neutral-100",accentColor:"blue-600",accentBg:"",borderColor:"border-slate-200",textColor:"text-slate-600",textColorAccent:"text-slate-800",highlightColor:"text-blue-800"},transparent:{contentBg:"",contentBgAccent:"bg-neutral-100",accentColor:"blue-600",accentBg:"hover:bg-blue-400",borderColor:"border-slate-100",textColor:"text-slate-600",textColorAccent:"text-slate-800",highlightColor:"text-slate-800"},dark:{contentBg:"bg-neutral-800",contentBgAccent:"bg-neutral-900",accentColor:"white",accentBg:"",borderColor:"border-neutral-700",textColor:"text-slate-300",textColorAccent:"text-slate-100",highlightColor:"text-slate-100",sideItem:"text-slate-300 hover:text-white",sideItemActive:"text-slate-300 hover:text-white"},bright:{contentBg:"bg-blue-700",accentColor:"blue-400",accentBg:"hover:bg-blue-400",borderColor:"border-blue-600",textColor:"text-white",highlightColor:"text-white-500"}},l={none:{wrapper:"w-0 overflow-hidden",sideItem:"flex mx-2 pr-4 py-2 text-base ",topItem:"flex items-center text-sm px-4 border-r h-12",icon:"mr-3 text-lg"},compact:{fixed:"ml-0 md:ml-44",wrapper:"w-44",itemWrapper:"pt-5",sideItem:"group flex px-3 py-1.5 text-[14px] font-light hover:bg-blue-50 text-slate-700 mx-2 ",sideItemActive:"group flex px-3 py-1.5 text-[14px] font-light hover:bg-blue-50 text-slate-700  mx-2 ",topItem:"flex items-center text-sm px-4 border-r h-12",icon:"group w-6 mr-2 text-blue-500 ",iconActive:"group w-6 mr-2 text-blue-500 ",sideItemContent:"group-hover:translate-x-1.5 transition-transform duration-300 ease-in-out"},full:{fixed:"",wrapper:"w-full",sideItem:"group flex px-3 py-2 text-[14px] font-light hover:bg-blue-50 text-slate-700 mx-2 border-r-4 border-white",sideItemActive:"group flex px-3 py-2 text-[14px] font-light hover:bg-blue-50 text-slate-700 mx-2 border-r-4  border-white",topItem:"flex pr-4 py-2  font-",icon:"group w-6 mr-2 text-blue-500  ",iconActive:"group w-6 mr-2 text-blue-500",sideItemContent:"group-hover:translate-x-1.5 transition-transform duration-300 ease-in-out"},mini:{fixed:"ml-0 md:ml-20",wrapper:"w-20 overflow-x-hidden",sideItem:"text-white hover:bg-blue-100 hover:text-blue-100",sideItemActive:"text-blue-500 bg-blue-500  ",topItem:"flex px-4 items-center text-sm font-light ",icon:"w-20 h-10 text-xl text-blue-500",iconActive:"w-20 h-10 text-xl text-white",sideItemContent:"w-0"},micro:{fixed:"ml-0 md:ml-14",wrapper:"w-14 overflow-x-hidden",itemWrapper:"p-1",sideItem:"flex text-base font-base ",topItem:"flex mx-6 pr-4 py-2 text-sm font-light",icon:"w-12 text-2xl hover:bg-neutral-900 px-1 py-3 my-2 rounded-lg mr-4 hover:text-blue-500",sideItemContent:"hidden"}};l[s]||(s="none");let c={inline:{indicatorIcon:"fa fa-angle-right pt-2.5",indicatorIconOpen:"fal fa-angle-down pt-2.5",subMenuWrapper:"pl-2 w-full",subMenuParentWrapper:"flex flex-col w-full"},flyout:{indicatorIcon:"fal fa-angle-down",indicatorIconOpen:"fa fa-angle-right",subMenuWrapper:`absolute ml-${l[s].width-8}`,subMenuParentWrapper:"flex flex-row",subMenuWrapperTop:"absolute top-full"}};return{fixed:`md:${l[s].fixed}`,logoWrapper:`${l[s].wrapper} ${o[n].contentBgAccent} ${o[n].textColorAccent}`,sidenavWrapper:`${a[i]} ${o[n].contentBg} ${l[s].wrapper} h-full z-20`,menuIconSide:`${l[s].icon} group-hover:${o[n].highlightColor}`,menuIconSideActive:`${l[s].iconActive} group-hover:${o[n].highlightColor}`,itemsWrapper:`${o[n].borderColor} ${l[s].itemWrapper}  `,navItemContent:`${l[s].sideItemContent}`,navitemSide:`
        group  flex flex-col

        ${l[s].sideItem} ${o[n].sideItem}
        focus:outline-none focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300
        transition-all cursor-pointer
     `,navitemSideActive:`
        group  flex flex-col
         ${l[s].sideItemActive} ${o[n].sideItemActive} 
        
        focus:outline-none focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300
        transition-all cursor-pointer

      `,...c[r],vars:{colors:o,sizes:l,mobile:a}}},vu=({color:e="white",size:n="compact",menu:s="left",subMenuStyle:r="inline"})=>{let i={white:{contentBg:"bg-slate-100",accentColor:"blue-500",accentBg:"hover:bg-white",borderColor:"border-slate-100",textColor:"text-slate-700",highlightColor:"text-blue-500"},bright:{contentBg:"bg-blue-700",accentColor:"blue-400",accentBg:"hover:bg-blue-400",borderColor:"border-blue-600",textColor:"text-white",highlightColor:"text-white"}},a={compact:{menu:`hidden uppercase md:flex flex-1 ${s==="left"?"":"justify-end"} divide-x-2`,sideItem:"flex  mx-6 pr-4 py-2 text-sm font-light hover:pl-4",topItem:`flex font-medium tracking-widest items-center text-[14px] px-4 h-12 ${i[e].textColor} ${i[e].borderColor}
        ${i[e].accentBg} hover:${i[e].highlightColor}`,activeItem:`flex font-medium  tracking-widest bg-white items-center text-[14px] px-4 h-12 ${i[e].highlightColor} ${i[e].borderColor}
        ${i[e].accentBg} hover:${i[e].highlightColor}`,icon:"mr-3 text-lg",responsive:"md:hidden"},inline:{menu:"flex flex-1",sideItem:"flex mx-4 pr-4 py-4 text-base font-base border-b hover:pl-4",topItem:`flex px-4 py-2 mx-2 font-medium text-gray-400 border-b-2 ${i[e].textColor} ${i[e].borderColor}
      hover:border-gray-300 hover:text-gray-700 border-gray-100 `,activeItem:`flex px-4 py-2 mx-2 font-medium text-blue-600 border-b-2 ${i[e].textColor} ${i[e].borderColor} border-blue-600 `,icon:"mr-4 text-2xl",responsive:"hidden"}},o={inline:{subMenuWrapperChild:"",subMenuWrapper:"pl-2 w-full ",subMenuParentWrapper:"flex flex-col w-full  "},flyout:{indicatorIcon:"fal fa-angle-down pl-2 pt-1",indicatorIconOpen:"fal fa-angle-down pl-2",subMenuWrapper:`absolute ml-${a[n].width-8} `,subMenuParentWrapper:"flex flex-row  ",subMenuWrapperTop:"absolute top-full  "},row:{indicatorIcon:"fal fa-angle-down pl-2 pt-1",indicatorIconOpen:"fal fa-angle-down pl-2 pt-1",subMenuWrapper:`absolute bg-white ml-${a[n].width-8}`,subMenuParentWrapper:"flex flex-row  ",subMenuWrapperChild:"divide-x overflow-x-auto",subMenuWrapperTop:"absolute top-full left-0 border-y border-gray-200 w-full bg-white normal-case",subMenuWrapperInactiveFlyout:"absolute  mt-8 normal-case bg-white shadow-lg z-10 p-2",subMenuWrapperInactiveFlyoutBelow:" absolute ml-40 normal-case bg-white shadow-lg z-10 p-2",subMenuWrapperInactiveFlyoutDirection:"flex flex-col divide-y-2"}};return{topnavWrapper:`w-full ${i[e].contentBg} border-b border-gray-200`,topnavContent:"flex w-full h-full",topnavMenu:`${a[n].menu} h-full overflow-x-auto overflow-y-hidden scrollbar-sm`,menuIconTop:`text-${i[e].accentColor} ${a[n].icon} group-hover:${i[e].highlightColor}`,menuIconTopActive:`text-${i[e].accentColor} ${a[n].icon} group-hover:${i[e].highlightColor}`,menuOpenIcon:"fa-light fa-bars fa-fw",menuCloseIcon:'fa-light fa-xmark fa-fw"',navitemTop:`
        w-fit group font-display whitespace-nowrap
        ${a[n].topItem}
        focus:outline-none focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300
        transition cursor-pointer
    `,topmenuRightNavContainer:"hidden md:block h-full",topnavMobileContainer:"bg-slate-50",navitemTopActive:` w-fit group font-display whitespace-nowrap
        ${a[n].activeItem}
        focus:outline-none focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300
        transition cursor-pointer 
      `,mobileButton:`${a[n].responsive} ${i[e].contentBg} inline-flex items-center justify-center pt-[12px] px-2 hover:text-blue-400  text-gray-400 hover:bg-gray-100 `,...o[r],vars:{colors:i,sizes:a}}},Ks={page:{wrapper1:"w-full flex-1 flex flex-col bg-slate-100",wrapper2:"w-full h-full flex-1 flex flex-row px-1 md:px-6 py-6",wrapper3:"flex flex-1 w-full  flex-col border shadow bg-white relative text-md font-light leading-7 p-4 min-h-[calc(100vh_-_102px)]"},navPadding:{1:"pt-0 ",2:"md:pt-12 pt-0",3:"md:pt-24 pt-0"},sidenav:wu,topnav:vu},oe=A.createContext(void 0),Nu=({app:e="dms-site",type:n="docs-page",useFalcor:s,sideNav:r=null,logo:i=null,rightMenu:a=t.jsx("div",{}),baseUrl:o="",checkAuth:l=()=>{},theme:c=Ks,pgEnv:d})=>{c={...Ks,...c};const u=pe(yu);u.app=e,u.type=n;const p=t.jsx("div",{className:"flex flex-col md:flex-row",children:a});return{format:u,baseUrl:o,check:({user:m},f,y)=>{const v=g=>g.reduce((w,T)=>{let $=T.authLevel||-1;return T.children&&($=Math.max($,v(T.children))),Math.max(w,$)},-1);let b=v(f);l({user:m,authLevel:b},y)},children:[{type:m=>t.jsx(zs,{...m,baseUrl:o,theme:c,useFalcor:s,pgEnv:d}),action:"list",path:"/*",filter:{options:JSON.stringify({filter:{"data->>'hide_in_nav'":["null"]}}),attributes:["title","index","url_slug","parent","published","hide_in_nav"]},children:[{type:m=>t.jsx(ad,{logo:i,rightMenu:p,...m}),action:"list",path:"templates/*",lazyLoad:!0,filter:{options:JSON.stringify({filter:{"data->>'template_id'":["-99"]}}),attributes:["title","index","url_slug","parent","hide_in_nav","template_id"]}},{type:m=>t.jsx(lu,{logo:i,rightMenu:p,...m}),action:"edit",path:"templates/edit/:id"},{type:m=>t.jsx(md,{logo:i,rightMenu:p,...m}),action:"edit",path:"templates/pages/:id"},{type:m=>t.jsx(ed,{...m,logo:i,rightMenu:p}),filter:{attributes:["title","index","url_slug","parent","published","hide_in_nav","sections","sidebar","header","footer","full_width"]},path:"/*",action:"view"}]},{type:m=>t.jsx(zs,{...m,edit:!0,baseUrl:o,theme:c,useFalcor:s,pgEnv:d}),action:"list",path:"/edit/*",authLevel:5,filter:{options:JSON.stringify({filter:{"data->>'hide_in_nav'":["null"]}}),attributes:["title","index","url_slug","parent","published","hide_in_nav"]},children:[{type:m=>t.jsx(iu,{...m,logo:i,rightMenu:p}),action:"edit",path:"/edit/*"}]}]}};function ht({children:e}){return t.jsx("h2",{className:"text-balance text-lg/6 font-semibold text-zinc-950 sm:text-base/6 dark:text-white",children:e})}function ns({children:e}){return t.jsx("h1",{className:"text-balance text-2xl/6 font-semibold text-zinc-950 sm:text-xl/6 dark:text-white",children:e})}function ss({children:e}){return t.jsx("p",{className:"mt-2 text-pretty text-base/6 text-zinc-500 sm:text-sm/6 dark:text-zinc-400",children:e})}function ju({children:e,open:n}){return t.jsx("div",{className:`${n?"":"hidden"} z-10 fixed inset-0 flex w-screen justify-center overflow-y-auto bg-zinc-950/25 px-2 py-2 focus:outline-0 sm:px-6 sm:py-8 lg:px-8 lg:py-16 dark:bg-zinc-950/50`,children:t.jsx("div",{className:"fixed inset-0 w-screen overflow-y-auto pt-6 sm:pt-0",children:t.jsx("div",{className:"grid min-h-full grid-rows-[1fr_auto] justify-items-center sm:grid-rows-[1fr_auto_3fr] sm:p-4",children:e})})})}function oi({children:e,open:n,width:s="sm:max-w-lg  "}){return t.jsx(ju,{open:n,children:t.jsx("div",{className:`${s} row-start-2 w-full min-w-0 rounded-t-3xl bg-white p-[--gutter] shadow-lg ring-1 ring-zinc-950/10 [--gutter:theme(spacing.8)] sm:mb-auto sm:rounded-2xl dark:bg-zinc-900 dark:ring-white/10 forced-colors:outline`,children:e})})}function an({children:e,onClick:n}){return t.jsxs("button",{onClick:n,className:"relative isolate inline-flex items-center justify-center gap-x-2 rounded-lg border text-base/6 font-semibold hover:bg-zinc-300 dark:hover:bg-zinc-500 cursor-pointer px-[calc(theme(spacing[3.5])-1px)] py-[calc(theme(spacing[2.5])-1px)] sm:px-[calc(theme(spacing.3)-1px)] sm:py-[calc(theme(spacing[1.5])-1px)] sm:text-sm/6 focus:outline-none data-[focus]:outline data-[focus]:outline-2 data-[focus]:outline-offset-2 data-[focus]:outline-blue-500 data-[disabled]:opacity-50 [&>[data-slot=icon]]:-mx-0.5 [&>[data-slot=icon]]:my-0.5 [&>[data-slot=icon]]:size-5 [&>[data-slot=icon]]:shrink-0 [&>[data-slot=icon]]:text-[--btn-icon] [&>[data-slot=icon]]:sm:my-1 [&>[data-slot=icon]]:sm:size-4 forced-colors:[--btn-icon:ButtonText] forced-colors:data-[hover]:[--btn-icon:ButtonText] border-transparent bg-[--btn-border] dark:bg-[--btn-bg] before:absolute before:inset-0 before:-z-10 before:rounded-[calc(theme(borderRadius.lg)-1px)] before:bg-[--btn-bg] before:shadow dark:before:hidden dark:border-white/5 after:absolute after:inset-0 after:-z-10 after:rounded-[calc(theme(borderRadius.lg)-1px)] after:shadow-[shadow:inset_0_1px_theme(colors.white/15%)] after:data-[active]:bg-[--btn-hover-overlay] after:data-[hover]:bg-[--btn-hover-overlay] dark:after:-inset-px dark:after:rounded-lg before:data-[disabled]:shadow-none after:data-[disabled]:shadow-none text-white [--btn-bg:theme(colors.zinc.900)] [--btn-border:theme(colors.zinc.950/90%)] [--btn-hover-overlay:theme(colors.white/10%)] dark:text-white dark:[--btn-bg:theme(colors.zinc.600)] dark:[--btn-hover-overlay:theme(colors.white/5%)] [--btn-icon:theme(colors.zinc.400)] data-[active]:[--btn-icon:theme(colors.zinc.300)] data-[hover]:[--btn-icon:theme()] cursor-default",type:"button","data-headlessui-state":"",children:[e,t.jsx("span",{className:"absolute left-1/2 top-1/2 size-[max(100%,2.75rem)] -translate-x-1/2 -translate-y-1/2 [@media(pointer:fine)]:hidden","aria-hidden":"true"})]})}function ai({children:e,onClick:n}){return t.jsxs("button",{onClick:n,className:"cursor-pointer hover:bg-zinc-100 dark:hover:bg-zing-300 relative isolate inline-flex items-center justify-center gap-x-2 rounded-lg border text-base/6 font-semibold px-[calc(theme(spacing[3.5])-1px)] py-[calc(theme(spacing[2.5])-1px)] sm:px-[calc(theme(spacing.3)-1px)] sm:py-[calc(theme(spacing[1.5])-1px)] sm:text-sm/6 focus:outline-none data-[focus]:outline data-[focus]:outline-2 data-[focus]:outline-offset-2 data-[focus]:outline-blue-500 data-[disabled]:opacity-50 [&>[data-slot=icon]]:-mx-0.5 [&>[data-slot=icon]]:my-0.5 [&>[data-slot=icon]]:size-5 [&>[data-slot=icon]]:shrink-0 [&>[data-slot=icon]]:text-[--btn-icon] [&>[data-slot=icon]]:sm:my-1 [&>[data-slot=icon]]:sm:size-4 forced-colors:[--btn-icon:ButtonText] forced-colors:data-[hover]:[--btn-icon:ButtonText] border-transparent text-zinc-950 data-[active]:bg-zinc-950/5 data-[hover]:bg-zinc-950/5 dark:text-white dark:data-[active]:bg-white/10 dark:data-[hover]:bg-white/10 [--btn-icon:theme(colors.zinc.500)] data-[active]:[--btn-icon:theme(colors.zinc.700)] data-[hover]:[--btn-icon:theme(colors.zinc.700)] dark:[--btn-icon:theme(colors.zinc.500)] dark:data-[active]:[--btn-icon:theme(colors.zinc.400)] dark:data-[hover]:[--btn-icon:theme(colors.zinc.400)] cursor-default",type:"button","data-headlessui-state":"",children:[e,t.jsx("span",{className:"absolute left-1/2 top-1/2 size-[max(100%,2.75rem)] -translate-x-1/2 -translate-y-1/2 [@media(pointer:fine)]:hidden","aria-hidden":"true"})]})}function ln({className:e="xl:col-span-5",children:n,...s}){return t.jsx("div",{className:e,children:t.jsx("div",{className:"relative h-full w-full rounded-xl bg-white shadow-[0px_0px_0px_1px_rgba(9,9,11,0.07),0px_2px_2px_0px_rgba(9,9,11,0.05)] dark:bg-zinc-900 dark:shadow-[0px_0px_0px_1px_rgba(255,255,255,0.1)] dark:before:pointer-events-none dark:before:absolute dark:before:-inset-px dark:before:rounded-xl dark:before:shadow-[0px_2px_8px_0px_rgba(0,_0,_0,_0.20),_0px_1px_0px_0px_rgba(255,_255,_255,_0.06)_inset] forced-colors:outline",children:t.jsx("div",{className:"grid h-full w-full  p-6 py-8 sm:p-8 lg:p-12",children:n})})})}function rs({children:e}){return t.jsxs("div",{className:"relative grid gap-[17px] sm:grid-cols-2 xl:grid-cols-[repeat(15,_minmax(0,_1fr))] h-full",children:[t.jsxs("svg",{className:"absolute -top-[9px] left-0 right-0 row-start-2 ml-[calc(50%-50vw)] h-px w-screen",fill:"none",children:[t.jsx("defs",{children:t.jsx("pattern",{id:":S1:",patternUnits:"userSpaceOnUse",width:"16",height:"1",children:t.jsx("line",{className:"stroke-zinc-950 dark:stroke-white",x1:"0",x2:"16",y1:"0.5",y2:"0.5",strokeDasharray:"2 2",strokeWidth:"1.5",strokeOpacity:"0.1",strokeLinejoin:"round"})})}),t.jsx("rect",{width:"100%",height:"100%",fill:"url(#:S1:)"})]}),t.jsxs("svg",{className:"absolute -top-[9px] left-0 right-0 row-start-3 ml-[calc(50%-50vw)] h-px w-screen",fill:"none",children:[t.jsx("defs",{children:t.jsx("pattern",{id:":S2:",patternUnits:"userSpaceOnUse",width:"16",height:"1",children:t.jsx("line",{className:"stroke-zinc-950 dark:stroke-white",x1:"0",x2:"16",y1:"0.5",y2:"0.5",strokeDasharray:"2 2",strokeWidth:"1.5",strokeOpacity:"0.1",strokeLinejoin:"round"})})}),t.jsx("rect",{width:"100%",height:"100%",fill:"url(#:S2:)"})]}),t.jsxs("svg",{className:"absolute -top-[9px] left-0 right-0 row-start-5 ml-[calc(50%-50vw)] h-px w-screen",fill:"none",children:[t.jsx("defs",{children:t.jsx("pattern",{id:":S4:",patternUnits:"userSpaceOnUse",width:"16",height:"1",children:t.jsx("line",{className:"stroke-zinc-950 dark:stroke-white",x1:"0",x2:"16",y1:"0.5",y2:"0.5",strokeDasharray:"2 2",strokeWidth:"1.5",strokeOpacity:"0.1",strokeLinejoin:"round"})})}),t.jsx("rect",{width:"100%",height:"100%",fill:"url(#:S4:)"})]}),t.jsxs("svg",{className:"absolute -top-[9px] left-0 right-0 row-start-6 ml-[calc(50%-50vw)] h-px w-screen xl:hidden",fill:"none",children:[t.jsx("defs",{children:t.jsx("pattern",{id:":S5:",patternUnits:"userSpaceOnUse",width:"16",height:"1",children:t.jsx("line",{className:"stroke-zinc-950 dark:stroke-white",x1:"0",x2:"16",y1:"0.5",y2:"0.5",strokeDasharray:"2 2",strokeWidth:"1.5",strokeOpacity:"0.1",strokeLinejoin:"round"})})}),t.jsx("rect",{width:"100%",height:"100%",fill:"url(#:S5:)"})]}),t.jsxs("svg",{className:"absolute -top-[9px] left-0 right-0 row-start-7 ml-[calc(50%-50vw)] h-px w-screen xl:hidden",fill:"none",children:[t.jsx("defs",{children:t.jsx("pattern",{id:":S6:",patternUnits:"userSpaceOnUse",width:"16",height:"1",children:t.jsx("line",{className:"stroke-zinc-950 dark:stroke-white",x1:"0",x2:"16",y1:"0.5",y2:"0.5",strokeDasharray:"2 2",strokeWidth:"1.5",strokeOpacity:"0.1",strokeLinejoin:"round"})})}),t.jsx("rect",{width:"100%",height:"100%",fill:"url(#:S6:)"})]}),t.jsxs("svg",{className:"absolute -top-[9px] left-0 right-0 row-start-8 ml-[calc(50%-50vw)] h-px w-screen md:hidden",fill:"none",children:[t.jsx("defs",{children:t.jsx("pattern",{id:":S7:",patternUnits:"userSpaceOnUse",width:"16",height:"1",children:t.jsx("line",{className:"stroke-zinc-950 dark:stroke-white",x1:"0",x2:"16",y1:"0.5",y2:"0.5",strokeDasharray:"2 2",strokeWidth:"1.5",strokeOpacity:"0.1",strokeLinejoin:"round"})})}),t.jsx("rect",{width:"100%",height:"100%",fill:"url(#:S7:)"})]}),t.jsxs("svg",{className:"absolute -top-[9px] left-0 right-0 row-start-9 ml-[calc(50%-50vw)] h-px w-screen md:hidden",fill:"none",children:[t.jsx("defs",{children:t.jsx("pattern",{id:":S8:",patternUnits:"userSpaceOnUse",width:"16",height:"1",children:t.jsx("line",{className:"stroke-zinc-950 dark:stroke-white",x1:"0",x2:"16",y1:"0.5",y2:"0.5",strokeDasharray:"2 2",strokeWidth:"1.5",strokeOpacity:"0.1",strokeLinejoin:"round"})})}),t.jsx("rect",{width:"100%",height:"100%",fill:"url(#:S8:)"})]}),t.jsxs("svg",{className:"absolute -top-[9px] left-0 right-0 row-start-10 ml-[calc(50%-50vw)] h-px w-screen md:hidden",fill:"none",children:[t.jsx("defs",{children:t.jsx("pattern",{id:":S9:",patternUnits:"userSpaceOnUse",width:"16",height:"1",children:t.jsx("line",{className:"stroke-zinc-950 dark:stroke-white",x1:"0",x2:"16",y1:"0.5",y2:"0.5",strokeDasharray:"2 2",strokeWidth:"1.5",strokeOpacity:"0.1",strokeLinejoin:"round"})})}),t.jsx("rect",{width:"100%",height:"100%",fill:"url(#:S9:)"})]}),t.jsxs("svg",{className:"absolute -top-[9px] left-0 right-0 row-start-11 ml-[calc(50%-50vw)] hidden h-px w-screen",fill:"none",children:[t.jsx("defs",{children:t.jsx("pattern",{id:":Sa:",patternUnits:"userSpaceOnUse",width:"16",height:"1",children:t.jsx("line",{className:"stroke-zinc-950 dark:stroke-white",x1:"0",x2:"16",y1:"0.5",y2:"0.5",strokeDasharray:"2 2",strokeWidth:"1.5",strokeOpacity:"0.1",strokeLinejoin:"round"})})}),t.jsx("rect",{width:"100%",height:"100%",fill:"url(#:Sa:)"})]}),t.jsxs("svg",{className:"absolute left-0 right-0 top-2 row-start-12 ml-[calc(50%-50vw)] h-px w-screen translate-y-1/2 sm:row-start-11 md:row-start-8 xl:row-start-6",fill:"none",children:[t.jsx("defs",{children:t.jsx("pattern",{id:":Sb:",patternUnits:"userSpaceOnUse",width:"16",height:"1",children:t.jsx("line",{className:"stroke-zinc-950 dark:stroke-white",x1:"0",x2:"16",y1:"0.5",y2:"0.5",strokeDasharray:"2 2",strokeWidth:"1.5",strokeOpacity:"0.1",strokeLinejoin:"round"})})}),t.jsx("rect",{width:"100%",height:"100%",fill:"url(#:Sb:)"})]}),t.jsxs("svg",{className:"absolute -left-[9px] top-[-88px] col-start-1 h-[calc(100%+88px+160px)] w-px",fill:"none",children:[t.jsx("defs",{children:t.jsx("pattern",{id:":Sc:",patternUnits:"userSpaceOnUse",width:"1",height:"16",children:t.jsx("line",{className:"stroke-zinc-950 dark:stroke-white",x1:"0.5",x2:"0.5",y1:"0",y2:"16",strokeDasharray:"2 2",strokeWidth:"1.5",strokeOpacity:"0.1",strokeLinejoin:"round"})})}),t.jsx("rect",{width:"100%",height:"100%",fill:"url(#:Sc:)"})]}),t.jsxs("svg",{className:"absolute -left-[9px] top-[-88px] hidden h-[calc(100%+88px+160px)] w-px sm:col-start-2 sm:block xl:col-start-6",fill:"none",children:[t.jsx("defs",{children:t.jsx("pattern",{id:":Sd:",patternUnits:"userSpaceOnUse",width:"1",height:"16",children:t.jsx("line",{className:"stroke-zinc-950 dark:stroke-white",x1:"0.5",x2:"0.5",y1:"0",y2:"16",strokeDasharray:"2 2",strokeWidth:"1.5",strokeOpacity:"0.1",strokeLinejoin:"round"})})}),t.jsx("rect",{width:"100%",height:"100%",fill:"url(#:Sd:)"})]}),t.jsxs("svg",{className:"absolute -left-[9px] top-[-88px] col-start-7 hidden h-[calc(100%+88px+160px)] w-px xl:block",fill:"none",children:[t.jsx("defs",{children:t.jsx("pattern",{id:":Se:",patternUnits:"userSpaceOnUse",width:"1",height:"16",children:t.jsx("line",{className:"stroke-zinc-950 dark:stroke-white",x1:"0.5",x2:"0.5",y1:"0",y2:"16",strokeDasharray:"2 2",strokeWidth:"1.5",strokeOpacity:"0.1",strokeLinejoin:"round"})})}),t.jsx("rect",{width:"100%",height:"100%",fill:"url(#:Se:)"})]}),t.jsxs("svg",{className:"absolute -left-[9px] top-[-88px] col-start-10 hidden h-[calc(100%+88px+160px)] w-px xl:block",fill:"none",children:[t.jsx("defs",{children:t.jsx("pattern",{id:":Sf:",patternUnits:"userSpaceOnUse",width:"1",height:"16",children:t.jsx("line",{className:"stroke-zinc-950 dark:stroke-white",x1:"0.5",x2:"0.5",y1:"0",y2:"16",strokeDasharray:"2 2",strokeWidth:"1.5",strokeOpacity:"0.1",strokeLinejoin:"round"})})}),t.jsx("rect",{width:"100%",height:"100%",fill:"url(#:Sf:)"})]}),t.jsxs("svg",{className:"absolute -left-[9px] top-[-88px] col-start-11 hidden h-[calc(100%+88px+160px)] w-px xl:block",fill:"none",children:[t.jsx("defs",{children:t.jsx("pattern",{id:":Sg:",patternUnits:"userSpaceOnUse",width:"1",height:"16",children:t.jsx("line",{className:"stroke-zinc-950 dark:stroke-white",x1:"0.5",x2:"0.5",y1:"0",y2:"16",strokeDasharray:"2 2",strokeWidth:"1.5",strokeOpacity:"0.1",strokeLinejoin:"round"})})}),t.jsx("rect",{width:"100%",height:"100%",fill:"url(#:Sg:)"})]}),t.jsxs("svg",{className:"absolute -right-2 top-[-88px] col-start-3 h-[calc(100%+88px+160px)] w-px translate-x-1/2 sm:col-start-4 xl:col-start-[16]",fill:"none",children:[t.jsx("defs",{children:t.jsx("pattern",{id:":Sh:",patternUnits:"userSpaceOnUse",width:"1",height:"16",children:t.jsx("line",{className:"stroke-zinc-950 dark:stroke-white",x1:"0.5",x2:"0.5",y1:"0",y2:"16",strokeDasharray:"2 2",strokeWidth:"1.5",strokeOpacity:"0.1",strokeLinejoin:"round"})})}),t.jsx("rect",{width:"100%",height:"100%",fill:"url(#:Sh:)"})]}),e]})}function On({label:e,value:n,placeholder:s="",onChange:r}){return t.jsx("div",{className:"mt-6",children:t.jsxs("div",{className:"[&>[data-slot=label]+[data-slot=control]]:mt-3 [&>[data-slot=label]+[data-slot=description]]:mt-1 [&>[data-slot=description]+[data-slot=control]]:mt-3 [&>[data-slot=control]+[data-slot=description]]:mt-3 [&>[data-slot=control]+[data-slot=error]]:mt-3 [&>[data-slot=label]]:font-medium","data-headlessui-state":"",children:[e&&t.jsx("label",{"data-slot":"label",className:"select-none text-base/6 text-zinc-950 data-[disabled]:opacity-50 sm:text-sm/6 dark:text-white",children:e}),t.jsx("span",{"data-slot":"control",className:"relative block w-full before:absolute before:inset-px before:rounded-[calc(theme(borderRadius.lg)-1px)] before:bg-white before:shadow dark:before:hidden after:pointer-events-none after:absolute after:inset-0 after:rounded-lg after:ring-inset after:ring-transparent sm:after:focus-within:ring-2 sm:after:focus-within:ring-blue-500 has-[[data-disabled]]:opacity-50 before:has-[[data-disabled]]:bg-zinc-950/5 before:has-[[data-disabled]]:shadow-none before:has-[[data-invalid]]:shadow-red-500/10",children:t.jsx("input",{value:n,placeholder:s,onChange:r,className:"relative block w-full appearance-none rounded-lg px-[calc(theme(spacing[3.5])-1px)] py-[calc(theme(spacing[2.5])-1px)] sm:px-[calc(theme(spacing[3])-1px)] sm:py-[calc(theme(spacing[1.5])-1px)] text-base/6 text-zinc-950 placeholder:text-zinc-500 sm:text-sm/6 dark:text-white border border-zinc-950/10 data-[hover]:border-zinc-950/20 dark:border-white/10 dark:data-[hover]:border-white/20 bg-transparent dark:bg-white/5 focus:outline-none data-[invalid]:border-red-500 data-[invalid]:data-[hover]:border-red-500 data-[invalid]:dark:border-red-500 data-[invalid]:data-[hover]:dark:border-red-500 data-[disabled]:border-zinc-950/20 dark:data-[hover]:data-[disabled]:border-white/15 data-[disabled]:dark:border-white/15 data-[disabled]:dark:bg-white/[2.5%]","data-autofocus":""})})]})})}function li({label:e,value:n,placeholder:s="",onChange:r=()=>{}}){return t.jsx("input",{value:n,placeholder:s,onBlur:i=>{var a,o;((o=(a=i.target)==null?void 0:a.value)==null?void 0:o.length)>0&&r(i.target.value)},onKeyUp:i=>{var a,o;i.key==="Enter"&&((o=(a=i.target)==null?void 0:a.value)==null?void 0:o.length)>0&&r(i.target.value)},className:"relative block w-full appearance-none  px-[calc(theme(spacing[3.5])-1px)] py-[calc(theme(spacing[2.5])-1px)] sm:px-[calc(theme(spacing[3])-1px)] sm:py-[calc(theme(spacing[1.5])-1px)] text-base/6 text-zinc-950 placeholder:text-zinc-500 sm:text-sm/6 dark:text-white border border-transparent hover:border-zinc-950/10 data-[hover]:border-zinc-950/20 dark:border-white/10 dark:data-[hover]:border-white/20 bg-transparent dark:bg-white/5 focus:outline-none data-[invalid]:border-red-500 data-[invalid]:data-[hover]:border-red-500 data-[invalid]:dark:border-red-500 data-[invalid]:data-[hover]:dark:border-red-500 data-[disabled]:border-zinc-950/20 dark:data-[hover]:data-[disabled]:border-white/15 data-[disabled]:dark:border-white/15 data-[disabled]:dark:bg-white/[2.5%]","data-autofocus":""})}function Cu({label:e,value:n,onChange:s}){const r=Ue.lexical.EditComp;return t.jsxs("div",{className:"mt-6",children:[e&&t.jsx("label",{"data-slot":"label",className:"font-medium  select-none text-base/6 text-zinc-950 data-[disabled]:opacity-50 sm:text-sm/6 dark:text-white",children:e}),t.jsx("div",{className:"mt-4 dark:text-zinc-100 dark:bg-zinc-800 rounded border border-zinc-950/10 data-[hover]:border-zinc-950/20 dark:border-white/10 dark:data-[hover]:border-white/20",children:t.jsx(r,{value:n,onChange:s,bgColor:"bg-zinc-700"})})]})}function _u({children:e}){return t.jsx("table",{className:"min-w-full text-left text-sm/6",children:e})}function ku({children:e}){return t.jsx("thead",{className:"text-zinc-500 dark:text-zinc-400",children:t.jsx("tr",{children:e})})}function ot({children:e}){return t.jsx("th",{className:"border text-center border-zinc-950/10 px-4 py-2 font-medium first:pl-[var(--gutter,theme(spacing.2))] last:pr-[var(--gutter,theme(spacing.2))] dark:border-b-white/10 sm:first:pl-2 sm:last:pr-2",children:e})}function We({children:e,colspan:n}){return t.jsx("td",{colSpan:n,className:"text-zinc-500 dark:text-zinc-400 relative border border-zinc-950/5 dark:border-white/5  ",children:e})}function Su({item:e,attributes:n,onChange:s}){const{falcor:r}=Ut.useFalcor(),i=A.useMemo(()=>n.stories.EditComp,[]),a=async o=>{console.log("updateStories",o);const l=await Jt(r,{format:ci},{id:e.id,stories:o});console.log("updated story",l)};return t.jsxs(ln,{className:"xl:col-span-15 sm:col-span-2",children:[t.jsx(ht,{children:e.name}),t.jsx("div",{children:t.jsx(i,{value:e.stories,item:e,onChange:a})})]})}function Tu({Component:e,value:n,onChange:s,attr:r,...i}){return Array.isArray(n)?t.jsx(t.Fragment,{children:n.map(a=>t.jsx(Su,{item:a,attributes:r.attributes,onChange:()=>{}},a.id))}):t.jsx(ln,{className:"xl:col-span-15 sm:col-span-2 justify-center text-center",children:t.jsx(ht,{children:"Add a Story Arc"})})}function Eu({Component:e,value:n,attr:s}){return t.jsx("div",{children:" Story Arc View "})}const $u={EditComp:Tu,ViewComp:Eu};function Mu({createStory:e}){return t.jsxs("tr",{children:[t.jsx(We,{children:t.jsx(li,{placeholder:"+ Add Story",onChange:e})}),t.jsx(We,{colspan:"5"})]})}function Iu({story:e,updateStory:n}){return t.jsxs("tr",{children:[t.jsx(We,{children:t.jsx(li,{value:e.title})}),t.jsx(We,{}),t.jsx(We,{}),t.jsx(We,{}),t.jsx(We,{}),t.jsx(We,{})]})}function Au({Component:e,item:n,value:s,onChange:r,attr:i,...a}){const o=l=>{r([...s||[],{title:l,state:"unstarted"}])};return t.jsx("div",{children:t.jsxs(_u,{children:[t.jsxs(ku,{children:[t.jsx(ot,{children:"Story"}),t.jsx(ot,{children:"Owner"}),t.jsx(ot,{children:"Status"}),t.jsx(ot,{children:"Priority"}),t.jsx(ot,{children:"Type"}),t.jsx(ot,{children:"Points"})]}),t.jsxs("tbody",{children:[(s||[]).map((l,c)=>t.jsx(Iu,{story:l},c)),t.jsx(Mu,{createStory:o})]})]})})}function Ou({Component:e,value:n,attr:s}){return t.jsx("div",{children:" Story Arc View "})}const Ru={EditComp:Au,ViewComp:Ou},ci={app:"project-manager2",type:"story-arc",attributes:[{key:"name",type:"text",required:!0},{key:"description",type:"lexical"},{key:"estimated-timespan",type:"text"},{key:"status",type:"text"},{key:"stories",type:"dms-format",isArray:!0,format:"project-manager2+story",DisplayComp:Ru},{key:"projects",type:"dms-format",isArray:!0,format:"project-manager2+project"}]},Du={app:"project-manager2",type:"story",attributes:[{key:"title",type:"text",required:!0},{key:"project",type:"text",default:"props:project.data.id"},{key:"projectVersion",type:"text",default:"props:project.data.version"},{key:"index",type:"number",required:!0,hidden:!0,editable:!0,default:"props:next",liveUpdate:!0},{key:"type",type:"select",required:!0,default:"Feature",inputProps:{searchable:!1,domain:["Feature","Bug"],removable:!1},liveUpdate:!0},{key:"points",type:"select",required:!0,liveUpdate:!0,inputProps:{removable:!1,domain:[0,1,2,3,4,5]}},{key:"state",type:"select",required:!0,default:"Unstarted",liveUpdate:!0,inputProps:{domain:["Unstarted","Started","Finished","Delivered","Accepted","Rejected"],removable:!1}},{key:"requestedBy",type:"text",required:!0,editable:!1,default:"props:pmMember.data.name",liveUpdate:!0},{key:"owner",type:"select",isArray:!0,liveUpdate:!0,inputProps:{valueAccessor:e=>e.id,accessor:e=>e.data.name,domain:"props:pmMembers"}},{key:"description",type:"lexical"}]},Lu={app:"project-manager2",type:"project",registerFormats:[ci,Du],attributes:[{key:"name",type:"text",required:!0},{key:"id",type:"text",required:!0},{key:"version",type:"text",default:"1.0.0",verify:"^\\d+(?:[.]\\d+){0,2}$"},{key:"desc",type:"text"},{key:"icebox",type:"boolean",default:!1},{key:"arcs",type:"dms-format",isArray:!0,format:"project-manager2+story-arc",DisplayComp:$u}]};function Pu({setOpen:e,state:n,setState:s,createProject:r}){return t.jsxs(oi,{open:n.showNewProject,children:[t.jsx(ht,{children:"Create New Project"}),t.jsx(ss,{children:"Name the project and select a project key abbreviation."}),t.jsx(On,{label:"Project Name",value:n.newProject.name,onChange:i=>s(a=>{a.newProject.name=i.target.value})}),t.jsx(On,{label:"Description",value:n.newProject.desc,onChange:i=>s(a=>{a.newProject.desc=i.target.value})}),t.jsxs("div",{className:"mt-8 flex flex-col-reverse items-center justify-end gap-3 *:w-full sm:flex-row sm:*:w-auto",children:[t.jsx(ai,{onClick:e,children:"Cancel"}),t.jsx(an,{onClick:r,children:"Create Project"})]})]})}function Fu({dataItems:e,...n}){const s=$e(),{pathname:r}=Me(),{baseUrl:i=""}=A.useContext(is)||{},[a,o]=nr({showNewProject:!1,newProject:{name:"",desc:""}}),l=async()=>{var u;const d=a.newProject;((u=d==null?void 0:d.name)==null?void 0:u.length)>3&&d.desc.length&&(await s(zr(d),{method:"post",action:r}),o({showNewProject:!1,newProject:{name:"",desc:""}}))},c=A.useMemo(()=>e.filter(d=>!d.icebox),[e]);return t.jsx("div",{className:"relative mx-auto lg:max-w-7xl ",children:t.jsx("main",{className:"pb-40",children:t.jsxs(rs,{children:[t.jsx("div",{className:"relative xl:col-span-13 sm:col-span-1 flex items-center pt-4",children:t.jsx(ns,{children:"Projects"})}),t.jsxs("div",{className:"flex items-center xl:col-span-2 justify-end pt-4",children:[t.jsx(an,{onClick:d=>o({...a,showNewProject:!0}),children:"New Project"}),t.jsx(Pu,{state:a,setState:o,createProject:l,setOpen:()=>o({...a,showNewProject:!a.showNewProject})})]}),c.map(d=>t.jsx(ln,{className:"xl:col-span-5",children:t.jsxs(Se,{to:`/${i}/project/${d.id}`,children:[t.jsx(ht,{children:d.name}),t.jsx(ss,{children:d.desc})]})},d.id))]})})})}function Bu({dataItems:e,...n}){return t.jsx("div",{className:"relative mx-auto lg:max-w-7xl ",children:t.jsx("main",{className:"pb-40",children:t.jsxs(rs,{children:[t.jsx("div",{className:"relative xl:col-span-15 sm:col-span-2 flex items-center pt-4",children:t.jsx(ns,{children:"Tasks"})}),t.jsx(ln,{className:"xl:col-span-5",children:t.jsx(ht,{children:"No Tasks"})})]})})})}function zu({setOpen:e,state:n,setState:s,createArc:r}){return t.jsxs(oi,{open:n.showNewArc,width:"sm:max-w-3xl ",children:[t.jsx(ht,{children:"Create New Story Arc"}),t.jsx(ss,{children:"Name the project and select an overview of the work."}),t.jsx(On,{label:"Project Name",value:n.newStoryArc.name,onChange:i=>s(a=>{a.newStoryArc.name=i.target.value})}),t.jsx(Cu,{label:"Description",value:n.newStoryArc.description,onChange:i=>s(a=>{a.newStoryArc.description=i})}),t.jsxs("div",{className:"mt-8 flex flex-col-reverse items-center justify-end gap-3 *:w-full sm:flex-row sm:*:w-auto",children:[t.jsx(ai,{onClick:e,children:"Cancel"}),t.jsx(an,{onClick:r,children:"Create Story Arc"})]})]})}function Wu({dataItems:e,item:n,updateAttribute:s,attributes:r,setItem:i,status:a,...o}){const l=$e(),{pathname:c}=Me();A.useContext(is);const d={showNewArc:!1,newStoryArc:{name:"",description:"",projects:[{id:n.id}]}},[u,p]=nr(d),m=async()=>{var v,b;if(((b=(v=u==null?void 0:u.newStoryArc)==null?void 0:v.name)==null?void 0:b.length)>3){const g={id:n.id,arcs:[...(n==null?void 0:n.arcs)||[],u==null?void 0:u.newStoryArc].filter(w=>w)};s("","",{arcs:[...(n==null?void 0:n.arcs)||[],u==null?void 0:u.newStoryArc].filter(w=>w)}),console.log("save story Arc",g),await l(zr(g),{method:"post",action:c}),p(d)}},f=A.useMemo(()=>r.arcs.EditComp,[]),y=v=>{console.log("arc changes",v)};return t.jsx("div",{className:"relative mx-auto lg:max-w-7xl ",children:t.jsx("main",{className:"pb-40",children:t.jsxs(rs,{children:[t.jsx("div",{className:"relative xl:col-span-13 sm:col-span-1 flex items-center pt-4",children:t.jsx(ns,{children:n.name})}),t.jsxs("div",{className:"flex items-center xl:col-span-2 justify-end pt-4",children:[t.jsx(an,{onClick:v=>p({...u,showNewArc:!0}),children:"New Story Arc"}),t.jsx(zu,{state:u,setState:p,createArc:m,setOpen:()=>p({...u,showNewArc:!u.showNewArc})})]}),t.jsx(f,{value:n.arcs,item:n,onChange:y})]})})})}const Hu=({color:e="white",size:n="compact",menu:s="left",subMenuStyle:r="inline"})=>{let i={white:{contentBg:"bg-transparent",accentColor:"blue-500",accentBg:"hover:bg-white",borderColor:"border-slate-100",textColor:"text-slate-700",highlightColor:"text-blue-500"}},a={compact:{menu:`hidden uppercase md:flex flex-1 ${s==="left"?"":"justify-end"} divide-x-2`,sideItem:"flex  mx-6 pr-4 py-2 text-sm font-light hover:pl-4",topItem:`flex font-medium tracking-widest items-center text-[14px] px-4 h-12 ${i[e].textColor} ${i[e].borderColor}
        ${i[e].accentBg} hover:${i[e].highlightColor}`,activeItem:`flex font-medium  tracking-widest bg-white items-center text-[14px] px-4 h-12 ${i[e].highlightColor} ${i[e].borderColor}
        ${i[e].accentBg} hover:${i[e].highlightColor}`,icon:"mr-3 text-lg",responsive:"md:hidden"}},o={inline:{subMenuWrapperChild:"",subMenuWrapper:"pl-2 w-full ",subMenuParentWrapper:"flex flex-col w-full  "},flyout:{indicatorIcon:"fal fa-angle-down pl-2 pt-1",indicatorIconOpen:"fal fa-angle-down pl-2",subMenuWrapper:`absolute ml-${a[n].width-8} `,subMenuParentWrapper:"flex flex-row  ",subMenuWrapperTop:"absolute top-full  "},row:{indicatorIcon:"fal fa-angle-down pl-2 pt-1",indicatorIconOpen:"fal fa-angle-down pl-2 pt-1",subMenuWrapper:`absolute bg-white ml-${a[n].width-8}`,subMenuParentWrapper:"flex flex-row  ",subMenuWrapperChild:"divide-x overflow-x-auto",subMenuWrapperTop:"absolute top-full left-0 border-y border-gray-200 w-full bg-white normal-case",subMenuWrapperInactiveFlyout:"absolute  mt-8 normal-case bg-white shadow-lg z-10 p-2",subMenuWrapperInactiveFlyoutBelow:" absolute ml-40 normal-case bg-white shadow-lg z-10 p-2",subMenuWrapperInactiveFlyoutDirection:"flex flex-col divide-y-2"}};return{topnavWrapper:`w-full ${i[e].contentBg} `,topnavContent:"flex w-full h-full",topnavMenu:`${a[n].menu} h-full overflow-x-auto overflow-y-hidden scrollbar-sm`,menuIconTop:`text-${i[e].accentColor} ${a[n].icon} group-hover:${i[e].highlightColor}`,menuIconTopActive:`text-${i[e].accentColor} ${a[n].icon} group-hover:${i[e].highlightColor}`,menuOpenIcon:"fa-light fa-bars fa-fw",menuCloseIcon:'fa-light fa-xmark fa-fw"',navitemTop:`
        w-fit group font-display whitespace-nowrap
        ${a[n].topItem}
        focus:outline-none focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300
        transition cursor-pointer
    `,topmenuRightNavContainer:"hidden md:block h-full",topnavMobileContainer:"bg-slate-50",navitemTopActive:` w-fit group font-display whitespace-nowrap
        ${a[n].activeItem}
        focus:outline-none focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300
        transition cursor-pointer 
      `,mobileButton:`${a[n].responsive} ${i[e].contentBg} inline-flex items-center justify-center pt-[12px] px-2 hover:text-blue-400  text-gray-400 hover:bg-gray-100 `,...o[r],vars:{colors:i,sizes:a}}},Uu=(e={})=>{let{color:n="white",size:s="compact",subMenuStyle:r="inline",responsive:i="top"}=e,a={top:"hidden md:block",side:"hidden md:block",none:""},o={white:{contentBg:"bg-white dark:bg-zinc-900 dark:border-zinc-900  border-r",sideItemActive:"",contentBgAccent:"bg-neutral-100",accentColor:"blue-600",accentBg:"",borderColor:"border-slate-200",textColor:"text-slate-600",textColorAccent:"text-slate-800",highlightColor:"text-blue-800"}},l={none:{wrapper:"w-0 overflow-hidden",sideItem:"flex mx-2 pr-4 py-2 text-base ",topItem:"flex items-center text-sm px-4 border-r h-12",icon:"mr-3 text-lg"},full:{fixed:"",wrapper:"w-full",sideItem:"group flex px-3 py-2 text-[14px] font-light hover:bg-blue-50 text-slate-700 mx-2 border-r-4 border-white",sideItemActive:"group flex px-3 py-2 text-[14px] font-light hover:bg-blue-50 text-slate-700 mx-2 border-r-4  border-white",topItem:"flex pr-4 py-2  font-",icon:"group w-6 mr-2 text-blue-500  ",iconActive:"group w-6 mr-2 text-blue-500",sideItemContent:"group-hover:translate-x-1.5 transition-transform duration-300 ease-in-out"},mini:{fixed:"ml-0 md:ml-20",wrapper:"w-20 overflow-x-hidden",sideItem:"text-white hover:bg-blue-100 hover:text-blue-100",sideItemActive:"text-blue-500 bg-blue-500  ",topItem:"flex px-4 items-center text-sm font-light ",icon:"w-20 h-10 text-xl text-blue-500",iconActive:"w-20 h-10 text-xl text-white",sideItemContent:"w-0"},micro:{fixed:"ml-0 md:ml-14",wrapper:"w-14 overflow-x-hidden",itemWrapper:"p-1",sideItem:"flex text-base font-base ",topItem:"flex mx-6 pr-4 py-2 text-sm font-light",icon:"w-12 text-2xl hover:bg-neutral-900 px-1 py-3 my-2 rounded-lg mr-4 hover:text-blue-500",sideItemContent:"hidden"},compact:{fixed:"ml-0 md:ml-44",wrapper:"w-44",itemWrapper:"pt-5",sideItem:"group flex px-3 py-1.5 text-[13px]  hover:bg-zinc-100 dark:hover:bg-zinc-700 rounded-sm text-zinc-700 dark:text-zinc-200 mx-2 ",sideItemActive:"group flex px-3 py-1.5 text-[13px]  hover:bg-zinc-100 dark:hover:bg-zinc-700 rounded-sm text-zinc-700 dark:text-zinc-200 mx-2 ",topItem:"flex items-center text-sm px-4 border-r h-12",icon:"group w-6 mr-2 text-blue-500 ",iconActive:"group w-6 mr-2 text-blue-500 ",sideItemContent:" transition-transform duration-300 ease-in-out"}};l[s]||(s="none");let c={inline:{indicatorIcon:"fa fa-angle-right pt-2.5",indicatorIconOpen:"fal fa-angle-down pt-2.5",subMenuWrapper:"pl-2 w-full",subMenuParentWrapper:"flex flex-col w-full"},flyout:{indicatorIcon:"fal fa-angle-down",indicatorIconOpen:"fa fa-angle-right",subMenuWrapper:`absolute ml-${l[s].width-8}`,subMenuParentWrapper:"flex flex-row",subMenuWrapperTop:"absolute top-full"}};return{fixed:`md:${l[s].fixed}`,logoWrapper:`${l[s].wrapper} ${o[n].contentBgAccent} ${o[n].textColorAccent}`,sidenavWrapper:`${a[i]} ${o[n].contentBg} ${l[s].wrapper} h-full z-20`,menuIconSide:`${l[s].icon} group-hover:${o[n].highlightColor}`,menuIconSideActive:`${l[s].iconActive} group-hover:${o[n].highlightColor}`,itemsWrapper:`${o[n].borderColor} ${l[s].itemWrapper} shadow-lg-r`,navItemContent:`${l[s].sideItemContent}`,navitemSide:`
        group  flex flex-col

        ${l[s].sideItem} ${o[n].sideItem}
        focus:outline-none focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300
        transition-all cursor-pointer
     `,navitemSideActive:`
        group  flex flex-col
         ${l[s].sideItemActive} ${o[n].sideItemActive} 
        
        focus:outline-none focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300
        transition-all cursor-pointer

      `,...c[r],vars:{colors:o,sizes:l,mobile:a}}},ft={topnav:Hu,sidenav:Uu};function Xs({icon:e,className:n}){return t.jsx("div",{className:`${n} flex justify-center items-center`,children:t.jsx("span",{className:e})})}const cn=({i:e=0,children:n,icon:s,to:r,onClick:i,className:a=null,type:o="side",active:l=!1,subMenus:c=[],themeOptions:d,subMenuActivate:u="onClick",subMenuOpen:p=!1})=>{const m=ft[o==="side"?"sidenav":"topnav"](d),f=$t(),y=A.useMemo(()=>Array.isArray(r)?r:[r],[r]),v=A.useMemo(()=>{const N=c.reduce((M,I)=>(Array.isArray(I.path)?M.push(...I.path):I.path&&M.push(I.path),M),[]);return[...y,...N]},[y,c]),b=!!er({path:`${v[0]}/*`||"",end:!0}),g=o==="side"?m.navitemSide:m.navitemTop,w=o==="side"?m.navitemSideActive:m.navitemTopActive,T=b||l,$=T?w:g,[_,j]=A.useState(p||b),[C,k]=A.useState(!1);return h.useEffect(()=>{j(b)},[b,_,r]),t.jsx("div",{className:o==="side"?m.subMenuParentWrapper:null,onMouseOutCapture:()=>u==="onHover"&&j(!1)||u!=="onHover"&&k(!1)&&j(!1),onMouseMove:()=>u==="onHover"&&j(!0)||u!=="onHover"&&k(!0)&&j(!0),children:t.jsx("div",{className:`${a||$}`,onClick:N=>{if(N.stopPropagation(),i)return i(y[0]);y[0]&&f(y[0])},children:t.jsxs("div",{className:"flex",children:[t.jsxs("div",{className:"flex-1 flex",children:[s?t.jsx(Xs,{icon:s,className:o==="side"?T?m.menuIconSideActive:m.menuIconSide:T?m.menuIconTopActive:m.menuIconTop}):null,t.jsx("div",{className:m.navItemContent,children:n})]}),t.jsx("div",{onClick:()=>{u==="onClick"&&j(!_)},children:c.length?t.jsx(Xs,{icon:_?m.indicatorIconOpen:m.indicatorIcon}):null}),c.length?t.jsx(qu,{i:e,showSubMenu:_,subMenuActivate:u,active:b,hovering:C,subMenus:c,type:o,themeOptions:d,className:a}):""]})})})},qu=({i:e,showSubMenu:n,subMenus:s,type:r,hovering:i,subMenuActivate:a,active:o,themeOptions:l})=>{const c=ft[r==="side"?"sidenav":"topnav"](l),d=!o&&a!=="onHover"&&i;return(!n||!s.length)&&!d?null:t.jsx("div",{className:r==="side"?c.subMenuWrapper:d&&e===0?c.subMenuWrapperInactiveFlyout:d&&e>0?c.subMenuWrapperInactiveFlyoutBelow:c.subMenuWrapperTop,children:t.jsx("div",{className:`
							${d&&c.subMenuWrapperInactiveFlyoutDirection}
							${!d&&c.subMenuWrapperChild}
					flex ${r==="side"||d?"flex-col":"flex-row"}
				`,children:s.map((u,p)=>t.jsx(cn,{i:p+1,to:u.path,icon:u.icon,type:r,className:u.className,onClick:u.onClick,themeOptions:l,subMenus:u.subMenus,children:u.name},p))})})},di=({open:e,toggle:n,menuItems:s=[],rightMenu:r=null,themeOptions:i={}})=>{const a=ft.topnav(i);return t.jsxs("div",{className:`${e?"md:hidden":"hidden"} ${a.topnavMobileContainer}`,id:"mobile-menu",children:[t.jsx("div",{className:"",children:s.map((o,l)=>t.jsx(cn,{type:"top",to:o.path,icon:o.icon,themeOptions:i,subMenus:B(o,"subMenus",[]),children:o.name},l))}),t.jsx("div",{className:"",children:r})]})},Vu=({open:e,toggle:n,menuItems:s=[],rightMenu:r=null,leftMenu:i=null,subMenuActivate:a,themeOptions:o={}})=>{let l=ft.topnav(o);return t.jsx("div",{className:`${l.topnavWrapper}`,children:t.jsxs("div",{className:`${l.topnavContent} justify-between`,children:[t.jsx("div",{children:i}),t.jsx("div",{className:`${l.topnavMenu}`,children:s.map((c,d)=>t.jsx(cn,{type:"top",to:c.path,icon:c.icon,subMenuActivate:a,themeOptions:o,subMenus:B(c,"subMenus",[]),children:c.name},d))}),t.jsxs("div",{className:"flex items-center justify-center h-full",children:[t.jsx("div",{className:`${l.topmenuRightNavContainer}`,children:r}),t.jsxs("button",{type:"button",className:`${l.mobileButton}`,onClick:()=>n(!e),children:[t.jsx("span",{className:"sr-only",children:"Open main menu"}),t.jsx("div",{className:"flex justify-center items-center text-2xl",children:t.jsx("span",{className:e?l.menuCloseIcon:l.menuOpenIcon})})]})]})]})})},Yu=({...e})=>{const[n,s]=h.useState(!1);return t.jsxs("nav",{children:[t.jsx(Vu,{open:n,toggle:s,...e}),t.jsx(di,{open:n,...e})]})},ui=({i:e,item:n,themeOptions:s,subMenuActivate:r})=>t.jsx(cn,{to:n.path,icon:n.icon,className:n.className,onClick:n.onClick,themeOptions:s,subMenuActivate:r,subMenus:B(n,"subMenus",[]),children:n.name},e),Gu=({open:e,toggle:n,logo:s=null,topMenu:r,menuItems:i=[],bottomMenu:a,themeOptions:o={},subMenuActivate:l,subMenuStyle:c,...d})=>{const u=ft.sidenav(o);return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"md:hidden",onClick:()=>n(!e),children:t.jsx("span",{className:e?u.menuIconOpen:u.menuIconClosed})}),t.jsxs("div",{style:{display:e?"block":"none"},className:"md:hidden",children:[t.jsx("div",{className:"fixed inset-0 z-20 transition-opacity ease-linear duration-300",children:t.jsx("div",{className:"absolute inset-0 opacity-75"})}),t.jsx("div",{className:`fixed inset-0 flex z-40 ${u.contentBgAccent}`,children:t.jsxs("div",{className:`flex-1 flex flex-col max-w-xs w-full transform ease-in-out duration-300 ${u.contentBg}`,children:[t.jsx("div",{className:"absolute top-0 right-0 -mr-14 p-1",children:t.jsx("button",{onClick:()=>n(!e),className:"flex items-center justify-center h-12 w-12 rounded-full focus:outline-none focus:bg-gray-600 os-icon os-icon-x"})}),t.jsxs("div",{className:"flex-1 h-0 pt-2 pb-4 overflow-y-auto overflow-x-hidden",children:[t.jsx("div",{className:"px-6 pt-4 pb-8 logo-text gray-900",children:t.jsx(Se,{to:"/",className:`flex-shrink-0 flex items-center ${u.text}`,children:s})}),t.jsx("div",{children:r}),t.jsx("nav",{className:"flex-1",children:i.map((p,m)=>t.jsx("div",{className:p.sectionClass,children:ui({i:m,page:p,themeOptions:o,subMenuActivate:l})},m))}),t.jsx("div",{children:a})]})]})})]})]})},Ju=({menuItems:e=[],logo:n=null,topMenu:s,bottomMenu:r,toggle:i,open:a,mobile:o,themeOptions:l={},subMenuActivate:c,subMenuStyle:d,...u})=>{const p=ft.sidenav(l);return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:`${p.sidenavWrapper}`,children:[s,t.jsx("nav",{className:`${p.itemsWrapper}`,children:e.map((m,f)=>ui({i:f,item:m,themeOptions:l,subMenuActivate:c}))}),r]}),o==="side"?"":t.jsx("div",{className:`${p.topnavWrapper} md:hidden`,children:t.jsxs("div",{className:`${p.topnavContent} justify-between`,children:[t.jsx("div",{children:s}),t.jsxs("div",{className:"flex items-center justify-center h-full",children:[t.jsx("div",{className:`${p.topmenuRightNavContainer}`,children:r}),t.jsxs("button",{type:"button",className:p.mobileButton,onClick:()=>i(!a),children:[t.jsx("span",{className:"sr-only",children:"Open main menu"}),t.jsx("div",{className:"flex justify-center items-center text-2xl",children:t.jsx("span",{className:a?p.menuCloseIcon:p.menuOpenIcon})})]})]})]})})]})},Ku=e=>{const[n,s]=h.useState(!1);return t.jsxs(t.Fragment,{children:[t.jsx(Ju,{...e,open:n,toggle:s}),e.mobile==="side"?t.jsx(Gu,{open:n,toggle:s,...e}):t.jsx(di,{open:n,...e,themeOptions:{}})]})};let Xu={none:"",micro:"mr-14",mini:"mr-20",miniPad:"mr-0",compact:"mr-44",full:"mr-64"},Zu={none:"",micro:"w-14",mini:"w-20",miniPad:"w-0",compact:"w-44",full:"w-64"};const Qu=()=>t.jsx("div",{className:"h-12"}),ep=({children:e,menus:n,sideNav:s={},topNav:r={},title:i})=>{const a={size:s.size||"none",color:s.color||"white",menuItems:s.menuItems||n,logo:(s==null?void 0:s.logo)||Qu},o={position:r.position||"block",size:r.size||"compact",menu:r.menu||"left",subMenuStyle:r.subMenuStyle||"row",menuItems:(r.menuItems||[]).filter(l=>!l.hideInNav),logo:r.logo||t.jsxs("div",{className:"flex items-center justify-center h-12",children:[t.jsx("div",{to:"/",className:`${["none"].includes(a.size)?"":"md:hidden"}`}),i]}),rightMenu:r.rightMenu||t.jsx("div",{})};return a.logo,t.jsxs("div",{className:"flex",children:[a.size==="none"?"":t.jsx("div",{className:`hidden md:block ${Xu[a.size]}`,children:t.jsx("div",{className:`fixed h-screen ${Zu[a.size]}`,children:t.jsx(Ku,{topMenu:a.logo,themeOptions:a,menuItems:a.menuItems})})}),t.jsxs("div",{className:"flex-1 flex items-start flex-col items-stretch w-full min-h-screen",children:[o.size==="none"?"":t.jsx(t.Fragment,{children:t.jsx("div",{className:`${o.position==="fixed"?"sticky top-0 z-20 w-full ":""}`,children:t.jsx(Yu,{themeOptions:o,leftMenu:o.logo,menuItems:o.menuItems,rightMenu:o.rightMenu})})}),t.jsx("div",{id:"content",className:"flex-1",children:e})]})]})},tp=({dataItems:e,children:n,baseUrl:s,logo:r,rightMenu:i})=>{const a=A.useMemo(()=>e.filter(l=>!l.icebox),[e]),o=[{id:"Home",name:"Home",path:`/${s}/`},{id:"tasks",name:"Tasks",path:`/${s}/tasks`},{id:"projects",name:"PROJECTS",className:"font-bold cursor-pointer text-[10px] spacing-widest px-5 pb-2 pt-6  dark:text-zinc-100"},...a.map(l=>({id:l.id,path:`/${s}/project/${l.id}`,name:`${l.name}`}))];return t.jsx("div",{className:"bg-zinc-50 font-sans dark:bg-zinc-950 min-h-screen overflow-hidden",children:t.jsx(ep,{topNav:{position:"fixed",rightMenu:i},sideNav:{size:"compact",logo:r,menuItems:o},children:n})})};Rr("selector",ti);const is=A.createContext(void 0),pi=e=>{const{baseUrl:n}=e;return{format:Lu,baseUrl:n,children:[{type:s=>t.jsx(is.Provider,{value:{baseUrl:n,user:s.user},children:t.jsx(tp,{logo:t.jsx("div",{className:"flex items-center px-8 h-14 bg-zinc-50 dark:bg-zinc-950 dark:text-zinc-100 text-lg font-bold",children:"Stories"}),rightMenu:t.jsx("div",{className:"flex items-center px-8 text-lg font-bold h-12 dark:text-zinc-100",to:"/stories",children:" Login "}),baseUrl:n,...s})}),action:"list",path:"/*",filter:{attributes:["name","desc"]},children:[{type:Fu,action:"view",path:"/"},{type:Bu,action:"view",path:"/tasks"},{type:Wu,action:"edit",path:"/project/:id"}]}]}};({...Jn(pi)});Rr("selector",ti);const np="https://graph.availabs.org",sp={...Jn(Nu({app:"dms-docs",type:"main",logo:t.jsx("div",{className:"flex items-center px-8 h-full text-lg font-bold",children:"DMS"}),rightMenu:t.jsx(Se,{className:"flex items-center px-8 text-lg font-bold h-12",to:"/stories",children:" right "}),baseUrl:"",API_HOST:np}))},rp=[sp,Jn(pi({baseUrl:"stories"}))],ip=e=>e.split(".").length>2||e.split(".").length>1?window.location.host.split(".")[0].toLowerCase():!1,zt={dmsDocs:rp};function op(){const e=ip(window.location.host),n=A.useMemo(()=>(zt==null?void 0:zt[e])||zt.dmsDocs,[e]);return t.jsx(zi,{router:Wi([...n])})}const ap=Hi.authProvider(op,{AUTH_HOST:Vi,PROJECT_NAME:qi,CLIENT_HOST:Yi});Ui.createRoot(document.getElementById("root")).render(t.jsx(A.StrictMode,{children:t.jsx(ap,{})}));export{ar as $,ut as B,Sa as C,nn as D,tl as F,Ds as I,ks as L,Wl as P,ma as S,pt as T,_s as a,wn as b,dp as c,pp as d,Na as e,up as f,_a as g,St as h,Nr as i,It as u};
